var _=Object.defineProperty;var B=(t,r,i)=>r in t?_(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i;var n=(t,r,i)=>B(t,typeof r!="symbol"?r+"":r,i);import{s as w}from"./index-BoG_eXCZ.js";import{s as h}from"./index-Bv5rQYlp.js";import{s as x}from"./index-CctfrLcV.js";import{s as V}from"./index-DC1q4RQw.js";import{d as c,C,y as I,z as M,f as m,b as u,w as v,j as N,o as f,u as l,t as p,a,h as U}from"./app-BgxyewsD.js";import{S as $}from"./Service-Fb9RaGXA.js";import{g as j}from"./Toats-DWscwGKH.js";import"./index-Ck2mVLA2.js";import"./index-DgafbpLp.js";import"./index-C4ZqJcd4.js";import"./index-9Ez41uxN.js";import"./index-qdJPsTWZ.js";import"./index-DymjWr4i.js";import"./index-CRjIxFEt.js";import"./index-CKBQC8Kp.js";import"./index-uaXG3nYD.js";import"./sweetalert2.esm.all-BkU8I-GU.js";class P{constructor(r){n(this,"proveedors",c([]));n(this,"loading",c(!1));n(this,"bookingService",c());n(this,"proveedorSelected",c());n(this,"proveedorsByBookingService",c([]));n(this,"form",C({p:null,booking_service_id:null,proveedor_id:null,cost:0,concept:""}));this.bookingService.value=r,this.getProveedorByBookingService()}async getProveedorByBookingService(){const{data:r}=await I.get(route("get.proveedor.by.booking.service",this.bookingService.value.id));this.proveedorsByBookingService.value=r.proveedors,console.log(this.proveedorsByBookingService.value)}calculateCost(){this.form.cost=this.form.p.pivot.value*this.bookingService.value.adults}async submit(){this.form.proveedor_id=this.form.p.id,this.form.booking_service_id=this.bookingService.value.id,this.form.concept=this.form.p.pivot.concept,this.form.p=null,this.form.post(route("BookingServiceProveedors.store"),{onSuccess:()=>{j("Proveedor agregado"),this.form.reset()}})}}const D={key:0},z={key:1},A={class:"flex gap-x-2"},ro={__name:"Form",props:{bookingService:Object},setup(t){const r=new $,i=t,g=c([]),s=new P(i.bookingService);return M(async()=>{var d;g.value=await r.getProveedorsByService((d=i.bookingService)==null?void 0:d.service_id)}),(d,e)=>{const S=V,b=x,k=h,y=w;return f(),m("form",{class:"w-full flex justify-between gap-x-4",onSubmit:e[3]||(e[3]=N((...o)=>l(s).submit&&l(s).submit(...o),["prevent"]))},[u(b,{class:"w-full"},{default:v(()=>[u(S,{options:g.value,inputId:"proveedor",onChange:e[0]||(e[0]=o=>l(s).calculateCost()),modelValue:l(s).form.p,"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).form.p=o),variant:"filled",placeholder:"Selecciona un proveedor",class:"w-full","option-label":"nombre"},{value:v(o=>[o.value?(f(),m("span",D,p(o.value.nombre)+" - "+p(o.value.pivot.concept),1)):(f(),m("span",z,p(o.placeholder),1))]),option:v(o=>[a("div",A,[a("span",null,p(o.option.nombre)+" - ",1),a("span",null,p(o.option.pivot.concept)+" - ",1),a("span",null,p(o.option.pivot.value),1)])]),_:1},8,["options","modelValue"]),e[4]||(e[4]=a("label",{for:"proveedor"},"Proveedor - Concepto",-1))]),_:1}),u(b,{class:"w-full"},{default:v(()=>[u(k,{modelValue:l(s).form.cost,"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).form.cost=o),inputId:"price_input",mode:"currency",currency:"USD",locale:"en-US",variant:"filled",class:"w-full"},null,8,["modelValue"]),e[5]||(e[5]=a("label",{for:"price_input"},"Costo",-1))]),_:1}),u(y,{type:"submit",severity:"success",class:"w-full"},{default:v(()=>e[6]||(e[6]=[a("i",{class:"fa-solid fa-plus"},null,-1),U(" Agregar ")])),_:1})],32)}}};export{ro as default};

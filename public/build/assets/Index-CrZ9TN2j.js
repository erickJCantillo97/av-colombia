import{s as j}from"./index-a79hapCk.js";import{s as U}from"./index-B1najoIy.js";import{_ as A}from"./Datatable-Dpq1oSB8.js";import{_ as E,a as D}from"./Modal-CmpY9BDc.js";import{_ as W}from"./AppLayout-BU1n2BPn.js";import{d as a,C as R,f as d,b as n,w as b,F as w,o as u,a as t,i as B,n as z,t as s,u as m,g as O,W as H,ad as L}from"./app-BjjXT_Np.js";import{S as q,a as G}from"./toasts-CuGasqAw.js";import"./index-D46pW9j8.js";import"./postcss-TUNXvAm8.js";import"./index-z4g8rW4v.js";import"./index-C_0b5CFv.js";import"./index-E77SKXAF.js";import"./index-DsYl9HjH.js";import"./index-FA8_FuM-.js";import"./index-DnCC8EZJ.js";import"./index-CTVWdLTc.js";import"./index-SBaFo1Q3.js";import"./index-Lj1x6Quk.js";import"./index-B6imq7i3.js";import"./index-wifY5kIe.js";import"./index-BrJKUzEj.js";import"./index-DzH9WRu6.js";import"./index-CcSkeUYI.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./index-DaO3tQgG.js";import"./index-Dcc5DGc9.js";import"./index-DFnAaSkA.js";import"./index-CMMEb5j0.js";const M={class:"h-[99vh]"},J={class:"gap-y-2 flex flex-col"},K={class:"flex flex-col w-full justify-between font-bold"},Q={key:0,class:"flex flex-col gap-y-2"},X={class:"flex justify-between gap-x-4"},Y=["onClick"],Z={class:"flex flex-col w-full justify-between font-bold"},ee={class:"flex justify-end gap-x-2"},oe={class:"flex flex-col gap-4"},te={class:"font-medium block mb-2"},le={class:"flex flex-col gap-y-2 h-64 overflow-auto"},ae={class:"flex items-center gap-x-8 border-b shadow-md justify-between p-3 rounded-md hover:bg-gray-300"},se={class:"flex flex-col"},ne={class:"font-bold"},re={class:"text-xs"},ie={class:"text-xs"},de={class:"flex flex-col"},ue={class:"text-sm"},me={class:"font-bold"},ze={__name:"Index",setup(ce){const p=a(!1),{toast:I}=G(),h=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),f=R({date:new Date,value:0}),C=a([]),v=a([new Date,new Date]),c=a(),V=a([]),r=a(),F={action:()=>{p.value=!0}},$=[{action:l=>{q.fire({title:"Confirmar Pago?",text:"Esta seguro de Confirmar este pago?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, Confirmar!"}).then(e=>{e.isConfirmed&&H.post(route("payment.set.state",l.id),{_method:"PUT",status:"Confirmado"},{onSuccess:()=>{I("success","Pago Confirmado con exito")}})}),serviceSelected.value=l},severity:"success",icon:"fa-solid fa-wallet text-sm",label:"Validar Pago"}],k=()=>{L.get(route("get.booking.time.range"),{params:{start_date:new Date(v.value[0]).toISOString().split("T")[0],end_date:new Date(v.value[1]).toISOString().split("T")[0]}}).then(l=>{C.value=l.data.proveedores,c.value=l.data.bookingTimeRange.filter(e=>{let g=r.value;return e.proveedors.map(o=>o.proveedor_id).includes(g)}),V.value=[{name:"Reservado",value:c.value.filter(e=>e.status=="reservado"),color:"bg-blue-200"},{name:"Completado",value:c.value.filter(e=>e.status=="completado"),color:"bg-green-200"},{name:"Cancelado",value:c.value.filter(e=>e.status=="CANCELADA"),color:"bg-red-200"},{name:"NO SHOW",value:c.value.filter(e=>e.status=="NO SHOW"),color:"bg-yellow-200"}]})},P=a();a(null);const _=a([{name:"Amy Elsner",image:"amyelsner.png",email:"amy@email.com",role:"Owner"},{name:"Bernardo Dominic",image:"bernardodominic.png",email:"bernardo@email.com",role:"Editor"},{name:"Ioni Bowcher",image:"ionibowcher.png",email:"ioni@email.com",role:"Viewer"}]),N=(l,e)=>{console.log(e),_.value=e,P.value.toggle(l)};return(l,e)=>{const g=U,S=j;return u(),d(w,null,[n(W,{title:"Pagos"},{default:b(()=>[t("div",M,[n(A,{add:F,columnas:l.columns,actions:$,data:l.payments,title:"Pagos"},null,8,["columnas","data"])]),n(E,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=o=>p.value=o),title:"Añadir Pagos"},{default:b(()=>[t("div",J,[t("div",K,[e[7]||(e[7]=t("p",null,"Fechas",-1)),n(g,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),selectionMode:"range",dateFormat:"dd/mm/yy",class:"w-full",manualInput:!1,onValueChange:k},null,8,["modelValue"])]),n(D,{label:"Proveedor",type:"dropdown","option-label":"proveedor","option-value":"proveedor_id",onValueChange:k,modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),options:C.value},null,8,["modelValue","options"]),r.value?(u(),d("div",Q,[t("div",X,[(u(!0),d(w,null,B(V.value,o=>(u(),d("div",{class:z([`${o.color} ${o.value.length>0?"cursor-pointer":"hidden"} `,"rounded-lg py-2 border w-full flex flex-col gap-y-1 items-center font-bold cursor-pointer scale-90 hover:scale-100 shadow-sm hover:shadow-lg transition-all duration-300"]),onClick:i=>N(i,o)},[t("h1",null,s(o.name),1),t("p",null,s(o.value.length),1),t("p",null,s(m(h).format(o.value.reduce((i,x)=>i+x.proveedors.filter(y=>y.proveedor_id==r.value).reduce((y,T)=>y+T.cost,0),0))),1)],10,Y))),256))]),t("div",Z,[e[8]||(e[8]=t("p",null,"Fecha en que realizó el pago",-1)),n(g,{modelValue:m(f).date,"onUpdate:modelValue":e[2]||(e[2]=o=>m(f).date=o),dateFormat:"dd/mm/yy",class:"w-full",manualInput:!1},null,8,["modelValue"])]),n(D,{label:"Valor",type:"number",mode:"currency",modelValue:m(f).value,"onUpdate:modelValue":e[3]||(e[3]=o=>m(f).value=o)},null,8,["modelValue"])])):O("",!0),t("div",ee,[t("button",{onClick:e[4]||(e[4]=o=>p.value=!1),class:"bg-red-500 text-white px-4 py-2 rounded-md"}," Cancelar "),r.value?(u(),d("button",{key:0,onClick:e[5]||(e[5]=(...o)=>l.store&&l.store(...o)),class:"bg-green-500 text-white px-4 py-2 rounded-md"}," Guardar ")):O("",!0)])])]),_:1},8,["modelValue"])]),_:1}),n(S,{ref_key:"op",ref:P},{default:b(()=>[t("div",oe,[t("div",null,[t("span",te,s(_.value.name),1),t("div",le,[(u(!0),d(w,null,B(_.value.value,o=>(u(),d("div",ae,[t("div",se,[t("span",ne,s(o.title),1),t("span",re,s(o.cliente_name),1),t("span",ie,s(o.fecha),1)]),t("div",de,[t("span",ue,s(o.adults)+" Pasajeros",1),t("span",me,s(m(h).format(o.proveedors.filter(i=>i.proveedor_id==r.value).reduce((i,x)=>i+x.cost,0))),1)])]))),256))])])])]),_:1},512)],64)}}};export{ze as default};

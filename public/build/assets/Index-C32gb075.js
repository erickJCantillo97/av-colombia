import{s as F}from"./index-CO4QKlMY.js";import{s as N}from"./index-D_ZPIew1.js";import{_ as $}from"./Datatable-5AQpdksQ.js";import{_ as E,a as U}from"./Modal-BtwsuIVz.js";import{_ as W}from"./AppLayout-CRyVIdqH.js";import{d as r,f as c,b as d,w,F as x,o as m,a as o,i as V,n as j,t as i,u as P,W as R,ad as H}from"./app-CbCWCDzk.js";import{S as L,a as z}from"./toasts-CuGasqAw.js";import"./index-CYv6mBLH.js";import"./postcss-3KrVXIXG.js";import"./index-CR5iKK4N.js";import"./index-RNT0r9PB.js";import"./index-D_2GzbTL.js";import"./index-CGHKlgQ4.js";import"./index-By8SKNBB.js";import"./index-BqG-2x4e.js";import"./index-Dml30E2c.js";import"./index-BnInsV8g.js";import"./index-uG5wLGVR.js";import"./index-DcArN9i2.js";import"./index-Bj0iN7TF.js";import"./index-BfPvkUQ-.js";import"./index-SR7zrXgl.js";import"./index-CyhZ8q25.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./index-C7G_55vT.js";import"./index-CQ-5k-AH.js";import"./index-Dw5EuvbG.js";import"./index-Cd5RKhP1.js";const M={class:"h-[99vh]"},q={class:"gap-y-2 flex flex-col"},G={class:"flex flex-col w-full justify-between font-bold"},J={class:"flex justify-between gap-x-4"},K=["onClick"],Q={class:"flex flex-col gap-4"},X={class:"font-medium block mb-2"},Y={class:"flex flex-col gap-y-2 h-64 overflow-auto"},Z={class:"flex items-center gap-x-8 border-b shadow-md justify-between p-3 rounded-md hover:bg-gray-300"},ee={class:"flex flex-col"},oe={class:"font-medium"},te={class:"text-sm"},ae={class:"font-medium"},Te={__name:"Index",props:{proveedores:Array},setup(B){const f=r(!1),{toast:D}=z(),b=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),p=r([new Date,new Date]),u=r(),y=r([]),v=r(),O=r(0),k={action:()=>{f.value=!0}},I=[{action:l=>{L.fire({title:"Confirmar Pago?",text:"Esta seguro de Confirmar este pago?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, Confirmar!"}).then(t=>{t.isConfirmed&&R.post(route("payment.set.state",l.id),{_method:"PUT",status:"Confirmado"},{onSuccess:()=>{D("success","Pago Confirmado con exito")}})}),serviceSelected.value=l},severity:"success",icon:"fa-solid fa-wallet text-sm",label:"Validar Pago"}],C=()=>{H.get(route("BookingServices.index")).then(l=>{let t=l.data.bookingServices.filter(a=>{var n=new Date(a.date).toISOString().split("T")[0];return n>=new Date(p.value[0]).toISOString().split("T")[0]&&n<=new Date(p.value[1]).toISOString().split("T")[0]});u.value=t.filter(a=>{let n=v.value;return a.proveedors.map(s=>s.proveedor_id).includes(n)}),y.value=[{name:"Reservado",value:u.value.filter(a=>a.status=="reservado"),color:"bg-blue-200"},{name:"Completado",value:u.value.filter(a=>a.status=="completado"),color:"bg-green-200"},{name:"Cancelado",value:u.value.filter(a=>a.status=="CANCELADA"),color:"bg-red-200"},{name:"NO SHOW",value:u.value.filter(a=>a.status=="NO SHOW"),color:"bg-yellow-200"}],O.value=u.value.reduce((a,n)=>a+n.proveedors.reduce((e,s)=>e+s.cost,0),0)})},S=r();r(null);const g=r([{name:"Amy Elsner",image:"amyelsner.png",email:"amy@email.com",role:"Owner"},{name:"Bernardo Dominic",image:"bernardodominic.png",email:"bernardo@email.com",role:"Editor"},{name:"Ioni Bowcher",image:"ionibowcher.png",email:"ioni@email.com",role:"Viewer"}]),A=(l,t)=>{console.log(t),g.value=t,S.value.toggle(l)};return(l,t)=>{const a=N,n=F;return m(),c(x,null,[d(W,{title:"Pagos"},{default:w(()=>[o("div",M,[d($,{add:k,columnas:l.columns,actions:I,data:l.payments,title:"Pagos"},null,8,["columnas","data"])]),d(E,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=e=>f.value=e),title:"AÃ±adir Pagos"},{default:w(()=>[o("div",q,[o("div",G,[t[3]||(t[3]=o("p",null,"Fechas",-1)),d(a,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),selectionMode:"range",dateFormat:"dd/mm/yy",class:"w-full",manualInput:!1,onValueChange:C},null,8,["modelValue"])]),d(U,{label:"Proveedor",type:"dropdown","option-label":"nombre","option-value":"id",onValueChange:C,modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),options:B.proveedores},null,8,["modelValue","options"]),o("div",null,[o("div",J,[(m(!0),c(x,null,V(y.value,e=>(m(),c("div",{class:j([`${e.color}`,"rounded-lg py-2 border w-full flex flex-col gap-y-1 items-center font-bold cursor-pointer scale-90 hover:scale-100 shadow-sm hover:shadow-lg transition-all duration-300"]),onClick:s=>A(s,e)},[o("h1",null,i(e.name),1),o("p",null,i(e.value.length),1),o("p",null,i(P(b).format(e.value.reduce((s,_)=>s+_.proveedors.filter(h=>h.proveedor_id==v.value).reduce((h,T)=>h+T.cost,0),0))),1)],10,K))),256))])])])]),_:1},8,["modelValue"])]),_:1}),d(n,{ref_key:"op",ref:S},{default:w(()=>[o("div",Q,[o("div",null,[o("span",X,i(g.value.name),1),o("div",Y,[(m(!0),c(x,null,V(g.value.value,e=>(m(),c("div",Z,[o("div",ee,[o("span",oe,i(e.service.title),1),o("span",te,i(e.cliente_name),1)]),o("div",null,[o("span",ae,i(P(b).format(e.proveedors.reduce((s,_)=>s+_.cost,0))),1)])]))),256))])])])]),_:1},512)],64)}}};export{Te as default};

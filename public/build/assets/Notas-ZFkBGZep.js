import{ap as H,aq as F,x as z,d as k,B as W,c as A,o as a,w as h,a as e,f as d,m as _,u as v,v as L,F as D,i as E,t as l,b as c,h as I,g as j,T as Z,y as J,A as T}from"./app-C1o6uP0Y.js";import{s as ee}from"./index-Dz5Hp7ey.js";import{s as te}from"./AppLayout-BavY2_Tr.js";import{s as G}from"./index-Bn2ReFal.js";import{S as R}from"./sweetalert2.esm.all-DV3w3JmD.js";import{a as se}from"./toasts-Bf1FAz7R.js";import{_ as q}from"./Modal-CFNO36Pw.js";import{_ as U}from"./Input-CPZC9tcA.js";import{S as oe}from"./Service-_LccNwwc.js";import{_ as le}from"./logo-DDlNDDKv.js";import{_ as ne}from"./Loading-CAQ52W0a.js";const ie={class:"p-2"},ae={class:"mb-4 flex flex-col"},re={class:"grid grid-cols-5 border-y items-center border text-right gap-x-4"},de={class:"col-span-1"},ue={class:"col-span-1 text-nowrap truncate"},ce={class:"col-span-1"},ve={class:"col-span-1"},me=["onUpdate:modelValue"],pe={class:"flex justify-end p-6 space-x-4"},fe={__name:"ServiceCancel",props:H({service:Object},{modelValue:{},modelModifiers:{},view:{default:!1},viewModifiers:{}}),emits:["update:modelValue","update:view"],setup(o){const O=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),p=F(o,"modelValue"),b=F(o,"view"),u=o,f=z({date:"",proveedors:[]}),V=k([]);W(()=>{V.value=u.service.proveedors.map(x=>{var s=x.proveedor;return{proveedor_id:x.id,concept:s.concept,proveedor:x,pasajeros:u.service.adults,cost:x.cost,proveedor_name:s.proveedor.nombre,costo_penalidad:s.proveedor.type_penalidad_cost=="Porcentaje"?s.proveedor.penalidad_cancelacion/100*x.cost:s.proveedor.penalidad_cancelacion*u.service.adults}})});const y=()=>{f.proveedors=V.value,f.post(route("cancelar.servicio",u.service.id),{onSuccess:()=>{p.value=!1,b.value=!1}})};return(x,s)=>{const n=G;return a(),A(q,{title:`Cancelar Servicio ${o.service.service}`,modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=m=>p.value=m),width:"70vw",onClose:s[3]||(s[3]=m=>p.value=!1),"close-on-escape":""},{default:h(()=>[e("div",ie,[e("div",ae,[s[4]||(s[4]=e("label",{for:"",class:"font-bold"},"Fecha de Cancelaci贸n",-1)),_(e("input",{label:"Fecha de Cancelaci贸n",type:"date",class:"rounded-lg shadow-sm border-gray-300 p-2","onUpdate:modelValue":s[0]||(s[0]=m=>v(f).date=m)},null,512),[[L,v(f).date]])]),s[5]||(s[5]=e("div",{class:"grid grid-cols-5 font-bold uppercase bg-gray-300 p-2 text-center"},[e("div",{class:"col-span-1"},"Proveedor"),e("div",{class:"col-span-1"},"Concepto"),e("div",{class:"col-span-1"},"Pasajeros"),e("div",{class:"col-span-1"},"Costo"),e("div",{class:"col-span-1"},"Penalidad Total")],-1)),(a(!0),d(D,null,E(V.value,m=>(a(),d("div",re,[e("div",de,l(m.proveedor_name),1),e("div",ue,l(m.concept),1),e("div",ce,l(m.pasajeros),1),e("div",ve,l(v(O).format(m.cost)),1),_(e("input",{class:"col-span-1 rounded-md border border-gray-300 p-2","onUpdate:modelValue":r=>m.costo_penalidad=r,type:"number",mode:"currency"},null,8,me),[[L,m.costo_penalidad]])]))),256))]),e("div",pe,[c(n,{onClick:s[1]||(s[1]=m=>p.value=!1)},{default:h(()=>s[6]||(s[6]=[I("No, Cerrar")])),_:1}),c(n,{severity:"danger",onClick:y},{default:h(()=>s[7]||(s[7]=[I("Si, Cancelar Servicio")])),_:1})])]),_:1},8,["title","modelValue"])}}},be={class:"p-2"},ye={class:"mb-4 flex flex-col"},xe={class:"font-extrabold text-2xl text-center",for:""},ge=["max"],we={class:"grid grid-cols-6 border-y items-center border text-right gap-x-4 py-1"},Ce={class:"col-span-1"},$e={class:"col-span-1 text-nowrap truncate"},Ve={class:"col-span-1"},he={class:"col-span-1"},ke=["onUpdate:modelValue","onInput"],Se={class:"col-span-1"},je={class:"flex justify-end p-6 space-x-4"},_e={__name:"ServiceNoShow",props:H({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const O=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),p=F(o,"modelValue"),b=o,u=z({cantidad:b.service.adults,notes:"",proveedors:[]}),f=k([]);W(()=>{f.value=b.service.proveedors.map(s=>{var n=s.proveedor;return{proveedor_id:s.id,concept:n.concept,proveedor:s,pasajeros:b.service.adults,cost:s.cost,proveedor_name:n.proveedor.nombre,totalpayment:0,costo_penalidad:n.proveedor.type_penalidad_cost=="Porcentaje"?n.proveedor.penalidad_no_show/100*s.cost/b.service.adults:n.proveedor.penalidad_no_show}}),y()});const V=()=>{u.proveedors=f.value,u.post(route("noshow.servicio",b.service.id),{onSuccess:()=>{p.value=!1}})},y=()=>{f.value.forEach(s=>{s.total_no_show=s.costo_penalidad*u.cantidad,x(s)})},x=s=>{const n=s.pasajeros-u.cantidad,m=s.cost/s.pasajeros*n;s.totalpayment=m+s.costo_penalidad*u.cantidad};return(s,n)=>{const m=G;return a(),A(q,{title:`Marcar como No SHOW ${o.service.service}`,modelValue:p.value,"onUpdate:modelValue":n[3]||(n[3]=r=>p.value=r),width:"70vw",onClose:n[4]||(n[4]=r=>p.value=!1),"close-on-escape":""},{default:h(()=>[e("div",be,[e("div",ye,[e("h1",xe,l(o.service.cliente_name),1),n[5]||(n[5]=e("label",{for:"",class:"font-bold"},"Cuantos no se presentaron?",-1)),_(e("input",{type:"number",min:1,onInput:y,max:o.service.adults,class:"rounded-lg border-gray-300","onUpdate:modelValue":n[0]||(n[0]=r=>v(u).cantidad=r)},null,40,ge),[[L,v(u).cantidad]])]),c(U,{type:"textarea",modelValue:v(u).notes,"onUpdate:modelValue":n[1]||(n[1]=r=>v(u).notes=r),label:"驴Porque no se presentaron?",class:"text-red-500"},null,8,["modelValue"]),n[6]||(n[6]=e("div",{class:"grid grid-cols-6 font-bold uppercase bg-gray-300 p-2 text-center"},[e("div",{class:"col-span-1"},"Proveedor"),e("div",{class:"col-span-1"},"Concepto"),e("div",{class:"col-span-1"},"Pasajeros"),e("div",{class:"col-span-1"},"Costo total Servicio"),e("div",{class:"col-span-1"},"Pago por No Show"),e("div",{class:"col-span-1"},"Total a pagar")],-1)),(a(!0),d(D,null,E(f.value,r=>(a(),d("div",we,[e("div",Ce,l(r.proveedor_name),1),e("div",$e,l(r.concept),1),e("div",Ve,l(r.pasajeros),1),e("div",he,l(v(O).format(r.cost)),1),_(e("input",{class:"col-span-1 rounded-md border-gray-300 p-2","onUpdate:modelValue":w=>r.costo_penalidad=w,onInput:w=>x(r),type:"number",mode:"currency"},null,40,ke),[[L,r.costo_penalidad]]),e("div",Se,l(v(O).format(r.totalpayment)),1)]))),256))]),e("div",je,[c(m,{onClick:n[2]||(n[2]=r=>p.value=!1)},{default:h(()=>n[7]||(n[7]=[I("No, Cerrar")])),_:1}),c(m,{severity:"warn",onClick:V},{default:h(()=>n[8]||(n[8]=[I("Si, Servicio No show")])),_:1})])]),_:1},8,["title","modelValue"])}}},Oe={class:"flex items-center gap-2"},De={class:"font-bold text-lg"},Ne={class:"flex flex-col gap-y-1.5 text-sm"},Be={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Pe={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ae={key:0,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ue={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Fe={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ee={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ie={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Me=["href"],Te={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Re={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Le={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},He={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ge={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},qe={key:1,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ze={key:2,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},We={key:3,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Je={key:4,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ke={key:5,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Qe={key:6,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Xe={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ye={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ze=["href"],et={class:"flex flex-col border py-1 bg-white/30 rounded-md px-2"},tt={class:"text-lg flex w-full justify-between items-center mt-2"},st={class:"rounded-full bg-green-800 text-white px-1.5 py-0.5 text-xs fles items-center justify-center"},ot={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},lt={class:"text-lg flex w-full justify-between items-center mt-2"},nt={class:"rounded-full bg-sky-800 text-white px-1.5 py-0.5 text-xs flex items-center justify-center"},it={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},at={class:"font-semibold"},rt={class:"flex flex-col items-center"},dt={class:"grid grid-cols-3 md:grid-cols-6 gap-2"},ut={class:"flex flex-col gap-y-2"},ct={class:"flex flex-col gap-y-1"},vt={key:0,class:"flex items-center gap-x-2"},mt={key:1},pt={class:"flex items-center gap-2"},ft={class:"flex justify-end gap-2"},Lt={__name:"viewBooking",props:H({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const O=new oe,{toast:p}=se(),b=o,u=k(null),f=F(o,"modelValue"),V=k(!1),y=k(!1),x=k(!1),s=z({service:b.service.id,current_id:"",new_id:"",state:"REUBICAR",note:"",terminated:!0,value:""}),n=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),m=()=>{V.value=!0},r=($,t)=>{R.fire({title:$,text:"Estas seguro de realizar esta acci贸n?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(S=>{S.isConfirmed&&(R.fire({title:$,text:"Esta reserva ha sido "+$+".",icon:"success"}),J.post(route("set.states.booking"),{service:b.service.id,state:$,terminated:t},{onSuccess:()=>{p("success","Reserva "+$)}}))})},w=()=>{R.fire({title:"Cambio de Fecha",input:"date",inputLabel:"Nueva Fecha",showCancelButton:!0,confirmButtonText:"Cambiar Fecha",showLoaderOnConfirm:!0,preConfirm:async $=>{await J.post(route("set.states.booking"),{service:b.service.id,state:"CAMBIO DE FECHA",date:$,terminated:!1})},allowOutsideClick:()=>!R.isLoading()}).then($=>{$.isConfirmed&&p("success","Fecha Cambiada")})},g=$=>{if($==null||$==null)return"Sin definir";var t=new Date(new Date($).getTime()+new Date($).getTimezoneOffset()*6e4).toLocaleString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"});return t=="30/11/2"?"INDEFINIDO":t},N=()=>{if(!u.value||!s.new_id||!s.value)return p("error","Rellene todos los Campos"),0;s.current_id=u.value.id,s.service=b.service.id,s.state="REUBICADO",s.terminated=!1,s.post(route("set.states.booking"),{onSuccess:()=>{x.value=!1,s.reset(),p("success","Servicio REUBICADO")}})},C={reservado:"blue","CAMBIO DE FECHA":"gray","NO SHOW":"amber",REUBICADO:"orange",CANCELADA:"green"},M=k([]),K=async()=>{M.value=await O.getProveedorsByService(b.service.service_id)},Q=()=>{s.reset(),x.value=!0,K()};return($,t)=>{const S=G,X=te,Y=ee,B=Z;return a(),d(D,null,[c(X,{visible:f.value,"onUpdate:visible":t[6]||(t[6]=i=>f.value=i),"pt:root:class":`!bg-${C[o.service.status]}-200`,header:"Detalles de la actividad",position:"right"},{header:h(()=>[e("div",Oe,[e("span",De,l(o.service.service),1)])]),footer:h(()=>[e("div",rt,[e("div",dt,[_(c(S,{onClick:t[0]||(t[0]=i=>r("reservado",!0)),icon:"fa-solid fa-circle-check",severity:"info"},null,512),[[B,"Reservada",void 0,{top:!0}]]),_(c(S,{onClick:t[1]||(t[1]=i=>y.value=!0),icon:"fa-solid fa-eye-slash",class:"!text-white !bg-yellow-600"},null,512),[[B,"Servicio No show",void 0,{top:!0}]]),_(c(S,{onClick:t[2]||(t[2]=i=>w()),icon:"fa-solid fa-calendar-week",class:"!bg-gray-600 !text-white"},null,512),[[B,"Cambio de Fecha",void 0,{top:!0}]]),_(c(S,{onClick:t[3]||(t[3]=i=>Q()),icon:"fa-solid fa-people-arrows",severity:"warn"},null,512),[[B,"Cambio de proveedor",void 0,{top:!0}]]),_(c(S,{onClick:t[4]||(t[4]=i=>m()),icon:"fa-solid fa-xmark-circle",severity:"danger"},null,512),[[B,"Cancelar Servicio",void 0,{top:!0}]]),_(c(S,{onClick:t[5]||(t[5]=i=>r("PROBLEMATICA",!1)),icon:"fa-solid fa-person-dress-burst",class:"flex-auto",severity:"danger"},null,512),[[B,"Servicio Problematico",void 0,{top:!0}]])])])]),default:h(()=>{var i;return[e("div",Ne,[e("div",Be,[t[17]||(t[17]=e("strong",null,"Fecha del Servicio:",-1)),e("p",null,l(g(o.service.date)),1)]),e("div",Pe,[t[18]||(t[18]=e("strong",null,"Hora del Servicio:",-1)),e("p",null,l(o.service.hour),1)]),o.service.time_service?(a(),d("div",Ae,[t[19]||(t[19]=e("strong",null,"Duraci贸n del Servicio:",-1)),e("p",null,l(o.service.time_service),1)])):j("",!0),e("div",Ue,[t[20]||(t[20]=e("strong",null,"Canal de Venta:",-1)),e("p",null,l(o.service.channel.name),1)]),e("div",Fe,[t[21]||(t[21]=e("strong",null,"Cliente:",-1)),e("p",null,l(o.service.cliente_name),1)]),e("div",Ee,[t[22]||(t[22]=e("strong",null,"Ciudad:",-1)),e("p",null,l(o.service.cliente_city),1)]),e("div",Ie,[t[23]||(t[23]=e("strong",null,"Telelfono:",-1)),e("a",{target:"_blank",href:`https://wa.me/${o.service.cliente_phone}?text=Hola%20,%20mi%20nombre%20es%20*Sandra Gil*,%20Le%20escribo%20desde%20*AV%20COLOMBIA*`},l(o.service.cliente_phone),9,Me)]),e("div",Te,[t[24]||(t[24]=e("strong",null,"Edificio:",-1)),e("p",null,l(o.service.cliente_building),1)]),e("div",Re,[t[25]||(t[25]=e("strong",null,"Adultos:",-1)),e("p",null,l(o.service.adults),1)]),e("div",Le,[t[26]||(t[26]=e("strong",null,"Ni帽os:",-1)),e("p",null,l(o.service.boys),1)]),e("div",He,[t[27]||(t[27]=e("strong",null,"Total:",-1)),e("p",null,l(v(n).format(o.service.total)),1)]),e("div",Ge,[t[28]||(t[28]=e("strong",null,"Total Real:",-1)),e("p",null,l(v(n).format(o.service.total_real)),1)]),o.service.user?(a(),d("div",qe,[e("strong",null,l(o.service.user.rol=="vendedor"?"Vendedor":"Usuario")+":",1),e("p",null,l((i=o.service.user)==null?void 0:i.name),1)])):j("",!0),o.service.user?(a(),d("div",ze,[t[29]||(t[29]=e("strong",null,"Fecha de reserva:",-1)),e("p",null,l(new Date(o.service.created_at).toLocaleDateString("es-CO")),1)])):j("",!0),o.service.conductor?(a(),d("div",We,[t[30]||(t[30]=e("strong",null,"conductor:",-1)),e("p",null,l(o.service.conductor),1)])):j("",!0),o.service.placa?(a(),d("div",Je,[t[31]||(t[31]=e("strong",null,"conductor:",-1)),e("p",null,l(o.service.placa),1)])):j("",!0),o.service.total_pago_proveedor?(a(),d("div",Ke,[t[32]||(t[32]=e("strong",null,"Valor del Servicio:",-1)),e("p",null,l(v(n).format(o.service.total_pago_proveedor)),1)])):j("",!0),o.service.fecha_cancelacion?(a(),d("div",Qe,[t[33]||(t[33]=e("strong",null,"Fecha de Cancelaci贸n:",-1)),e("p",null,l(new Date(new Date(o.service.fecha_cancelacion).setDate(new Date(o.service.fecha_cancelacion).getDate()+1)).toLocaleDateString("es-CO",{day:"numeric",month:"numeric",year:"numeric"})),1)])):j("",!0),e("div",Xe,[t[34]||(t[34]=e("strong",null,"Saldo:",-1)),e("p",null,l(v(n).format(o.service.saldo)),1)]),e("div",Ye,[t[35]||(t[35]=e("strong",null,"Soporte:",-1)),e("a",{target:"_blank",href:o.service.file},"Ver Archivo",8,Ze)]),e("div",et,[t[36]||(t[36]=e("strong",null,"Observacion:",-1)),e("p",null,l(o.service.observations),1)]),e("div",tt,[t[37]||(t[37]=e("p",{class:"font-bold"},"Proveedores",-1)),e("p",st,l(o.service.proveedors.length),1)]),(a(!0),d(D,null,E(o.service.proveedors,P=>(a(),d("div",ot,[e("p",null,l(P.proveedor.proveedor.nombre),1),e("p",null,l(v(n).format(P.cost)),1)]))),256)),e("div",lt,[t[38]||(t[38]=e("p",{class:"font-bold"},"Extras",-1)),e("p",nt,l(o.service.extras.length),1)]),(a(!0),d(D,null,E(o.service.extras,P=>(a(),d("div",it,[e("p",null,l(P.cantidad)+" "+l(P.description),1),e("p",at,l(v(n).format(P.total_price)),1)]))),256))])]}),_:1},8,["visible","pt:root:class"]),c(q,{modelValue:x.value,"onUpdate:modelValue":t[13]||(t[13]=i=>x.value=i),title:"Cambio de proveedor","close-on-escape":""},{default:h(()=>[e("div",ut,[e("span",ct,[t[41]||(t[41]=e("label",{for:"",class:"font-bold"}," Proveedor Actual",-1)),c(Y,{placeholder:"Proveedor Actual",options:o.service.proveedors,label:"Proveedor Actual",modelValue:u.value,"onUpdate:modelValue":t[7]||(t[7]=i=>u.value=i),"option-label":"proveedor.name"},{value:h(i=>[i.value?(a(),d("div",vt,[e("div",null,l(u.value.proveedor.proveedor.nombre),1),t[39]||(t[39]=e("span",null,"-",-1)),e("div",null,l(v(n).format(u.value.cost)),1)])):(a(),d("span",mt,l(i.placeholder),1))]),option:h(({option:i})=>[e("div",pt,[e("span",null,l(i.proveedor.proveedor.nombre),1),t[40]||(t[40]=e("span",null,"-",-1)),e("span",null,l(v(n).format(i.cost)),1)])]),_:1},8,["options","modelValue"])]),c(U,{"option-label":"nombre",type:"dropdown",label:"Nuevo Proveedor",modelValue:v(s).new_id,"onUpdate:modelValue":t[8]||(t[8]=i=>v(s).new_id=i),options:M.value},null,8,["modelValue","options"]),c(U,{label:"Valor",modelValue:v(s).value,"onUpdate:modelValue":t[9]||(t[9]=i=>v(s).value=i),type:"number",mode:"currency"},null,8,["modelValue"]),c(U,{label:"Nota",modelValue:v(s).note,"onUpdate:modelValue":t[10]||(t[10]=i=>v(s).note=i),type:"textarea",mode:"currency"},null,8,["modelValue"]),e("div",ft,[c(S,{onClick:t[11]||(t[11]=i=>x.value=!1),label:"Cancelar",severity:"danger",icon:"fa-solid fa-xmark"}),c(S,{onClick:t[12]||(t[12]=i=>N()),label:"Guardar",severity:"success",icon:"fa-solid fa-save"})])])]),_:1},8,["modelValue"]),V.value?(a(),A(fe,{key:0,modelValue:V.value,"onUpdate:modelValue":t[14]||(t[14]=i=>V.value=i),view:f.value,"onUpdate:view":t[15]||(t[15]=i=>f.value=i),service:o.service},null,8,["modelValue","view","service"])):j("",!0),y.value?(a(),A(_e,{key:1,modelValue:y.value,"onUpdate:modelValue":t[16]||(t[16]=i=>y.value=i),service:o.service},null,8,["modelValue","service"])):j("",!0)],64)}}},bt={class:"w-full flex flex-col gap-y-5 p-2"},yt={class:"h-[30vh] overflow-y-auto flex flex-col gap-y-2"},xt={key:0,class:"flex w-full"},gt={class:"w-1/2 flex py-1 px-3 rounded-md items-center justify-between bg-sky-100"},wt={class:"flex flex-col"},Ct={class:"text-lg font-bold first-letter:uppercase"},$t={class:"italic text-xs"},Vt={key:1,class:"flex w-full"},ht={class:"w-1/2 flex py-1 px-3 rounded-md items-center border justify-between bg-gray-300"},kt={class:"flex flex-col"},St={class:"text-lg font-bold first-letter:uppercase"},jt={class:"italic text-xs"},_t={key:0,class:"flex justify-center items-center"},Ot={key:0,class:"flex justify-center flex-col items-center"},Dt={class:"flex gap-x-2 px-2"},Ht={__name:"Notas",props:H({todayActivity:Boolean,notes:Array,note:String,service:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const O=F(o,"modelValue"),p=o,b=k(p.notes),u=k(!1),f=k(null),V=k(!1),y=k(""),x=()=>{T.post(route("notes.store"),{note:y.value,booking_service_id:p.service.id}).then(w=>{y.value="",r()})},s=w=>{T.delete(route("notes.destroy",w.id)).then(g=>{r()})},n=w=>{y.value=w.note,u.value=!0,f.value=w},m=()=>{T.put(route("notes.update",f.value.id),{note:y.value}).then(w=>{r(),y.value="",u.value=!1,f.value=null})},r=()=>{V.value=!0,T.get(route("notes.index",{booking_service_id:p.service.id})).then(w=>{b.value=w.data.notes,V.value=!1})};return W(()=>{r()}),(w,g)=>{const N=G;return a(),d(D,null,[g[6]||(g[6]=I(" asndlands ")),c(q,{modelValue:O.value,"onUpdate:modelValue":g[1]||(g[1]=C=>O.value=C),"close-on-escape":"",title:"Notas",width:"60vw"},{default:h(()=>[e("div",bt,[g[5]||(g[5]=e("h3",{class:"text-xl font-bold"},"Notas de la Actividad",-1)),e("div",yt,[(a(!0),d(D,null,E(b.value,C=>(a(),d("div",{class:"flex p-2 rounded-md items-center justify-between w-full",key:C.id},[C.user_id==w.$page.props.auth.user.id?(a(),d("div",xt,[g[2]||(g[2]=e("div",{class:"w-1/2"},null,-1)),e("div",gt,[e("span",wt,[e("p",Ct,l(C.note),1),e("p",$t,l(new Date(C.created_at).toISOString().split("T")[0]),1)]),e("div",null,[c(N,{icon:"fa-solid fa-pencil",text:"",severity:"info",onClick:M=>n(C)},null,8,["onClick"]),c(N,{icon:"fa-solid fa-trash",text:"",severity:"danger",onClick:M=>s(C)},null,8,["onClick"])])])])):(a(),d("div",Vt,[e("div",ht,[e("span",kt,[e("p",St,l(C.note),1),e("p",jt,l(C.user.name)+" - "+l(new Date(C.created_at).toISOString().split("T")[0]),1)])]),g[3]||(g[3]=e("div",{class:"w-1/2"},null,-1))]))]))),128)),V.value?(a(),d("div",_t,[c(ne)])):(a(),d(D,{key:1},[b.value.length==0?(a(),d("div",Ot,[c(le),g[4]||(g[4]=e("p",{class:"font-semibold text-xl"},"Serivicio sin notas",-1))])):j("",!0)],64))]),e("div",Dt,[c(U,{type:"textarea",class:"w-full",rowsTextarea:2,modelValue:y.value,"onUpdate:modelValue":g[0]||(g[0]=C=>y.value=C)},null,8,["modelValue"]),u.value?(a(),A(N,{key:1,label:"Editar",severity:"info",icon:"pi pi-send",class:"!h-12",onClick:m})):(a(),A(N,{key:0,label:"Guardar",severity:"success",class:"!h-12",icon:"pi pi-send",onClick:x}))])])]),_:1},8,["modelValue"])],64)}}};export{Lt as _,Ht as a};

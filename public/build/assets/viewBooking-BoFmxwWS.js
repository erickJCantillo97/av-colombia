import{aj as D,ak as L,o as n,c as T,w,a as e,t as i,u as v,f as d,k as m,b,g as a,i as C,F as j,n as A,h as N,W as k,T as V}from"./app-DuMCuNbB.js";import{s as $}from"./index-CxtjVOgn.js";import{s as F}from"./index-DfAcfODc.js";import{S as x,a as z}from"./toasts-CuGasqAw.js";const E={class:"flex items-center gap-2"},M={class:"font-bold text-lg"},P={class:"flex flex-col gap-y-1.5 text-sm"},R={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},H={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},I={key:0,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},W={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},U={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},G={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},q={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},J=["href"],K={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Q={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},X={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Y={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Z={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},_={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ee={key:1,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},te={key:2,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},se={key:3,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ie={class:"flex flex-col border py-1 bg-white/30 rounded-md px-2"},oe={key:4,class:"text-lg flex w-full justify-between mt-2"},le={class:"rounded-full bg-black text-white px-2"},ne={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},re={class:"flex flex-col gap-y-2 mt-2"},de={class:"flex justify-between"},ae={class:"bg-blue-600 text-white p-1 rounded-lg"},ue={class:"flex items-center text-xs justify-between border shadow-xl rounded-md p-1 bg-white"},ce={class:"uppercase font-bold"},ve={class:"flex flex-col items-center gap-2"},fe={class:"font-bold text-center"},me={key:0,class:"flex gap-x-2"},pe={__name:"viewBooking",props:D({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const{toast:p}=z(),y=s,h=L(s,"modelValue"),u=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),S=()=>{x.fire({title:"Cancelar Servicio",input:"date",inputLabel:"Fecha de Cancelaci칩n",showCancelButton:!0,confirmButtonText:"Cancelar Servicio",showLoaderOnConfirm:!0,preConfirm:async o=>{await k.post(route("set.states"),{service:y.service.id,state:"CANCELADA",date:o,terminated:!0})},allowOutsideClick:()=>!x.isLoading()}).then(o=>{o.isConfirmed&&p("success","Reserva Cancelada")})},g=(o,t)=>{x.fire({title:o,text:"Estas seguro de realizar esta acci칩n?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(c=>{c.isConfirmed&&(x.fire({title:o,text:"Esta reserva ha sido "+o+".",icon:"success"}),k.post(route("set.states"),{service:y.service.id,state:o,terminated:t},{onSuccess:()=>{info.value=!1,p("success","Reserva "+o)}}))})};return(o,t)=>{const c=F,O=$,f=V;return n(),T(O,{visible:h.value,"onUpdate:visible":t[4]||(t[4]=r=>h.value=r),"pt:root:class":"!bg-blue-100",header:"Detalles de la actividad",position:"right"},{header:w(()=>[e("div",E,[e("span",M,i(s.service.service.title),1)])]),footer:w(()=>[e("div",ve,[e("h1",fe," Saldo: "+i(v(u).format(s.service.total_price-s.service.payments.reduce((r,l)=>r+l.amount,0))),1),o.$page.props.auth.user.rol=="admin"?(n(),d("div",me,[m(b(c,{onClick:t[0]||(t[0]=r=>g("COMPLETADA",!0)),icon:"fa-solid fa-circle-check",text:"",size:"large",class:"flex-auto",severity:"success"},null,512),[[f,"Completar Servicio",void 0,{top:!0}]]),m(b(c,{onClick:t[1]||(t[1]=r=>g("NO SHOW",!0)),icon:"fa-solid fa-eye-slash",text:"",size:"large",class:"flex-auto",severity:"warn"},null,512),[[f,"Servicio No show",void 0,{top:!0}]]),m(b(c,{onClick:t[2]||(t[2]=r=>S()),icon:"fa-solid fa-xmark-circle",text:"",size:"large",class:"flex-auto",severity:"danger"},null,512),[[f,"Cancelar Servicio",void 0,{top:!0}]]),m(b(c,{onClick:t[3]||(t[3]=r=>g("PROBLEMATICA",!1)),icon:"fa-solid fa-person-dress-burst",text:"",size:"large",class:"flex-auto",severity:"danger"},null,512),[[f,"Servicio Problematico",void 0,{top:!0}]])])):a("",!0)])]),default:w(()=>{var r;return[e("div",P,[e("div",R,[t[5]||(t[5]=e("strong",null,"Fecha del Servicio:",-1)),e("p",null,i(s.service.date),1)]),e("div",H,[t[6]||(t[6]=e("strong",null,"Hora del Servicio:",-1)),e("p",null,i(s.service.hour),1)]),s.service.time_service?(n(),d("div",I,[t[7]||(t[7]=e("strong",null,"Tiempo del Servicio:",-1)),e("p",null,i(s.service.time_service),1)])):a("",!0),e("div",W,[t[8]||(t[8]=e("strong",null,"Canal de Venta:",-1)),e("p",null,i(s.service.channel.name),1)]),e("div",U,[t[9]||(t[9]=e("strong",null,"Cliente:",-1)),e("p",null,i(s.service.cliente_name),1)]),e("div",G,[t[10]||(t[10]=e("strong",null,"Ciudad:",-1)),e("p",null,i(s.service.cliente_city),1)]),e("div",q,[t[11]||(t[11]=e("strong",null,"Telelfono:",-1)),e("a",{target:"_blank",href:`https://wa.me/${s.service.cliente_phone}?text=Hola%20游녦,%20mi%20nombre%20es%20*Sandra Gil*,%20Le%20escribo%20desde%20*AV%20COLOMBIA*`},i(s.service.cliente_phone),9,J)]),e("div",K,[t[12]||(t[12]=e("strong",null,"Edificio:",-1)),e("p",null,i(s.service.cliente_building),1)]),e("div",Q,[t[13]||(t[13]=e("strong",null,"Adultos:",-1)),e("p",null,i(s.service.adults),1)]),e("div",X,[t[14]||(t[14]=e("strong",null,"Ni침os:",-1)),e("p",null,i(s.service.boys),1)]),e("div",Y,[t[15]||(t[15]=e("strong",null,"Mascota:",-1)),e("p",null,i(s.service.mascota),1)]),e("div",Z,[t[16]||(t[16]=e("strong",null,"Total:",-1)),e("p",null,i(v(u).format(s.service.total)),1)]),e("div",_,[t[17]||(t[17]=e("strong",null,"Total Real:",-1)),e("p",null,i(v(u).format(s.service.total_real)),1)]),s.service.user?(n(),d("div",ee,[t[18]||(t[18]=e("strong",null,"Usuario:",-1)),e("p",null,i((r=s.service.user)==null?void 0:r.name),1)])):a("",!0),s.service.user?(n(),d("div",te,[t[19]||(t[19]=e("strong",null,"Fecha de reserva:",-1)),e("p",null,i(new Date(s.service.created_at).toLocaleDateString("es-CO")),1)])):a("",!0),s.service.fecha_cancelacion?(n(),d("div",se,[t[20]||(t[20]=e("strong",null,"Fecha de Cancelaci칩n:",-1)),e("p",null,i(s.service.fecha_cancelacion),1)])):a("",!0),e("div",ie,[t[21]||(t[21]=e("strong",null,"Observacion:",-1)),e("p",null,i(s.service.observations),1)]),o.$page.props.auth.user.rol=="admin"?(n(),d("div",oe,[t[22]||(t[22]=e("p",{class:"font-bold"},"Proveedores",-1)),e("p",le,i(s.service.proveedors.length),1)])):a("",!0),o.$page.props.auth.user.rol=="admin"?(n(!0),d(j,{key:5},C(s.service.proveedors,l=>(n(),d("div",ne,[e("p",null,i(l.proveedor.nombre),1),e("p",null,i(v(u).format(l.cost)),1)]))),256)):a("",!0),e("div",re,[e("div",de,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold"},"Pagos Realizados",-1)),e("div",ae,i(v(u).format(s.service.payments.reduce((l,B)=>l+B.amount,0))),1)]),(n(!0),d(j,null,C(s.service.payments,l=>(n(),d("div",ue,[e("div",null,[e("div",ce,i(l.type)+" "+i(v(u).format(l.amount)),1),e("div",null,i(new Date(l.created_at).toLocaleDateString("es-CO"))+" "+i(l.metohd_payment.name),1)]),e("div",{class:A(["uppercase",l.status=="pendiente"?"bg-red-500 p-1 text-white rounded-lg shadow-md shadow-red-500":""])},[N(i(l.status)+" ",1),t[24]||(t[24]=e("div",null,null,-1))],2)]))),256))])])]}),_:1},8,["visible"])}}};export{pe as _};

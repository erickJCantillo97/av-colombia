import{s as $}from"./index-Bs-K-nok.js";import{eb as k,fd as A,d as p,q as B,C as E,f as c,a as l,b as t,w as u,u as r,F as g,W as L,o as f,i as N,n as T,t as h}from"./app-DqKg7NXI.js";import{_ as D}from"./Datatable-Dr7hk2oh.js";import{s as P}from"./index-BHHhu84z.js";import{a as j,_ as n}from"./Modal-BskiefiA.js";import"./index-CUeZXPrP.js";import"./index-DzooEpg4.js";import"./index-Dl3CXVcv.js";import"./index-RcEQnK3r.js";import"./index-B7txZhav.js";import"./index-sihjGGOu.js";import"./index-DiamKh-u.js";import"./index-e7LPLmeI.js";import"./postcss-DP3GuesP.js";import"./index-ESQKUMJz.js";import"./index-DYP3njvQ.js";import"./index-DncvE9Q6.js";import"./index-Bnv_I5Lg.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./index-DS9Y1fqr.js";import"./index-Cd7QBIeu.js";import"./index-B1tFP-S8.js";const q={class:"h-[99vh]"},z={class:"flex gap-x-3 py-2"},F={class:"space-y-3 w-full shadow-lg p-2 rounded-md"},G={class:"w-full shadow-md rounded-md p-2"},W={class:"grid grid-cols-3 gap-2"},pe={__name:"Index",props:{users:Array,permisos:Array},setup(v){const y=[{header:"Nombre",field:"name",filter:!0},{header:"Correo",field:"email",filter:!0},{header:"Creación",field:"created_at",type:"datetime",filter:!0},{header:"URL Portafolio",field:"url"}],w=k(),x=A(),m=p(!1),d=p(),V=B(()=>_.permisos.filter(o=>!d.value||o.name.includes(d.value))),s=E({id:null,name:"",email:"",password:"",rol:"",password_confirmation:""}),i=p(!1),C={action:()=>{s.reset(),m.value=!1,i.value=!0}},U=[{action:o=>{s.reset(),i.value=!0,m.value=!0,s.name=o.name,s.email=o.email,console.log(o.rol),s.rol=o.rol,s.id=o.id},severity:"secondary",icon:"fa-solid fa-pencil text-sm"},{action:(o,e)=>{x.require({target:e.currentTarget,message:"Seguro de Eliminar el Usuario "+o.name+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{L.delete(route("users.destroy",o.id),{onSuccess:()=>{w.add({severity:"error",icon:"fa-solid fa-trash-can",summary:"¡Accion realizada!",detail:"Usuario eliminado con exito",group:"customTooltipDataTable",life:5e3})}})}})},severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],_=v,S=()=>{m.value?s.put(route("users.update",s.id),{onSuccess:()=>{i.value=!1}}):s.post(route("users.store"),{onSuccess:()=>{i.value=!1}})};return(o,e)=>{const b=$;return f(),c(g,null,[l("div",q,[t(D,{columnas:y,add:C,data:v.users,routecreate:"services.create",actions:U},null,8,["data"])]),t(j,{visible:i.value,"onUpdate:visible":e[6]||(e[6]=a=>i.value=a),width:"90vw"},{title:u(()=>e[7]||(e[7]=[l("span",{class:"text-xl font-bold white-space-nowrap"}," Agregar Usuario",-1)])),icon:u(()=>e[8]||(e[8]=[l("i",{class:"fa-solid fa-plus"},null,-1)])),footer:u(()=>[t(b,{onClick:S,title:"Guardar",severity:"success",label:"Guardar",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),t(b,{onClick:e[5]||(e[5]=a=>i.value=!1),title:"Cancel",severity:"danger",label:"Cancelar",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:u(()=>[l("div",z,[l("div",F,[e[9]||(e[9]=l("h3",{class:"text-center font-semibold text-lg"},"Datos del usuario",-1)),t(n,{label:"Nombre",modelValue:r(s).name,"onUpdate:modelValue":e[0]||(e[0]=a=>r(s).name=a),"error-message":r(s).errors.name},null,8,["modelValue","error-message"]),t(n,{label:"Email",modelValue:r(s).email,"onUpdate:modelValue":e[1]||(e[1]=a=>r(s).email=a)},null,8,["modelValue"]),t(n,{label:"Contraseña",type:"password",modelValue:r(s).password,"onUpdate:modelValue":e[2]||(e[2]=a=>r(s).password=a)},null,8,["modelValue"]),t(n,{label:"Confirmar contraseña",type:"password",modelValue:r(s).password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=a=>r(s).password_confirmation=a)},null,8,["modelValue"])]),l("div",G,[e[10]||(e[10]=l("h3",{class:"text-center font-semibold text-lg"},"Permisos",-1)),t(n,{class:"my-1",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value=a)},null,8,["modelValue"]),l("div",W,[(f(!0),c(g,null,N(V.value,a=>(f(),c("span",{class:T(["border p-1 rounded-md cursor-pointer bg-gray-100 text-center uppercase","bg-gray-800 text-white"])},h(a.name),1))),256))])])])]),_:1},8,["visible"]),t(r(P))],64)}}};export{pe as default};

import{d as v,C as T,f as c,b as s,w as x,F as g,o as p,a as i,u as n,h as $,i as B,k as V,v as I,g as j,T as A}from"./app-ChDq29g3.js";import{s as h}from"./index-BpsLNsEu.js";import{s as E}from"./index-DGna2y_q.js";import{_ as z}from"./Datatable-P3eZuzzz.js";import{_ as r}from"./Input-DuBTWMCH.js";import{_ as F}from"./Modal-Ca_PKAra.js";import{_ as R}from"./AppLayout-cdkHYkCC.js";import{a as O}from"./toasts-DoW0LeUK.js";import{S as L}from"./sweetalert2.esm.all-BkU8I-GU.js";import"./index-Bnqa6Pyw.js";import"./index-Bghd8XZn.js";import"./index-BJ_kBkSU.js";import"./index-BOw7i9iU.js";import"./index-DngnqMBw.js";import"./index-C7UyQQGt.js";import"./index-BYocKr4D.js";import"./index-BjakTHyA.js";import"./index-CVw3HU9d.js";import"./index-BRaGQqDK.js";import"./index-CrOJ9bs1.js";import"./index-DeKadT58.js";import"./index-Lb1lZ07j.js";import"./index-Dkw2O_2X.js";import"./useCommonUtilities-hipAPSUL.js";import"./filepond-plugin-image-preview.min-BG10xqQy.js";import"./postcss-Bb_6wQxO.js";import"./index-DZczORC_.js";import"./index-D2PWiLLN.js";import"./index-eeF0NiNh.js";import"./index-DXmbz7bX.js";const M={class:"flex gap-4"},G={class:"flex flex-col w-1/3 gap-y-4"},H={class:"flex flex-wrap gap-4 w-full justify-between"},Q={class:"flex items-center gap-2"},W={class:"flex items-center gap-2"},q={key:0,class:"w-2/3 col-sapn-1 md:col-span-3 border rounded-lg"},J={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},K={class:"h-[50vh] overflow-y-auto"},X={class:"justify-between w-full px-2 gap-x-2 grid grid-cols-8"},Y=["onUpdate:modelValue"],Z={class:"flex gap-x-2"},$e={__name:"Index",props:{proveedores:Array},setup(w){const{toast:f}=O(),d=v(!1),y={action:()=>{d.value=!0,o.reset()}},a=v("Dinero"),C=[{action:t=>{d.value=!0,o.services=t.services.map(e=>e.pivot),o.id=t.id,o.nit=t.nit,o.nombre=t.nombre,o.penalidad_no_show=t.penalidad_no_show,o.penalidad_cancelacion=t.penalidad_cancelacion,a.value=t.type_penalidad_cost,o.direccion=t.direccion,o.telefono=t.telefono},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:t=>{L.fire({title:"Eliminar Proveedor",text:"Estas seguro de eliminar este proveedor?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(e=>{e.isConfirmed&&o.delete(route("proveedors.destroy",t.id),{onSuccess:()=>{f("error","Proveedor Eliminado")}})})},severity:"danger",icon:"fa-solid fa-trash text-sm"}],D=[{field:"nombre",header:"Nombre",filter:!0},{field:"nit",header:"NIT",filter:!0},{field:"telefono",header:"Telefono",filter:!0}],b=v([]);(()=>{axios.get(route("get.services")).then(t=>{b.value=t.data.services})})();const o=T({id:null,nombre:"",direccion:"a.",nit:"",telefono:"",type_penalidad_cost:"",penalidad_no_show:"",penalidad_cancelacion:"",services:[]}),P=()=>{o.services.push({service_id:"",concepto:"",value:""})},S=t=>{o.services.splice(t,1)},U=()=>{o.type_penalidad_cost=a.value,o.id?o.put(route("proveedors.update",o.id),{onSuccess:()=>{o.reset(),d.value=!1,f("success","Proveedor Actualizado")}}):o.post(route("proveedors.store"),{onSuccess:()=>{o.reset(),f("success","Proveedor Creado")}})};return(t,e)=>{const _=E,m=h,N=A;return p(),c(g,null,[s(R,null,{default:x(()=>[s(z,{data:w.proveedores,actions:C,columnas:D,add:y,title:"proveedores"},null,8,["data"])]),_:1}),s(F,{visible:d.value,"onUpdate:visible":e[9]||(e[9]=l=>d.value=l),"close-on-escape":"true",title:"Añadir Proveedor",width:"80vw"},{footer:x(()=>[i("div",Z,[s(m,{severity:"success",label:"Guardar",onClick:U}),s(m,{severity:"danger",label:"Cancelar",onClick:e[8]||(e[8]=l=>d.value=!1)})])]),default:x(()=>[i("div",M,[i("div",G,[e[13]||(e[13]=i("h1",{class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"}," Datos del Proveedor ",-1)),s(r,{label:"Nombre",class:"w-full",modelValue:n(o).nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>n(o).nombre=l)},null,8,["modelValue"]),s(r,{label:"NIT",class:"w-full",modelValue:n(o).nit,"onUpdate:modelValue":e[1]||(e[1]=l=>n(o).nit=l)},null,8,["modelValue"]),s(r,{label:"Telefono",class:"w-full",modelValue:n(o).telefono,"onUpdate:modelValue":e[2]||(e[2]=l=>n(o).telefono=l)},null,8,["modelValue"]),i("div",H,[e[12]||(e[12]=i("label",{for:""},"Politicas",-1)),i("div",Q,[s(_,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value=l),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),e[10]||(e[10]=i("label",{for:"Dinero"},"Dinero",-1))]),i("div",W,[s(_,{modelValue:a.value,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value=l),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje",size:"Normal"},null,8,["modelValue"]),e[11]||(e[11]=i("label",{for:"Porcentaje",class:"text-sm"},"Porcentaje",-1))])]),s(r,{label:"Penalización por NO SHOW",type:"number",modelValue:n(o).penalidad_no_show,"onUpdate:modelValue":e[5]||(e[5]=l=>n(o).penalidad_no_show=l),mode:a.value=="Dinero"?"currency":"decimal",suffix:a.value=="Dinero"?"":"%",min:"0",max:a.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"]),s(r,{label:"Penalización por CANCELACIÓN",type:"number",modelValue:n(o).penalidad_cancelacion,"onUpdate:modelValue":e[6]||(e[6]=l=>n(o).penalidad_cancelacion=l),mode:a.value=="Dinero"?"currency":"decimal",suffix:a.value=="Dinero"?"":"%",min:"0",max:a.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"])]),t.$page.props.auth.user.rol=="admin"||t.$page.props.auth.user.rol=="SUPER ADMINISTRADOR"?(p(),c("div",q,[i("h1",J,[e[14]||(e[14]=$(" Servicios ")),s(m,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:e[7]||(e[7]=l=>P())})]),e[15]||(e[15]=i("div",{class:"grid grid-cols-8 w-full font-bold px-2 text-left"},[i("div",{class:"col-span-3 w-full"},"Servicio"),i("div",{class:"col-span-2"},"Concepto"),i("div",{class:""},"Tarifa"),i("div",{class:""})],-1)),i("div",K,[(p(!0),c(g,null,B(n(o).services,(l,k)=>(p(),c("div",X,[s(r,{type:"dropdown",class:"col-span-3",modelValue:l.service_id,"onUpdate:modelValue":u=>l.service_id=u,"option-label":"title","option-value":"id",options:b.value},null,8,["modelValue","onUpdate:modelValue","options"]),s(r,{class:"w-full col-span-2",modelValue:l.concept,"onUpdate:modelValue":u=>l.concept=u},null,8,["modelValue","onUpdate:modelValue"]),V(i("input",{type:"number",class:"w-full rounded-md h-10 col-span-2","onUpdate:modelValue":u=>l.value=u},null,8,Y),[[I,l.value]]),V(s(m,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:u=>S(k)},null,8,["onClick"]),[[N,"Quitar"]])]))),256))])])):j("",!0)])]),_:1},8,["visible"])],64)}}};export{$e as default};

import{s as H}from"./index-0IBEimSI.js";import{_ as J}from"./AppLayout-Tc7wzGNA.js";import{d as o,p as Q,A as S,c as d,o as n,w as W,a as r,g as u,b as i,i as X,a0 as l}from"./app-D5tgdyOo.js";import c from"./StatCard-Cbp1LVH3.js";import T from"./CompactCard-DVNGKolg.js";import Z from"./PieChart-BdRj3B3K.js";import ee from"./ColumnChart-rMFIjKcO.js";import ae from"./BarChart-Bijnb6VB.js";import te from"./ComparisonBarChart-BneAQK0Y.js";import oe from"./GroupedBarChart-BhgjxmyA.js";import $ from"./SimpleTable-CxVTAXHB.js";import"./postcss-zYNK0X1A.js";import"./index-BNx-JLyu.js";import"./index-DWhcLBKA.js";import"./index-BZHKJjfk.js";import"./index-DLm3xvGX.js";import"./index-hteMBjo5.js";import"./index-DWBIaWkn.js";import"./index-B00UX5og.js";import"./index-DJkRibzB.js";import"./index-BPlvCi-R.js";import"./index-BUG8hkMB.js";import"./index-B_Ukw_FU.js";import"./index-BUc4TQwN.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-2J2U_rW9.js";/* empty css                                                             */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D76D8L1i.js";import"./index-CEJ9WBpV.js";import"./index-D5iwf14_.js";import"./chart-bBXEBIVA.js";import"./postcss-Bz823e5Y.js";const re={class:"p-4 gap-y-4 shadow-lg"},le={class:"my-10 w-full justify-between flex"},se={class:"grid grid-cols-1 gap-4 md:grid-cols-5 mb-6"},de={class:"grid grid-cols-1 gap-4 md:grid-cols-2 mb-6"},ne={class:"grid grid-cols-1 gap-4 md:grid-cols-4 mb-6"},ue={class:"grid grid-cols-1 gap-4 md:grid-cols-2 mb-6"},ie={class:"grid grid-cols-1 gap-4 md:grid-cols-2 mb-6"},ve={class:"mb-6"},ce={class:"grid grid-cols-1 gap-4 md:grid-cols-2 mb-6"},Ge={__name:"Index",props:{bookings:Array},setup(pe){const m=o(),f=new Date,M=new Date(f.getFullYear(),f.getMonth(),1),a=o([M,f]),h=o(0),g=o([]),D=o(0),_=o([]),k=o([]),p=o({top5:[],bottom5:[]}),y=o(null),P=o(null),s=o(null),t=o({reservado:0,cancelado:0,no_show:0}),N=o(0),b=o([]),j=()=>{l.get(route("get.ventas"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{h.value=e.data})},O=()=>{l.get(route("get.costos.proveedores"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{let v=Object.values(e.data);g.value=v,D.value=v.reduce((V,w)=>V+w.costos,0)})},F=()=>{l.get(route("get.total.reservas"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{m.value=Object.values(e.data)})},E=()=>{l.get(route("get.pagos.proveedores")).then(e=>{_.value=e.data})},I=()=>{l.get(route("get.reservas.tipo.servicio"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{k.value=e.data})},B=()=>{l.get(route("get.top.servicios"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{p.value=e.data})},K=()=>{l.get(route("get.proveedor.top.reservas"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{y.value=e.data})},U=()=>{l.get(route("get.vendedor.top.reservas"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{P.value=e.data})},L=()=>{l.get(route("get.estadisticas.estados"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{t.value=e.data})},Y=()=>{l.get(route("get.reservas.adelantadas"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{N.value=e.data})},q=()=>{l.get(route("get.proveedor.mas.pagado"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{s.value=e.data})},z=()=>{l.get(route("get.reservas.por.canal"),{params:{startDate:a.value[0],endDate:a.value[1]}}).then(e=>{b.value=e.data})};function R(){j(),O(),F(),E(),I(),B(),K(),U(),L(),Y(),q(),z()}Q(()=>{R()});const G=[{header:"Proveedor",field:"proveedor",filter:!0},{header:"Ventas",field:"ventas",type:"currency",filter:!0},{header:"Costos",field:"costos",type:"currency",filter:!0}],A=[{header:"Servicio",field:"service_name",filter:!0},{header:"Cantidad",field:"cantidad",filter:!0},{header:"Ventas",field:"ventas",type:"currency",filter:!0}],C=S(()=>[{x:"Reservado",y:t.value.reservado?.cantidad||0,porcentaje:t.value.reservado?.porcentaje||0,recaudado:t.value.reservado?.recaudado||0,pagado:t.value.reservado?.pagado||0},{x:"Cancelado",y:t.value.cancelado?.cantidad||0,porcentaje:t.value.cancelado?.porcentaje||0,recaudado:t.value.cancelado?.recaudado||0,pagado:t.value.cancelado?.pagado||0},{x:"No Show",y:t.value.no_show?.cantidad||0,porcentaje:t.value.no_show?.porcentaje||0,recaudado:t.value.no_show?.recaudado||0,pagado:t.value.no_show?.pagado||0}]),x=S(()=>k.value.map(e=>({x:e.service,y:e.cantidad})));return(e,v)=>{const V=H;return n(),d(J,{title:"Services"},{default:W(()=>[v[2]||(v[2]=r("div",{class:"hidden bg-amber-100 text-amber-800 bg-blue-100 text-blue-800 bg-green-100 text-green-800 bg-purple-100 text-purple-800 bg-red-100 text-red-800 bg-indigo-100 text-indigo-800"},null,-1)),r("div",re,[r("div",le,[v[1]||(v[1]=r("h1",{class:"text-2xl"},[X(" Contabilidad "),r("span",{class:"text-3xl font-bold"},"AV COLOMBIA")],-1)),i(V,{variant:"filled",modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=w=>a.value=w),selectionMode:"range",dateFormat:"dd/mm/yy",manualInput:!1,onValueChange:R},null,8,["modelValue"])]),r("div",se,[i(T,{title:"Ventas",value:h.value,isCurrency:!0,icon:"ðŸ’°",color:"blue"},null,8,["value"]),i(T,{title:"Costos",value:D.value,isCurrency:!0,icon:"ðŸ’¸",color:"amber"},null,8,["value"]),i(T,{title:"Utilidad",value:h.value-D.value,isCurrency:!0,icon:"ðŸ“ˆ",color:"emerald"},null,8,["value"]),i(c,{title:"Proveedor Top",value:y.value?.proveedor||"N/A",subtitle:`${y.value?.cantidad||0} reservas`,icon:"ðŸ†",color:"purple"},null,8,["value","subtitle"]),i(c,{title:"Vendedor Top",value:P.value?.vendedor||"N/A",subtitle:`${P.value?.cantidad||0} reservas`,icon:"â­",color:"green"},null,8,["value","subtitle"])]),r("div",de,[s.value&&s.value[0]?(n(),d(c,{key:0,title:"Proveedor MÃ¡s Pagado",value:s.value[0].proveedor||"N/A",subtitle:`Total: ${new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(s.value[0].total_pagado)} (${s.value[0].cantidad_pagos} pagos)`,icon:"ðŸ’³",color:"indigo"},null,8,["value","subtitle"])):u("",!0),s.value&&s.value[1]?(n(),d(c,{key:1,title:"Segundo Proveedor MÃ¡s Pagado",value:s.value[1].proveedor||"N/A",subtitle:`Total: ${new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(s.value[1].total_pagado)} (${s.value[1].cantidad_pagos} pagos)`,icon:"ðŸ’³",color:"purple"},null,8,["value","subtitle"])):u("",!0)]),r("div",ne,[i(c,{title:"Reservas",value:t.value.reservado?.cantidad||0,subtitle:"Estado: Reservado",icon:"âœ…",color:"blue"},null,8,["value"]),i(c,{title:"Canceladas",value:t.value.cancelado?.cantidad||0,subtitle:"Estado: Cancelado",icon:"âŒ",color:"red"},null,8,["value"]),i(c,{title:"No Show",value:t.value.no_show?.cantidad||0,subtitle:"No presentados",icon:"âš ï¸",color:"amber"},null,8,["value"]),i(c,{title:"Reservas Adelantadas",value:N.value,subtitle:"Fecha futura",icon:"ðŸ“…",color:"indigo"},null,8,["value"])]),r("div",ue,[m.value&&m.value.length>0?(n(),d(ee,{key:0,data:m.value,title:"Reservas por DÃ­a",labelKey:"date",valueKey:"cant"},null,8,["data"])):u("",!0),_.value&&_.value.length>0?(n(),d(te,{key:1,data:_.value,title:"ComparaciÃ³n Anual: Pagos vs Recaudado"},null,8,["data"])):u("",!0)]),r("div",ie,[C.value&&C.value.length>0?(n(),d(Z,{key:0,data:C.value,title:"DistribuciÃ³n de Estados de Reservas"},null,8,["data"])):u("",!0),x.value&&x.value.length>0?(n(),d(ae,{key:1,data:x.value,title:"Reservas por Tipo de Servicio",labelKey:"x",valueKey:"y"},null,8,["data"])):u("",!0)]),r("div",ve,[b.value&&b.value.length>0?(n(),d(oe,{key:0,data:b.value,title:"Reservas y Ventas por Canal de Venta"},null,8,["data"])):u("",!0)]),r("div",ce,[p.value.top5&&p.value.top5.length>0?(n(),d($,{key:0,data:p.value.top5,columns:A,title:"Top 5 Servicios MÃ¡s Vendidos"},null,8,["data"])):u("",!0),p.value.bottom5&&p.value.bottom5.length>0?(n(),d($,{key:1,data:p.value.bottom5,columns:A,title:"Top 5 Servicios Menos Vendidos"},null,8,["data"])):u("",!0)]),g.value&&g.value.length>0?(n(),d($,{key:0,data:g.value,columns:G,title:"Costos por Proveedor"},null,8,["data"])):u("",!0)])]),_:1})}}};export{Ge as default};

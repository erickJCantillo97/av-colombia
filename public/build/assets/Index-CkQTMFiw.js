import{d as c,C as S,f6 as P,W as m,x as b,e as I,f as _,b as l,w as n,u as a,F as V,o as x,a as t,h as w,t as u,i as L,k as O,T as R}from"./app-BXDENyee.js";import{s as j}from"./index-BuDuwzGa.js";import{_ as E}from"./AppLayout-B4WsgJtg.js";import{_ as z}from"./Datatable-fhlOtaxq.js";import{s as Q}from"./index-CoYzsh3F.js";import{_ as h,a as g}from"./Modal-DnJsQ9rU.js";import{a as M}from"./toasts-CuGasqAw.js";import"./index-BXXJPmyg.js";import"./index-BYTQzBDl.js";import"./index-B_zvl9_k.js";import"./index-CLRqN8fJ.js";import"./index-KpKL1YdK.js";import"./index-BR-Hzz6q.js";import"./index-D0pvCgid.js";import"./index-DTZ05kZc.js";import"./index-C__ogQJc.js";import"./index-DneR3MrY.js";import"./index-BJJIshPx.js";import"./postcss-Bgsf23Qd.js";import"./index-DBiI5Ccw.js";import"./index-Clt5yPLG.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./index-CtOAhaME.js";import"./index-i2a14lia.js";import"./index-gsP-kgN1.js";const W={class:"h-[90vh] md:h-[99vh] overflow-y-auto"},G={class:"text-2xl font-bold my-4"},H={class:"italic text-xs mt-1 mb-4"},J={class:"italic text-xs mt-1"},K={class:"text-2xl text-center text-amber-600 font-bold my-4"},X={key:0,class:"text-center text-gray-500"},Y={key:1,class:"flex flex-col gap-y-2"},Z={class:"flex justify-between border-b"},ee={class:"flex justify-between gap-x-2 my-2"},te={class:"w-full"},se={class:"w-full"},oe={class:"flex items-center gap-x-2"},ie={class:"text-xs text-red-500"},Ue={__name:"Index",props:{services:Array},setup(B){const{toast:y}=M();c([]);const D={action:()=>{m.visit(route("services.create"))}},o=S({start_date:"",end_date:"",description:""}),p=c(!1),k=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),F=[{header:"Nombre",field:"title",filter:!0},{header:"Tipo de Servicio",field:"type",filter:!0},{header:"Ciudad",field:"city",filter:!0},{header:"Descripción",field:"description",type:"html",filter:!0}],q=P();c(!1);const d=S({service_id:"",adult_tarifa:0,boys_tarifa:0}),r=c({}),f=c(!1);c("");const T=[{action:i=>{m.visit(route("services.show",i.slug))},show:b().props.auth.user.rol=="admin",severity:"primary",icon:"fa-solid fa-eye text-sm",label:"Ver"},{action:i=>{p.value=!0,o.reset(),r.value=i},show:b().props.auth.user.rol=="admin",severity:"warn",icon:"fa-solid fa-lock",label:"Bloqueos"},{action:i=>{b().props.auth.user.rol=="admin"||b().props.auth.user.rol=="SUPER ADMINISTRADOR"?m.visit(route("services.edit",i.slug)):(f.value=!0,r.value=i,d.service_id=i.id,d.adult_tarifa=i.adult_tarifa,d.boys_tarifa=i.boy_tarifa)},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:(i,e)=>{q.require({target:e.currentTarget,message:"Seguro de Eliminar el Servicio "+i.title+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{console.log(i),m.delete(route("services.destroy",i.id),{onSuccess:()=>{y("success","Servicio eliminado con exito")}})}})},show:b().props.auth.user.rol=="admin",severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],U=()=>{d.post(route("custom.product"),{onSuccess:()=>{y("success","Tarifa creada con exito"),f.value=!1}})},$=()=>{if(o.description==""){o.errors.description="Ingrese una descripción";return}if(o.start_date==""||o.end_date==""){o.errors.start_date="Seleccione un rango de fechas";return}m.post(route("services.lock",r.value.slug),{start_date:o.start_date,description:o.description,end_date:o.end_date},{onSuccess:()=>{y("success","Servicio Bloqueado con exito"),p.value=!1,o.reset()}})},A=i=>{m.post(route("services.unlock",i),{},{onSuccess:()=>{y("success","Bloque Quitado Exitosamente")}})};return(i,e)=>{const v=j,C=I("VueDatePicker"),N=R;return x(),_(V,null,[l(E,{title:"Services"},{default:n(()=>[t("div",W,[l(z,{add:D,columnas:F,data:B.services,routecreate:"services.create",actions:T,title:"Servicios"},null,8,["data"])])]),_:1}),l(h,{visible:f.value,"onUpdate:visible":e[3]||(e[3]=s=>f.value=s)},{title:n(()=>e[9]||(e[9]=[t("span",{class:"text-xl font-bold white-space-nowrap"}," Modificar Servicio",-1)])),icon:n(()=>e[10]||(e[10]=[t("i",{class:"fa-solid fa-plus"},null,-1)])),footer:n(()=>[l(v,{onClick:U,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(v,{onClick:e[2]||(e[2]=s=>f.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:n(()=>[t("h3",G,[e[11]||(e[11]=w(" Agregar Tarifa a ")),t("strong",null,u(r.value.title),1)]),l(g,{label:"Tarifa para Adultos",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:a(d).adult_tarifa,"onUpdate:modelValue":e[0]||(e[0]=s=>a(d).adult_tarifa=s)},null,8,["modelValue"]),t("div",H," La tariafa Base es de "+u(a(k).format(r.value.adults_price)),1),l(g,{label:"Tarifa para niños",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:a(d).boys_tarifa,"onUpdate:modelValue":e[1]||(e[1]=s=>a(d).boys_tarifa=s)},null,8,["modelValue"]),t("span",J," La tariafa Base es de "+u(a(k).format(r.value.boys_price)),1)]),_:1},8,["visible"]),l(h,{visible:p.value,"onUpdate:visible":e[8]||(e[8]=s=>p.value=s)},{title:n(()=>e[12]||(e[12]=[t("span",{class:"text-xl font-bold white-space-nowrap"}," Bloqueos",-1)])),icon:n(()=>e[13]||(e[13]=[t("i",{class:"fa-solid fa-lock"},null,-1)])),footer:n(()=>[l(v,{onClick:$,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(v,{onClick:e[7]||(e[7]=s=>p.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:n(()=>[t("h3",K,[e[14]||(e[14]=w(" Bloqueos del Servicio ")),t("strong",null,u(r.value.title),1)]),r.value.locks.length==0?(x(),_("div",X," No hay bloqueos ")):(x(),_("div",Y,[e[15]||(e[15]=t("div",{class:"flex justify-between font-bold"},[t("p",null,"Razón"),t("p",null,"Fecha Inicio"),t("p",null,"Fecha Fin"),t("p",null,"Quitar")],-1)),(x(!0),_(V,null,L(r.value.locks,s=>(x(),_("div",Z,[t("p",null,u(s.description),1),t("p",null,u(s.start_date),1),t("p",null,u(s.end_date),1),t("p",null,[O(l(v,{icon:"fa-solid fa-xmark-circle",onClick:ae=>A(s.id),text:"",severity:"danger"},null,8,["onClick"]),[[N,"Quitar Bloqueo"]])])]))),256))])),t("div",ee,[t("div",te,[l(g,{label:"Razón del Bloqueo",modelValue:a(o).description,"onUpdate:modelValue":e[4]||(e[4]=s=>a(o).description=s),"error-message":a(o).errors.description},null,8,["modelValue","error-message"])]),t("div",se,[e[17]||(e[17]=t("label",{for:"",class:"font-bold"},"Seleccione el Rango de bloque o del servicio",-1)),t("div",oe,[l(C,{modelValue:a(o).start_date,"onUpdate:modelValue":e[5]||(e[5]=s=>a(o).start_date=s),"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota"},null,8,["modelValue"]),e[16]||(e[16]=t("i",{class:"fa-solid fa-minus"},null,-1)),l(C,{modelValue:a(o).end_date,"onUpdate:modelValue":e[6]||(e[6]=s=>a(o).end_date=s),"min-date":a(o).start_date,"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota"},null,8,["modelValue","min-date"])]),t("span",ie,u(a(o).errors.start_date),1)])])]),_:1},8,["visible"]),l(a(Q))],64)}}};export{Ue as default};

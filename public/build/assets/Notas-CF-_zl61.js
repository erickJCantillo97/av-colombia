import{s as G}from"./index-BBAZKyn9.js";import{s as se}from"./index-CsDue5Ck.js";import{s as ae}from"./AppLayout-BSSyeMHW.js";import{S as N}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{aU as H,aV as U,u as W,d as j,p as J,c as S,o as i,w,a as e,t as o,E as T,h as x,G as L,f as g,F as E,j as M,b as v,i as V,g as $,n as X,y as I,I as Q,a0 as F}from"./app-D5MEfrXA.js";import{a as oe}from"./toasts-CAnEIL5D.js";import{M as z}from"./Modal-DoDK1HGt.js";import{_ as B}from"./Input-D9vlhDGI.js";import{S as re}from"./Service-BGMeeLEi.js";import{u as le}from"./Auth-BhvtSzhO.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as ie}from"./Loading-DEfk9Trk.js";const ne={class:"px-8 py-6 space-y-6"},de={class:"bg-gradient-to-r from-rose-50 to-red-50 dark:from-rose-900/20 dark:to-red-900/20 rounded-xl p-6 border border-rose-100 dark:border-rose-800"},ce={class:"text-2xl font-bold text-gray-800 dark:text-gray-100 text-center mb-4"},ue={class:"max-w-md mx-auto"},ge={class:"relative"},xe={class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 shadow-sm"},me={class:"overflow-x-auto"},ve={class:"w-full"},fe={class:"divide-y divide-gray-200 dark:divide-gray-700"},be={class:"px-4 py-4 text-sm font-medium text-gray-900 dark:text-gray-100"},ye={class:"px-4 py-4 text-sm text-gray-600 dark:text-gray-400"},pe=["title"],he={class:"px-4 py-4 text-sm text-center text-gray-900 dark:text-gray-100"},we={class:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full font-semibold"},ke={class:"px-4 py-4 text-sm text-right font-semibold text-gray-900 dark:text-gray-100"},Ce={class:"px-4 py-4"},_e=["onUpdate:modelValue"],$e={class:"flex justify-end gap-3 px-8 py-6 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700"},Ve={__name:"ServiceCancel",props:H({service:Object},{modelValue:{},modelModifiers:{},view:{default:!1},viewModifiers:{}}),emits:["update:modelValue","update:view"],setup(s){const D=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),p=U(s,"modelValue"),k=U(s,"view"),c=s,b=W({date:"",proveedors:[]}),C=j([]);J(()=>{C.value=c.service.proveedors.map(_=>{var a=_.proveedor;return{proveedor_id:_.id,concept:a.concept,proveedor:_,pasajeros:c.service.adults,cost:_.cost,proveedor_name:a.proveedor.nombre,costo_penalidad:a.proveedor.type_penalidad_cost=="Porcentaje"?a.proveedor.penalidad_cancelacion/100*_.cost:a.proveedor.penalidad_cancelacion*c.service.adults}})});const y=()=>{b.proveedors=C.value,b.post(route("cancelar.servicio",c.service.id),{onSuccess:()=>{p.value=!1,k.value=!1}})};return(_,a)=>{const n=G;return i(),S(z,{title:`Cancelar Servicio ${s.service.service}`,modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=d=>p.value=d),width:"75vw",onClose:a[3]||(a[3]=d=>p.value=!1),"close-on-escape":""},{default:w(()=>[e("div",ne,[e("div",de,[e("h2",ce,o(s.service.cliente_name),1),e("div",ue,[a[4]||(a[4]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"}," Fecha de Cancelación ",-1)),e("div",ge,[T(e("input",{type:"date",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-rose-500 focus:ring-2 focus:ring-rose-200 dark:focus:ring-rose-800 transition-all px-4 py-3 text-lg","onUpdate:modelValue":a[0]||(a[0]=d=>x(b).date=d)},null,512),[[L,x(b).date]])])])]),e("div",xe,[e("div",me,[e("table",ve,[a[5]||(a[5]=e("thead",{class:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800"},[e("tr",null,[e("th",{class:"px-4 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Proveedor "),e("th",{class:"px-4 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Concepto "),e("th",{class:"px-4 py-4 text-center text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Pasajeros "),e("th",{class:"px-4 py-4 text-right text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Costo "),e("th",{class:"px-4 py-4 text-right text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Penalidad Total ")])],-1)),e("tbody",fe,[(i(!0),g(E,null,M(C.value,(d,u)=>(i(),g("tr",{key:d.proveedor_id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[e("td",be,o(d.proveedor_name),1),e("td",ye,[e("div",{class:"max-w-xs truncate",title:d.concept},o(d.concept),9,pe)]),e("td",he,[e("span",we,o(d.pasajeros),1)]),e("td",ke,o(x(D).format(d.cost)),1),e("td",Ce,[T(e("input",{class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-rose-500 focus:ring-2 focus:ring-rose-200 dark:focus:ring-rose-800 transition-all text-right px-3 py-2 font-semibold","onUpdate:modelValue":O=>d.costo_penalidad=O,type:"number"},null,8,_e),[[L,d.costo_penalidad]])])]))),128))])])])])]),e("div",$e,[v(n,{onClick:a[1]||(a[1]=d=>p.value=!1),class:"px-6 py-2.5 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},{default:w(()=>[...a[6]||(a[6]=[V(" Cancelar ",-1)])]),_:1}),v(n,{severity:"danger",onClick:y,class:"px-6 py-2.5 bg-gradient-to-r from-rose-600 to-red-600 hover:from-rose-700 hover:to-red-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all"},{default:w(()=>[...a[7]||(a[7]=[V(" Confirmar Cancelación ",-1)])]),_:1})])]),_:1},8,["title","modelValue"])}}},Se={class:"px-8 py-6 space-y-6"},je={class:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-xl p-6 border border-red-100 dark:border-red-800"},De={class:"text-3xl font-bold text-gray-800 dark:text-gray-100 text-center mb-4"},Oe={class:"max-w-md mx-auto"},Pe={class:"relative"},Ae=["max"],Ee={class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"},Ne={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm"},Ie={class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 shadow-sm"},Be={class:"overflow-x-auto"},Ue={class:"w-full"},Me={class:"divide-y divide-gray-200 dark:divide-gray-700"},Re={class:"px-4 py-4 text-sm font-medium text-gray-900 dark:text-gray-100"},Fe={class:"px-4 py-4 text-sm text-gray-600 dark:text-gray-400"},Te=["title"],Le={class:"px-4 py-4 text-sm text-center text-gray-900 dark:text-gray-100"},He={class:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full font-semibold"},ze={class:"px-4 py-4 text-sm text-right font-semibold text-gray-900 dark:text-gray-100"},qe={class:"px-4 py-4"},Ge=["onUpdate:modelValue","onInput"],We={class:"px-4 py-4 text-sm text-right font-bold text-red-600 dark:text-red-400"},Je={class:"flex justify-end gap-3 px-8 py-6 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700"},Ke={__name:"ServiceNoShow",props:H({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const D=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),p=U(s,"modelValue"),k=s,c=W({cantidad:k.service.adults,notes:"",proveedors:[]}),b=j([]);J(()=>{b.value=k.service.proveedors.map(a=>{var n=a.proveedor;return{proveedor_id:a.id,concept:n.concept,proveedor:a,pasajeros:k.service.adults,cost:a.cost,proveedor_name:n.proveedor.nombre,totalpayment:0,costo_penalidad:n.proveedor.type_penalidad_cost=="Porcentaje"?n.proveedor.penalidad_no_show/100*a.cost/k.service.adults:n.proveedor.penalidad_no_show??0}}),y()});const C=()=>{c.proveedors=b.value,c.post(route("noshow.servicio",k.service.id),{onSuccess:()=>{p.value=!1}})},y=()=>{b.value.forEach(a=>{a.total_no_show=a.costo_penalidad*c.cantidad,_(a)})},_=a=>{const n=a.pasajeros-c.cantidad,d=a.cost/a.pasajeros*n;a.totalpayment=d+a.costo_penalidad*c.cantidad};return(a,n)=>{const d=G;return i(),S(z,{title:`Marcar como No SHOW ${s.service.service}`,modelValue:p.value,"onUpdate:modelValue":n[3]||(n[3]=u=>p.value=u),width:"75vw",onClose:n[4]||(n[4]=u=>p.value=!1),"close-on-escape":""},{default:w(()=>[e("div",Se,[e("div",je,[e("h1",De,o(s.service.cliente_name),1),e("div",Oe,[n[5]||(n[5]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"}," ¿Cuántos pasajeros no se presentaron? ",-1)),e("div",Pe,[T(e("input",{type:"number",min:1,onInput:y,max:s.service.adults,class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-red-500 focus:ring-2 focus:ring-red-200 dark:focus:ring-red-800 transition-all text-center text-2xl font-semibold py-3","onUpdate:modelValue":n[0]||(n[0]=u=>x(c).cantidad=u)},null,40,Ae),[[L,x(c).cantidad]]),e("div",Ee," de "+o(s.service.adults),1)])])]),e("div",Ne,[v(B,{type:"textarea",modelValue:x(c).notes,"onUpdate:modelValue":n[1]||(n[1]=u=>x(c).notes=u),label:"¿Por qué no se presentaron?",class:"text-gray-700 dark:text-gray-300"},null,8,["modelValue"])]),e("div",Ie,[e("div",Be,[e("table",Ue,[n[6]||(n[6]=e("thead",{class:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800"},[e("tr",null,[e("th",{class:"px-4 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Proveedor "),e("th",{class:"px-4 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Concepto "),e("th",{class:"px-4 py-4 text-center text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Pasajeros "),e("th",{class:"px-4 py-4 text-right text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Costo Total "),e("th",{class:"px-4 py-4 text-right text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Penalidad "),e("th",{class:"px-4 py-4 text-right text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Total a Pagar ")])],-1)),e("tbody",Me,[(i(!0),g(E,null,M(b.value,(u,O)=>(i(),g("tr",{key:u.proveedor_id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[e("td",Re,o(u.proveedor_name),1),e("td",Fe,[e("div",{class:"max-w-xs truncate",title:u.concept},o(u.concept),9,Te)]),e("td",Le,[e("span",He,o(u.pasajeros),1)]),e("td",ze,o(x(D).format(u.cost)),1),e("td",qe,[T(e("input",{class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-red-500 focus:ring-2 focus:ring-red-200 dark:focus:ring-red-800 transition-all text-right px-3 py-2","onUpdate:modelValue":P=>u.costo_penalidad=P,onInput:P=>_(u),type:"number"},null,40,Ge),[[L,u.costo_penalidad]])]),e("td",We,o(x(D).format(u.totalpayment)),1)]))),128))])])])])]),e("div",Je,[v(d,{onClick:n[2]||(n[2]=u=>p.value=!1),class:"px-6 py-2.5 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},{default:w(()=>[...n[7]||(n[7]=[V(" Cancelar ",-1)])]),_:1}),v(d,{severity:"warn",onClick:C,class:"px-6 py-2.5 bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all"},{default:w(()=>[...n[8]||(n[8]=[V(" Confirmar No Show ",-1)])]),_:1})])]),_:1},8,["title","modelValue"])}}},Qe={class:"flex flex-col gap-1 w-full"},Xe={class:"flex items-center justify-between"},Ye={class:"text-xl font-bold text-gray-800"},Ze={class:"text-sm text-gray-500"},et={class:"space-y-6"},tt={class:"space-y-2"},st={class:"space-y-2"},at={class:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},ot=["href"],rt={class:"grid grid-cols-2 gap-2"},lt={class:"bg-blue-50 rounded-lg p-3 text-center"},it={class:"text-2xl font-bold text-blue-600"},nt={class:"bg-purple-50 rounded-lg p-3 text-center"},dt={class:"text-2xl font-bold text-purple-600"},ct={class:"space-y-2"},ut={class:"flex items-center justify-between py-2 px-3 bg-green-50 rounded-lg"},gt={class:"text-lg font-bold text-green-700"},xt={key:0,class:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},mt=["href"],vt={key:0},ft={class:"space-y-2"},bt={key:1},yt={class:"bg-amber-50 border-l-4 border-amber-400 p-3 rounded"},pt={class:"text-sm text-gray-700"},ht={key:2},wt={class:"flex items-center justify-between mb-3"},kt={class:"bg-green-100 text-green-700 text-xs font-semibold px-2.5 py-1 rounded-full"},Ct={class:"space-y-2"},_t={class:"text-sm text-gray-700"},$t={class:"text-sm font-semibold text-green-700"},Vt={key:3},St={class:"flex items-center justify-between mb-3"},jt={class:"bg-blue-100 text-blue-700 text-xs font-semibold px-2.5 py-1 rounded-full"},Dt={class:"space-y-2"},Ot={class:"text-sm text-gray-700"},Pt={class:"text-sm font-semibold text-blue-700"},At={key:0,class:"border-t pt-4"},Et={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Nt={class:"px-8 py-6 space-y-6"},It={class:"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 rounded-xl p-6 border border-orange-100 dark:border-orange-800"},Bt={class:"flex items-center gap-3 mb-4"},Ut={class:"text-sm text-gray-600 dark:text-gray-400"},Mt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm"},Rt={key:0,class:"flex items-center justify-between py-1"},Ft={class:"font-medium text-gray-900 dark:text-gray-100"},Tt={class:"text-sm font-semibold text-blue-600 dark:text-blue-400"},Lt={key:1,class:"text-gray-500"},Ht={class:"flex items-center justify-between py-2"},zt={class:"font-medium"},qt={class:"text-sm font-semibold text-blue-600"},Gt={class:"grid md:grid-cols-2 gap-6"},Wt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm"},Jt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm"},Kt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm"},Qt={class:"flex justify-end gap-3 px-8 py-6 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700"},Xt={__name:"viewBooking",props:H({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const{hasRole:D}=le(),p=new re,{toast:k}=oe(),c=(m,{attrs:t})=>I("div",{class:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[I("div",{class:"flex items-center gap-3"},[I("i",{class:`fa-solid fa-${m.icon} text-gray-500 text-sm`}),I("span",{class:"text-sm text-gray-600"},m.label)]),I("span",{class:"text-sm font-medium text-gray-900"},m.value)]),b=s,C=j(null),y=U(s,"modelValue"),_=j(!1),a=j(!1),n=j(!1),d=W({service:b.service.id,current_id:"",new_id:"",state:"REUBICAR",note:"",terminated:!0,value:""}),u=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),O=()=>{_.value=!0},P=(m,t)=>{N.fire({title:m,text:"Estas seguro de realizar esta acción?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(q=>{q.isConfirmed&&(N.fire({title:m,text:"Esta reserva ha sido "+m+".",icon:"success"}),Q.post(route("set.states.booking"),{service:b.service.id,state:m,terminated:t},{onSuccess:()=>{k("success","Reserva "+m)}}))})},R=()=>{N.fire({title:"Cambio de Fecha",html:'<input type="date" id="swal-date" class="w-full rounded-md text-center">',showCancelButton:!0,confirmButtonText:"Cambiar Fecha",showLoaderOnConfirm:!0,preConfirm:async()=>{const m=document.getElementById("swal-date").value;return m?(await Q.post(route("set.states.booking"),{service:b.service.id,state:"CAMBIO DE FECHA",date:m,terminated:!1}),m):(N.showValidationMessage("Debes seleccionar una fecha"),!1)},allowOutsideClick:()=>!N.isLoading()}).then(m=>{m.isConfirmed&&k("success","Fecha Cambiada")})},h=m=>{if(m==null||m==null)return"Sin definir";var t=new Date(new Date(m).getTime()+new Date(m).getTimezoneOffset()*6e4).toLocaleString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"});return t=="30/11/2"?"INDEFINIDO":t},r=()=>{if(!C.value||!d.new_id||!d.value)return k("error","Rellene todos los Campos"),0;d.current_id=C.value.id,d.service=b.service.id,d.state="REUBICADO",d.terminated=!1,d.post(route("set.states.booking"),{onSuccess:()=>{n.value=!1,d.reset(),k("success","Servicio REUBICADO")}})},f=j([]),A=async()=>{f.value=await p.getProveedorsByService(b.service.service_id)},Z=()=>{d.reset(),n.value=!0,A()},ee=m=>({RESERVADO:"bg-blue-100 text-blue-800","CAMBIO DE FECHA":"bg-gray-100 text-gray-800","NO SHOW":"bg-yellow-100 text-yellow-800",REUBICADO:"bg-orange-100 text-orange-800",CANCELADA:"bg-red-100 text-red-800",PROBLEMATICA:"bg-red-200 text-red-900","SIN CONFIRMAR":"bg-purple-100 text-purple-800",COMPLETADA:"bg-green-100 text-green-800"})[m]||"bg-gray-100 text-gray-800";return(m,t)=>{const q=ae,te=se,K=G;return i(),g(E,null,[v(q,{visible:y.value,"onUpdate:visible":t[6]||(t[6]=l=>y.value=l),header:"Detalles de la Reserva",position:"right",class:"!w-full md:!w-[500px]"},{header:w(()=>[e("div",Qe,[e("div",Xe,[e("h2",Ye,o(s.service.service),1),e("span",{class:X([ee(s.service.status),"px-3 py-1 text-xs font-semibold rounded-full"])},o(s.service.status),3)]),e("p",Ze,"ID: "+o(s.service.id.substring(0,8)),1)])]),footer:w(()=>[x(D)(["admin","superadmin"])?(i(),g("div",At,[t[38]||(t[38]=e("p",{class:"text-xs text-gray-500 mb-3 font-medium"},"Acciones Rápidas",-1)),e("div",Et,[e("button",{onClick:t[0]||(t[0]=l=>P("reservado",!0)),class:"flex items-center justify-center gap-2 px-3 py-2.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-all duration-200 hover:shadow-md group",title:"Confirmar Reserva"},[...t[32]||(t[32]=[e("i",{class:"fa-solid fa-circle-check text-sm group-hover:scale-110 transition-transform"},null,-1),e("span",{class:"text-xs font-medium hidden md:inline"},"Confirmar",-1)])]),e("button",{onClick:t[1]||(t[1]=l=>a.value=!0),class:"flex items-center justify-center gap-2 px-3 py-2.5 bg-yellow-50 hover:bg-yellow-100 text-yellow-700 rounded-lg transition-all duration-200 hover:shadow-md group",title:"No Show"},[...t[33]||(t[33]=[e("i",{class:"fa-solid fa-eye-slash text-sm group-hover:scale-110 transition-transform"},null,-1),e("span",{class:"text-xs font-medium hidden md:inline"},"No Show",-1)])]),e("button",{onClick:t[2]||(t[2]=l=>R()),class:"flex items-center justify-center gap-2 px-3 py-2.5 bg-gray-50 hover:bg-gray-100 text-gray-700 rounded-lg transition-all duration-200 hover:shadow-md group",title:"Cambio de Fecha"},[...t[34]||(t[34]=[e("i",{class:"fa-solid fa-calendar-week text-sm group-hover:scale-110 transition-transform"},null,-1),e("span",{class:"text-xs font-medium hidden md:inline"},"Fecha",-1)])]),e("button",{onClick:t[3]||(t[3]=l=>Z()),class:"flex items-center justify-center gap-2 px-3 py-2.5 bg-orange-50 hover:bg-orange-100 text-orange-700 rounded-lg transition-all duration-200 hover:shadow-md group",title:"Reubicar"},[...t[35]||(t[35]=[e("i",{class:"fa-solid fa-people-arrows text-sm group-hover:scale-110 transition-transform"},null,-1),e("span",{class:"text-xs font-medium hidden md:inline"},"Reubicar",-1)])]),e("button",{onClick:t[4]||(t[4]=l=>O()),class:"flex items-center justify-center gap-2 px-3 py-2.5 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg transition-all duration-200 hover:shadow-md group",title:"Cancelar"},[...t[36]||(t[36]=[e("i",{class:"fa-solid fa-xmark-circle text-sm group-hover:scale-110 transition-transform"},null,-1),e("span",{class:"text-xs font-medium hidden md:inline"},"Cancelar",-1)])]),e("button",{onClick:t[5]||(t[5]=l=>P("PROBLEMATICA",!1)),class:"flex items-center justify-center gap-2 px-3 py-2.5 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg transition-all duration-200 hover:shadow-md group",title:"Problemática"},[...t[37]||(t[37]=[e("i",{class:"fa-solid fa-triangle-exclamation text-sm group-hover:scale-110 transition-transform"},null,-1),e("span",{class:"text-xs font-medium hidden md:inline"},"Problema",-1)])])])])):$("",!0)]),default:w(()=>[e("div",et,[e("section",null,[t[17]||(t[17]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-calendar-days text-blue-500"}),V(" Información del Servicio ")],-1)),e("div",tt,[v(c,{icon:"fa-calendar",label:"Fecha",value:h(s.service.date)},null,8,["value"]),v(c,{icon:"fa-clock",label:"Hora",value:s.service.hour},null,8,["value"]),s.service.time_service?(i(),S(c,{key:0,icon:"fa-hourglass-half",label:"Duración",value:s.service.time_service},null,8,["value"])):$("",!0),v(c,{icon:"fa-store",label:"Canal",value:s.service.channel.name},null,8,["value"])])]),e("section",null,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-user text-blue-500"}),V(" Información del Cliente ")],-1)),e("div",st,[v(c,{icon:"fa-user-circle",label:"Cliente",value:s.service.cliente_name},null,8,["value"]),v(c,{icon:"fa-city",label:"Ciudad",value:s.service.cliente_city},null,8,["value"]),e("div",at,[t[18]||(t[18]=e("div",{class:"flex items-center gap-3"},[e("i",{class:"fa-brands fa-whatsapp text-green-500 text-sm"}),e("span",{class:"text-sm text-gray-600"},"Teléfono")],-1)),e("a",{target:"_blank",href:`https://wa.me/${s.service.cliente_phone}?text=Hola mucho gusto yo soy Sandra la coordinadora de su actividad. Hello, nice to talk to you I'm Sandra the coordinator for your activity`,class:"text-sm font-medium text-blue-600 hover:text-blue-800 hover:underline"},o(s.service.cliente_phone),9,ot)]),v(c,{icon:"fa-building",label:"Edificio",value:s.service.cliente_building},null,8,["value"])])]),e("section",null,[t[24]||(t[24]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-users text-blue-500"}),V(" Participantes ")],-1)),e("div",rt,[e("div",lt,[t[20]||(t[20]=e("i",{class:"fa-solid fa-user text-blue-600 text-lg mb-1"},null,-1)),e("p",it,o(s.service.adults),1),t[21]||(t[21]=e("p",{class:"text-xs text-gray-600"},"Adultos",-1))]),e("div",nt,[t[22]||(t[22]=e("i",{class:"fa-solid fa-child text-purple-600 text-lg mb-1"},null,-1)),e("p",dt,o(s.service.boys),1),t[23]||(t[23]=e("p",{class:"text-xs text-gray-600"},"Niños",-1))])])]),e("section",null,[t[27]||(t[27]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-dollar-sign text-blue-500"}),V(" Información Financiera ")],-1)),e("div",ct,[e("div",ut,[t[25]||(t[25]=e("span",{class:"text-sm text-gray-600"},"Total",-1)),e("span",gt,o(x(u).format(s.service.total)),1)]),v(c,{icon:"fa-receipt",label:"Total Real",value:x(u).format(s.service.total_real)},null,8,["value"]),v(c,{icon:"fa-wallet",label:"Saldo",value:x(u).format(s.service.saldo)},null,8,["value"]),s.service.file!="/laravel/public/"?(i(),g("div",xt,[t[26]||(t[26]=e("div",{class:"flex items-center gap-3"},[e("i",{class:"fa-solid fa-paperclip text-gray-500 text-sm"}),e("span",{class:"text-sm text-gray-600"},"Soporte")],-1)),e("a",{target:"_blank",href:s.service.file,class:"text-sm font-medium text-blue-600 hover:text-blue-800 hover:underline"}," Ver Archivo ",8,mt)])):$("",!0)])]),s.service.user||s.service.conductor||s.service.fecha_cancelacion?(i(),g("section",vt,[t[28]||(t[28]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-info-circle text-blue-500"}),V(" Información Adicional ")],-1)),e("div",ft,[s.service.user?(i(),S(c,{key:0,icon:"fa-user-tie",label:s.service.vendedor_id?"Vendedor":"Usuario",value:s.service.user?.name},null,8,["label","value"])):$("",!0),s.service.user?(i(),S(c,{key:1,icon:"fa-calendar-plus",label:"Fecha de Reserva",value:new Date(s.service.created_at).toLocaleDateString("es-CO")},null,8,["value"])):$("",!0),s.service.conductor?(i(),S(c,{key:2,icon:"fa-car",label:"Conductor",value:s.service.conductor},null,8,["value"])):$("",!0),s.service.placa?(i(),S(c,{key:3,icon:"fa-id-card",label:"Placa",value:s.service.placa},null,8,["value"])):$("",!0),s.service.total_pago_proveedor?(i(),S(c,{key:4,icon:"fa-money-bill",label:"Valor del Servicio",value:x(u).format(s.service.total_pago_proveedor)},null,8,["value"])):$("",!0),s.service.fecha_cancelacion?(i(),S(c,{key:5,icon:"fa-calendar-xmark",label:"Fecha de Cancelación",value:new Date(new Date(s.service.fecha_cancelacion).setDate(new Date(s.service.fecha_cancelacion).getDate()+1)).toLocaleDateString("es-CO")},null,8,["value"])):$("",!0)])])):$("",!0),s.service.observations?(i(),g("section",bt,[t[29]||(t[29]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-note-sticky text-blue-500"}),V(" Observaciones ")],-1)),e("div",yt,[e("p",pt,o(s.service.observations),1)])])):$("",!0),s.service.proveedors.length>0?(i(),g("section",ht,[e("div",wt,[t[30]||(t[30]=e("h3",{class:"text-sm font-semibold text-gray-700 flex items-center gap-2"},[e("i",{class:"fa-solid fa-handshake text-blue-500"}),V(" Proveedores ")],-1)),e("span",kt,o(s.service.proveedors.length),1)]),e("div",Ct,[(i(!0),g(E,null,M(s.service.proveedors,l=>(i(),g("div",{key:l.id,class:"flex items-center justify-between py-2 px-3 bg-green-50 rounded-lg border border-green-100"},[e("span",_t,o(l.proveedor.proveedor.nombre),1),e("span",$t,o(x(u).format(l.cost)),1)]))),128))])])):$("",!0),s.service.extras.length>0?(i(),g("section",Vt,[e("div",St,[t[31]||(t[31]=e("h3",{class:"text-sm font-semibold text-gray-700 flex items-center gap-2"},[e("i",{class:"fa-solid fa-plus-circle text-blue-500"}),V(" Extras ")],-1)),e("span",jt,o(s.service.extras.length),1)]),e("div",Dt,[(i(!0),g(E,null,M(s.service.extras,l=>(i(),g("div",{key:l.id,class:"flex items-center justify-between py-2 px-3 bg-blue-50 rounded-lg border border-blue-100"},[e("span",Ot,o(l.cantidad)+" "+o(l.description),1),e("span",Pt,o(x(u).format(l.total_price)),1)]))),128))])])):$("",!0)])]),_:1},8,["visible"]),v(z,{modelValue:n.value,"onUpdate:modelValue":t[13]||(t[13]=l=>n.value=l),title:"Cambio de Proveedor",width:"65vw","close-on-escape":""},{default:w(()=>[e("div",Nt,[e("div",It,[e("div",Bt,[t[40]||(t[40]=e("div",{class:"bg-orange-100 dark:bg-orange-900/40 rounded-full p-3"},[e("i",{class:"fa-solid fa-people-arrows text-orange-600 dark:text-orange-400 text-xl"})],-1)),e("div",null,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold text-gray-800 dark:text-gray-100"}," Reubicación de Proveedor ",-1)),e("p",Ut,o(s.service.service)+" - "+o(s.service.cliente_name),1)])])]),e("div",Mt,[t[41]||(t[41]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-handshake text-blue-500"}),V(" Proveedor Actual ")],-1)),v(te,{placeholder:"Seleccione el proveedor actual",options:s.service.proveedors,modelValue:C.value,"onUpdate:modelValue":t[7]||(t[7]=l=>C.value=l),"option-label":"proveedor.name",class:"w-full"},{value:w(l=>[l.value?(i(),g("div",Rt,[e("span",Ft,o(C.value.proveedor.proveedor.nombre),1),e("span",Tt,o(x(u).format(C.value.cost)),1)])):(i(),g("span",Lt,o(l.placeholder),1))]),option:w(({option:l})=>[e("div",Ht,[e("span",zt,o(l.proveedor.proveedor.nombre),1),e("span",qt,o(x(u).format(l.cost)),1)])]),_:1},8,["options","modelValue"])]),e("div",Gt,[e("div",Wt,[v(B,{"option-label":"nombre",type:"dropdown",label:"Nuevo Proveedor",modelValue:x(d).new_id,"onUpdate:modelValue":t[8]||(t[8]=l=>x(d).new_id=l),options:f.value,class:"text-gray-900 dark:text-gray-100"},{label:w(()=>[...t[42]||(t[42]=[e("span",{class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},[e("i",{class:"fa-solid fa-exchange-alt text-green-500"}),V(" Nuevo Proveedor ")],-1)])]),_:1},8,["modelValue","options"])]),e("div",Jt,[v(B,{label:"Valor del Servicio",modelValue:x(d).value,"onUpdate:modelValue":t[9]||(t[9]=l=>x(d).value=l),type:"number",mode:"currency",class:"text-gray-900 dark:text-gray-100"},{label:w(()=>[...t[43]||(t[43]=[e("span",{class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},[e("i",{class:"fa-solid fa-dollar-sign text-green-500"}),V(" Valor del Servicio ")],-1)])]),_:1},8,["modelValue"])])]),e("div",Kt,[v(B,{label:"Nota o Motivo",modelValue:x(d).note,"onUpdate:modelValue":t[10]||(t[10]=l=>x(d).note=l),type:"textarea",class:"text-gray-900 dark:text-gray-100"},{label:w(()=>[...t[44]||(t[44]=[e("span",{class:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"},[e("i",{class:"fa-solid fa-note-sticky text-amber-500"}),V(" Nota o Motivo del Cambio ")],-1)])]),_:1},8,["modelValue"])])]),e("div",Qt,[v(K,{onClick:t[11]||(t[11]=l=>n.value=!1),label:"Cancelar",severity:"danger",icon:"fa-solid fa-xmark",class:"px-6 py-2.5 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"}),v(K,{onClick:t[12]||(t[12]=l=>r()),label:"Guardar Cambios",severity:"success",icon:"fa-solid fa-save",class:"px-6 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all"})])]),_:1},8,["modelValue"]),_.value?(i(),S(Ve,{key:0,modelValue:_.value,"onUpdate:modelValue":t[14]||(t[14]=l=>_.value=l),view:y.value,"onUpdate:view":t[15]||(t[15]=l=>y.value=l),service:s.service},null,8,["modelValue","view","service"])):$("",!0),a.value?(i(),S(Ke,{key:1,modelValue:a.value,"onUpdate:modelValue":t[16]||(t[16]=l=>a.value=l),service:s.service},null,8,["modelValue","service"])):$("",!0)],64)}}},Ls=Y(Xt,[["__scopeId","data-v-0dfd53b6"]]),Yt={class:"flex items-center gap-3 px-6 py-4 border-b border-gray-200"},Zt={class:"text-xs text-gray-500"},es={class:"flex flex-col h-[60vh]"},ts={class:"flex-1 overflow-y-auto px-6 py-4 space-y-4 bg-gray-50"},ss={key:0,class:"flex justify-center items-center h-full"},as={class:"text-center"},os={key:1,class:"flex justify-center flex-col items-center h-full text-center px-8 py-12"},rs={key:2,class:"space-y-3"},ls={key:0,class:"flex items-end gap-2 max-w-[75%] group"},is={class:"flex-1 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl rounded-br-sm shadow-md hover:shadow-lg transition-shadow duration-200"},ns={class:"px-4 py-3"},ds={class:"text-white text-sm leading-relaxed break-words"},cs={class:"flex items-center justify-end gap-2 mt-2"},us={class:"text-xs text-blue-100"},gs={class:"px-2 pb-2 flex gap-1 justify-end opacity-0 group-hover:opacity-100 transition-opacity duration-200"},xs=["onClick"],ms=["onClick"],vs={class:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white text-xs font-bold flex-shrink-0 shadow-md"},fs={key:1,class:"flex items-end gap-2 max-w-[75%]"},bs={class:"w-8 h-8 rounded-full bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center text-white text-xs font-bold flex-shrink-0 shadow-md"},ys={class:"flex-1 bg-white rounded-2xl rounded-bl-sm shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200"},ps={class:"px-4 py-3"},hs={class:"text-sm font-semibold text-gray-900 mb-1"},ws={class:"text-gray-700 text-sm leading-relaxed break-words"},ks={class:"text-xs text-gray-500 mt-2 block"},Cs={class:"border-t border-gray-200 bg-white px-6 py-4"},_s={key:0,class:"mb-2 flex items-center gap-2 text-sm text-blue-600 bg-blue-50 px-3 py-2 rounded-lg"},$s={class:"flex gap-3 items-end"},Vs={class:"flex-1"},Ss=["disabled"],js=["disabled"],Ds={__name:"Notas",props:H({todayActivity:Boolean,notes:Array,note:String,service:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const D=U(s,"modelValue"),p=s,k=j(p.notes),c=j(!1),b=j(null),C=j(!1),y=j(""),_=()=>{F.post(route("notes.store"),{note:y.value,booking_service_id:p.service.id}).then(h=>{y.value="",O()})},a=h=>{F.delete(route("notes.destroy",h.id)).then(r=>{O()})},n=h=>{y.value=h.note,c.value=!0,b.value=h},d=()=>{F.put(route("notes.update",b.value.id),{note:y.value}).then(h=>{O(),y.value="",c.value=!1,b.value=null})},u=()=>{y.value="",c.value=!1,b.value=null},O=()=>{C.value=!0,F.get(route("notes.index",{booking_service_id:p.service.id})).then(h=>{k.value=h.data.notes,C.value=!1})},P=h=>{const r=new Date(h),f=new Date,A=new Date(f);return A.setDate(A.getDate()-1),r.toDateString()===f.toDateString()?`Hoy ${r.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})}`:r.toDateString()===A.toDateString()?`Ayer ${r.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})}`:r.toLocaleString("es-CO",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})},R=h=>{if(!h)return"?";const r=h.trim().split(" ");return r.length===1?r[0].charAt(0).toUpperCase():(r[0].charAt(0)+r[r.length-1].charAt(0)).toUpperCase()};return J(()=>{O()}),(h,r)=>(i(),S(z,{modelValue:D.value,"onUpdate:modelValue":r[1]||(r[1]=f=>D.value=f),"close-on-escape":"",width:"60vw"},{header:w(()=>[e("div",Yt,[r[3]||(r[3]=e("div",{class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center"},[e("i",{class:"fa-solid fa-comments text-white"})],-1)),e("div",null,[r[2]||(r[2]=e("h3",{class:"text-lg font-bold text-gray-900"},"Notas de la Actividad",-1)),e("p",Zt,o(p.service.service)+" - "+o(p.service.cliente_name),1)])])]),default:w(()=>[e("div",es,[e("div",ts,[C.value?(i(),g("div",ss,[e("div",as,[v(ie)])])):k.value.length===0?(i(),g("div",os,[...r[4]||(r[4]=[e("div",{class:"relative mb-6"},[e("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full blur-xl opacity-60 animate-pulse-slow"}),e("div",{class:"relative w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg"},[e("div",{class:"absolute inset-0 rounded-full bg-white opacity-20 animate-ping-slow"}),e("i",{class:"fa-solid fa-message-plus text-4xl text-white drop-shadow-lg"})])],-1),e("h3",{class:"text-xl font-bold text-gray-900 mb-2"}," No hay notas todavía ",-1),e("p",{class:"text-sm text-gray-600 mb-6 max-w-xs leading-relaxed"}," Esta actividad aún no tiene notas. Comienza la conversación agregando la primera nota. ",-1),e("div",{class:"flex items-center gap-3 text-xs text-gray-400"},[e("div",{class:"flex items-center gap-1.5"},[e("div",{class:"w-2 h-2 rounded-full bg-blue-400 animate-bounce",style:{"animation-delay":"0s"}}),e("div",{class:"w-2 h-2 rounded-full bg-indigo-400 animate-bounce",style:{"animation-delay":"0.2s"}}),e("div",{class:"w-2 h-2 rounded-full bg-purple-400 animate-bounce",style:{"animation-delay":"0.4s"}})]),e("span",{class:"font-medium"},"Escribe tu primera nota abajo")],-1),e("div",{class:"absolute inset-0 pointer-events-none overflow-hidden"},[e("div",{class:"particle particle-1"}),e("div",{class:"particle particle-2"}),e("div",{class:"particle particle-3"})],-1)])])):(i(),g("div",rs,[(i(!0),g(E,null,M(k.value,f=>(i(),g("div",{key:f.id,class:X(["flex animate-fade-in",f.user_id===h.$page.props.auth.user.id?"justify-end":"justify-start"])},[f.user_id===h.$page.props.auth.user.id?(i(),g("div",ls,[e("div",is,[e("div",ns,[e("p",ds,o(f.note),1),e("div",cs,[e("span",us,o(P(f.created_at)),1),r[5]||(r[5]=e("i",{class:"fa-solid fa-check-double text-xs text-blue-100"},null,-1))])]),e("div",gs,[e("button",{onClick:A=>n(f),class:"px-2 py-1 text-xs text-white hover:bg-white/20 rounded-lg transition-colors duration-200",title:"Editar"},[...r[6]||(r[6]=[e("i",{class:"fa-solid fa-pencil"},null,-1)])],8,xs),e("button",{onClick:A=>a(f),class:"px-2 py-1 text-xs text-white hover:bg-red-500 rounded-lg transition-colors duration-200",title:"Eliminar"},[...r[7]||(r[7]=[e("i",{class:"fa-solid fa-trash"},null,-1)])],8,ms)])]),e("div",vs,o(R(h.$page.props.auth.user.name)),1)])):(i(),g("div",fs,[e("div",bs,o(R(f.user.name)),1),e("div",ys,[e("div",ps,[e("p",hs,o(f.user.name),1),e("p",ws,o(f.note),1),e("span",ks,o(P(f.created_at)),1)])])]))],2))),128))]))]),e("div",Cs,[c.value?(i(),g("div",_s,[r[9]||(r[9]=e("i",{class:"fa-solid fa-pen-to-square"},null,-1)),r[10]||(r[10]=e("span",null,"Editando nota",-1)),e("button",{onClick:u,class:"ml-auto text-gray-500 hover:text-gray-700"},[...r[8]||(r[8]=[e("i",{class:"fa-solid fa-xmark"},null,-1)])])])):$("",!0),e("div",$s,[e("div",Vs,[v(B,{type:"textarea",modelValue:y.value,"onUpdate:modelValue":r[0]||(r[0]=f=>y.value=f),rowsTextarea:2,placeholder:"Escribe una nota...",class:"w-full"},null,8,["modelValue"])]),c.value?(i(),g("button",{key:1,onClick:d,disabled:!y.value.trim(),class:"flex-shrink-0 w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed text-white shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center"},[...r[12]||(r[12]=[e("i",{class:"fa-solid fa-check"},null,-1)])],8,js)):(i(),g("button",{key:0,onClick:_,disabled:!y.value.trim(),class:"flex-shrink-0 w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed text-white shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center group"},[...r[11]||(r[11]=[e("i",{class:"fa-solid fa-paper-plane group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform duration-200"},null,-1)])],8,Ss))])])])]),_:1},8,["modelValue"]))}},Hs=Y(Ds,[["__scopeId","data-v-ef8bf030"]]);export{Hs as N,Ls as V};

import{_ as f}from"./AppLayout-Cj4A4nys.js";import{_ as h}from"./Datatable-Qmtfzmyx.js";import{O as _,A as y,f as b,o as g,b as o,w as C,a as v,h as i,F as x,I as r,R as s}from"./app-pSvsKslz.js";import{s as A}from"./index-BuoMzPID.js";import{a as w}from"./toasts-CAnEIL5D.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-DAT7js2e.js";/* empty css                                                             */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BkGRYmVX.js";import"./index-BWNQ-Pq6.js";import"./index-XgmnIVUR.js";import"./index-C5IW_UvY.js";import"./index-Cv9wGFBP.js";import"./index-Cc-s_7Yz.js";import"./index-Sbr2G6Q-.js";import"./index-rG_QMIbr.js";import"./index-BE6EhSpM.js";import"./index-B_cON-0-.js";import"./index-DlW6tdLm.js";import"./index-DqJv5mKk.js";import"./index-Bm7z-Ipx.js";import"./index-DEqLBtAK.js";import"./index-Cy2vjyQf.js";import"./index-D2AONDLR.js";import"./index-cP_teG2L.js";import"./index-Cdx94vEP.js";import"./useCommonUtilities-BgDhORlD.js";import"./postcss-DmbbMTNM.js";import"./postcss-BR04puZO.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";const j=[{header:"Nombre",field:"name",filter:!0},{header:"Tipo",field:"type",filter:!0},{header:"Ciudad",field:"city",filter:!0},{header:"Rating",field:"star_rating",type:"rating"},{header:"Estado",field:"status",filter:!0},{header:"Habitaciones",field:"rooms_count",type:"number"}],E={class:"h-[90vh] md:h-[99vh] overflow-y-auto"},at={__name:"Index",props:{accommodations:Array,canCreateAccommodation:Boolean},setup(a){const{toast:n}=w(),m=_(),c=a,l=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),p=y(()=>c.accommodations.map(t=>({...t,rooms_count:t.rooms?.length||0,min_price:t.min_price?l.format(t.min_price):"N/A",type:t.type.charAt(0).toUpperCase()+t.type.slice(1),status:t.status.charAt(0).toUpperCase()+t.status.slice(1)}))),u={action:()=>{r.visit(route("accommodation.create"))}},d=[{action:t=>{r.visit(route("accommodation.show",t.id))},severity:"primary",icon:"fa-solid fa-eye text-sm",label:"Ver"},{action:t=>{r.visit(route("accommodation.edit",t.id))},show:t=>{const e=s().props.auth.user;return e.id===t.user_id||e.rol==="admin"||e.rol==="superadmin"},severity:"info",icon:"fa-solid fa-pencil text-sm",label:"Editar"},{action:(t,e)=>{m.require({target:e.currentTarget,message:"¿Seguro de eliminar el alojamiento "+t.name+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{r.delete(route("accommodation.destroy",t.id),{onSuccess:()=>{n("success","Alojamiento eliminado con éxito")}})}})},show:t=>{const e=s().props.auth.user;return e.id===t.user_id||e.rol==="admin"||e.rol==="superadmin"},severity:"danger",icon:"fa-regular fa-trash-can text-sm",label:"Eliminar"}];return(t,e)=>(g(),b(x,null,[o(f,{title:"Alojamientos"},{default:C(()=>[v("div",E,[o(h,{add:a.canCreateAccommodation?u:null,columnas:i(j),data:p.value,routecreate:"accommodations.create",actions:d,title:"Alojamientos"},null,8,["add","columnas","data"])])]),_:1}),o(i(A))],64))}};export{at as default};

import{s as _}from"./index-Ba-aQxTJ.js";import{eb as $,fd as B,d as p,q as E,C as L,f as c,a as t,b as l,w as m,u as r,F as x,W as N,o as f,i as T,n as D,t as P}from"./app-C2-9oWH2.js";import{_ as R}from"./Datatable-cYlFrBPC.js";import{s as j}from"./index-CeSDM-di.js";import{a as q,_ as n}from"./Modal-mwJNMcHU.js";import"./index-rP9KarVR.js";import"./index-DjhWULyq.js";import"./index-CTOVWvyK.js";import"./index-BPAyBXIi.js";import"./index-C_k4MXpc.js";import"./index-CZVNtWAD.js";import"./index-gFmhxQiD.js";import"./index-DDUtrw0x.js";import"./index-Bqk5ITYN.js";import"./index-DK2j0nYr.js";import"./index-CzjtOs7N.js";import"./index-BLqhrJCT.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./postcss-DJWpJ4aB.js";import"./index-DtxUqPM7.js";import"./index-CEpPZ0ib.js";import"./index-ClE8wSRC.js";const z={class:"h-[99vh]"},F={class:"flex gap-x-3 py-2"},G={class:"space-y-3 w-full shadow-lg p-2 rounded-md"},W={class:"w-full shadow-md rounded-md p-2"},I={class:"grid grid-cols-3 gap-2"},fe={__name:"Index",props:{users:Array,permisos:Array},setup(v){const w=[{header:"Nombre",field:"name",filter:!0},{header:"Correo",field:"email",filter:!0},{header:"Creación",field:"created_at",type:"datetime",filter:!0},{header:"URL Portafolio",field:"url"}],V=$(),y=B(),u=p(!1),d=p(),C=E(()=>b.permisos.filter(o=>!d.value||o.name.includes(d.value))),e=L({id:null,name:"",email:"",password:"",rol:"",password_confirmation:"",permissions:["crear experiencas"]}),i=p(!1),U={action:()=>{e.reset(),u.value=!1,i.value=!0}},k=[{action:o=>{e.reset(),i.value=!0,u.value=!0,e.name=o.name,e.email=o.email,console.log(o.rol),e.rol=o.rol,e.id=o.id},severity:"secondary",icon:"fa-solid fa-pencil text-sm"},{action:(o,a)=>{y.require({target:a.currentTarget,message:"Seguro de Eliminar el Usuario "+o.name+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{N.delete(route("users.destroy",o.id),{onSuccess:()=>{V.add({severity:"error",icon:"fa-solid fa-trash-can",summary:"¡Accion realizada!",detail:"Usuario eliminado con exito",group:"customTooltipDataTable",life:5e3})}})}})},severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],b=v,A=()=>{u.value?e.put(route("users.update",e.id),{onSuccess:()=>{i.value=!1}}):e.post(route("users.store"),{onSuccess:()=>{i.value=!1}})},S=[{label:"Super Administrador",value:"superadmin"},{label:"Administrador",value:"admin"},{label:"Cordinador",value:"cordinador"},{label:"Cliente",value:"cliente"}];function h(){e.rol=="superadmin"?e.permissions=b.permisos.map(o=>o.name):e.rol=="admin"&&(e.permissions=["ver experiencas","crear experiencas","editar experiencas","eliminar experiencas","ver servicios","crear servicios","editar servicios","eliminar servicios","ver usuarios","crear usuarios","editar usuarios","eliminar usuarios","ver proveedores","crear proveedores","editar proveedores","eliminar proveedores","ver canales","crear canales","editar canales","eliminar canales","ver metodos","crear metodos","editar metodos","eliminar metodos"])}return(o,a)=>{const g=_;return f(),c(x,null,[t("div",z,[l(R,{columnas:w,add:U,data:v.users,routecreate:"services.create",actions:k},null,8,["data"])]),l(q,{visible:i.value,"onUpdate:visible":a[7]||(a[7]=s=>i.value=s),width:"90vw"},{title:m(()=>a[8]||(a[8]=[t("span",{class:"text-xl font-bold white-space-nowrap"}," Agregar Usuario",-1)])),icon:m(()=>a[9]||(a[9]=[t("i",{class:"fa-solid fa-plus"},null,-1)])),footer:m(()=>[l(g,{onClick:A,title:"Guardar",severity:"success",label:"Guardar",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(g,{onClick:a[6]||(a[6]=s=>i.value=!1),title:"Cancel",severity:"danger",label:"Cancelar",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:m(()=>[t("div",F,[t("div",G,[a[10]||(a[10]=t("h3",{class:"text-center font-semibold text-lg"},"Datos del usuario",-1)),l(n,{label:"Nombre",modelValue:r(e).name,"onUpdate:modelValue":a[0]||(a[0]=s=>r(e).name=s),"error-message":r(e).errors.name},null,8,["modelValue","error-message"]),l(n,{label:"Email",modelValue:r(e).email,"onUpdate:modelValue":a[1]||(a[1]=s=>r(e).email=s)},null,8,["modelValue"]),l(n,{label:"Rol",modelValue:r(e).rol,"onUpdate:modelValue":a[2]||(a[2]=s=>r(e).rol=s),onValueChange:h,type:"dropdown","option-value":"value","option-label":"label",options:S},null,8,["modelValue"]),l(n,{label:"Contraseña",type:"password",modelValue:r(e).password,"onUpdate:modelValue":a[3]||(a[3]=s=>r(e).password=s)},null,8,["modelValue"]),l(n,{label:"Confirmar contraseña",type:"password",modelValue:r(e).password_confirmation,"onUpdate:modelValue":a[4]||(a[4]=s=>r(e).password_confirmation=s)},null,8,["modelValue"])]),t("div",W,[a[11]||(a[11]=t("h3",{class:"text-center font-semibold text-lg"},"Permisos",-1)),l(n,{class:"my-1",modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=s=>d.value=s)},null,8,["modelValue"]),t("div",I,[(f(!0),c(x,null,T(C.value,s=>(f(),c("span",{class:D([{"bg-black text-white":r(e).permissions.includes(s.name),"bg-gray-100":!r(e).permissions.includes(s.name)},"p-1 rounded-md cursor-pointer border border-black text-center uppercase hover:bg-black hover:text-white"])},P(s.name),3))),256))])])])]),_:1},8,["visible"]),l(r(j))],64)}}};export{fe as default};

var d=Object.defineProperty;var l=(t,e,s)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var a=(t,e,s)=>l(t,typeof e!="symbol"?e+"":e,s);import{y as o,x as m,A as c}from"./app-DfFP8HOo.js";import{a as i,g as n}from"./Toats-RcJDUpcK.js";class p{constructor(){a(this,"url",null)}assignMatchingKeys(e,s){Object.keys(e).forEach(r=>{r in s&&(s[r]=e[r])})}submit(e,s=null){return s?o.put(route(this.url+".update",s),e,{onSuccess:()=>{n("Actualizado Exitosamente")},onError:r=>{i(r.response.data.message||"Error al actualizar")}}):o.post(route(this.url+".store"),e,{onSuccess:()=>{n("Guardado Exitosamente")},onError:r=>{i(r.response.data.message||"Error al guardar")}})}delete(e){return o.delete(route(this.url+".destroy",e),{onSuccess:()=>{n("Eliminado Exitosamente")},onError:s=>{i(s.response.data.message||"Error al eliminar")}})}}class y extends p{constructor(s){super();a(this,"loading",!1);a(this,"service",[]);a(this,"portada",null);a(this,"form",m({title:"",description:"",features:[],boys_price:0,adults_price:0,code:"",includes:[],notIncludes:[],type:"TOUR",city:"Cartagena",duration_type:"",destinations:"",duration:0,duration_unit:"Dias",capacidad_min:1,capacidad_max:1}));this.service=s,this.url="services",s&&(this.assignMatchingKeys(s,this.form),this.form.includes=JSON.parse(s.includes),this.form.notIncludes=JSON.parse(s.notIncludes))}async getProveedorsByService(s){const{data:r}=await c.get(route("get.proveedors.by.service",s));return r.proveedors}async getServices(){const{data:s}=await c.get(route("get.all.services"));return s.services}async submit(){var u;let s=this.form.includes,r=this.form.notIncludes;this.form.notIncludes=JSON.stringify(this.form.notIncludes),this.form.includes=JSON.stringify(this.form.includes),super.submit(this.form,((u=this.service)==null?void 0:u.id)??null),this.form.includes=s,this.form.notIncludes=r}async setPortada(){o.post(route("set.portada",this.service.slug),{portada:this.portada},{onSuccess:()=>{n("Portada actualizada exitosamente")},onError:s=>{i("Error al actualizar la portada")}})}}export{y as S};

import{_ as w,s as B}from"./Input-BVBp2Wt_.js";import{d as i,T as P,o as c,c as k,w as n,a as t,b as l,u as f,f as p,t as s,j as N,D as M}from"./app-Bw1QxyUr.js";import{_ as U}from"./Datatable-CBEkY5NZ.js";import{_ as v}from"./Modal-DkHJxb2r.js";import{_ as A}from"./AppLayout-BAegSQZh.js";import{S as E,a as T}from"./toasts-DRkOXQyQ.js";import"./index-Dh9dM5uK.js";import"./index-ukab-bIO.js";import"./index-CPC1N9sC.js";import"./index-w8KSXmIg.js";import"./postcss-BghQxMgL.js";import"./index-DA57veQI.js";const $={class:"h-[99vh]"},D={class:"flex flex-col gap-y-4"},j=t("label",{for:"",class:"font-bold"},"Servicio",-1),F={key:0,class:"flex items-center"},q={key:1},I={class:"flex justify-between w-full items-center"},L={class:"text-xs"},ae={__name:"Index",props:{payments:{type:Array,required:!0}},setup(_){const r=i(!1),{toast:y}=T(),d=i(!1),u=P({payable_id:"",payable_type:"App\\Models\\Service",method:"",amount:"",currency:"COP"}),g={action:()=>{r.value=!0}},h=[{action:a=>{E.fire({title:"Confirmar Pago?",text:"Esta seguro de Confirmar este pago?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, Confirmar!"}).then(o=>{o.isConfirmed&&(console.log(a),M.post(route("payment.set.state",a.id),{_method:"PUT",status:"Confirmado"},{onSuccess:()=>{y("success","Pago Confirmado con exito")}}))}),x.value=a},severity:"success",icon:"fa-solid fa-wallet text-sm",label:"Validar Pago"}],x=i(),b=a=>{a.preventDefault()},S=i([]);(()=>{axios.get(route("get.services")).then(a=>{S.value=a.data.services.slice(0,5)})})();const m=i([]);(()=>{axios.get(route("get.services.no.payment")).then(a=>{m.value=a.data.bookingNoPayment})})();const C=[{header:"Servicio",field:"payable.service",filter:!0},{header:"Cliente",field:"payable.cliente_name",filter:!0},{header:"Metodo de Pago",field:"metohd_payment.name",filter:!0},{header:"Monto",field:"amount",type:"currency",filter:!0},{header:"Fecha",field:"created_at",type:"date",filter:!0},{header:"Estado",field:"status",filter:!0,sortable:!0,type:"tag",filtertype:"EQUALS",class:"text-center uppercase",severitys:[{text:"pendiente",severity:"danger",class:""},{text:"Confirmado",severity:"success",class:""}]}];return(a,o)=>{const V=B;return c(),k(A,{title:"Pagos"},{default:n(()=>[t("div",$,[l(U,{add:g,columnas:C,actions:h,data:_.payments,title:"Pagos"},null,8,["data"])]),l(v,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=e=>r.value=e),title:"AÃ±adir Pagos"},{default:n(()=>[t("form",{onSubmit:N(b,["prevent"])},[t("div",D,[t("div",null,[j,l(V,{options:m.value,filter:"",showClear:"",modelValue:f(u).payable_id,"onUpdate:modelValue":o[0]||(o[0]=e=>f(u).payable_id=e),class:"w-full","option-label":"service",placeholder:"Seleccione un servicio"},{value:n(e=>[e.value?(c(),p("div",F,[t("div",null,s(e.value.service)+" - "+s(e.value.cliente_name),1)])):(c(),p("span",q,s(e.placeholder),1))]),option:n(e=>[t("div",I,[t("div",null,[t("p",null,s(e.option.service)+" - "+s(e.option.cliente_name),1),t("p",L,s(e.option.date)+" "+s(e.option.hour),1)]),t("div",null,s(e.option.total_price_sales),1)])]),_:1},8,["options","modelValue"])]),l(w,{label:"Monto"})])],32)]),_:1},8,["modelValue"]),l(v,{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=e=>d.value=e),title:"Validar Pago"},null,8,["modelValue"])]),_:1})}}};export{ae as default};

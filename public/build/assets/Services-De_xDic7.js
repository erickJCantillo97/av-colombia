import{d as n,A as w,p as L,c as m,o as s,w as k,a as i,E as A,t as _,G as C,f,g,F as y,j as h}from"./app-h8VW5kjQ.js";import{_ as S}from"./GuestLayout-Cyl2jq4-.js";import M from"./Product-D75WoNa7.js";import{_ as b,A as E}from"./AccommodationCard-WK7GBnWl.js";import{L as H}from"./Loading-DERL7Iae.js";import{S as j}from"./Service-C1LhM2mW.js";import{s as B}from"./searchStore-DhPzZgFT.js";import"./Header-CApi47Vz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useCommonUtilities-BgDhORlD.js";import"./index-BAv9sfi0.js";import"./index-DuPz4sQm.js";import"./index-BFP3_o6R.js";import"./index-BQ9Vyj_K.js";import"./index-B5Uhqoyv.js";import"./index-BXHrh_ns.js";import"./index-BZaVGvJ0.js";import"./index-CzyUtpBw.js";import"./index-CnsOlY05.js";import"./index-BDU6Rs2F.js";import"./index-uVeM5mmn.js";import"./index-DxeF40dr.js";import"./index-BdiZNvB5.js";import"./logo-B8Dp5_WE.js";import"./FooterSection-s62IZeBQ.js";import"./GeneralService-BupSfE2U.js";import"./Toats-CRqRGqmn.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";const D={class:"sticky top-16 z-20 bg-white py-2 px-4"},F={class:"w-full flex justify-between items-center md:px-4"},P={class:"font-bold text-xs md:text-lg"},V={class:"w-full flex flex-col items-center justify-center gap-y-4 mt-4"},Y={class:"w-full gap-2 md:gap-4 py-1 grid grid-cols-1 md:grid-cols-6 px-4"},$={key:0,class:"w-full flex items-center justify-center py-4"},fe={__name:"Services",setup(N){const c=n(""),a=n([]),u=n(1),l=n(!0),r=n(!1),d=w(()=>B.type.value.value==="HOSPEDAJE");async function v(t=!1){if(!(r.value||!l.value&&!t)){r.value=!0,t&&(a.value=[],u.value=1,l.value=!0);try{let e;d.value?e=await new E().getAccommodationPagination(u.value,10):e=await new j().getServicePagination(u.value,10),console.log(e),e&&Array.isArray(e.data)?(t?a.value=e.data:a.value.push(...e.data),l.value=!!e.next_page_url):Array.isArray(e)&&(t?a.value=e:a.value.push(...e),l.value=!1),u.value++}finally{r.value=!1}}}function x(){if(r.value||!l.value)return;const t=window.scrollY||window.pageYOffset,e=window.innerHeight,o=document.documentElement.offsetHeight;t+e+800>=o&&v()}const p=w(()=>{if(!c.value)return a.value;const t=c.value.toLowerCase();return d.value?a.value.filter(e=>e.name&&e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.city&&e.city.toLowerCase().includes(t)||e.address_line_1&&e.address_line_1.toLowerCase().includes(t)):a.value.filter(e=>e.title&&e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))});return L(()=>{v(!0),window.addEventListener("scroll",x)}),(t,e)=>(s(),m(S,null,{default:k(()=>[i("div",D,[i("div",F,[i("span",P,_(p.value.length)+" "+_(d.value?"alojamientos":"servicios")+" encontrados ",1),A(i("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),type:"text",placeholder:"Buscar...",class:"w-1/2 lg:w-1/3 xl:w-1/4 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[C,c.value]])])]),i("div",V,[i("ul",Y,[d.value?(s(!0),f(y,{key:0},h(p.value,o=>(s(),m(b,{accommodation:o,key:o.id},null,8,["accommodation"]))),128)):(s(!0),f(y,{key:1},h(p.value,o=>(s(),m(M,{service:o,key:o.id},null,8,["service"]))),128))]),r.value?(s(),f("div",$,[r.value?(s(),m(H,{key:0})):g("",!0)])):g("",!0)])]),_:1}))}};export{fe as default};

import{_ as S}from"./AppLayout-D2egXX6r.js";import{L as A,f as l,o as c,b as r,w as L,a as t,h as i,i as n,F as p,j as $,t as o,g as v,c as V,I as f}from"./app-Bkmq6IjL.js";import{s as d,a as F}from"./index-DaANNUiK.js";import{s as I}from"./index-BJhrkhJI.js";import{a as M}from"./toasts-CAnEIL5D.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-BO5QB7ha.js";import"./index-BDEkOoTf.js";import"./index-CcP_lYt9.js";import"./index-BLqmo2gT.js";import"./index-4OYothAa.js";import"./index-DUCg-gIe.js";import"./index-CKTb4ZjY.js";import"./index-CfbMPObl.js";import"./index-nj7zxik0.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";const O={class:"h-[90vh] md:h-[99vh] overflow-y-auto p-6"},R={class:"max-w-6xl mx-auto"},T={class:"flex justify-between items-center mb-6"},P={key:0,class:"text-center py-12"},E={key:1,class:"space-y-4"},q={class:"grid grid-cols-1 md:grid-cols-4 gap-0"},z={class:"md:col-span-1"},G={class:"h-48 md:h-full bg-gray-200 relative"},H=["src","alt"],J={key:1,class:"w-full h-full bg-gray-300 flex items-center justify-center"},K={class:"md:col-span-3 p-6"},Q={class:"grid grid-cols-1 md:grid-cols-3 gap-4 h-full"},U={class:"md:col-span-2"},W={class:"text-xl font-semibold mb-2"},X={class:"text-gray-600 mb-2"},Y={class:"flex items-center text-gray-500 text-sm mb-2"},Z={class:"flex items-center space-x-6 text-sm text-gray-600 mb-4"},tt={class:"flex items-center"},et={class:"flex items-center"},st={key:0},at={class:"flex items-center"},ot={class:"text-sm text-gray-500"},ct={class:"flex flex-col justify-between"},lt={class:"text-right mb-4"},rt={class:"text-2xl font-bold text-green-600"},it={class:"space-y-2"},kt={__name:"Index",props:{bookings:Array},setup(_){const{toast:x}=M(),y=A(),g=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),w=a=>g.format(a),m=a=>new Date(a).toLocaleDateString("es-CO"),C=(a,s)=>{const e=new Date(a),u=new Date(s),N=Math.abs(u-e);return Math.ceil(N/(1e3*60*60*24))},b=a=>{switch(a){case"confirmada":return"Confirmada";case"cancelada":return"Cancelada";case"completada":return"Completada";default:return a}},j=a=>{switch(a){case"confirmada":return"success";case"cancelada":return"danger";case"completada":return"info";default:return"warning"}},k=a=>{const s=new Date,e=new Date(a.check_in_date);return a.status==="confirmada"&&e>s},h=()=>{f.visit(route("booking-accommodations.search"))},D=a=>{f.visit(route("booking-accommodations.show",a.id))},B=(a,s)=>{y.require({target:s.currentTarget,message:`¿Estás seguro de cancelar la reserva en ${a.room?.accommodation?.name}?`,icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"No, mantener",acceptLabel:"Sí, cancelar",accept:()=>{f.delete(route("booking-accommodations.destroy",a.id),{onSuccess:()=>{x("success","Reserva cancelada exitosamente")}})}})};return(a,s)=>(c(),l(p,null,[r(S,{title:"Mis Reservas de Alojamientos"},{default:L(()=>[t("div",O,[t("div",R,[t("div",T,[s[0]||(s[0]=t("h1",{class:"text-2xl font-bold"},"Mis Reservas de Alojamientos",-1)),r(i(d),{onClick:h,icon:"fa-solid fa-search",label:"Buscar Alojamientos",severity:"success"})]),_.bookings.length===0?(c(),l("div",P,[s[1]||(s[1]=t("div",{class:"text-gray-500 text-lg mb-4"},[t("i",{class:"fa-solid fa-calendar-times text-4xl mb-4 block"}),n(" No tienes reservas de alojamientos ")],-1)),r(i(d),{onClick:h,icon:"fa-solid fa-search",label:"Buscar Alojamientos",severity:"success"})])):(c(),l("div",E,[(c(!0),l(p,null,$(_.bookings,e=>(c(),l("div",{key:e.id,class:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow"},[t("div",q,[t("div",z,[t("div",G,[e.room?.accommodation?.photos?.[0]?(c(),l("img",{key:0,src:e.room.accommodation.photos[0].url,alt:e.room.accommodation.name,class:"w-full h-full object-cover"},null,8,H)):(c(),l("div",J,[...s[2]||(s[2]=[t("i",{class:"fa-solid fa-image text-gray-500 text-2xl"},null,-1)])])),r(i(F),{value:b(e.status),severity:j(e.status),class:"absolute top-2 right-2"},null,8,["value","severity"])])]),t("div",K,[t("div",Q,[t("div",U,[t("h3",W,o(e.room?.accommodation?.name),1),t("p",X,o(e.room?.name),1),t("div",Y,[s[3]||(s[3]=t("i",{class:"fa-solid fa-map-marker-alt mr-2"},null,-1)),n(" "+o(e.room?.accommodation?.city)+", "+o(e.room?.accommodation?.country),1)]),t("div",Z,[t("div",tt,[s[4]||(s[4]=t("i",{class:"fa-solid fa-calendar-alt mr-2"},null,-1)),n(" "+o(m(e.check_in_date))+" - "+o(m(e.check_out_date)),1)]),t("div",et,[s[5]||(s[5]=t("i",{class:"fa-solid fa-users mr-2"},null,-1)),n(" "+o(e.guests_adults)+" adultos ",1),e.guests_children>0?(c(),l("span",st,", "+o(e.guests_children)+" niños",1)):v("",!0)]),t("div",at,[s[6]||(s[6]=t("i",{class:"fa-solid fa-moon mr-2"},null,-1)),n(" "+o(C(e.check_in_date,e.check_out_date))+" noches ",1)])]),t("div",ot," Reserva realizada el "+o(m(e.created_at)),1)]),t("div",ct,[t("div",lt,[t("div",rt,o(w(e.total_price)),1),s[7]||(s[7]=t("div",{class:"text-sm text-gray-500"},"Total",-1))]),t("div",it,[r(i(d),{onClick:u=>D(e),icon:"fa-solid fa-eye",label:"Ver Detalles",severity:"info",outlined:"",class:"w-full"},null,8,["onClick"]),k(e)?(c(),V(i(d),{key:0,onClick:u=>B(e),icon:"fa-solid fa-times",label:"Cancelar",severity:"danger",outlined:"",class:"w-full"},null,8,["onClick"])):v("",!0)])])])])])]))),128))]))])])]),_:1}),r(i(I))],64))}};export{kt as default};

import{d as x,p as T,f as n,o as d,a as t,k as O,b as u,w as V,F as B,j as R,h as j,n as v,t as r,g as f,U,E as k,T as A,i as m,I as F}from"./app-DqAF--ZM.js";import{_ as g}from"./Input-BF5K63BI.js";import{s as b}from"./searchStore-p0m_yte3.js";import{S as I}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{O as D,h as q}from"./radio-group-CzC7m6y1.js";import"./index-BhZ0aTBh.js";import"./index-B422lW6Z.js";import"./index-C1jS0Cm0.js";import"./index-SJssaSk8.js";import"./index-rQchC_Qp.js";import"./index-BEG5gpaK.js";import"./index-6faJFwb8.js";import"./index-CQ0Rp_0P.js";import"./index-Bs3AbJif.js";import"./index-BPep4diZ.js";import"./index-BmuXG8mv.js";import"./index-BazCtKjs.js";import"./index-CssM1zeq.js";import"./index-Bk3CRIY_.js";import"./index-DFY5wnY3.js";import"./postcss-CcpfHI0I.js";import"./postcss-v8EcUpoW.js";import"./index-D846C_Bt.js";import"./index-BA_baWj4.js";import"./index-BOq8Y8fc.js";import"./useCommonUtilities-BgDhORlD.js";import"./keyboard-v7dXmkgE.js";const z={class:"bg-gray-50 py-5 overflow-y-auto"},L={class:"m-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8"},M={class:"mt-4 border-t border-gray-200 pt-1"},H={class:"mt-4 grid grid-cols-1 gap-y-2 sm:grid-cols-2 sm:gap-x-4"},$={class:"mt-4 border-t border-gray-200 p-1"},G={class:"flex flex-1"},W={class:"flex flex-col"},Z={class:"mt-10 lg:mt-0 flex flex-col"},J={key:0,class:"mt-4 rounded-lg border border-gray-200 bg-white shadow-sm"},K={class:"p-4"},Q={key:0,class:"mt-2 text-md text-gray-600"},X={key:1,class:"mt-2 text-md text-gray-600 gap-y-2"},Y={class:"flex justify-between gap-x-2 w-full"},ee={class:"flex flex-col justify-center shadow-xl w-full p-2 rounded-md text-sm"},te={class:"flex justify-center gap-x-2 w-full"},se={src:"/exito.png",alt:"Bancolombia",class:"w-16 h-16 object-contain"},le={src:"/western.png",alt:"Bancolombia",class:"w-16 h-16 object-contain rounded-full"},oe={key:1,class:"mt-4 flex-col items-start justify-start p-2 rounded-lg border border-gray-200 bg-white shadow-sm"},re={class:"w-full"},ae={class:"mt-4 rounded-lg border border-gray-200 bg-white shadow-sm"},ie={class:"flex gap-2 justify-center"},ne={class:"text-center text-gray-500"},de={class:"text-center text-gray-500"},ue={key:0,class:"flex gap-2 justify-center"},me={class:"text-center text-gray-500"},pe={class:"text-center text-gray-500"},ce={class:"flex justify-center gap-2"},ge={class:"text-center text-gray-500"},fe={class:"text-center text-gray-500"},xe={class:"text-center text-gray-500"},ve={class:"space-y-6 border-t border-gray-200 px-4 py-6 sm:px-6"},be={class:"flex items-center justify-between"},ye={class:"font-medium text-gray-900"},_e={class:"flex items-center justify-between"},we={class:"font-medium text-gray-900"},he={class:"flex items-center justify-between border-t border-gray-200 pt-6"},Ce={class:"text-base font-medium text-gray-900"},Ve={class:"border-t border-gray-200 px-4 py-6 sm:px-6 space-y-3"},je=["disabled"],ke={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Pe=["href"],tt={__name:"Index",props:{service:Object},setup(_){const a=_,s=x({adults:b.guests.value.adults,children:b.guests.value.children,infants:b.guests.value.infants,price_service:0,service_name:a.service.title,service_id:a.service.id,total_real:0,payment_method:0,cliente_name:"",cliente_last_name:"",cliente_email:"",cliente_phone:"",extras:0,soporte:"",date:b.checkin.value});function P(){const o=parseInt(a.service.capacidad_max);return a.service.type==="TOUR"?s.value.price_service=a.service.adults_price*(s.value.adults+s.value.children):a.service.type==="EMBARCACION"&&(s.value.price_service=a.service.adults_price),a.service.type==="TRANSFER"&&(s.value.price_service=a.service.adults_price*Math.ceil((s.value.adults+s.value.children)/o)),s.value.total_real=s.value.price_service,a.service.adults_price*s.adults}T(()=>{P()});const S=x(""),p=x(!1),w=[{id:2,title:"T.Debito, T. Credito, PSE",turnaround:"El Pago se refleja de inmediato"},{id:1,title:"Efectivo",turnaround:"Pagar en Oficinas"},{id:3,title:"Giros y Consignaciones",turnaround:"Validaremos su pago una vez recibido."}],i=x(w[0]),E=()=>{if(i.value.id==3&&!s.value.soporte){I.fire({title:"Comprobante Requerido",text:"Por favor adjunte el comprobante de pago.",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Entendido"});return}p.value=!0;const o=new FormData;Object.keys(s.value).forEach(e=>{(e==="soporte"&&s.value[e]instanceof File||e!=="soporte")&&o.append(e,s.value[e])}),o.append("payment_method",i.value.id),axios.post(route("booking.reservar.by.api"),o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{e.data.payment!=null?location.href=e.data.payment.data.payment.payment_url:(console.log(e.data),F.get(route("booking.success",e.data.bookingService.id)))}).catch(e=>{console.error("Error al generar el enlace de pago:",e),p.value=!1}).finally(()=>{p.value=!1})};function N(o){S.value=o.target.files[0],s.value.soporte=o.target.files[0],console.log(s.value)}const y=o=>{const e=Number(o)||0;return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)};return(o,e)=>{const h=A;return d(),n("div",z,[t("div",L,[e[30]||(e[30]=t("h2",{class:"sr-only"},"Checkout",-1)),t("form",{class:"lg:grid lg:grid-cols-2 lg:gap-x-12 xl:gap-x-4 overflow-y-auto",onSubmit:O(E,["prevent"])},[t("div",null,[e[8]||(e[8]=t("div",{class:"flex items-center justify-start gap-x-2"},[t("h2",{class:"text-lg font-medium text-gray-900"},"Informaci칩n del pasajero principal")],-1)),t("div",M,[t("div",H,[u(g,{label:"Nombres",modelValue:s.value.cliente_name,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.cliente_name=l),required:!0},null,8,["modelValue"]),u(g,{label:"Apellidos",modelValue:s.value.cliente_last_name,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.cliente_last_name=l),required:!0},null,8,["modelValue"]),u(g,{label:"Correo",modelValue:s.value.cliente_email,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.cliente_email=l),type:"email",class:"sm:col-span-2",required:!0},null,8,["modelValue"]),u(g,{label:"Hotel",modelValue:s.value.cliente_building,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.cliente_building=l),class:"sm:col-span-2",required:!0},null,8,["modelValue"]),u(g,{label:"Pais o Ciudad de Origen",modelValue:s.value.cliente_city,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.cliente_city=l),required:!0},null,8,["modelValue"]),u(g,{label:"Telefono",type:"number",modelValue:s.value.cliente_phone,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.cliente_phone=l),required:!0},null,8,["modelValue"])])]),t("div",$,[t("fieldset",null,[e[7]||(e[7]=t("legend",{class:"text-lg font-medium text-gray-900"},"Forma de Pago",-1)),u(j(q),{modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=l=>i.value=l),class:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4"},{default:V(()=>[(d(),n(B,null,R(w,l=>u(j(D),{as:"template",key:l.id,value:l,"aria-label":l.title,"aria-description":`${l.turnaround} for ${l.price}`},{default:V(({active:c,checked:C})=>[t("div",{class:v([C?"border-transparent":"border-gray-300",c?"ring-2 ring-indigo-500 bg-indigo-500 text-white transition-colors duration-150":"bg-white","relative flex cursor-pointer rounded-lg border  p-4 shadow-sm focus:outline-none"])},[t("span",G,[t("span",W,[t("span",{class:v(["block text-sm font-medium text-gray-900",{"text-white":c,"text-gray-900":!c}])},r(l.title),3),t("span",{class:v(["mt-1 flex items-center text-sm",{"text-white":c,"text-gray-500":!c}])},r(l.turnaround),3)])]),t("span",{class:v([c?"border":"border-2",C?"border-indigo-500 ":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"]),"aria-hidden":"true"},null,2)],2)]),_:2},1032,["value","aria-label","aria-description"])),64))]),_:1},8,["modelValue"])])])]),t("div",Z,[i.value.id!=2?(d(),n("div",J,[t("div",K,[e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-gray-900"},"Instrucciones de pago",-1)),i.value.id==1?(d(),n("div",Q,[...e[9]||(e[9]=[t("p",null,"Realice su pago directamente en nuestras oficinas:",-1),t("p",{class:"text-gray-900 font-bold"},"Av. Santander Cra 1 #46-50, Marbella, Cartagena de Indias.",-1),t("p",null,"Una vez confirmado el pago, recibir치 un comprobante y los detalles de su reserva por correo electr칩nico.",-1)])])):i.value.id==3?(d(),n("div",X,[e[12]||(e[12]=U('<div class="flex-col text-center items-center gap-x-2 w-full"><p>Las transacciones y giros se haran a nombre de:</p><div class="flex justify-between gap-x-2 w-full"><div class="w-full p-2 rounded-md flex justify-center items-center gap-x-2"><p class="font-medium border px-4 rounded-lg bg-gray-800 text-white"> Melissa Zurita</p><p class="font-medium border px-4 rounded-lg bg-gray-800 text-white">CC: 1047475135</p></div></div></div><p>Los canales disponibles son</p>',2)),t("div",Y,[e[11]||(e[11]=t("div",{class:"shadow-xl w-full p-2 rounded-md text-sm gap-y-2 flex flex-col"},[t("p",{class:"text-gray-900 font-medium"},"Bancolombia"),t("p",{class:"text-gray-700"},"Cuenta de Ahorros"),t("p",{class:"text-gray-900"},"Numero: 678 0000 8810")],-1)),t("div",ee,[e[10]||(e[10]=t("p",{class:"text-center text-gray-900 font-medium"},"Para giros",-1)),t("div",te,[k(t("img",se,null,512),[[h,"Almacenes Exito"]]),k(t("img",le,null,512),[[h,"Western Union"]])])])])])):f("",!0)])])):f("",!0),i.value.id==3?(d(),n("div",oe,[e[14]||(e[14]=t("h2",{class:"border-b border-gray-200 pb-2 mb-2 text-lg font-medium text-gray-900"},"Comprobante de Pago",-1)),t("label",re,[t("input",{onChange:N,type:"file",class:"text-sm text-grey-500 file:py-3 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-white file:bg-gray-800 hover:file:cursor-pointer hover:file:opacity-80"},null,32)])])):f("",!0),t("div",ae,[t("div",null,[e[23]||(e[23]=t("h2",{class:"text-lg text-gray-900 mx-4 mt-2 font-bold text-center"},"Resumen de reserva",-1)),t("span",ie,[e[16]||(e[16]=t("p",{class:"text-center text-gray-500"},"Fecha: ",-1)),t("p",ne,[e[15]||(e[15]=m("Hora: ",-1)),t("strong",null,r(s.value.hour),1)])]),t("p",de,[e[17]||(e[17]=m("Servicio: ",-1)),t("strong",null,r(s.value.service_name),1)]),_.service.type=="TRANSPORTE"?(d(),n("span",ue,[t("p",me,[e[18]||(e[18]=m("Origen: ",-1)),t("strong",null,r(s.value.origin),1)]),t("p",pe,[e[19]||(e[19]=m("Destino: ",-1)),t("strong",null,r(s.value.destination),1)])])):f("",!0),t("span",ce,[t("p",ge,[e[20]||(e[20]=m("Ni침os: ",-1)),t("strong",null,r(s.value.children),1)]),t("p",fe,[e[21]||(e[21]=m("Adultos: ",-1)),t("strong",null,r(s.value.adults),1)]),t("p",xe,[e[22]||(e[22]=m("Infantes: ",-1)),t("strong",null,r(s.value.infants),1)])])]),e[29]||(e[29]=t("h3",{class:"sr-only"},"Personas de la reserva",-1)),t("dl",ve,[t("div",be,[e[24]||(e[24]=t("dt",{class:""},"Subtotal",-1)),t("dd",ye,[t("span",null,r(y(s.value.price_service)),1)])]),t("div",_e,[e[25]||(e[25]=t("dt",{class:""},"Extras",-1)),t("dd",we,[t("span",null,r(y(s.value.extras)),1)])]),t("div",he,[e[26]||(e[26]=t("dt",{class:"text-base font-medium"},"Total",-1)),t("dd",Ce,r(y(s.value.total_real)),1)])]),t("div",Ve,[t("button",{disabled:o.totalCost==0||p.value,type:"submit",class:"w-full rounded-md border border-transparent bg-indigo-600 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[p.value?(d(),n("svg",ke,[...e[27]||(e[27]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):f("",!0),t("span",null,r(p.value?"Procesando...":"Confirmar el Pago y Reservar"),1)],8,je),t("a",{href:o.route("show.services",a.service.slug),class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center justify-center gap-2"},[...e[28]||(e[28]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),t("span",null,"Volver a Comprar",-1)])],8,Pe)])])])],32)])])}}};export{tt as default};

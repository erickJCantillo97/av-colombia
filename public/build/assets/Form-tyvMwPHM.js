import{aq as A,d as S,B as I,ar as O,x as E,c as H,o as c,w as N,a as t,f as v,g as L,b as s,u as a,t as q,h as G,F as Q,i as R,m as h,v as W,T as J}from"./app-DoeNmptf.js";import{s as K}from"./index-D49AD4nU.js";import{s as X}from"./index-sVvVPF3m.js";import{_ as d}from"./Input-DqzerrDG.js";import{_ as Y}from"./Modal-CBoAVB9c.js";import{a as Z}from"./toasts-Bf1FAz7R.js";import{S as ee}from"./Service-CjhrlRKp.js";import"./index-DIIz16vU.js";import"./index-CH4ShfUA.js";import"./index-CQCPSIjv.js";import"./index-XepSUA4D.js";import"./index-CQEgKFr4.js";import"./index-Demd08es.js";import"./index-BmbCn6R3.js";import"./index-DTEVdXxH.js";import"./index-Dk-oyExH.js";import"./index-809DA2VB.js";import"./index-Datc83_I.js";import"./index-CDi3EGSp.js";import"./index-GwiET4r5.js";import"./index-B4txdd6o.js";import"./index-lP0ejpkg.js";import"./useCommonUtilities-hipAPSUL.js";import"./filepond-plugin-image-preview.min-CU6i9RuF.js";import"./postcss-Bm8kwNMI.js";import"./index-Dx9zzSko.js";import"./index-CcoIB4Ff.js";import"./sweetalert2.esm.all-DV3w3JmD.js";const oe={class:"flex gap-4"},le={class:"flex flex-col w-1/3 gap-y-4"},te={class:"flex flex-col"},ae={class:"rounded-md border border-gray-100 bg-white p-4 shadow-md"},se={for:"upload",class:"flex flex-col items-center gap-2 cursor-pointer"},ie={class:"text-gray-600 font-medium text-sm truncate w-full"},ne={class:"flex flex-wrap gap-4 w-full justify-between"},re={class:"flex items-center gap-2"},de={class:"flex items-center gap-2"},ue={key:0,class:"w-2/3 col-sapn-1 md:col-span-3 border rounded-lg"},pe={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},me={class:"h-[50vh] overflow-y-auto"},ce={class:"justify-between w-full px-2 gap-x-2 grid grid-cols-8"},ve=["onUpdate:modelValue"],fe={class:"flex gap-x-2"},qe={__name:"Form",props:A({proveedor:Object},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(f){var V,w,g,_,y,C,D,k,U;const{toast:x}=Z(),b=S([]),n=f,j=new ee;I(async()=>{b.value=await j.getServices()});const p=O(f,"modelValue",!1),i=S("Dinero"),l=E({id:((V=n.proveedor)==null?void 0:V.id)??"",nombre:((w=n.proveedor)==null?void 0:w.nombre)??"",direccion:"a.",nit:((g=n.proveedor)==null?void 0:g.nit)??"",telefono:((_=n.proveedor)==null?void 0:_.telefono)??"",type_penalidad_cost:((y=n.proveedor)==null?void 0:y.type_penalidad_cost)??"Dinero",penalidad_no_show:((C=n.proveedor)==null?void 0:C.penalidad_no_show)??0,penalidad_cancelacion:((D=n.proveedor)==null?void 0:D.penalidad_cancelacion)??0,services:((k=n.proveedor)==null?void 0:k.services.map(r=>r.pivot))??[],cuenta:null,account_number:((U=n.proveedor)==null?void 0:U.account_number)??""}),B=()=>{l.services.push({service_id:"",concepto:"",value:""})},$=r=>{l.services.splice(r,1)},M=()=>{l.type_penalidad_cost=i.value,l.id?l.put(route("proveedors.update",l.id),{onSuccess:()=>{l.reset(),p.value=!1,x("success","Proveedor Actualizado")}}):l.post(route("proveedors.store"),{onSuccess:()=>{l.reset(),x("success","Proveedor Creado")}})},T=r=>{l.cuenta=r.target.files[0]};return(r,e)=>{const P=X,m=K,z=J;return c(),H(Y,{visible:p.value,"onUpdate:visible":e[10]||(e[10]=o=>p.value=o),"close-on-escape":!0,title:"Añadir Proveedor",width:"80vw"},{footer:N(()=>[t("div",fe,[s(m,{severity:"success",label:"Guardar",onClick:M}),s(m,{severity:"danger",label:"Cancelar",onClick:e[9]||(e[9]=o=>p.value=!1)})])]),default:N(()=>[t("div",oe,[t("div",le,[e[15]||(e[15]=t("h1",{class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"}," Datos del Proveedor ",-1)),s(d,{label:"Nombre",class:"w-full",modelValue:a(l).nombre,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).nombre=o)},null,8,["modelValue"]),s(d,{label:"NIT",class:"w-full",modelValue:a(l).nit,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).nit=o)},null,8,["modelValue"]),s(d,{label:"Telefono",class:"w-full",modelValue:a(l).telefono,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).telefono=o)},null,8,["modelValue"]),s(d,{label:"Número de Cuenta Bancanria",class:"w-full",modelValue:a(l).account_number,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).account_number=o)},null,8,["modelValue"]),t("div",te,[t("div",ae,[t("label",se,[e[11]||(e[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 fill-white stroke-indigo-500",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",ie,q(a(l).cuenta?a(l).cuenta.name:"Seleccionar Camara de Comercio"),1)]),t("input",{id:"upload",accept:".pdf",onChange:T,type:"file",class:"hidden"},null,32)])]),t("div",ne,[e[14]||(e[14]=t("label",{for:""},"Politicas",-1)),t("div",re,[s(P,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value=o),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),e[12]||(e[12]=t("label",{for:"Dinero"},"Dinero",-1))]),t("div",de,[s(P,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value=o),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje",size:"Normal"},null,8,["modelValue"]),e[13]||(e[13]=t("label",{for:"Porcentaje",class:"text-sm"},"Porcentaje",-1))])]),s(d,{label:"Penalización por NO SHOW",type:"number",modelValue:a(l).penalidad_no_show,"onUpdate:modelValue":e[6]||(e[6]=o=>a(l).penalidad_no_show=o),mode:i.value=="Dinero"?"currency":"decimal",suffix:i.value=="Dinero"?"":"%",min:"0",max:i.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"]),s(d,{label:"Penalización por CANCELACIÓN",type:"number",modelValue:a(l).penalidad_cancelacion,"onUpdate:modelValue":e[7]||(e[7]=o=>a(l).penalidad_cancelacion=o),mode:i.value=="Dinero"?"currency":"decimal",suffix:i.value=="Dinero"?"":"%",min:"0",max:i.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"])]),r.$page.props.auth.user.rol=="admin"||r.$page.props.auth.user.rol=="superadmin"?(c(),v("div",ue,[t("h1",pe,[e[16]||(e[16]=G(" Servicios ")),s(m,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:e[8]||(e[8]=o=>B())})]),e[17]||(e[17]=t("div",{class:"grid grid-cols-8 w-full font-bold px-2 text-left"},[t("div",{class:"col-span-3 w-full"},"Servicio"),t("div",{class:"col-span-2"},"Concepto"),t("div",{class:""},"Tarifa"),t("div",{class:""})],-1)),t("div",me,[(c(!0),v(Q,null,R(a(l).services,(o,F)=>(c(),v("div",ce,[s(d,{type:"dropdown",class:"col-span-3",modelValue:o.service_id,"onUpdate:modelValue":u=>o.service_id=u,"option-label":"title","option-value":"id",options:b.value},null,8,["modelValue","onUpdate:modelValue","options"]),s(d,{class:"w-full col-span-2",modelValue:o.concept,"onUpdate:modelValue":u=>o.concept=u},null,8,["modelValue","onUpdate:modelValue"]),h(t("input",{type:"number",class:"w-full rounded-md h-10 col-span-2","onUpdate:modelValue":u=>o.value=u},null,8,ve),[[W,o.value]]),h(s(m,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:u=>$(F)},null,8,["onClick"]),[[z,"Quitar"]])]))),256))])])):L("",!0)])]),_:1},8,["visible"])}}};export{qe as default};

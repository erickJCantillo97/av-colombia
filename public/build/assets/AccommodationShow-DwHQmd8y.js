import{s as Q}from"./index-DTNAscql.js";import{d as m,A as C,B as N,a0 as X,p as Z,e as tt,f as i,o as r,b as k,a as e,h as y,S as et,t as a,g as p,U as st,F as A,j as V,w as U,i as F,a9 as ot,n as at}from"./app-CO2pXAFK.js";import{s as d}from"./searchStore-Bu_jIkzN.js";import{H as lt}from"./Header-BNoy7ipU.js";import{_ as nt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as W}from"./index-BQCbDxL3.js";import"./index-CwWRi2Zp.js";import"./index-BaxX5s92.js";import"./index-DuXQRe0I.js";import"./index-ZZTcrTT7.js";import"./index-B0AQdf19.js";import"./index-BJilDPEX.js";import"./index-D8lSORTz.js";import"./index-DR6L7HAp.js";import"./index-DX7e7nUT.js";import"./index-B2SJo8Sy.js";import"./index-BWluwfwS.js";import"./useCommonUtilities-BgDhORlD.js";import"./index-nnwhqDJW.js";import"./index-DJH8kuw1.js";import"./index-RcVPvK9T.js";import"./index-CXBQC7LW.js";import"./index-bMkFRN2T.js";import"./logo-CWVYMhwE.js";import"./index-BHb_zmzG.js";const it={class:"px-4 py-36 md:py-48 md:px-56 max-w-full mx-auto pb-20 lg:pb-8"},rt={class:"mb-6"},ct={class:"text-2xl md:text-3xl font-semibold text-gray-900 mb-2"},dt={class:"flex flex-wrap items-center gap-4 text-sm"},ut={class:"flex items-center gap-2"},mt={class:"text-gray-600"},vt={key:0,class:"flex items-center gap-1"},ft={key:1,class:"flex items-center gap-2"},gt={class:"font-medium"},bt={class:"text-gray-600"},yt={key:0,class:"relative"},ht=["src","alt"],xt={class:"grid grid-cols-4 gap-2 rounded-2xl overflow-hidden mb-8 h-[400px] cursor-pointer"},pt=["src","alt"],wt=["onClick"],kt=["src","alt"],_t={key:1,class:"w-full h-[400px] bg-gray-200 rounded-2xl flex items-center justify-center mb-8"},Ct={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},St={class:"lg:col-span-2 space-y-6"},Dt={class:"border-b pb-6"},Nt={class:"text-xl font-semibold text-gray-900 mb-2"},At={class:"flex items-center gap-4 text-gray-600"},jt={class:"border-b pb-6"},$t={class:"prose max-w-none text-gray-700"},Et={key:"full"},Mt={key:"short"},It={key:0,class:"border-b pb-6"},Vt={class:"grid grid-cols-2 gap-4"},Ut={class:"text-gray-700"},Lt={class:"border-b pb-6"},Pt={class:"flex items-center gap-3 mb-3"},Tt={key:0,class:"text-sm text-gray-600"},Ft={key:1,class:"text-sm text-gray-600"},Gt={key:2,class:"text-sm text-red-600"},Ot={class:"space-y-4"},Rt=["onClick"],Ht={class:"flex justify-between items-start"},Bt={class:"flex-1"},Wt={class:"font-semibold text-gray-900"},qt={class:"text-sm text-gray-600 mt-1"},zt={class:"flex items-center gap-4 mt-2 text-sm text-gray-600"},Yt={key:0},Jt={class:"text-right"},Kt={class:"text-xl font-bold text-gray-900"},Qt={key:0,class:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-lg pointer-events-none"},Xt={class:"border-b pb-6"},Zt={class:"text-gray-700"},te={class:"lg:col-span-1"},ee={class:"sticky top-24 hidden lg:block"},se={class:"bg-white border rounded-2xl shadow-md p-6"},oe={class:"flex items-baseline justify-start gap-x-2 mb-4"},ae={class:"text-2xl md:text-3xl font-bold text-gray-900"},le={class:"space-y-3"},ne={class:"flex gap-2"},ie={class:"w-full"},re={class:"text-sm text-gray-900 font-medium"},ce={class:"w-full"},de={class:"text-sm text-gray-900 font-medium"},ue={class:"p-0 h-[330px]"},me={class:"text-sm text-gray-900 font-medium"},ve={class:"p-4 min-w-[300px]"},fe={class:"space-y-4"},ge={class:"flex items-center justify-between"},be={class:"flex items-center gap-3"},ye={class:"w-8 text-center"},he={class:"flex items-center justify-between"},xe={class:"flex items-center gap-3"},pe={class:"w-8 text-center"},we={class:"pt-2 w-full"},ke={key:0,type:"button",class:"w-full bg-gray-400 text-white rounded-lg py-3 font-semibold cursor-not-allowed",disabled:""},_e={key:1,type:"button",class:"w-full bg-gray-400 text-white rounded-lg py-3 font-semibold cursor-not-allowed",disabled:""},Ce={key:0,class:"mt-4"},Se={class:"border-t pt-3"},De={class:"flex items-center justify-between text-sm text-gray-600"},Ne={class:"font-medium text-gray-900"},Ae={class:"flex items-center justify-between text-base font-semibold text-gray-900 mt-3 pt-3 border-t"},je={__name:"AccommodationShow",props:{accommodation:Object},setup(n){const g=n,j=m(!1),b=m(null),h=m(2),$=m(null),G=m(null);m(!1);const u=m(null),E=m(!1),x=m([]),S=m(null),q=C(()=>!u.value||!v.value||!f.value?!1:E.value?!0:x.value.includes(u.value.id));function _(s){return s?s.toISOString():null}function z(s){try{if(!s){b.value=null,d.checkin.value="",d.checkout.value="";return}if(Array.isArray(s)){const[t,l]=s;b.value=s,d.checkin.value=t?_(t):"",d.checkout.value=l?_(l):"",t&&l&&setTimeout(()=>{try{$.value?.hide()}catch{}},500)}}catch(t){console.error("Error handling calendar change:",t)}}const v=m(null),f=m(null);N(b,s=>{if(!s){v.value=null,f.value=null;return}Array.isArray(s)&&(v.value=s[0]?_(s[0]):null,f.value=s[1]?_(s[1]):null)}),N([v,f,h],async([s,t,l])=>{if(!s||!t){x.value=[],S.value=null;return}E.value=!0,S.value=null;try{const c={check_in:s,check_out:t,guests:l||1},o=route("api.accommodations.availability",g.accommodation.id),{data:w}=await X.get(o,{params:c}),B=w.available_rooms||[];x.value=B.map(K=>K.id),u.value&&!x.value.includes(u.value.id)&&(u.value=null)}catch(c){console.error("Error checking availability",c),S.value=c.response?.data?.message||"Error al verificar disponibilidad",x.value=[]}finally{E.value=!1}}),Z(()=>{try{const s=d.checkin?.value,t=d.checkout?.value;if(s&&t){const c=new Date(s),o=new Date(t);!isNaN(c)&&!isNaN(o)&&(b.value=[c,o])}const l=d.guests?.value;if(l){const c=Number(l.adults||0)+Number(l.children||0)||2;h.value=c}}catch(s){console.error("Error mounting component:",s)}}),N([()=>d.checkin.value,()=>d.checkout.value],([s,t])=>{try{if(s&&t){const l=new Date(s),c=new Date(t);if(!isNaN(l)&&!isNaN(c)){const o=b.value?.[0],w=b.value?.[1];(!o||!w||_(o)!==s||_(w)!==t)&&(b.value=[l,c])}}else b.value=null}catch(l){console.error("Error watching store changes:",l)}}),N(()=>d.guests.value,s=>{if(!s)return;const t=Number(s.adults||0)+Number(s.children||0)||2;h.value=t},{deep:!0}),N(h,s=>{const t=d.guests.value||{adults:2,children:0,infants:0},l=Math.max(1,Number(s)-Number(t.children||0));d.guests.value={...t,adults:l}});function O(s){const l={...d.guests.value||{adults:2,children:0,infants:0}};l[s]=Math.max(0,(l[s]||0)+1),d.guests.value=l;const c=l.adults+l.children+l.infants;h.value=c||2}function R(s){const l={...d.guests.value||{adults:2,children:0,infants:0}};s==="adults"?l[s]=Math.max(1,(l[s]||1)-1):l[s]=Math.max(0,(l[s]||0)-1),d.guests.value=l;const c=l.adults+l.children+l.infants;h.value=c||2}const D=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Y=C(()=>{if(g.accommodation.photos&&g.accommodation.photos.length>0){const s=g.accommodation.photos[0].path;return s.startsWith("http")?s:`/storage/${s.replace("public/","")}`}return"https://avcolombia.net/images/logo.webp"}),M=C(()=>!g.accommodation.photos||g.accommodation.photos.length===0?[]:g.accommodation.photos.map(s=>{const t=s.path;return t.startsWith("http")?t:`/storage/${t.replace("public/","")}`})),L=m(0),P=m(!1),T=s=>{L.value=s,P.value=!0};C(()=>g.accommodation.rooms?.filter(s=>s.is_available)||[]);const I=C(()=>{if(!v.value||!f.value)return 0;const s=new Date(v.value),t=new Date(f.value),l=Math.ceil((t-s)/(1e3*60*60*24));return l>0?l:0}),H=C(()=>!u.value||I.value===0?0:u.value.price_per_night*I.value),J=()=>{if(!u.value){alert("Por favor selecciona una habitación");return}if(!v.value||!f.value){alert("Por favor selecciona las fechas de check-in y check-out");return}const s=route("accommodations.checkout",{accommodation:g.accommodation.id,room:u.value.id}),t=new URLSearchParams({check_in:v.value,check_out:f.value,guests:h.value});window.location.href=`${s}?${t.toString()}`};return(s,t)=>{const l=Q,c=tt("VueDatePicker");return r(),i(A,null,[k(y(et),{title:`Av Colombia - ${n.accommodation.name}`},null,8,["title"]),k(lt),e("div",it,[e("div",rt,[e("h1",ct,a(n.accommodation.name),1),e("div",dt,[e("div",ut,[t[13]||(t[13]=e("i",{class:"fa-solid fa-location-dot text-gray-600"},null,-1)),e("span",mt,a(n.accommodation.city)+", "+a(n.accommodation.country),1)]),n.accommodation.star_rating?(r(),i("div",vt,[(r(!0),i(A,null,V(n.accommodation.star_rating,o=>(r(),i("i",{key:o,class:"fa-solid fa-star text-yellow-400"}))),128))])):p("",!0),n.accommodation.average_rating>0?(r(),i("div",ft,[t[14]||(t[14]=e("i",{class:"fa-solid fa-heart text-red-400"},null,-1)),e("span",gt,a(n.accommodation.average_rating),1),e("span",bt,"("+a(n.accommodation.reviews?.length||0)+" reseñas)",1)])):p("",!0),t[15]||(t[15]=st('<div class="flex items-center gap-3 ml-auto" data-v-c8c68e9b><button class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border" data-v-c8c68e9b><i class="fa-solid fa-share-nodes" data-v-c8c68e9b></i> Compartir </button><button class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border" data-v-c8c68e9b><i class="fa-regular fa-heart" data-v-c8c68e9b></i> Guardar </button></div>',1))])]),M.value.length>0?(r(),i("div",yt,[k(l,{activeIndex:L.value,"onUpdate:activeIndex":t[0]||(t[0]=o=>L.value=o),visible:P.value,"onUpdate:visible":t[1]||(t[1]=o=>P.value=o),value:M.value,numVisible:7,containerStyle:"max-width: 100%",circular:!0,fullScreen:!0,showItemNavigators:!0,showThumbnails:!1},{item:U(o=>[e("img",{src:o.item,alt:n.accommodation.name,style:{width:"100%",display:"block"}},null,8,ht)]),_:1},8,["activeIndex","visible","value"]),e("div",xt,[e("div",{class:"col-span-2 row-span-2",onClick:t[2]||(t[2]=o=>T(0))},[e("img",{src:Y.value,alt:n.accommodation.name,class:"w-full h-full object-cover hover:opacity-90 transition-opacity"},null,8,pt)]),(r(!0),i(A,null,V(M.value.slice(1,5),(o,w)=>(r(),i("div",{key:w,onClick:B=>T(w+1)},[e("img",{src:o,alt:`${n.accommodation.name} - ${w+2}`,class:"w-full h-full object-cover hover:opacity-90 transition-opacity"},null,8,kt)],8,wt))),128)),M.value.length>5?(r(),i("button",{key:0,class:"absolute bottom-4 right-4 bg-white px-4 py-2 rounded-lg shadow-md hover:shadow-lg transition-shadow font-medium",onClick:t[3]||(t[3]=o=>T(5))},[...t[16]||(t[16]=[e("i",{class:"fa-solid fa-images mr-2"},null,-1),F(" Mostrar todas las fotos ",-1)])])):p("",!0)])])):(r(),i("div",_t,[...t[17]||(t[17]=[e("div",{class:"text-center text-gray-500"},[e("i",{class:"fa-solid fa-image text-6xl mb-4"}),e("p",null,"No hay fotos disponibles")],-1)])])),e("div",Ct,[e("main",St,[e("div",Dt,[e("h2",Nt,a(n.accommodation.type)+" · "+a(n.accommodation.city),1),e("div",At,[e("span",null,a(n.accommodation.rooms?.length||0)+" habitaciones",1)])]),e("section",jt,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-3"},"Acerca de este lugar",-1)),e("div",$t,[k(ot,{name:"expand"},{default:U(()=>[j.value||n.accommodation.description?.length<=500?(r(),i("div",Et,a(n.accommodation.description),1)):(r(),i("div",Mt,a(n.accommodation.description?.slice(0,500))+"... ",1))]),_:1}),n.accommodation.description?.length>500?(r(),i("button",{key:0,onClick:t[4]||(t[4]=o=>j.value=!j.value),class:"text-gray-900 hover:underline mt-2 font-medium"},a(j.value?"Mostrar menos":"Mostrar más")+" › ",1)):p("",!0)])]),n.accommodation.amenities?.length?(r(),i("section",It,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Lo que ofrece este lugar",-1)),e("div",Vt,[(r(!0),i(A,null,V(n.accommodation.amenities,o=>(r(),i("div",{key:o.id,class:"flex items-center gap-3"},[t[19]||(t[19]=e("i",{class:"fa-solid fa-check text-teal-500"},null,-1)),e("span",Ut,a(o.name),1)]))),128))])])):p("",!0),e("section",Lt,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Habitaciones disponibles",-1)),e("div",Pt,[E.value?(r(),i("div",Tt,"Comprobando disponibilidad...")):(r(),i("div",Ft,"Disponibles: "+a(x.value.length)+" / "+a(n.accommodation.rooms?.length||0),1)),S.value?(r(),i("div",Gt,a(S.value),1)):p("",!0)]),e("div",Ot,[(r(!0),i(A,null,V(g.accommodation.rooms,o=>(r(),i("div",{key:o.id,class:at(["border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer relative",{"ring-2 ring-indigo-500":u.value?.id===o.id,"opacity-50 cursor-not-allowed":!x.value.includes(o.id)}]),onClick:()=>{x.value.includes(o.id)&&(u.value=o)}},[e("div",Ht,[e("div",Bt,[e("h4",Wt,a(o.name),1),e("p",qt,a(o.description),1),e("div",zt,[e("span",null,[t[21]||(t[21]=e("i",{class:"fa-solid fa-user"},null,-1)),F(" "+a(o.capacity_adults)+" adultos",1)]),o.capacity_children>0?(r(),i("span",Yt,[t[22]||(t[22]=e("i",{class:"fa-solid fa-child"},null,-1)),F(" "+a(o.capacity_children)+" niños",1)])):p("",!0)])]),e("div",Jt,[e("div",Kt,a(y(D).format(o.price_per_night)),1),t[23]||(t[23]=e("div",{class:"text-sm text-gray-600"},"por noche",-1))])]),x.value.includes(o.id)?p("",!0):(r(),i("div",Qt,[...t[24]||(t[24]=[e("div",{class:"text-sm text-red-600 font-medium"},"No disponible en las fechas seleccionadas",-1)])]))],10,Rt))),128))])]),e("section",Xt,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Ubicación",-1)),e("div",Zt,[e("p",null,a(n.accommodation.address_line_1),1),e("p",null,a(n.accommodation.city)+", "+a(n.accommodation.state)+" "+a(n.accommodation.postal_code),1),e("p",null,a(n.accommodation.country),1)])])]),e("aside",te,[e("div",ee,[e("div",se,[e("div",oe,[e("div",ae,a(y(D).format(n.accommodation.min_price||0)),1),t[27]||(t[27]=e("div",{class:"text-sm text-gray-600"},"por noche",-1))]),e("form",le,[e("div",ne,[e("div",ie,[t[28]||(t[28]=e("label",{class:"text-xs font-medium text-gray-700 block mb-1"},"LLEGADA",-1)),e("button",{type:"button",class:"w-full text-left border border-gray-300 rounded-lg px-3 py-3 bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400",onClick:t[5]||(t[5]=o=>$.value?.toggle(o))},[e("div",re,a(v.value?new Date(v.value).toLocaleDateString("es-ES",{day:"numeric",month:"short"}):"Agregar fecha"),1)])]),e("div",ce,[t[29]||(t[29]=e("label",{class:"text-xs font-medium text-gray-700 block mb-1"},"SALIDA",-1)),e("button",{type:"button",class:"w-full text-left border border-gray-300 rounded-lg px-3 py-3 bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400",onClick:t[6]||(t[6]=o=>$.value?.toggle(o))},[e("div",de,a(f.value?new Date(f.value).toLocaleDateString("es-ES",{day:"numeric",month:"short"}):"Agregar fecha"),1)])]),k(y(W),{ref_key:"op",ref:$,appendTo:"body",class:"!w-auto"},{default:U(()=>[e("div",ue,[k(c,{modelValue:b.value,"onUpdate:modelValue":[t[7]||(t[7]=o=>b.value=o),z],range:"","min-date":new Date,inline:"","auto-apply":"",teleport:!1,locale:"es",format:"dd/MM/yyyy","preview-format":"dd/MM/yyyy",placeholder:"Selecciona fechas"},null,8,["modelValue","min-date"])])]),_:1},512)]),e("div",null,[t[37]||(t[37]=e("label",{class:"text-xs font-medium text-gray-700 block mb-1"},"HUÉSPEDES",-1)),e("button",{type:"button",class:"w-full text-left border border-gray-300 rounded-lg px-3 py-3 bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400",onClick:t[8]||(t[8]=o=>G.value?.toggle(o))},[e("div",me,a(h.value)+" huésped"+a(h.value>1?"es":""),1)]),k(y(W),{ref_key:"guestsOp",ref:G,appendTo:"body",class:"!w-auto"},{default:U(()=>[e("div",ve,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"¿Cuántos huéspedes?",-1)),e("div",fe,[e("div",ge,[t[32]||(t[32]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Adultos"),e("div",{class:"text-sm text-gray-500"},"13 años o más")],-1)),e("div",be,[e("button",{type:"button",onClick:t[9]||(t[9]=o=>R("adults")),class:"w-8 h-8 rounded-full border border-gray-300 hover:border-gray-400 flex items-center justify-center"},[...t[30]||(t[30]=[e("i",{class:"fa-solid fa-minus text-xs"},null,-1)])]),e("span",ye,a(y(d).guests.value?.adults||1),1),e("button",{type:"button",onClick:t[10]||(t[10]=o=>O("adults")),class:"w-8 h-8 rounded-full border border-gray-300 hover:border-gray-400 flex items-center justify-center"},[...t[31]||(t[31]=[e("i",{class:"fa-solid fa-plus text-xs"},null,-1)])])])]),e("div",he,[t[35]||(t[35]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Niños"),e("div",{class:"text-sm text-gray-500"},"2-12 años")],-1)),e("div",xe,[e("button",{type:"button",onClick:t[11]||(t[11]=o=>R("children")),class:"w-8 h-8 rounded-full border border-gray-300 hover:border-gray-400 flex items-center justify-center"},[...t[33]||(t[33]=[e("i",{class:"fa-solid fa-minus text-xs"},null,-1)])]),e("span",pe,a(y(d).guests.value?.children||0),1),e("button",{type:"button",onClick:t[12]||(t[12]=o=>O("children")),class:"w-8 h-8 rounded-full border border-gray-300 hover:border-gray-400 flex items-center justify-center"},[...t[34]||(t[34]=[e("i",{class:"fa-solid fa-plus text-xs"},null,-1)])])])])])])]),_:1},512)]),e("div",we,[!v.value||!f.value||!u.value?(r(),i("button",ke,a(u.value?"Selecciona fechas":"Selecciona una habitación"),1)):u.value&&!q.value?(r(),i("button",_e," Habitación no disponible ")):(r(),i("button",{key:2,onClick:J,type:"button",class:"w-full bg-[#FF385C] hover:bg-[#E31C5F] text-white rounded-lg py-3 font-semibold transition duration-200"}," Reservar "))])]),v.value&&f.value&&u.value?(r(),i("div",Ce,[e("div",Se,[e("div",De,[e("div",null,a(y(D).format(u.value.price_per_night))+" x "+a(I.value)+" noche"+a(I.value>1?"s":""),1),e("div",Ne,a(y(D).format(H.value)),1)]),e("div",Ae,[t[38]||(t[38]=e("div",null,"Total",-1)),e("div",null,a(y(D).format(H.value)),1)])])])):p("",!0),t[39]||(t[39]=e("p",{class:"mt-3 text-xs text-gray-500"},"Cancelación gratuita hasta 48 horas antes del check-in",-1))])])])])])],64)}}},es=nt(je,[["__scopeId","data-v-c8c68e9b"]]);export{es as default};

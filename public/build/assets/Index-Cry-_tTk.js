import{d as b,C as $,f as u,b as s,w as p,F as x,o as c,a as l,u as a,h as T,i as U,l as h,g as N,T as P}from"./app-DVQnLCkl.js";import{s as E}from"./index-T5qQ6n0c.js";import{_ as A}from"./Datatable-LqYA4U28.js";import{_ as m}from"./Input-BklkXTgX.js";import{_ as j}from"./Modal-BxIwX6g-.js";import{_ as z}from"./AppLayout-YP4rEI8y.js";import{a as D}from"./toasts-Bx7BVBCF.js";import{S as F}from"./sweetalert2.esm.all-IRYXxR_Z.js";import"./index-C3OSbQjT.js";import"./index-CqzgEXua.js";import"./index-BwNh9nKo.js";import"./index-D4F5mK1z.js";import"./index-BPUmTEhW.js";import"./index-DGaVbjUT.js";import"./index-dK09remB.js";import"./index-CHHjmjKb.js";import"./index-CiaD0d27.js";import"./index-DmD1s1tQ.js";import"./index-ByWXclLo.js";import"./index-BJ_iNMEj.js";import"./useCommonUtilities-NbiuDOAU.js";import"./postcss-mhbKUPOE.js";import"./index-DrcYV8cR.js";import"./index-vFOeZFY8.js";const G={class:"flex gap-x-4 w-full"},I={key:0,class:"mt-4 w-full col-sapn-1 md:col-span-3 border rounded-lg"},L={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},Q={class:"flex justify-between gap-x-4 px-2"},q={class:"flex gap-x-2"},ve={__name:"Index",props:{proveedores:Array},setup(_){const{toast:f}=D(),i=b(!1),g={action:()=>{i.value=!0,e.reset()}},w=[{action:t=>{i.value=!0,e.services=t.services.map(o=>o.pivot),e.id=t.id,e.nombre=t.nombre,e.direccion=t.direccion,e.telefono=t.telefono},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:t=>{F.fire({title:"Eliminar Proveedor",text:"Estas seguro de eliminar este proveedor?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(o=>{o.isConfirmed&&e.delete(route("proveedors.destroy",t.id),{onSuccess:()=>{f("error","Proveedor Eliminado")}})})},severity:"danger",icon:"fa-solid fa-trash text-sm"}],V=[{field:"nombre",header:"Nombre",filter:!0},{field:"direccion",header:"Direción",filter:!0},{field:"telefono",header:"Telefono",filter:!0}],v=b([]);(()=>{axios.get(route("get.services")).then(t=>{v.value=t.data.services})})();const e=$({id:null,nombre:"",direccion:"a.",telefono:"",services:[]}),y=()=>{e.services.push({service_id:"",value:""})},C=t=>{e.services.splice(t,1)},S=()=>{e.id?e.put(route("proveedors.update",e.id),{onSuccess:()=>{e.reset(),i.value=!1,f("success","Proveedor Actualizado")}}):e.post(route("proveedors.store"),{onSuccess:()=>{e.reset(),f("success","Proveedor Creado")}})};return(t,o)=>{const n=E,k=P;return c(),u(x,null,[s(z,null,{default:p(()=>[s(A,{data:_.proveedores,actions:w,columnas:V,add:g,title:"proveedores"},null,8,["data"])]),_:1}),s(j,{visible:i.value,"onUpdate:visible":o[4]||(o[4]=r=>i.value=r),"close-on-escape":"true",title:"Añadir Proveedor"},{footer:p(()=>[l("div",q,[s(n,{severity:"success",label:"Guardar",onClick:S}),s(n,{severity:"danger",label:"Cancelar",onClick:o[3]||(o[3]=r=>i.value=!1)})])]),default:p(()=>[l("div",G,[s(m,{label:"Nombre",class:"w-full",modelValue:a(e).nombre,"onUpdate:modelValue":o[0]||(o[0]=r=>a(e).nombre=r)},null,8,["modelValue"]),s(m,{label:"Telefono",class:"w-full",modelValue:a(e).telefono,"onUpdate:modelValue":o[1]||(o[1]=r=>a(e).telefono=r)},null,8,["modelValue"])]),t.$page.props.auth.user.rol=="admin"?(c(),u("div",I,[l("h1",L,[o[5]||(o[5]=T(" Servicios ")),s(n,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:o[2]||(o[2]=r=>y())})]),o[6]||(o[6]=l("div",{class:"flex justify-between w-full font-bold px-2"},[l("label",{for:""},"Servicio"),l("label",{for:""},"Tarifa"),l("label",{for:""},".")],-1)),(c(!0),u(x,null,U(a(e).services,(r,B)=>(c(),u("div",Q,[s(m,{type:"dropdown",modelValue:r.service_id,"onUpdate:modelValue":d=>r.service_id=d,"option-label":"title","option-value":"id",class:"w-full",options:v.value},null,8,["modelValue","onUpdate:modelValue","options"]),s(m,{type:"number",mode:"currency",class:"w-full",modelValue:r.value,"onUpdate:modelValue":d=>r.value=d},null,8,["modelValue","onUpdate:modelValue"]),h(s(n,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:d=>C(B)},null,8,["onClick"]),[[k,"Quitar"]])]))),256))])):N("",!0)]),_:1},8,["visible"])],64)}}};export{ve as default};

import{d as b,T as B,o as c,f as u,b as l,w as v,F as _,a as i,u as a,h as $,i as T,k as U,g as N,z as P}from"./app-DcKkdd7B.js";import{s as E}from"./index-GIOzZJbj.js";import{_ as z}from"./Datatable-DtLPD3WH.js";import{_ as f}from"./Input-CFPt19Rw.js";import{_ as A}from"./Modal-B7C0T8B3.js";import{_ as j}from"./AppLayout-CfaWLqnS.js";import{S as D,a as F}from"./toasts-DRkOXQyQ.js";import"./index-De4NZYjZ.js";import"./index-wHY618X2.js";import"./index-CN-yxE0C.js";import"./index-BZka6Sip.js";import"./postcss-D_olGDFz.js";const G={class:"flex gap-x-4 w-full"},I={key:0,class:"mt-4 w-full col-sapn-1 md:col-span-3 border rounded-lg"},L={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},Q=i("div",{class:"flex justify-between w-full font-bold px-2"},[i("label",{for:""},"Servicio"),i("label",{for:""},"Tarifa"),i("label",{for:""},".")],-1),q={class:"flex justify-between gap-x-4 px-2"},H={class:"flex gap-x-2"},le={__name:"Index",props:{proveedores:Array},setup(x){const{toast:m}=F(),r=b(!1),g={action:()=>{r.value=!0,e.reset()}},w=[{action:s=>{r.value=!0,e.services=s.services.map(o=>o.pivot),e.id=s.id,e.nombre=s.nombre,e.direccion=s.direccion,e.telefono=s.telefono},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:s=>{D.fire({title:"Eliminar Proveedor",text:"Estas seguro de eliminar este proveedor?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(o=>{o.isConfirmed&&e.delete(route("proveedors.destroy",s.id),{onSuccess:()=>{m("error","Proveedor Eliminado")}})})},severity:"danger",icon:"fa-solid fa-trash text-sm"}],V=[{field:"nombre",header:"Nombre",filter:!0},{field:"direccion",header:"Direción",filter:!0},{field:"telefono",header:"Telefono",filter:!0}],p=b([]);(()=>{axios.get(route("get.services")).then(s=>{p.value=s.data.services})})();const e=B({id:null,nombre:"",direccion:"a.",telefono:"",services:[]}),y=()=>{e.services.push({service_id:"",value:""})},C=s=>{e.services.splice(s,1)},S=()=>{e.id?e.put(route("proveedors.update",e.id),{onSuccess:()=>{r.value=!1,m("success","Proveedor Actualizado")}}):e.post(route("proveedors.store"),{onSuccess:()=>{r.value=!1,m("success","Proveedor Creado")}})};return(s,o)=>{const n=E,h=P;return c(),u(_,null,[l(j,null,{default:v(()=>[l(z,{data:x.proveedores,actions:w,columnas:V,add:g,title:"proveedores"},null,8,["data"])]),_:1}),l(A,{visible:r.value,"onUpdate:visible":o[4]||(o[4]=t=>r.value=t),"close-on-escape":"true",title:"Añadir Proveedor"},{footer:v(()=>[i("div",H,[l(n,{severity:"success",label:"Guardar",onClick:S}),l(n,{severity:"danger",label:"Cancelar",onClick:o[3]||(o[3]=t=>r.value=!1)})])]),default:v(()=>[i("div",G,[l(f,{label:"Nombre",class:"w-full",modelValue:a(e).nombre,"onUpdate:modelValue":o[0]||(o[0]=t=>a(e).nombre=t)},null,8,["modelValue"]),l(f,{label:"Telefono",class:"w-full",modelValue:a(e).telefono,"onUpdate:modelValue":o[1]||(o[1]=t=>a(e).telefono=t)},null,8,["modelValue"])]),s.$page.props.auth.user.rol=="admin"?(c(),u("div",I,[i("h1",L,[$(" Servicios "),l(n,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:o[2]||(o[2]=t=>y())})]),Q,(c(!0),u(_,null,T(a(e).services,(t,k)=>(c(),u("div",q,[l(f,{type:"dropdown",modelValue:t.service_id,"onUpdate:modelValue":d=>t.service_id=d,"option-label":"title","option-value":"id",class:"w-full",options:p.value},null,8,["modelValue","onUpdate:modelValue","options"]),l(f,{type:"number",mode:"currency",class:"w-full",modelValue:t.value,"onUpdate:modelValue":d=>t.value=d},null,8,["modelValue","onUpdate:modelValue"]),U(l(n,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:d=>C(k)},null,8,["onClick"]),[[h,"Quitar"]])]))),256))])):N("",!0)]),_:1},8,["visible"])],64)}}};export{le as default};

import{aS as N,d as w,p as j,aT as h,u as B,c as T,o as c,w as g,a as t,f as v,g as $,b as s,h as a,t as M,i as z,F,j as A,E as _,G as I,T as E}from"./app-CO2pXAFK.js";import{s as O}from"./index-DJH8kuw1.js";import{b as G}from"./postcss-C8rlgTwZ.js";import{_ as d}from"./Input-COCQYZLT.js";import{_ as H}from"./Modal-D_hWrZXr.js";import{a as L}from"./toasts-CAnEIL5D.js";import{S as Q}from"./Service-DAOfJ1hP.js";import"./index-BJilDPEX.js";import"./index-ZZTcrTT7.js";import"./index-D8lSORTz.js";import"./index-CXBQC7LW.js";import"./index-D9n0jIi1.js";import"./index-RcVPvK9T.js";import"./index-CMx_JThN.js";import"./index-B2SJo8Sy.js";import"./index-B0AQdf19.js";import"./index-bMkFRN2T.js";import"./index-BaxX5s92.js";import"./postcss-BR_dbVUd.js";import"./index-FCSJMYSN.js";import"./index-D7OYmBl0.js";import"./index-NJaL8BOG.js";import"./index-DRYGQQRZ.js";import"./index-BOxmnxCv.js";import"./index-Cf8X3upF.js";import"./useCommonUtilities-BgDhORlD.js";import"./index-CoLOoJuq.js";import"./index-CwWRi2Zp.js";import"./index-DuXQRe0I.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";import"./GeneralService-WbehxH9x.js";import"./Toats-CRqRGqmn.js";import"./searchStore-Bu_jIkzN.js";const R={class:"flex gap-4"},W={class:"flex flex-col w-1/3 gap-y-4"},q={class:"flex flex-col"},J={class:"rounded-md border border-gray-100 bg-white p-4 shadow-md"},K={for:"upload",class:"flex flex-col items-center gap-2 cursor-pointer"},X={class:"text-gray-600 font-medium text-sm truncate w-full"},Y={class:"flex flex-wrap gap-4 w-full justify-between"},Z={class:"flex items-center gap-2"},ee={class:"flex items-center gap-2"},oe={key:0,class:"w-2/3 col-sapn-1 md:col-span-3 border rounded-lg"},le={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},te={class:"h-[50vh] overflow-y-auto"},ae={class:"justify-between w-full px-2 gap-x-2 grid grid-cols-8"},se=["onUpdate:modelValue"],ie={class:"flex gap-x-2"},Ee={__name:"Form",props:N({proveedor:Object},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(f){const{toast:b}=L(),x=w([]),n=f,y=new Q;j(async()=>{x.value=await y.getServices()});const i=w(n.proveedor?.type_penalidad_cost??"Dinero"),p=h(f,"modelValue",!1),l=B({id:n.proveedor?.id??"",nombre:n.proveedor?.nombre??"",direccion:"a.",nit:n.proveedor?.nit??"",telefono:n.proveedor?.telefono??"",type_penalidad_cost:n.proveedor?.type_penalidad_cost??"Dinero",penalidad_no_show:n.proveedor?.penalidad_no_show??0,penalidad_cancelacion:n.proveedor?.penalidad_cancelacion??0,services:n.proveedor?.services.map(r=>r.pivot)??[],cuenta:null,account_number:n.proveedor?.account_number??""}),C=()=>{l.services.push({service_id:"",concepto:"",value:""})},D=r=>{l.services.splice(r,1)},k=()=>{l.type_penalidad_cost=i.value,l.id?l.put(route("proveedors.update",l.id),{onSuccess:()=>{l.reset(),p.value=!1,b("success","Proveedor Actualizado")}}):l.post(route("proveedors.store"),{onSuccess:()=>{l.reset(),b("success","Proveedor Creado")}})},U=r=>{l.cuenta=r.target.files[0]};return(r,e)=>{const V=G,m=O,S=E;return c(),T(H,{visible:p.value,"onUpdate:visible":e[10]||(e[10]=o=>p.value=o),"close-on-escape":!0,title:"Añadir Proveedor",width:"80vw"},{footer:g(()=>[t("div",ie,[s(m,{severity:"success",label:"Guardar",onClick:k}),s(m,{severity:"danger",label:"Cancelar",onClick:e[9]||(e[9]=o=>p.value=!1)})])]),default:g(()=>[t("div",R,[t("div",W,[e[15]||(e[15]=t("h1",{class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"}," Datos del Proveedor ",-1)),s(d,{label:"Nombre",class:"w-full",modelValue:a(l).nombre,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).nombre=o)},null,8,["modelValue"]),s(d,{label:"NIT",class:"w-full",modelValue:a(l).nit,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).nit=o)},null,8,["modelValue"]),s(d,{label:"Telefono",class:"w-full",modelValue:a(l).telefono,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).telefono=o)},null,8,["modelValue"]),s(d,{label:"Número de Cuenta Bancanria",class:"w-full",modelValue:a(l).account_number,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).account_number=o)},null,8,["modelValue"]),t("div",q,[t("div",J,[t("label",K,[e[11]||(e[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 fill-white stroke-indigo-500",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",X,M(a(l).cuenta?a(l).cuenta.name:"Seleccionar Camara de Comercio"),1)]),t("input",{id:"upload",accept:".pdf",onChange:U,type:"file",class:"hidden"},null,32)])]),t("div",Y,[e[14]||(e[14]=t("label",{for:""},"Politicas",-1)),t("div",Z,[s(V,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value=o),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),e[12]||(e[12]=t("label",{for:"Dinero"},"Dinero",-1))]),t("div",ee,[s(V,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value=o),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje",size:"Normal"},null,8,["modelValue"]),e[13]||(e[13]=t("label",{for:"Porcentaje",class:"text-sm"},"Porcentaje",-1))])]),s(d,{label:"Penalización por NO SHOW",type:"number",modelValue:a(l).penalidad_no_show,"onUpdate:modelValue":e[6]||(e[6]=o=>a(l).penalidad_no_show=o),mode:i.value=="Dinero"?"currency":"decimal",suffix:i.value=="Dinero"?"":"%",min:"0",max:i.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"]),s(d,{label:"Penalización por CANCELACIÓN",type:"number",modelValue:a(l).penalidad_cancelacion,"onUpdate:modelValue":e[7]||(e[7]=o=>a(l).penalidad_cancelacion=o),mode:i.value=="Dinero"?"currency":"decimal",suffix:i.value=="Dinero"?"":"%",min:"0",max:i.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"])]),r.$page.props.auth.user.rol=="admin"||r.$page.props.auth.user.rol=="superadmin"?(c(),v("div",oe,[t("h1",le,[e[16]||(e[16]=z(" Servicios ",-1)),s(m,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:e[8]||(e[8]=o=>C())})]),e[17]||(e[17]=t("div",{class:"grid grid-cols-8 w-full font-bold px-2 text-left"},[t("div",{class:"col-span-3 w-full"},"Servicio"),t("div",{class:"col-span-2"},"Concepto"),t("div",{class:""},"Tarifa"),t("div",{class:""})],-1)),t("div",te,[(c(!0),v(F,null,A(a(l).services,(o,P)=>(c(),v("div",ae,[s(d,{type:"dropdown",class:"col-span-3",modelValue:o.service_id,"onUpdate:modelValue":u=>o.service_id=u,"option-label":"title","option-value":"id",options:x.value},null,8,["modelValue","onUpdate:modelValue","options"]),s(d,{class:"w-full col-span-2",modelValue:o.concept,"onUpdate:modelValue":u=>o.concept=u},null,8,["modelValue","onUpdate:modelValue"]),_(t("input",{type:"number",class:"w-full rounded-md h-10 col-span-2","onUpdate:modelValue":u=>o.value=u},null,8,se),[[I,o.value]]),_(s(m,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:u=>D(P)},null,8,["onClick"]),[[S,"Quitar"]])]))),256))])])):$("",!0)])]),_:1},8,["visible"])}}};export{Ee as default};

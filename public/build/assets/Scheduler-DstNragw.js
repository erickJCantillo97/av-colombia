import{ar as le,as as q,at as gt,au as Tr,P as D,R as ti,O as lt,$ as zr,av as xe,a5 as mt,aw as te,ab as Or,ax as G,ay as M,az as wi,aA as et,ac as S,Q as Y,ad as hn,aB as pn,aC as Er,aD as Dr,aE as E,U as d,aF as ke,aG as Xa,aH as Es,aI as Ar,ag as Si,aJ as Za,aK as Rt,aL as qi,a2 as W,N as $t,a3 as ii,a4 as xi,aM as Ci,af as Ir,W as pe,aN as _i,aO as Gi,aP as Ht,aQ as wt,a1 as yt,Z as P,aR as Ka,aS as Pt,aT as Ds,aU as x,aV as cn,aW as un,aX as Ja,aY as ye,aZ as Qa,a_ as O,a$ as Ie,b0 as $,b1 as xr,b2 as Yi,V as b,b3 as we,b4 as Mr,b5 as gi,b6 as it,b7 as eo,b8 as As,b9 as to,ba as tt,bb as he,bc as Se,bd as _,be as Xt,bf as ae,bg as Oe,bh as Lr,bi as Is,bj as io,bk as dn,bl as fn,bm as vn,bn as gn,bo as Mi,bp as Xe,bq as ro,br as I,bs as Le,bt as no,bu as so,bv as rt,bw as He,bx as xs,by as Pe,bz as Ms,bA as Zt,bB as Ue,bC as ve,bD as Ti,bE as Ls,bF as ao,bG as Fs,bH as Fr,bI as oo,bJ as ze,bK as Kt,bL as bt,bM as mi,bN as lo,bO as _t,bP as ho,bQ as ks,bR as po,bS as co,bT as qr,bU as uo,bV as ht,bW as Ft,bX as Ze,bY as mn,bZ as fo,b_ as vo,b$ as go,c0 as mo,c1 as yo,c2 as bo,c3 as ue,c4 as Bs,c5 as Li,c6 as Rs,c7 as wo,c8 as Oi,c9 as ri,ca as Gt,cb as Ce,cc as So,cd as Co,ce as Hs,cf as Jt,cg as To,ch as Oo,ci as Me,cj as Qt,ck as Eo,cl as Do,cm as Ao,cn as nt,co as st,cp as at,cq as _r,cr as yn,cs as Fi,ct as Io,cu as bn,cv as Ei,cw as kr,cx as $i,cy as ki,cz as xo,cA as Bi,cB as Gr,cC as Ps,cD as Br,cE as Rr,cF as Vs,cG as Mo,cH as Lo,cI as Hr,cJ as Fo,cK as de,cL as Di,cM as Ai,cN as Ns,cO as ko,cP as js,cQ as Yr,cR as Ws,cS as Pr,cT as wn,cU as Vr,cV as Yt,cW as Bo,cX as Sn,cY as Ro,cZ as Nr,c_ as Ho,c$ as jr,d0 as Po,d1 as Cn,d2 as Tn,d3 as ei,d4 as On,d5 as Vo,d6 as No,d7 as jo,d8 as Wo,d9 as $e,da as En,db as Us,dc as Uo,dd as zs,de as zo,df as Wr,dg as qs,dh as qo,di as _o,dj as Dn,dk as An,dl as Go,dm as yi,dn as $r,dp as In,dq as xn,dr as si,ds as Yo,dt as Xi,du as Ur,dv as $o,ae as Xr,dw as Mn,dx as Ln,aa as Xo,ah as Fe,ak as qe,al as _e,ai as H,aj as Ve,am as ot,dy as Zo,dz as Ko,dA as Jo,dB as Qo,dC as _s,dD as el,dE as tl,dF as il,dG as rl,dH as nl,e as Vt,f as sl,o as al,a as St,b as Ke,w as Zi,dI as Fn,a8 as ol,dJ as ll}from"./app-BfZSdNPx.js";import{_ as hl}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Ne(o,i,e,t,r,n){var s,a,h=i.parentElement;if(t==="vscroll"?(s=n||i.getBoundingClientRect().height,a=e.getBoundingClientRect().height):(s=i.getBoundingClientRect().width,a=e.getBoundingClientRect().width),s<a)return kn(o,i,e,t,r,n);if(h){var l=h.getBoundingClientRect().width;return l<s&&t==="hscroll"?(a=l,i.style.maxWidth=l+"px",kn(o,i,e,t,r,n)):e}else return e}function kn(o,i,e,t,r,n){var s=o("div",{className:"e-menu-"+t});i.appendChild(s),s.appendChild(e),n?(s.style.overflow="hidden",s.style.height=n+"px"):(s.style.maxHeight=i.style.maxHeight,i.style.overflow="hidden");var a;return t==="vscroll"?(a=new gt({enableRtl:r},s),a.scrollStep=le(".e-"+t+"-bar",i).offsetHeight/2):(a=new Tr({enableRtl:r},s),a.scrollStep=le(".e-"+t+"-bar",i).offsetWidth),s}function Je(o,i,e){if(o){var t=le(".e-menu-parent",i);t?(o.destroy(),i.parentElement.appendChild(t),q(i)):(o.destroy(),q(i))}}var Ri=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),U=function(o,i,e,t){var r=arguments.length,n=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,i,e,t);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(i,e,n):s(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},ai="enter",Ki="escape",Q="e-focused",oi="e-menu-header",X="e-selected",Nt="e-separator",Ct="uparrow",Be="downarrow",pt="leftarrow",Ge="rightarrow",Tt="home",li="end",hi="tab",Ji="e-caret",Ot="e-menu-item",Qi="e-disabled",pi="e-menu-hide",er="e-icons",tr="e-rtl",Et="e-menu-popup",pl="Template",cl=function(o){Ri(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return U([D("id")],i.prototype,"itemId",void 0),U([D("parentId")],i.prototype,"parentId",void 0),U([D("text")],i.prototype,"text",void 0),U([D("iconCss")],i.prototype,"iconCss",void 0),U([D("url")],i.prototype,"url",void 0),U([D("separator")],i.prototype,"separator",void 0),U([D("items")],i.prototype,"children",void 0),i}(lt),bi=function(o){Ri(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return U([D(null)],i.prototype,"iconCss",void 0),U([D("")],i.prototype,"id",void 0),U([D(!1)],i.prototype,"separator",void 0),U([ti([],i)],i.prototype,"items",void 0),U([D("")],i.prototype,"text",void 0),U([D("")],i.prototype,"url",void 0),U([D()],i.prototype,"htmlAttributes",void 0),i}(lt),ul=function(o){Ri(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return U([D("SlideDown")],i.prototype,"effect",void 0),U([D(400)],i.prototype,"duration",void 0),U([D("ease")],i.prototype,"easing",void 0),i}(lt),dl=function(o){Ri(i,o);function i(e,t){var r=o.call(this,e,t)||this;return r.navIdx=[],r.animation=new zr({}),r.isTapHold=!1,r.tempItem=[],r.showSubMenuOn="Auto",r.isAnimationNone=!1,r}return i.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if(this.element.tagName==="EJS-CONTEXTMENU"){e=this.createElement("ul",{id:xe(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=mt("ej2_instances",this.element);te([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,Or("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:xe(this.getModuleName())}),G([].slice.call(this.element.cloneNode(!0).children),e);var r=this.element.nextElementSibling;r?this.element.parentElement.insertBefore(e,r):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if(this.element.tagName==="EJS-MENU"){for(var n=this.element,s=mt("ej2_instances",n),e=this.createElement("ul"),a=this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"}),h=0,l=n.attributes.length;h<l;h++)e.setAttribute(n.attributes[h].nodeName,n.attributes[h].nodeValue);n.parentNode.insertBefore(a,n),q(n),n=e,a.appendChild(n),Or("ej2_instances",s,n),this.clonedElement=a,this.element=n,this.element.id||(this.element.id=xe(this.getModuleName()))}},i.prototype.render=function(){var e=this;this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();var t=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(function(){Ne(e.createElement,t,e.element,"hscroll",e.enableRtl)})},i.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&M([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&e.classList.add(tr),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e)),this.defaultOption=this.showItemOnClick},i.prototype.renderItems=function(){if(!this.items.length){var e=wi.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),this.element.innerHTML=""}var t=this.createItems(this.items);if(G(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu){if(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling){var r=this.getWrapper();this.element.classList.contains("e-vertical")?Ne(this.createElement,r,this.element,"vscroll",this.enableRtl):Ne(this.createElement,r,this.element,"hscroll",this.enableRtl)}}else this.element.parentElement.setAttribute("role","dialog"),this.element.parentElement.setAttribute("aria-label","context menu")},i.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,r=et(this.target),n=0,s=r.length;n<s;n++)t=r[n],this.isMenu?S.add(t,"click",this.menuHeaderClickHandler,this):Y.isIos?new hn(t,{tapHold:this.touchHandler.bind(this)}):S.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){S.add(this.targetElement,"scroll",this.scrollHandler,this);for(var a=0,h=pn(this.targetElement);a<h.length;a++){var l=h[a];S.add(l,"scroll",this.scrollHandler,this)}}}Y.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),S.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),S.add(document,"mousedown",this.delegateMouseDownHandler,this),S.add(document,"keydown",this.domKeyHandler,this),!this.isMenu&&!this.target&&S.add(document,"scroll",this.scrollHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),S.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=Er(e,{selector:"."+Ot})},i.prototype.wireKeyboardEvent=function(e){var t={downarrow:Be,uparrow:Ct,enter:ai,leftarrow:pt,rightarrow:Ge,escape:Ki};this.isMenu&&(t.home=Tt,t.end=li,t.tab=hi),new Dr(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},i.prototype.mouseDownHandler=function(e){E(e.target,".e-"+this.getModuleName()+"-wrapper")!==this.getWrapper()&&!E(e.target,".e-"+this.getModuleName()+"-popup")&&this.closeMenu(this.isMenu?null:this.navIdx.length,e)},i.prototype.keyHandler=function(e){(e.keyCode===38||e.keyCode===40)&&e.target&&(e.target.classList.contains("e-contextmenu")||e.target.classList.contains("e-menu-item"))&&e.preventDefault()},i.prototype.domKeyHandler=function(e){e.keyCode===27&&(this.isMenuVisible()&&e.stopImmediatePropagation(),e.action=Ki,this.leftEscKeyHandler(e))},i.prototype.keyBoardHandler=function(e){var t="",r=e.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&e.keyCode===13&&r.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Q,X],[E(r,".e-"+this.getModuleName()+"-wrapper")]),n)switch(e.action){case Ge:t=Ge,e.action=Be;break;case pt:t=pt,e.action=Ct;break;case Be:t=Be,e.action=Ge;break;case Ct:t=Ct,e.action="";break}else if(this.enableRtl)switch(e.action){case pt:n=!0,t=pt,e.action=Ge;break;case Ge:n=!0,t=Ge,e.action=pt;break}switch(e.action){case Be:case Ct:case li:case Tt:case hi:this.upDownKeyHandler(e);break;case Ge:this.rightEnterKeyHandler(e);break;case pt:this.leftEscKeyHandler(e);break;case ai:this.hamburgerMode&&r.tagName==="SPAN"&&r.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break}n&&(e.action=t)},i.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),r=e.action===Be||e.action===Tt||e.action===hi?0:t.childElementCount-1,n=r,s=this.getLIByClass(t,Q);s&&(e.action!==li&&e.action!==Tt&&(n=this.getIdx(t,s)),s.classList.remove(Q),e.action!==li&&e.action!==Tt&&(e.action===Be?n++:n--,n===(e.action===Be?t.childElementCount:-1)&&(n=r)));var a=t.children[n];n=this.isValidLI(a,n,e.action),t.children[n].classList.add(Q),t.children[n].focus()},i.prototype.isValidLI=function(e,t,r){var n=this.getUlByNavIdx(),s=r===Be||r===Tt||r===hi?0:n.childElementCount-1;return(e.classList.contains(Nt)||e.classList.contains(Qi)||e.classList.contains(pi))&&(r===Be&&t===n.childElementCount-1||r===Ct&&t===0?t=s:r===Be||r===Ge||r==="tab"&&e.classList.contains(Nt)?t++:t--),e=n.children[t],e&&(e.classList.contains(Nt)||e.classList.contains(Qi)||e.classList.contains(pi))&&(t=this.isValidLI(e,t,r)),t},i.prototype.getUlByNavIdx=function(e){var t=this;if(e===void 0&&(e=this.navIdx.length),this.isMenu){var r=[this.getWrapper()].concat([].slice.call(et("."+Et)))[e],n=[],s=et("."+Et);return s.forEach(function(a){(t.element.id===a.id.split("-")[2]||a.id.split("-")[2]+"-"+a.id.split("-")[3])&&n.push(a)}),r=[this.getWrapper()].concat([].slice.call(n))[e],d(r)?null:le(".e-menu-parent",r)}else return!document.body.contains(this.element)&&e===0?null:this.getWrapper().children[e]},i.prototype.rightEnterKeyHandler=function(e){var t,r=this.getUlByNavIdx(),n=this.getLIByClass(r,Q);if(n){var s=this.getIdx(r,n),a=this.navIdx.concat(s),h=this.getItem(a);if(h.items.length)this.navIdx.push(s),this.keyType="right",this.action=e.action,this.openMenu(n,h,-1,-1,e);else if(e.action===ai){this.isMenu&&this.navIdx.length===0?this.removeLIStateByClass([X],[this.getWrapper()]):n.classList.remove(Q),n.classList.add(X),t={element:n,item:h,event:e},this.trigger("select",t);var l=n.querySelector(".e-menu-url");if(h.url&&l)switch(l.getAttribute("target")){case"_blank":window.open(h.url,"_blank");break;case"_parent":window.parent.location.href=h.url;break;default:window.location.href=h.url}this.closeMenu(null,e);var p=this.getLIByClass(this.getUlByNavIdx(),X);p&&(p.classList.add(Q),p.focus())}}},i.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):e.action===Ki&&this.closeMenu(null,e)},i.prototype.scrollHandler=function(e){this.closeMenu(null,e)},i.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},i.prototype.cmenuHandler=function(e){e.preventDefault(),this.currentTarget=e.target,this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},i.prototype.closeMenu=function(e,t,r){var n=this;if(e===void 0&&(e=0),t===void 0&&(t=null),this.isMenuVisible()){var s=void 0,a,h=this.getWrapper(),l=void 0,p,u=this.getPopups(),c=!1,f=this.isMenu?u.length+1:h.childElementCount,g=this.isMenu&&f!==1?le(".e-ul",u[f-2]):et(".e-menu-parent",h)[f-1];if(this.isMenu&&g.classList.contains("e-menu")&&(s=this.getLIByClass(g,X),s&&s.classList.remove(X),c=!0),!c){var v=t&&t.target&&this.getLI(t.target);v?this.cli=v:this.cli=g.children[0],a=this.navIdx.length?this.getItem(this.navIdx):null,p=a?a.items:this.items,l={element:g,parentItem:a,items:p,event:t,cancel:!1,isFocused:!0},this.trigger("beforeClose",l,function(m){var y,w,C="",T,A=!m.cancel;(A||n.isCMenu)&&(n.isMenu?(y=E(g,"."+Et),n.hamburgerMode&&(y.parentElement.style.minHeight="",E(g,".e-menu-item").setAttribute("aria-expanded","false")),n.unWireKeyboardEvent(y),Je(ke(y.children[0],gt),y.children[0]),T=ke(y,Ar),T.hide(),C=y.id,T.destroy(),q(y)):(n.isContextMenuClosed=!1,n.toggleAnimation(g,!1)),w={element:g,parentItem:a,items:p},n.trigger("onClose",w),n.navIdx.pop(),n.navIdx.length===0&&t&&t.type==="keyup"&&(n.showSubMenu=!1),n.isMenu||(S.remove(g,"keydown",n.keyHandler),n.keyType==="right"&&(n.keyType=""))),n.updateReactTemplate();var L,k,R,N=n.getWrapper()&&n.getUlByNavIdx();if(n.isCMenu&&(n.canOpen(t.target)&&n.openMenu(null,null,n.pageY,n.pageX,t),n.isCMenu=!1),n.isMenu&&N&&C.length){var F=RegExp;L=new F("(.*)-ej2menu-"+n.element.id+"-popup").exec(C)[1],k=N.querySelector('[id="'+L+'"]'),R=v&&N.querySelector('[id="'+v.id+'"]')}else N&&(k=N.querySelector(".e-menu-item.e-selected"),R=v&&N.querySelector('[id="'+v.id+'"]'));var j=v&&v.querySelectorAll(".e-menu-item");if(A&&n.hamburgerMode&&e&&!j.length)n.afterCloseMenu(t);else if(A&&!n.hamburgerMode&&k&&!R&&n.keyType!=="left"&&(n.navIdx.length||!n.isMenu&&n.navIdx.length===0)){var z=t&&t.target.classList&&(t.target.classList.contains("e-vscroll")||t.target.classList.contains("e-scroll-nav"))?E(t.target,".e-menu-wrapper"):null;z?(z=z.querySelector(".e-menu-item"),(n.showItemOnClick||z&&n.getIndex(z.id,!0).length<=n.navIdx.length)&&n.closeMenu(n.navIdx[n.navIdx.length-1],t,!0)):t&&t.target.classList&&t.target.classList.contains("e-nav-arrow")||n.closeMenu(n.navIdx[n.navIdx.length-1],t)}else if(A&&!r&&!e&&(n.hamburgerMode&&n.navIdx.length||n.navIdx.length===1&&v&&N!==v.parentElement))n.closeMenu(null,t);else if(A&&d(e)&&n.navIdx.length)n.closeMenu(null,t);else if(A&&!n.isMenu&&!e&&n.navIdx.length===0&&!n.isMenusClosed&&!n.isCmenuHover)n.isMenusClosed=!0,n.closeMenu(0,t);else if(A&&n.isMenu&&t&&t.target&&n.navIdx.length!==0&&E(t.target,".e-menu-parent.e-control"))n.closeMenu(0,t);else if(A&&!n.isMenu&&et(".e-menu-parent",h)[e-1]&&t.which===3)n.closeMenu(null,t);else{if(A&&(n.keyType==="right"||n.keyType==="click"))n.afterCloseMenu(t);else{var K=n.getUlByNavIdx(),V=n.getLIByClass(K,X);if(V&&(V.setAttribute("aria-expanded","false"),V.classList.remove(X),(m.isFocused&&v||n.keyType==="left")&&(V.classList.add(Q),(!t.target||!t.target.classList.contains("e-edit-template"))&&V.focus())),!A&&n.hamburgerMode&&v&&v.getAttribute("aria-expanded")==="false"&&v.getAttribute("aria-haspopup")==="true"){E(v,".e-menu-parent.e-control")?n.navIdx=[]:n.navIdx.pop(),n.navIdx.push(n.cliIdx);var ne=n.getItem(n.navIdx);v.setAttribute("aria-expanded","true"),n.openMenu(v,ne,-1,-1,t)}}n.navIdx.length<1&&(n.showSubMenuOn==="Hover"||n.showSubMenuOn==="Click")&&(n.showItemOnClick=n.defaultOption,n.showSubMenuOn="Auto")}n.removeStateWrapper()})}}},i.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&this.navIdx.length===0){var e=void 0;this.portals&&(e=this.portals.splice(0,this.items.length)),this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}},i.prototype.getMenuItemModel=function(e,t){if(d(e))return null;d(t)&&(t=0);var r=this.getFields(t);return{text:e[r.text],id:e[r.id],items:e[r.child],separator:e[r.separator],iconCss:e[r.iconCss],url:e[r.url]}},i.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll("."+Et)).forEach(function(r){!d(r.querySelector("."+Ot))&&e.getIndex(r.querySelector("."+Ot).id,!0).length&&t.push(r)}),t},i.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&Xa(this.element).valueOf()},i.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var r=this.filter.split(" "),n=0,s=r.length;n<s;n++)if(E(e,"."+r[n])){t=!0;break}}return t},i.prototype.openMenu=function(e,t,r,n,s,a){var h=this;r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=null),a===void 0&&(a=this.targetElement);var l=this.getWrapper();this.lItem=e;var p=this.element.id!==""?this.element.id:"menu";if(this.isMenusClosed=!1,d(r)&&(r=-1),d(n)&&(n=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&Y.isDevice){l.lastChild.style.display="none";var u={text:t[this.getField("text")].toString(),iconCss:er+" e-previous"};this.template&&(t.iconCss=(t.iconCss||"")+er+" e-previous");var c=new bi(this.items[0],"items",this.template?t:u,!0),f=this.createItems([c]).children[0];f.classList.add(oi),this.uList.insertBefore(f,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+Et,id:e.id+"-ej2menu-"+p+"-popup"}),this.popupWrapper.setAttribute("role","navigation"),this.popupWrapper.setAttribute("aria-label",t.text+"-menu-popup"),this.hamburgerMode?(r=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||this.navIdx.length!==1,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&M([this.popupWrapper],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.popupObj.hide()),!this.hamburgerMode&&!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){h.triggerBeforeOpen(e,h.uList,t,s,0,0,"menu")},this.hoverDelay)):this.triggerBeforeOpen(e,this.uList,t,s,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,l.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){h.triggerBeforeOpen(e,h.uList,t,s,r,n,"none")},this.hoverDelay)):this.triggerBeforeOpen(e,this.uList,t,s,r,n,"none"))}else if(this.uList=this.element,this.uList.style.zIndex=Es(a||this.element).toString(),d(s)){var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!1);var v=this.copyObject(g,{});v.target=v.srcElement=a,v.currentTarget=a,this.triggerBeforeOpen(e,this.uList,t,v,r,n,"none")}else this.triggerBeforeOpen(e,this.uList,t,s,r,n,"none")},i.prototype.copyObject=function(e,t){for(var r in e)t[""+r]=e[""+r];return t},i.prototype.calculateIndentSize=function(e,t){var r=getComputedStyle(t),n=parseInt(r.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?n*=2:n+=n/4,e.style.textIndent=n+"px";var s=e.querySelectorAll(".e-blankicon");if(s&&s.length)for(var a=e.querySelector(".e-menu-icon"),h=getComputedStyle(a),l=parseInt(h.marginRight,10)+a.offsetWidth+n,p=0;p<s.length;p++)s[p].style.textIndent=l+"px"},i.prototype.generatePopup=function(e,t,r,n){var s=this,a=new Ar(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:r,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:function(){var h=le(".e-menu-vscroll",a.element);h&&(h.style.height="inherit",h.style.maxHeight="");var l=le(".e-ul",a.element);a.element.style.maxHeight="",l.focus(),s.triggerOpen(l)}});return a},i.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),r=this.enableHtmlSanitizer?Si.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:r}),s=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(n),t.appendChild(s),e.insertBefore(t,this.element)},i.prototype.openHamburgerMenu=function(e){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")},i.prototype.closeHamburgerMenu=function(e){var t=this,r={element:this.element,parentItem:null,event:e,items:this.items,cancel:!1};this.trigger("beforeClose",r,function(n){n.cancel||(t.closeMenu(null,e),t.element.classList.add("e-hide-menu"),t.trigger("onClose",{element:t.element,parentItem:null,items:t.items}))})},i.prototype.callFit=function(e,t,r,n,s){return Za(e,null,{X:t,Y:r},{top:n,left:s})},i.prototype.triggerBeforeOpen=function(e,t,r,n,s,a,h){var l=this,p=e?r[this.getField("children",this.navIdx.length-1)]:this.items,u={element:t,items:p,parentItem:r,event:n,cancel:!1,top:s,left:a,showSubMenuOn:"Auto"},c=h,f;this.trigger("beforeOpen",u,function(g){switch(c){case"menu":l.hamburgerMode||(g.showSubMenuOn!=="Auto"&&(l.showItemOnClick=!l.defaultOption,l.showSubMenuOn=g.showSubMenuOn),l.top=g.top,l.left=g.left),l.popupWrapper.style.display="block",l.hamburgerMode||(l.popupWrapper.style.maxHeight=l.popupWrapper.getBoundingClientRect().height+"px",l.enableScrolling&&Ne(l.createElement,l.popupWrapper,l.uList,"vscroll",l.enableRtl),l.checkScrollOffset(n)),!l.hamburgerMode&&!l.left&&!l.top?(l.popupObj.refreshPosition(l.lItem,!0),l.left=parseInt(l.popupWrapper.style.left,10),l.top=parseInt(l.popupWrapper.style.top,10),l.enableRtl&&(l.left=l.isNestedOrVertical?l.left-l.popupWrapper.offsetWidth-l.lItem.parentElement.offsetWidth+2:l.left-l.popupWrapper.offsetWidth+l.lItem.offsetWidth),l.template&&(l.isReact||l.isAngular)?requestAnimationFrame(function(){l.collision(),l.popupWrapper.style.display=""}):(l.collision(),l.popupWrapper.style.display="")):(l.popupObj.collision={X:"none",Y:"none"},l.popupWrapper.style.display="");break;case"none":l.top=g.top,l.left=g.left,l.isContextMenuClosed=!0,f=g.element,l.enableScrolling&&l.isCMenu&&f&&f.parentElement&&(f.style.height=f.parentElement.style.height);break;case"hamburger":g.cancel||(l.element.classList.remove("e-hide-menu"),l.triggerOpen(l.element));break}if(c!=="hamburger")if(g.cancel)l.isMenu?(l.popupObj.destroy(),q(l.popupWrapper)):t.className.indexOf("e-ul")>-1&&q(t),l.navIdx.pop();else if(l.isMenu)if(l.hamburgerMode)l.popupWrapper.style.top=l.top+"px",l.popupWrapper.style.left="0px",l.toggleAnimation(l.popupWrapper);else{l.setBlankIconStyle(l.popupWrapper),l.wireKeyboardEvent(l.popupWrapper),Er(l.popupWrapper,{selector:"."+Ot}),l.popupWrapper.style.left=l.left+"px",l.popupWrapper.style.top=l.top+"px";var v=l.animationSettings.effect!=="None"?{name:l.animationSettings.effect,duration:l.animationSettings.duration,timingFunction:l.animationSettings.easing}:null;l.popupObj.show(v,l.lItem),Y.isDevice&&(l.popupWrapper.style.left=l.left+"px")}else l.setBlankIconStyle(l.uList),l.setPosition(l.lItem,l.uList,l.top,l.left),l.toggleAnimation(l.uList);if(l.keyType==="right"){var m=l.getUlByNavIdx();if(e.classList.remove(Q),l.isMenu&&l.navIdx.length===1&&l.removeLIStateByClass([X],[l.getWrapper()]),e.classList.add(X),l.action===ai){var y={element:e,item:r,event:n};l.trigger("select",y)}e.focus(),m=l.getUlByNavIdx();var w=l.isValidLI(m.children[0],0,l.action);m.children[w].classList.add(Q),m.children[w].focus()}})},i.prototype.collision=function(){var e;if(e=Rt(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(e.indexOf("right")>-1||e.indexOf("left")>-1)){this.popupObj.collision.X="none";var t=E(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?qi(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-t+2}e=Rt(this.popupWrapper,null,this.left,this.top),(e.indexOf("left")>-1||e.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"},i.prototype.setBlankIconStyle=function(e){var t=[].slice.call(e.getElementsByClassName("e-blankicon"));if(t.length){var r=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)");if(r){var n=r.querySelector(".e-menu-icon");if(n){var s=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},a=getComputedStyle(n),h=parseInt(a.fontSize,10);parseInt(a.width,10)&&parseInt(a.width,10)>h&&(h=parseInt(a.width,10));var l=h+parseInt(a[s.margin],10)+parseInt(getComputedStyle(r)[s.padding],10)+"px";t.forEach(function(p){p.style[s.padding]=l})}}}},i.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&this.navIdx.length===1){var r=d(e)?this.element:E(e.target,"."+Ot),n=le(".e-hscroll-bar",t);n.scrollLeft>r.offsetLeft&&(n.scrollLeft-=n.scrollLeft-r.offsetLeft);var s=n.scrollLeft+n.offsetWidth,a=r.offsetLeft+r.offsetWidth;s<a&&(n.scrollLeft+=a-s)}},i.prototype.setPosition=function(e,t,r,n){var s="px";if(this.toggleVisiblity(t),t===this.element||n>-1&&r>-1){var a=Rt(t,null,n,r);if(a.indexOf("right")>-1&&(n=n-t.offsetWidth),a.indexOf("bottom")>-1){var h=this.callFit(t,!1,!0,r,n);if(r=h.top-20,r<0){var l=pageYOffset+document.documentElement.clientHeight-t.getBoundingClientRect().height;l>-1&&(r=l)}}if(a=Rt(t,null,n,r),a.indexOf("left")>-1){var h=this.callFit(t,!0,!1,r,n);n=h.left}}else if(Y.isDevice)r=Number(this.element.style.top.replace(s,"")),n=Number(this.element.style.left.replace(s,""));else{var p=this.enableRtl?"left":"right",h=qi(e,p,"top");r=h.top,n=h.left;var a=Rt(t,null,this.enableRtl?n-t.offsetWidth:n,r),u=a.indexOf("left")>-1||a.indexOf("right")>-1;u&&(h=qi(e,this.enableRtl?"right":"left","top"),n=h.left),(this.enableRtl||u)&&(n=this.enableRtl&&u?n:n-t.offsetWidth),a.indexOf("bottom")>-1&&(h=this.callFit(t,!1,!0,r,n),r=h.top)}this.toggleVisiblity(t,!1),this.isCMenu&&this.enableScrolling&&t&&(t.style.height="");var c=E(this.element,".e-"+this.getModuleName()+"-wrapper");if(!this.isMenu&&this.enableScrolling&&t&&c&&c.offsetHeight>0){var f=E(t,".e-menu-vscroll");t.style.display="block",f&&Je(ke(f,gt),f);var g=Math.ceil(this.getMenuWidth(t,t.offsetWidth,this.enableRtl)),v=Ne(this.createElement,c,t,"vscroll",this.enableRtl,c.offsetHeight);Object.assign(v.style,{top:r+"px",left:n+"px",width:g+"px",position:"absolute",display:"none"})}else t.style.top=r+s,t.style.left=n+s},i.prototype.getMenuWidth=function(e,t,r){var n=e.getElementsByClassName(Ji)[0];return n&&(t+=parseInt(getComputedStyle(n)[r?"marginRight":"marginLeft"],10)),t<120?120:t},i.prototype.toggleVisiblity=function(e,t){t===void 0&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},i.prototype.createItems=function(e){var t=this,r=this.navIdx?this.navIdx.length:0,n=this.getFields(r),s=this.hasField(e,this.getField("iconCss",r)),a={showIcon:s,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(l){l.curData[l.fields[n.id]]||(l.curData[l.fields[n.id]]=xe("menuitem")),d(l.curData.htmlAttributes)&&Object.defineProperty(l.curData,"htmlAttributes",{value:{},writable:!0,enumerable:!0,configurable:!0}),Y.isIE?(l.curData.htmlAttributes.role||(l.curData.htmlAttributes.role="menuitem"),l.curData.htmlAttributes.tabindex||(l.curData.htmlAttributes.tabindex="-1")):Object.assign(l.curData.htmlAttributes,{role:l.curData.htmlAttributes.role||"menuitem",tabindex:l.curData.htmlAttributes.tabindex||"-1"}),t.isMenu&&!l.curData[t.getField("separator",r)]&&(l.curData.htmlAttributes["aria-label"]||(l.curData.htmlAttributes["aria-label"]=l.curData[l.fields.text]?l.curData[l.fields.text]:l.curData[l.fields.id])),l.curData[l.fields[n.iconCss]]===""&&(l.curData[l.fields[n.iconCss]]=null)},itemCreated:function(l){if(l.curData[t.getField("separator",r)]&&(l.item.classList.add(Nt),l.curData.htmlAttributes.role||l.item.setAttribute("role","separator"),l.curData.htmlAttributes.ariaLabel||l.item.setAttribute("aria-label","separator")),s&&!l.curData[l.fields.iconCss]&&!l.curData[t.getField("separator",r)]&&l.item.classList.add("e-blankicon"),l.curData[l.fields.child]&&l.curData[l.fields.child].length){var p=t.createElement("span",{className:er+" "+Ji});l.item.appendChild(p),l.item.setAttribute("aria-haspopup","true"),l.item.setAttribute("aria-expanded","false"),l.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(l.item.setAttribute("id",l.curData[l.fields.id].toString()),l.item.removeAttribute("data-uid"),l.item.classList.contains("e-level-1")&&l.item.classList.remove("e-level-1"),l.item.classList.contains("e-has-child")&&l.item.classList.remove("e-has-child"),l.item.removeAttribute("aria-level"));var u={item:l.curData,element:l.item};t.trigger("beforeItemRender",u)}};this.setProperties({items:this.items},!0),this.isMenu&&(a.templateID=this.element.id+pl);var h=wi.createList(this.createElement,e,a,!this.template,this);return h.setAttribute("tabindex","0"),this.isMenu?h.setAttribute("role","menu"):h.setAttribute("role","menubar"),h},i.prototype.moverHandler=function(e){var t=e.target;this.liTrgt=t,this.isMenu||(this.isCmenuHover=!0);var r=this.getLI(t),n=r?E(r,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),s=this.getWrapper(),a=new RegExp("-ej2menu-(.*)-popup"),h,l=!1;if(n){if(n.id!==""?h=a.exec(n.id)[1]:h=n.querySelector("ul").id,h!==this.element.id)if(this.removeLIStateByClass([Q,X],[this.getWrapper()]),this.navIdx.length)l=!0;else return;r&&E(r,".e-"+this.getModuleName()+"-wrapper")&&!l?(this.removeLIStateByClass([Q],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([Q],this.isMenu?[s].concat(this.getPopups()):[s]),r.classList.add(Q),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!l&&this.removeLIStateByClass([Q],[n].concat(this.getPopups())),this.isMenu&&(!this.showItemOnClick&&t.parentElement!==n&&!E(t,".e-"+this.getModuleName()+"-popup")&&(!r||r&&!this.getIndex(r.id,!0).length)&&this.showSubMenuOn!=="Hover"?(this.removeLIStateByClass([Q],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))):l&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)),this.isClosed||this.removeStateWrapper(),this.isClosed=!1),this.isMenu||(this.isCmenuHover=!1)}},i.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=E(this.liTrgt,".e-menu-vscroll");this.liTrgt.tagName==="DIV"&&e&&this.removeLIStateByClass([Q,X],[e])}},i.prototype.removeLIStateByClass=function(e,t){for(var r,n=function(a){e.forEach(function(h){r=le("."+h,t[a]),r&&r.classList.remove(h)})},s=0;s<t.length;s++)n(s)},i.prototype.getField=function(e,t){t===void 0&&(t=0);var r=this.fields[""+e];return typeof r=="string"?r:r[t]?r[t].toString():r[r.length-1].toString()},i.prototype.getFields=function(e){return e===void 0&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},i.prototype.hasField=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r][""+t])return!0;return!1},i.prototype.menuHeaderClickHandler=function(e){var t=E(e.target,".e-menu-wrapper");t&&t.querySelector("ul.e-menu-parent").id!==this.element.id||(this.element.className.indexOf("e-hide-menu")>-1?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))},i.prototype.clickHandler=function(e){this.isTapHold=this.isTapHold?!1:this.isTapHold;var t=this.getWrapper(),r=e.target,n=this.cli=this.getLI(r),s=new RegExp("-ej2menu-(.*)-popup"),a=n?E(n,".e-"+this.getModuleName()+"-wrapper"):null,h=n&&a&&(this.isMenu?this.getIndex(n.id,!0).length>0:t.firstElementChild.id===a.firstElementChild.id);if(Y.isDevice&&this.isMenu&&(this.removeLIStateByClass([Q],[t].concat(this.getPopups())),this.mouseDownHandler(e)),n&&a&&this.isMenu){var l=a.id?s.exec(a.id)[1]:a.querySelector(".e-menu-parent").id;if(this.element.id!==l)return}if(h&&e.type==="click"&&!n.classList.contains(oi)){this.setLISelected(n);var p=this.getIndex(n.id,!0),u=this.getItem(p),c={element:n,item:u,event:e};this.trigger("select",c)}if(h&&(e.type==="mouseover"||Y.isDevice||this.showItemOnClick)){var f=void 0;if(n.classList.contains(oi)){f=t.children[this.navIdx.length-1],this.toggleAnimation(f);var g=this.getLIByClass(f,X);g&&g.classList.remove(X),q(n.parentNode),this.navIdx.pop()}else if(!n.classList.contains(Nt)){this.showSubMenu=!0;var v=n.parentNode;if(d(v))return;if(this.cliIdx=this.getIdx(v,n),this.isMenu||!Y.isDevice){var m=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),E(v,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,v);if(this.navIdx[m]===this.cliIdx&&(this.showSubMenu=!1),m!==this.navIdx.length&&(e.type!=="mouseover"||this.showSubMenu)){var g=this.getLIByClass(v,X);g&&g.classList.remove(X),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&(this.setLISelected(n),this.isMenu||(this.isCmenuHover=!0)),this.closeMenu(m+1,e),this.showItemOnClick&&(this.setLISelected(n),this.isMenu||(this.isCmenuHover=!1))}}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(r.tagName==="DIV"&&E(r,".e-menu-vscroll")&&(this.navIdx.length||!this.isMenu&&this.enableScrolling&&this.navIdx.length===0)){var y=this.isMenu?E(r,"."+Et):E(r,".e-menu-vscroll"),w=this.isMenu?Array.prototype.indexOf.call(this.getPopups(),y)+1:this.getIdx(t,le("ul.e-menu-parent",y));w<this.navIdx.length&&(this.closeMenu(w+1,e),y&&this.removeLIStateByClass([Q,X],[y]))}else this.isMenu&&this.hamburgerMode&&r.tagName==="SPAN"&&r.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):(r.tagName!=="UL"||(this.isMenu?r.parentElement.classList.contains("e-menu-wrapper")&&!this.getIndex(r.querySelector("."+Ot).id,!0).length:r.parentElement!==t))&&(n||this.removeLIStateByClass([X],[t]),(!this.isAnimationNone&&!n||n&&!n.querySelector("."+Ji))&&(navigator.platform.toUpperCase().indexOf("MAC")<0||navigator.platform.toUpperCase().indexOf("MAC")>=0&&!e.ctrlKey)&&this.closeMenu(null,e))},i.prototype.afterCloseMenu=function(e){if(!d(e)){var t;if(this.showSubMenu){this.showItemOnClick&&this.navIdx.length===0?t=E(e.target,".e-menu-parent.e-control"):t=E(this.element,".e-menu-parent.e-control");var r=this.navIdx.concat(this.cliIdx),n=this.getItem(r);if(n&&n[this.getField("children",r.length-1)]&&n[this.getField("children",r.length-1)].length?((e.type==="mouseover"||Y.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&this.cli.getAttribute("aria-expanded")==="false")&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,n,null,null,e))):e.type!=="mouseover"&&this.closeMenu(null,e),!t){var s=this.getUlByNavIdx(),a=this.getLIByClass(s,X);a&&(a.setAttribute("aria-expanded","false"),a.classList.remove(X))}}this.keyType=""}},i.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,X);t&&t.classList.remove(X),this.isMenu||e.classList.remove(Q),e.classList.add(X)},i.prototype.getLIByClass=function(e,t){if(e&&e.children){for(var r=0,n=e.children.length;r<n;r++)if(e.children[r].classList.contains(t))return e.children[r]}return null},i.prototype.getItemIndex=function(e,t){var r;typeof e=="string"?r=e:r=e.id;var n=t!==!1,s=this.getIndex(r,n);return s},i.prototype.setItem=function(e,t,r){var n;r?n=t||e.id:n=t||e.text;var s=this.getIndex(n,r),a=this.getItem(s);Object.assign(a,e)},i.prototype.getItem=function(e){e=e.slice();var t=e.pop(),r=this.getItems(e);return r[t]},i.prototype.getItems=function(e){for(var t=this.items,r=0;r<e.length;r++)t=t[e[r]][this.getField("children",r)];return t},i.prototype.setItems=function(e,t){var r=this.getItems(t);r.splice(0,r.length);for(var n=0;n<e.length;n++)r.splice(n,0,e[n])},i.prototype.getIdx=function(e,t,r){r===void 0&&(r=!0);var n=!this.isMenu&&this.enableScrolling&&le(".e-menu-vscroll",e)?et(".e-menu-parent",e):Array.from(e.children),s=Array.prototype.indexOf.call(n,t);return r&&e.children[0].classList.contains(oi)&&s--,s},i.prototype.getLI=function(e){return e.tagName==="LI"&&e.classList.contains("e-menu-item")?e:E(e,"li.e-menu-item")},i.prototype.updateItemsByNavIdx=function(){for(var e=this.items,t=0,r=0;r<this.navIdx.length&&(e=e[r].items,!!e);r++){t++;var n=this.getUlByNavIdx(t);if(!n)break;this.updateItem(n,e)}},i.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},i.prototype.onPropertyChanged=function(e,t){for(var r=this,n=this.getWrapper(),s=function(u){switch(u){case"cssClass":t.cssClass&&te([n],t.cssClass.split(" ")),e.cssClass&&M([n],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":a.enableRtl?n.classList.add(tr):n.classList.remove(tr);break;case"showItemOnClick":a.unWireEvents(),a.showItemOnClick=e.showItemOnClick,a.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var c;a.element.classList.contains("e-vertical")?Ne(a.createElement,n,a.element,"vscroll",a.enableRtl):Ne(a.createElement,n,a.element,"hscroll",a.enableRtl),a.getPopups().forEach(function(T){c=le(".e-ul",T),Ne(r.createElement,T,c,"vscroll",r.enableRtl)})}else{var f=n.children[0];a.element.classList.contains("e-vertical")||!a.isMenu?Je(ke(f,gt),f):Je(ke(f,Tr),f),n.style.overflow="",n.appendChild(a.element),a.getPopups().forEach(function(T){f=T.children[0],Je(ke(f,gt),f),T.style.overflow=""})}break;case"items":{var g=void 0,v=void 0,m=void 0;if(a.isReact&&a.template&&a.clearTemplate(["template"]),Object.keys(t.items).length)for(var C=Object.keys(e.items),y=0;y<C.length;y++)v=a.getChangedItemIndex(e,[],Number(C[y])),v.length<=a.getWrapper().children.length&&(g=v.pop(),m=a.getItems(v),a.insertAfter([m[g]],m[g].text),a.removeItem(m,v,g),a.setItems(m,v)),v.length=0;else{if(a.updateItem(a.element,a.items),a.enableScrolling&&a.element.parentElement.classList.contains("e-custom-scroll")&&(a.element.classList.contains("e-vertical")?Ne(a.createElement,n,a.element,"vscroll",a.enableRtl):Ne(a.createElement,n,a.element,"hscroll",a.enableRtl)),!a.hamburgerMode)for(var y=1,w=n.childElementCount;y<w;y++)q(n.lastElementChild);a.navIdx=[]}break}}},a=this,h=0,l=Object.keys(e);h<l.length;h++){var p=l[h];s(p)}},i.prototype.updateItem=function(e,t){{if(this.enableScrolling){var r=this.getWrapper(),n=r.children[0];this.element.classList.contains("e-vertical")?Je(ke(n,gt),n):Je(ke(n,Tr),n)}e.innerHTML=""}var s=[].slice.call(this.createItems(t).children);s.forEach(function(a){e.appendChild(a)})},i.prototype.getChangedItemIndex=function(e,t,r){t.push(r);var n=Object.keys(e.items[r]).pop();if(n==="items"){var s=e.items[r],a=Object.keys(s.items).pop();a&&this.getChangedItemIndex(s,t,Number(a))}else n==="isParentArray"&&t.length>1&&t.pop();return t},i.prototype.removeItem=function(e,t,r){e.splice(r,1);var n=this.getWrapper().children;if(t.length<n.length)if(this.enableScrolling&&!n[t.length].classList.contains("e-menu-parent")){var s=n[t.length].querySelector(".e-menu-parent");q(s.children[r])}else q(n[t.length].children[r])},i.prototype.unWireEvents=function(e){e===void 0&&(e=this.target);var t=this.getWrapper();if(e){for(var r=void 0,n=void 0,s=et(e),a=0,h=s.length;a<h;a++)r=s[a],this.isMenu?S.remove(r,"click",this.menuHeaderClickHandler):Y.isIos?(n=ke(r,hn),n&&n.destroy()):S.remove(r,"contextmenu",this.cmenuHandler);if(!this.isMenu){S.remove(this.targetElement,"scroll",this.scrollHandler);for(var l=0,p=pn(this.targetElement);l<p.length;l++){var u=p[l];S.remove(u,"scroll",this.scrollHandler)}}}Y.isDevice||(S.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),S.remove(document,"mousedown",this.delegateMouseDownHandler),S.remove(document,"keydown",this.domKeyHandler),!this.isMenu&&!this.target&&S.remove(document,"scroll",this.scrollHandler)),S.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},i.prototype.unWireKeyboardEvent=function(e){var t=ke(e,Dr);t&&t.destroy()},i.prototype.toggleAnimation=function(e,t){var r=this;t===void 0&&(t=!0);var n,s,a=this.enableScrolling&&!this.isMenu&&E(e,".e-menu-vscroll")?E(e,".e-menu-vscroll"):e;this.animationSettings.effect==="None"||!t?(this.hamburgerMode&&e&&(e.style.top="0px"),this.isAnimationNone=this.animationSettings.effect==="None",this.end(e,t)):this.animation.animate(a,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(h){r.hamburgerMode?(s=h.element.parentElement,h.element.style.position="absolute",s&&(n=s.offsetHeight),h.element.style.maxHeight=h.element.offsetHeight+"px",s&&(s.style.maxHeight="")):(h.element.style.display="block",h.element.style.maxHeight=r.isMenu?h.element.getBoundingClientRect().height+"px":h.element.scrollHeight+"px")},progress:function(h){r.hamburgerMode&&s&&(s.style.minHeight=n+h.element.offsetHeight+"px")},end:function(h){r.hamburgerMode?(h.element.style.position="",h.element.style.maxHeight="",s&&(s.style.minHeight=""),h.element.style.top="0px",h.element.children[0].focus(),r.triggerOpen(h.element.children[0])):r.end(h.element,t)}})},i.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null,r={element:e,parentItem:t,items:t?t.items:this.items};this.trigger("onOpen",r),this.isMenu||S.add(e,"keydown",this.keyHandler,this)},i.prototype.end=function(e,t){if(t&&this.isContextMenuClosed){(this.isMenu||!Y.isDevice||!this.isMenu&&this.isAnimationNone&&Y.isDevice)&&(e.style.display="block"),e.style.maxHeight="";var r=this.enableScrolling&&!this.isMenu?E(e,".e-menu-vscroll"):null;if(r&&(r.style.display="block"),this.triggerOpen(e),e.querySelector("."+Q))e.querySelector("."+Q).focus();else{var n=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1];this.currentTarget?this.currentTarget.classList.contains("e-numerictextbox")||this.currentTarget.classList.contains("e-textbox")||this.currentTarget.tagName==="INPUT"||(n?n.querySelector("."+X).focus():this.element.focus()):n?n.querySelector("."+X).focus():this.element.focus()}}else{var r=this.enableScrolling&&!this.isMenu?E(e,".e-menu-vscroll"):null;if(r&&Je(ke(r,gt),r),e===this.element){var s=this.getLIByClass(this.element,Q);s&&s.classList.remove(Q);var a=this.getLIByClass(this.element,X);a&&a.classList.remove(X),e.style.display="none",this.isAnimationNone=!1}else q(e)}},i.prototype.getPersistData=function(){return""},i.prototype.getWrapper=function(){return E(this.element,".e-"+this.getModuleName()+"-wrapper")},i.prototype.getIndex=function(e,t,r,n,s,a){r===void 0&&(r=this.items),n===void 0&&(n=[]),s===void 0&&(s=!1),a===void 0&&(a=0);var h;a=s?a+1:0;for(var l=0,p=r.length;l<p;l++){h=r[l];var u=t?h[this.getField("itemId",a)]:h[this.getField("text",a)],c=h.htmlAttributes&&"id"in h.htmlAttributes?h.htmlAttributes.id:u;if(c===e){n.push(l);break}else if(h[this.getField("children",a)]&&h[this.getField("children",a)].length)if(n=this.getIndex(e,t,h[this.getField("children",a)],n,!0,a),n[n.length-1]===-1)l!==p-1&&n.pop();else{n.unshift(l);break}else l===p-1&&n.push(-1)}return!s&&n[0]===-1?[]:n},i.prototype.enableItems=function(e,t,r){t===void 0&&(t=!0);for(var n,s,a,h=Qi,l,p=0;p<e.length;p++){if(a=this.getIndex(e[p],r),this.navIdx.length){if(a.length!==1){l=!1;for(var u=0,c=a.length-1;u<c;u++)if(a[u]!==this.navIdx[u]){l=!0;break}if(l)continue}}else if(a.length!==1)continue;if(s=a.pop(),n=this.getUlByNavIdx(a.length),n&&!d(s))if(t)this.isMenu?(n.children[s].classList.remove(h),n.children[s].removeAttribute("aria-disabled")):Y.isDevice&&!n.classList.contains("e-contextmenu")?n.children[s+1].classList.remove(h):n.children[s].classList.remove(h);else if(this.isMenu)n.children[s].classList.add(h),n.children[s].setAttribute("aria-disabled","true");else if(Y.isDevice&&!n.classList.contains("e-contextmenu"))n.children[s+1].classList.add(h);else if(this.enableScrolling&&!n.classList.contains("e-menu-parent")){var f=n.querySelector(".e-menu-parent");f.children[s].classList.add(h)}else n.children[s].classList.add(h)}},i.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},i.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},i.prototype.showHideItems=function(e,t,r){for(var n,s,a,h,l=0;l<e.length;l++)if(a=this.getIndex(e[l],r),s=a.pop(),n=this.getUlByNavIdx(a.length),h=this.getItems(a),n){this.enableScrolling&&!n.classList.contains("e-menu-parent")&&(n=n.querySelector(".e-menu-parent"));var p=r?n.children[s].id:h[s].text.toString();t&&p===e[l]?n.children[s].classList.add(pi):!t&&p===e[l]&&n.children[s].classList.remove(pi)}},i.prototype.removeItems=function(e,t){for(var r,n,s,a=0;a<e.length;a++)n=this.getIndex(e[a],t),r=n.pop(),s=this.getItems(n),d(r)||this.removeItem(s,n,r)},i.prototype.insertAfter=function(e,t,r){this.insertItems(e,t,r)},i.prototype.insertBefore=function(e,t,r){this.insertItems(e,t,r,!1)},i.prototype.insertItems=function(e,t,r,n){n===void 0&&(n=!0);for(var s,a,h,l,p,u,c=0;c<e.length;c++){h=this.getIndex(t,r),a=h.pop(),l=this.getItems(h),p=new bi(l[0],"items",e[c],!0),p.parentObj=l[0].parentObj,l.splice(n?a+1:a,0,p);var f=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(!d(a)&&h.length<f.length){a=n?a+1:a,s=this.createItems(l).children[a];var g=u=this.isMenu?le(".e-menu-parent",f[h.length]):f[h.length];if(this.enableScrolling&&!g.classList.contains("e-menu-parent")&&(g=g.querySelector(".e-menu-parent")),g.insertBefore(s,g.children[a]),c===e.length-1&&!this.isMenu&&g.style.display==="block")if(this.enableScrolling){this.setPosition(null,g,parseFloat(u.style.top),parseFloat(u.style.left));var v=E(g,".e-vscroll");v&&(v.style.display="block")}else this.setPosition(null,g,parseFloat(g.style.top),parseFloat(g.style.left)),g.style.display="block"}}},i.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach(function(t){e.element.style.removeProperty(t)}),["role","tabindex","class","style"].forEach(function(t){t==="class"&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),(["class","style"].indexOf(t)===-1||!e.element.getAttribute(t))&&e.element.removeAttribute(t),e.isMenu&&t==="class"&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")})},i.prototype.destroy=function(){var e=this.getWrapper();if(e){if(this.unWireEvents(),this.isMenu)this.closeMenu(),this.element.innerHTML="",this.removeAttributes(),e.parentNode.insertBefore(this.element,e),this.clonedElement=null;else{if(this.clonedElement.style.display="",this.clonedElement.tagName==="EJS-CONTEXTMENU")M([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&this.clonedElement.children[0].tagName==="LI"&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var t=this.clonedElement.nextElementSibling;t&&t!==e?this.clonedElement.parentElement.insertBefore(this.element,t):this.clonedElement.parentElement.appendChild(this.element),this.element.innerHTML="",G([].slice.call(this.clonedElement.children),this.element),q(this.clonedElement),this.removeAttributes()}this.clonedElement=null}q(e),o.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}this.rippleFn=null},U([W()],i.prototype,"beforeItemRender",void 0),U([W()],i.prototype,"beforeOpen",void 0),U([W()],i.prototype,"onOpen",void 0),U([W()],i.prototype,"beforeClose",void 0),U([W()],i.prototype,"onClose",void 0),U([W()],i.prototype,"select",void 0),U([W()],i.prototype,"created",void 0),U([D("")],i.prototype,"cssClass",void 0),U([D(0)],i.prototype,"hoverDelay",void 0),U([D(!1)],i.prototype,"showItemOnClick",void 0),U([D("")],i.prototype,"target",void 0),U([D("")],i.prototype,"filter",void 0),U([D(null)],i.prototype,"template",void 0),U([D(!1)],i.prototype,"enableScrolling",void 0),U([D(!0)],i.prototype,"enableHtmlSanitizer",void 0),U([$t({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},cl)],i.prototype,"fields",void 0),U([ti([],bi)],i.prototype,"items",void 0),U([$t({duration:400,easing:"ease",effect:"SlideDown"},ul)],i.prototype,"animationSettings",void 0),i=U([ii],i),i}(xi),fl=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Dt=function(o,i,e,t){var r=arguments.length,n=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,i,e,t);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(i,e,n):s(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},vl=function(o){fl(i,o);function i(e,t){return o.call(this,e,t)||this}return i.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||xe("ej2-contextmenu"),o.prototype.preRender.call(this)},i.prototype.initialize=function(){this.template=this.itemTemplate?this.itemTemplate:null,o.prototype.initialize.call(this),Ci(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=Es(this.element).toString()},i.prototype.open=function(e,t,r){o.prototype.openMenu.call(this,null,null,e,t,null,r)},i.prototype.close=function(){o.prototype.closeMenu.call(this)},i.prototype.onPropertyChanged=function(e,t){o.prototype.onPropertyChanged.call(this,e,t);for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"filter":this.close(),this.filter=e.filter;break;case"target":this.unWireEvents(t.target),this.wireEvents();break;case"itemTemplate":this.itemTemplate=e.itemTemplate,this.refresh()}}},i.prototype.getModuleName=function(){return"contextmenu"},Dt([D("")],i.prototype,"target",void 0),Dt([D("")],i.prototype,"filter",void 0),Dt([ti([],bi)],i.prototype,"items",void 0),Dt([D(null)],i.prototype,"itemTemplate",void 0),Dt([D(!1)],i.prototype,"enableScrolling",void 0),i=Dt([ii],i),i}(dl),Hi=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),B=function(o,i,e,t){var r=arguments.length,n=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,i,e,t);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(i,e,n):s(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},gl="e-upload e-control-wrapper",Bn="e-file-select",ir="e-file-drop",ml="e-file-select-wrap",Rn="e-upload-files",ci="e-upload-file-list",re="e-file-status",yl="e-upload-actions",bl="e-file-upload-btn e-css e-btn e-flat e-primary",wl="e-file-clear-btn e-css e-btn e-flat",Hn="e-file-name",Pn="e-file-type",Vn="e-file-size",fe="e-file-remove-btn",Ee="e-file-delete-btn",Nn="e-spinner-pane",ie="e-file-abort-btn",je="e-file-reload-btn",rr="e-upload-drag-hover",ct="e-upload-progress-wrap",ui="e-upload-progress-bar",nr="e-progress-bar-text",De="e-upload-progress",Re="e-upload-success",Ae="e-upload-fails",sr="e-file-container",jn="e-validation-fails",Wn="e-rtl",ar="e-disabled",Un="e-rtl-container",or="e-clear-icon-focus",Sl="e-progress-inner-wrap",ge="e-file-pause-btn",ut="e-file-play-btn",jt="e-restrict-retry",zn=["title","style","class"],qn="e-form-upload",Cl="e-hidden-file-input",At="e-file-invalid",Tl="e-file-information",Ol=function(o){Hi(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return B([D("")],i.prototype,"name",void 0),B([D(null)],i.prototype,"size",void 0),B([D("")],i.prototype,"type",void 0),i}(lt),El=function(o){Hi(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return B([D("Browse...")],i.prototype,"browse",void 0),B([D("Upload")],i.prototype,"upload",void 0),B([D("Clear")],i.prototype,"clear",void 0),i}(lt),Dl=function(o){Hi(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return B([D("")],i.prototype,"saveUrl",void 0),B([D("")],i.prototype,"removeUrl",void 0),B([D(0)],i.prototype,"chunkSize",void 0),B([D(3)],i.prototype,"retryCount",void 0),B([D(500)],i.prototype,"retryAfterDelay",void 0),i}(lt),Al=function(o){Hi(i,o);function i(e,t){var r=o.call(this,e,t)||this;return r.initialAttr={accept:null,multiple:!1,disabled:!1},r.uploadedFilesData=[],r.base64String=[],r.isForm=!1,r.allTypes=!1,r.pausedData=[],r.uploadMetaData=[],r.tabIndex="0",r.btnTabIndex="0",r.disableKeyboardNavigation=!1,r.count=-1,r.actionCompleteCount=0,r.flag=!0,r.selectedFiles=[],r.uploaderName="UploadFiles",r.fileStreams=[],r.newFileRef=0,r.isFirstFileOnSelection=!1,r.dragCounter=0,r.fileList=[],r.filesData=[],r.uploaderOptions=e,r}return i.prototype.onPropertyChanged=function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=d(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=d(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=d(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":this.isReact?this.reRenderFileList():this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":this.clearAll();break;case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=mt("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(t.cssClass);break}}},i.prototype.setLocalizedTexts=function(){d(this.template)&&(typeof this.buttons.browse=="string"&&(this.browseButton.innerText=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!d(this.uploadWrapper.querySelector("."+ir))&&(this.uploadWrapper.querySelector("."+ir).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},i.prototype.getKeyValue=function(e){for(var t,r=0,n=Object.keys(this.preLocaleObj);r<n.length;r++){var s=n[r];this.preLocaleObj[""+s]===e&&(t=s)}return t},i.prototype.updateFileList=function(){var e;if(this.fileList.length>0&&!d(this.uploadWrapper.querySelector("."+Rn)))for(var t=0;t<this.fileList.length;t++)e=this.fileList[t].querySelector(".e-file-status"),e.innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.filesData[t].status=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.fileList[t].classList.contains(Re)&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[t].querySelector(".e-file-play-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[t].querySelector(".e-file-remove-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[t].querySelector(".e-file-reload-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText=this.buttons.upload==="Upload"?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText=this.buttons.clear==="Clear"?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},i.prototype.reRenderFileList=function(){this.listParent&&(q(this.listParent),this.listParent=null,this.fileList=[],this.internalCreateFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},i.prototype.preRender=function(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",invalidFileName:"File Name is not allowed",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new Ir("uploader",this.localeText,this.locale),this.preLocaleObj=mt("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var e=mt("ej2_instances",this.element);if(this.element.tagName==="EJS-UPLOADER"){var t=this.createElement("input",{attrs:{type:"file"}}),r=0;for(r;r<this.element.attributes.length;r++)this.element.attributes[r].nodeName!=="id"?t.setAttribute(this.element.attributes[r].nodeName,this.element.attributes[r].nodeValue):this.element.attributes[r].nodeName==="id"&&t.setAttribute(this.element.attributes[r].nodeName,xe("uploader")),t.innerHTML=this.element.innerHTML;t.hasAttribute("name")||t.setAttribute("name","UploadFiles"),this.element.appendChild(t),this.element=t,Or("ej2_instances",e,this.element)}e[0].isPureReactComponent&&(d(e[0].props.name)?!d(e[0].props.id)&&d(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),d(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=Y.info.name,this.uploaderName=this.element.getAttribute("name")},i.prototype.formRendered=function(){var e=E(this.element,"form");if(!d(e))for(;e&&e!==document.documentElement;e=e.parentElement)e.tagName==="FORM"&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},i.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},i.prototype.getModuleName=function(){return"uploader"},i.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},i.prototype.render=function(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()},i.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),typeof this.buttons.browse=="string"?(this.browseButton.textContent=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},i.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:yl}),this.uploadButton=this.createElement("button",{className:bl,attrs:{type:"button",tabindex:this.btnTabIndex,"aria-label":this.localizedTexts("Upload")}}),this.clearButton=this.createElement("button",{className:wl,attrs:{type:"button",tabindex:this.btnTabIndex,"aria-label":this.localizedTexts("Clear")}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()},i.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},i.prototype.wireActionButtonEvents=function(){S.add(this.uploadButton,"click",this.uploadButtonClick,this),S.add(this.clearButton,"click",this.clearButtonClick,this)},i.prototype.unwireActionButtonEvents=function(){S.remove(this.uploadButton,"click",this.uploadButtonClick),S.remove(this.clearButton,"click",this.clearButtonClick)},i.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),q(this.actionButtons),this.actionButtons=null)},i.prototype.renderButtonTemplates=function(){if(typeof this.buttons.browse=="string"?(this.browseButton.textContent=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e=d(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=e,typeof this.buttons.upload=="string"?(this.uploadButton.textContent=this.buttons.upload==="Upload"?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var t=d(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=t,typeof this.buttons.clear=="string"?(this.clearButton.textContent=this.buttons.clear==="Clear"?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},i.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var e=this.createElement("span",{className:Bn});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:ml}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:gl}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},i.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length){this.internalCreateFileList(this.filesData);return}if(d(this.files[0].size))return;this.isPreloadFiles=!0;var e=[].slice.call(this.files),t=[];this.multiple||(this.clearData(),e=[e[0]]);for(var r=0,n=e;r<n.length;r++){var s=n[r],a={name:s.name+"."+s.type.split(".")[s.type.split(".").length-1],rawFile:"",size:s.size,status:this.localizedTexts("uploadSuccessMessage"),type:s.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(a),this.filesData.push(a)}this.internalCreateFileList(t),!this.autoUpload&&this.listParent&&!this.actionButtons&&(!this.isForm||this.allowUpload())&&this.showFileList&&this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}},i.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll("."+jn).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+Re).length+this.uploadWrapper.querySelectorAll("span."+De).length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},i.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement=typeof this.dropArea!="string"?this.dropArea:le(this.dropArea,document);for(var t=this.element,r=!1;t.parentNode;)t=t.parentNode,t===this.dropZoneElement&&(r=!0,e?e.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!r&&e&&pe(e)}else!d(this.uploaderOptions)&&this.uploaderOptions.dropArea===void 0&&(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},i.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&pe(e)}},i.prototype.createDropTextHint=function(){var e=this.createElement("span",{className:ir});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)},i.prototype.updateHTMLAttrToElement=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];zn.indexOf(r)<0&&this.element.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.updateHTMLAttrToWrapper=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];if(zn.indexOf(r)>-1)if(r==="class"){var n=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();n!==""&&M([this.uploadWrapper],n.split(" "))}else if(r==="style"){var s=this.uploadWrapper.getAttribute(r);s=d(s)?this.htmlAttributes[""+r]:s+this.htmlAttributes[""+r],this.uploadWrapper.setAttribute(r,s)}else this.uploadWrapper.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")},i.prototype.checkAutoUpload=function(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},i.prototype.sequenceUpload=function(e){if(this.filesData.length-e.length===0||this.filesData[this.filesData.length-e.length-1].statusCode!=="1"){(this.multiple||this.count<0)&&++this.count;var t=!this.showFileList;typeof this.filesData[this.count]=="object"?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],t),this.filesData[this.count].statusCode==="0"&&this.sequenceUpload(e)):--this.count}},i.prototype.setCSSClass=function(e){var t=e;d(e)||(t=e.replace(/\s+/g," ").trim()),!d(e)&&t!==""&&te([this.uploadWrapper],t.split(" "));var r=this.cssClass;!d(this.cssClass)&&this.cssClass!==""&&(r=this.cssClass.replace(/\s+/g," ").trim()),!d(this.cssClass)&&r!==""&&M([this.uploadWrapper],r.split(r.indexOf(",")>-1?",":" "))},i.prototype.wireEvents=function(){S.add(this.browseButton,"click",this.browseButtonClick,this),S.add(this.element,"change",this.onSelectFiles,this),S.add(document,"click",this.removeFocus,this),this.keyboardModule=new Dr(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&S.add(this.formElement,"reset",this.resetForm,this)},i.prototype.unWireEvents=function(){S.remove(this.browseButton,"click",this.browseButtonClick),S.remove(this.element,"change",this.onSelectFiles),S.remove(document,"click",this.removeFocus),this.isForm&&S.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},i.prototype.resetForm=function(){this.clearAll()},i.prototype.keyActionHandler=function(e){var t=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(ge)){var r=this.getCurrentMetaData(null,e);r.file.statusCode="4",r.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(r,!1)}else if(t.classList.contains(ut))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(je)){var r=this.getCurrentMetaData(null,e);if(!d(r))r.file.statusCode="1",r.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(r.file);else{var n=e.target.parentElement,s=this.filesData[this.fileList.indexOf(n)];this.retry(s)}}else this.removeFiles(e),t.classList.contains(ie)||this.browseButton.focus();e.preventDefault(),e.stopPropagation();break}},i.prototype.getCurrentMetaData=function(e,t){var r,n;if(d(e)){var s=t.target.parentElement;r=this.filesData[this.fileList.indexOf(s)]}else r=e;for(var a=0;a<this.uploadMetaData.length;a++)this.uploadMetaData[a].file.name===r.name&&(n=this.uploadMetaData[a]);return n},i.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+or)&&(document.activeElement.blur(),this.listParent.querySelector("."+or).classList.remove(or))},i.prototype.browseButtonClick=function(){this.element.click()},i.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},i.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},i.prototype.bindDropEvents=function(){this.dropZoneElement&&(S.add(this.dropZoneElement,"drop",this.dropElement,this),S.add(this.dropZoneElement,"dragover",this.dragHover,this),S.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),S.add(this.dropZoneElement,"paste",this.onPasteFile,this),S.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},i.prototype.unBindDropEvents=function(){this.dropZoneElement&&(S.remove(this.dropZoneElement,"drop",this.dropElement),S.remove(this.dropZoneElement,"dragover",this.dragHover),S.remove(this.dropZoneElement,"dragleave",this.onDragLeave),S.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},i.prototype.onDragEnter=function(e){this.enabled&&(this.dropZoneElement.classList.add(rr),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},i.prototype.onDragLeave=function(){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(rr))},i.prototype.dragHover=function(e){this.enabled&&(this.dropEffect!=="Default"&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())},i.prototype.dropElement=function(e){this.dragCounter=0,this.dropZoneElement.classList.remove(rr),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()},i.prototype.onPasteFile=function(e){var t=e.clipboardData.items;if(e.type==="paste"&&this.browserName!=="msie"&&this.browserName!=="edge"&&this.browserName!=="safari"&&(this.element.files=e.clipboardData.files),!(t.length!==1&&!this.multiple))for(var r=0;r<t.length;r++){var n=[].slice.call(t)[r];!d(n.getAsFile())&&(n.kind==="file"||n.type.match("^image/"))&&this.renderSelectedFiles(e,[n.getAsFile()],!1,!0)}},i.prototype.getSelectedFiles=function(e){for(var t=[],r=this.fileList[e],n=this.getFilesData(),s=+r.getAttribute("data-files-count"),a=0,h=0;h<e;h++)a+=+this.fileList[h].getAttribute("data-files-count");for(var l=a;l<a+s;l++)t.push(n[l]);return t},i.prototype.removeFiles=function(e){if(this.enabled){var t=e.target.parentElement,r=this.fileList.indexOf(t),n=this.fileList[r],s=this.isFormUpload(),a=s?this.getSelectedFiles(r):this.getFilesInArray(this.filesData[r]);if(!d(a)){if(e.target.classList.contains(ie)&&!s){if(a[0].statusCode="5",!d(n)){var h=n.querySelector("."+ie);_i({target:h,width:"20px"}),Gi(h)}this.sequentialUpload&&this.uploadSequential(),n.classList.contains(jt)||this.checkActionComplete(!0)}else E(e.target,"."+Nn)||this.remove(a,!1,!1,!0,e);if(this.isForm&&n&&n.classList.contains(At)&&(this.element.value=""),this.checkActionButtonStatus(),this.actionButtons&&this.clearButton&&this.uploadWrapper){var l=this.uploadWrapper.querySelectorAll(".e-upload-progress-bar.e-upload-progress:not(.e-upload-success):not(.e-upload-fails)");l.length===1&&t.contains(l[0])&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled")}}}},i.prototype.removeFilesData=function(e,t){var r;if(t){this.showFileList||(r=this.filesData.indexOf(e),this.filesData.splice(r,1));return}var n=this.getLiElement(e);d(n)||(this.element.value="",q(n),r=this.fileList.indexOf(n),this.fileList.splice(r,1),this.filesData.splice(r,1),this.fileList.length===0&&!d(this.listParent)&&(q(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&r<=this.count&&--this.count)},i.prototype.removeUploadedFile=function(e,t,r,n){var s=this,a=e,h=new Ht(this.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1;var l=new FormData;h.beforeSend=function(p){t.currentRequest=h.httpRequest,r?s.removingEventCallback(t,l,a,e):s.trigger("removing",t,function(u){u.cancel?p.cancel=!0:s.removingEventCallback(u,l,a,e)})},h.onLoad=function(p){return s.removeCompleted(p,a,n),{}},h.onError=function(p){return s.removeFailed(p,a,n),{}},h.send(l)},i.prototype.removingEventCallback=function(e,t,r,n){var s=this.element.getAttribute("name"),a=this.getLiElement(n);if(!d(a)&&(!d(a.querySelector("."+Ee))||!d(a.querySelector("."+fe)))){var h=a.querySelector("."+Ee)?a.querySelector("."+Ee):a.querySelector("."+fe);_i({target:h,width:"20px"}),Gi(h)}e.postRawFile&&!d(r.rawFile)&&r.rawFile!==""?t.append(s,r.rawFile,r.name):t.append(s,r.name),this.updateFormData(t,e.customFormData)},i.prototype.updateFormData=function(e,t){if(t.length>0&&t[0])for(var r=function(s){var a=t[s],h=Object.keys(a).map(function(l){return a[""+l]});e.append(Object.keys(a)[0],h)},n=0;n<t.length;n++)r(n)},i.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var r=function(s){var a=t[s],h=Object.keys(a).map(function(l){return a[""+l]});e.setRequestHeader(Object.keys(a)[0],h)},n=0;n<t.length;n++)r(n)},i.prototype.removeCompleted=function(e,t,r){var n=e&&e.currentTarget?this.getResponse(e):null,s=e.target;if(s.readyState===4&&s.status>=200&&s.status<=299){var a={e,response:n,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",a),this.removeFilesData(t,r);var h=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(h,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,t,r)},i.prototype.removeFailed=function(e,t,r){var n=e&&e.currentTarget?this.getResponse(e):null,s={e,response:n,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")};if(!r){var a=this.filesData.indexOf(t),h=this.fileList[a];if(h){h.classList.remove(Re),h.classList.add(Ae);var l=h.querySelector("."+re);l&&(l.classList.remove(Re),l.classList.add(Ae))}this.checkActionButtonStatus()}this.trigger("failure",s);var p=this.getLiElement(t);if(!d(p)&&!d(p.querySelector("."+Ee))){var u=p.querySelector("."+Ee);wt(u),q(p.querySelector(".e-spinner-pane"))}},i.prototype.getFilesFromFolder=function(e){this.filesEntries=[];var t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],r=this.checkDirectoryUpload(t);if(r)for(var n=function(h){var l=t[h].webkitGetAsEntry();if(l.isFile){var p=[];l.file(function(u){var c=l.fullPath;p.push({path:c,file:u})}),s.renderSelectedFiles(e,p,!0)}else l.isDirectory&&s.traverseFileTree(l,e)},s=this,a=0;a<t.length;a++)n(a)},i.prototype.checkDirectoryUpload=function(e){for(var t=0;e&&t<e.length;t++){var r=e[t].webkitGetAsEntry();if(r.isDirectory)return!0}return!1},i.prototype.traverseFileTree=function(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var r=e.createReader();this.readFileFromDirectory(r,t)}},i.prototype.readFileFromDirectory=function(e,t){var r=this;e.readEntries(function(n){for(var s=0;s<n.length;s++)r.traverseFileTree(n[s],t);r.pushFilesEntries(t),n.length&&r.readFileFromDirectory(e)})},i.prototype.pushFilesEntries=function(e){for(var t=this,r=[],n=function(h){s.filesEntries[h].file(function(l){if(t.filesEntries.length){var p=t.filesEntries[h].fullPath;r.push({path:p,file:l}),h===t.filesEntries.length-1&&(t.filesEntries=[],t.renderSelectedFiles(e,r,!0))}})},s=this,a=0;a<this.filesEntries.length;a++)n(a)},i.prototype.onSelectFiles=function(e){if(this.enabled){var t;if(e.type==="drop")if(this.directoryUpload)this.getFilesFromFolder(e);else{var r=this.sortFilesList=e.dataTransfer.files;this.browserName!=="msie"&&this.browserName!=="edge"&&this.browserName!=="safari"&&(this.element.files=r),r.length>0&&(t=this.multiple?this.sortFileList(r):[r[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t);(this.isAngular||this.isReact)&&e.stopPropagation()}},i.prototype.getBase64=function(e){return new Promise(function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(s){return r(s)}})},i.prototype.renderSelectedFiles=function(e,t,r,n){var s=this;this.base64String=[];var a={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(t.length<1){a.isCanceled=!0,this.trigger("selected",a);return}this.flag=!0;var h=[];this.multiple||(this.clearData(!0),this.actionCompleteCount=0,t=[t[0]]);for(var l=0;l<t.length;l++){var p=r?t[l].file:t[l];this.updateInitialFileDetails(e,t,p,l,h,r,n)}if(a.filesData=h,!d(this.allowedExtensions)&&this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(var l=0;l<h.length;l++){for(var u=Si.beforeSanitize(),c=Si.serializeValue(u,h[parseInt(l.toString(),10)].name),f=h[parseInt(l.toString(),10)].name,g=!1,v=0;v<f.length;v++)if(f.charCodeAt(v)>127){g=!0;break}var m=/<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/i,y=m.test(f);if(c!==h[parseInt(l.toString(),10)].name&&!(g&&!y)){var w=t[parseInt(l.toString(),10)].name.replace(/[\u00A0-\u9999<>\\&]/g,function(T){return"&#"+T.charCodeAt(0)+";"});h[parseInt(l.toString(),10)].name=w,h[parseInt(l.toString(),10)].status=this.localizedTexts("invalidFileName"),h[parseInt(l.toString(),10)].statusCode="0"}}this.allTypes||(h=this.checkExtension(h)),this.trigger("selected",a,function(C){s._internalRenderSelect(C,h)})},i.prototype.updateInitialFileDetails=function(e,t,r,n,s,a,h){var l=a?t[n].path.substring(1,t[n].path.length):h?xe(r.name.substring(0,r.name.lastIndexOf(".")))+"."+this.getFileType(r.name):this.directoryUpload?t[n].webkitRelativePath:r.name,p={name:l,rawFile:r,size:r.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(r.name),validationMessages:this.validatedFileSize(r.size),statusCode:"1",id:xe(r.name.substring(0,r.name.lastIndexOf(".")))+"."+this.getFileType(r.name)};h&&(p.fileSource="paste"),p.status=p.validationMessages.minSize!==""?this.localizedTexts("invalidMinFileSize"):p.validationMessages.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):p.status,(p.validationMessages.minSize!==""||p.validationMessages.maxSize!=="")&&(p.statusCode="0",this.checkActionComplete(!0)),s.push(p)},i.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var r=0;r<e.modifiedFilesData.length;r++)for(var n=0;n<t.length;n++)e.modifiedFilesData[r].id===t[n].id&&(e.modifiedFilesData[r].rawFile=t[n].rawFile);var s=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(s),this.filesData=this.filesData.concat(s),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(s)}else{if(this.internalCreateFileList(t),this.autoUpload&&this.sequenceUpload&&this.sequentialUpload&&this.filesData.length>0&&this.filesData[this.filesData.length-1].statusCode!=="2"&&this.filesData[this.filesData.length-1].statusCode!=="0"){this.filesData=this.filesData.concat(t);return}this.filesData=this.filesData.concat(t),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(t)}!d(e.progressInterval)&&e.progressInterval!==""&&(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(t),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},i.prototype.allowUpload=function(){var e=!1;return this.isForm&&!d(this.asyncSettings.saveUrl)&&this.asyncSettings.saveUrl!==""&&(e=!0),e},i.prototype.isFormUpload=function(){var e=!1;return this.isForm&&(d(this.asyncSettings.saveUrl)||this.asyncSettings.saveUrl==="")&&(d(this.asyncSettings.removeUrl)||this.asyncSettings.removeUrl==="")&&(e=!0),e},i.prototype.clearData=function(e){d(this.listParent)||(q(this.listParent),this.listParent=null),this.browserName!=="msie"&&!e&&(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},i.prototype.updateSortedFileList=function(e){var t=this.createElement("div",{id:"clonewrapper"}),r=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var s=this.listParent.querySelectorAll("li")[n];t.appendChild(s.cloneNode(!0))}this.removeActionButtons();var a=[].slice.call(t.childNodes);this.createParentUL();for(var h=0;h<e.length;h++){for(var l=0;l<this.filesData.length;l++)this.filesData[l].name===e[h].name&&(this.listParent.appendChild(a[l]),S.add(a[l].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(a[l]),r=h);r!==h&&this.internalCreateFileList([e[h]])}}else this.internalCreateFileList(e)},i.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},i.prototype.checkGenericExtension=function(e,t){var r=[];switch(e.toLowerCase()){case"image/*":r.push("jpg","jpeg","png","gif","bmp","tiff","svg","webp","heic");break;case"audio/*":r.push("mp3","wav","aac","flac","ogg","m4a");break;case"video/*":r.push("mp4","mov","avi","mkv","flv","wmv","webm","mpeg");break;case"application/*":r.push("doc","docx","xls","xlsx","ppt","pptx","zip","rar","7z","tar","pdf");break;case"text/*":r.push("txt","csv","html","css","js","json","xml","md");break}return r.includes(t.toLowerCase())},i.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var r=[],n=d(r)?[""]:this.allowedExtensions.split(","),s=0,a=n;s<a.length;s++){var h=a[s];r.push(h.trim().toLocaleLowerCase())}for(var l=0;l<e.length;l++){var p=e[l].type.indexOf(".")!==-1?e[l].type.replace(".",""):e[l].type;if(r[0].indexOf("/*")!==-1){var u=this.checkGenericExtension(r[0],p);u||(e[l].status=this.localizedTexts("invalidFileType"),e[l].statusCode="0")}else r.indexOf(("."+p).toLocaleLowerCase())===-1&&(e[l].status=this.localizedTexts("invalidFileType"),e[l].statusCode="0")}}return t},i.prototype.validatedFileSize=function(e){var t="",r="";e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?r=this.localizedTexts("invalidMaxFileSize"):(t="",r="");var n={minSize:t,maxSize:r};return n},i.prototype.isPreLoadFile=function(e){for(var t=!1,r=0;r<this.files.length;r++)this.files[r].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[r].type===e.type&&(t=!0);return t},i.prototype.createCustomfileList=function(e){this.createParentUL();for(var t=0,r=e;t<r.length;t++){var n=r[t],s=this.createElement("li",{className:ci,attrs:{"data-file-name":n.name}});this.uploadTemplateFn=this.templateComplier(this.template);var a=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,s);if(a){var h=[].slice.call(a);G(h,s)}var l=e.indexOf(n),p={element:s,fileInfo:n,index:l,isPreload:this.isPreLoadFile(n)},u={element:s,fileInfo:n,index:l,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",p),this.trigger("fileListRendering",u),this.listParent.appendChild(s),this.fileList.push(s)}this.renderReactTemplates()},i.prototype.createParentUL=function(){d(this.listParent)&&(this.listParent=this.createElement("ul",{className:Rn}),this.uploadWrapper.appendChild(this.listParent))},i.prototype.formFileList=function(e,t){var r=this.createElement("li",{className:ci});r.setAttribute("data-files-count",e.length+"");for(var n=this.createElement("span",{className:sr}),s,a=0,h=e;a<h.length;a++){var l=h[a],p=this.createElement("span",{className:Hn});p.innerHTML=this.getFileNameOnly(l.name);var u=this.createElement("span",{className:Pn}),c=this.getFileType(l.name);if(u.innerHTML="."+c,c||u.classList.add("e-hidden"),!this.enableRtl)n.appendChild(p),n.appendChild(u);else{var f=this.createElement("span",{className:Un});f.appendChild(u),f.appendChild(p),n.appendChild(f)}this.truncateName(p),s=this.formValidateFileInfo(l,r)}r.appendChild(n),this.setListToFileInfo(e,r);var g=this.listParent.querySelectorAll("li").length,v=this.createElement("span");if(r.classList.contains(At)?(v.classList.add(re),v.classList.add(At),v.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):s):(v.classList.add(e.length>1?Tl:Vn),v.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),n.appendChild(v),d(r.querySelector(".e-icons"))){var m=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});this.browserName==="msie"&&m.classList.add("e-msie"),m.setAttribute("title",this.localizedTexts("remove")),r.appendChild(n),r.appendChild(m),S.add(m,"click",this.removeFiles,this),m.classList.add(fe)}var y={element:r,fileInfo:this.mergeFileInfo(e,r),index:g,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,r))},w={element:r,fileInfo:this.mergeFileInfo(e,r),index:g,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,r))};this.trigger("rendering",y),this.trigger("fileListRendering",w),this.listParent.appendChild(r),this.fileList.push(r)},i.prototype.formValidateFileInfo=function(e,t){var r=e.status,n=this.validatedFileSize(e.size);(n.minSize!==""||n.maxSize!=="")&&(this.addInvalidClass(t),r=n.minSize!==""?this.localizedTexts("invalidMinFileSize"):n.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):r);var s=this.checkExtension(this.getFilesInArray(e))[0].status;return s===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),r=s),r},i.prototype.addInvalidClass=function(e){e.classList.add(At)},i.prototype.createFormInput=function(e){if(this.browserName!=="safari"){var t=this.element.cloneNode(!0);t.classList.add(Cl);for(var r=0,n=e;r<n.length;r++){var s=n[r];s.input=t}t.setAttribute("id",xe("hiddenUploader")),t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+Bn).appendChild(t),this.browserName!=="msie"&&this.browserName!=="edge"&&(this.element.value="")}},i.prototype.getFileSize=function(e){for(var t=0,r=0,n=e;r<n.length;r++){var s=n[r];t+=s.size}return t},i.prototype.mergeFileInfo=function(e,t){for(var r={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},n=[],s="",a=0,h=e;a<h.length;a++){var l=h[a];n.push(l.name),s=l.type}return r.name=n.join(", "),r.size=this.getFileSize(e),r.type=s,r.status=this.statusForFormUpload(e,t),r},i.prototype.statusForFormUpload=function(e,t){for(var r=!0,n,s=0,a=e;s<a.length;s++){var h=a[s];n=h.status;var l=this.validatedFileSize(h.size);(l.minSize!==""||l.maxSize!=="")&&(r=!1,n=l.minSize!==""?this.localizedTexts("invalidMinFileSize"):l.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):n);var p=this.checkExtension(this.getFilesInArray(h))[0].status;p===this.localizedTexts("invalidFileType")&&(r=!1,n=p)}return r?n=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add(At),n=e.length>1?this.localizedTexts("invalidFileSelection"):n),n},i.prototype.formCustomFileList=function(e,t){this.createParentUL();var r=this.createElement("li",{className:ci});r.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,r);var n=this.mergeFileInfo(e,r);r.setAttribute("data-file-name",n.name),this.uploadTemplateFn=this.templateComplier(this.template);var s=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,r);if(s){var a=[].slice.call(s);G(a,r)}var h=this.listParent.querySelectorAll("li").length;r.classList.contains(At)||this.createFormInput(e);var l={element:r,fileInfo:n,index:h,isPreload:this.isPreLoadFile(n)},p={element:r,fileInfo:n,index:h,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",l),this.trigger("fileListRendering",p),this.listParent.appendChild(r),this.fileList.push(r),this.renderReactTemplates()},i.prototype.createFileList=function(e){this.filesData=this.filesData&&this.filesData.length>0?this.filesData.concat(e):e,this.internalCreateFileList(e)},i.prototype.internalCreateFileList=function(e){if(this.createParentUL(),this.template!==""&&!d(this.template))this.isFormUpload()?(this.uploadWrapper.classList.add(qn),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e);else if(this.isFormUpload())this.uploadWrapper.classList.add(qn),this.formFileList(e,this.element.files);else for(var t=0,r=e;t<r.length;t++){var n=r[t],s=this.createElement("li",{className:ci,attrs:{"data-file-name":n.name,"data-files-count":"1"}}),a=this.createElement("span",{className:sr}),h=this.createElement("span",{className:Hn,attrs:{title:n.name}});h.innerHTML=this.getFileNameOnly(n.name);var l=this.createElement("span",{className:Pn}),p=this.getFileType(n.name);if(l.innerHTML="."+p,p||l.classList.add("e-hidden"),!this.enableRtl)a.appendChild(h),a.appendChild(l);else{var u=this.createElement("span",{className:Un});u.appendChild(l),u.appendChild(h),a.appendChild(u)}var c=this.createElement("span",{className:Vn});c.innerHTML=this.bytesToSize(n.size),a.appendChild(c);var f=this.createElement("span",{className:re});a.appendChild(f),f.innerHTML=n.status,s.appendChild(a);var g=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});this.browserName==="msie"&&g.classList.add("e-msie"),g.setAttribute("title",this.localizedTexts("remove")),s.appendChild(g),S.add(g,"click",this.removeFiles,this),n.statusCode==="2"?(f.classList.add(Re),g.classList.add(Ee),g.setAttribute("title",this.localizedTexts("delete")),g.setAttribute("aria-label",this.localizedTexts("delete"))):n.statusCode!=="1"&&(f.classList.remove(Re),f.classList.add(jn)),this.autoUpload&&n.statusCode==="1"&&this.asyncSettings.saveUrl!==""&&(f.innerHTML=""),g.classList.contains(Ee)||(g.classList.add(fe),g.setAttribute("aria-label",this.localizedTexts("remove")));var v=e.indexOf(n),m={element:s,fileInfo:n,index:v,isPreload:this.isPreLoadFile(n)},y={element:s,fileInfo:n,index:v,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",m),this.trigger("fileListRendering",y),this.listParent.appendChild(s),this.fileList.push(s),this.truncateName(h);var w=this.flag;this.isPreLoadFile(n)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=w)}},i.prototype.getSlicedName=function(e){var t=e.textContent;e.dataset.tail=t.slice(t.length-10)},i.prototype.setListToFileInfo=function(e,t){for(var r=0,n=e;r<n.length;r++){var s=n[r];s.list=t}},i.prototype.truncateName=function(e){var t=e;this.browserName!=="edge"&&t.offsetWidth<t.scrollWidth?this.getSlicedName(t):t.offsetWidth+1<t.scrollWidth&&this.getSlicedName(t)},i.prototype.getFileType=function(e){var t,r=e.lastIndexOf(".");return r>=0&&(t=e.substring(r+1)),t||""},i.prototype.getFileNameOnly=function(e){var t=this.getFileType(e),r=e.split("."+t);return t=r[0]},i.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},i.prototype.filterfileList=function(e){for(var t=[],r,n=0;n<e.length;n++)r=this.getLiElement(e[n]),(!d(r)&&!r.classList.contains(Re)||!this.showFileList&&e[n].status!=="File uploaded successfully")&&t.push(e[n]);return t},i.prototype.updateStatus=function(e,t,r,n){if(n===void 0&&(n=!0),!(t===""||d(t))&&!(r===""||d(r))&&(e.status=t,e.statusCode=r),n){var s=this.getLiElement(e);d(s)||!d(s.querySelector("."+re))&&!(t===""||d(t))&&(s.querySelector("."+re).textContent=t)}return e},i.prototype.getLiElement=function(e){for(var t,r=0;r<this.filesData.length;r++)!d(e)&&(!d(this.filesData[r].id)&&!d(e.id)?this.filesData[r].name===e.name&&this.filesData[r].id===e.id:this.filesData[r].name===e.name)&&(t=r);return this.fileList[t]},i.prototype.createProgressBar=function(e){var t=this.createElement("span",{className:ct}),r=this.createElement("progressbar",{className:ui,attrs:{value:"0",max:"100"}}),n=this.createElement("span",{className:Sl});r.setAttribute("style","width: 0%");var s=this.createElement("span",{className:nr});s.textContent="0%",n.appendChild(r),t.appendChild(n),t.appendChild(s),e.querySelector("."+sr).appendChild(t)},i.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!d(t.querySelector("."+ui)))if(!d(this.progressInterval)&&this.progressInterval!==""){var r=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);(r===0||r===100)&&this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}else this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")},i.prototype.changeProgressValue=function(e,t){e.querySelector("."+ui).setAttribute("style","width:"+t),e.querySelector("."+nr).textContent=t},i.prototype.uploadInProgress=function(e,t,r,n){var s=this.getLiElement(t);if(!(d(s)&&!r)){if(d(s))this.cancelUploadingFile(t,e,n);else{t.statusCode==="5"&&this.cancelUploadingFile(t,e,n,s),!(s.querySelectorAll("."+ct).length>0)&&s.querySelector("."+re)&&(s.querySelector("."+re).classList.add(De),this.createProgressBar(s),this.updateProgressBarClasses(s,De),s.querySelector("."+re).classList.remove(Ae)),this.updateProgressbar(e,s);var a=s.querySelector("."+fe);d(a)||(a.classList.add(ie,De),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(fe))}var h={e,operation:"upload",file:this.updateStatus(t,this.localizedTexts("inProgress"),"3")};this.trigger("progress",h)}},i.prototype.cancelUploadingFile=function(e,t,r,n){var s=this;if(e.statusCode==="5"){var a={event:t,fileData:e,cancel:!1,customFormData:[],currentRequest:null};this.trigger("canceling",a,function(h){if(h.cancel){if(e.statusCode="3",!d(n)){var l=n.querySelector("."+ie);d(l)||(wt(l),q(n.querySelector(".e-spinner-pane")))}}else{r.emitError=!1,r.httpRequest.abort();var p=new FormData;if(e.statusCode==="5"){var u=s.element.getAttribute("name");p.append(u,e.name),p.append("cancel-uploading",e.name),s.updateFormData(p,h.customFormData);var c=new Ht(s.asyncSettings.removeUrl,"POST",!0,null);c.emitError=!1,c.beforeSend=function(f){h.currentRequest&&s.updateCustomheader(c.httpRequest,h.currentRequest)},c.onLoad=function(f){return s.removecanceledFile(f,e),{}},c.send(p)}}})}},i.prototype.removecanceledFile=function(e,t){var r=this.getLiElement(t);if(!(d(r)||r.querySelector("."+je)||d(r.querySelector("."+ie)))){this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,r);var n=r.querySelector("."+fe);d(r)||(wt(n),d(r.querySelector(".e-spinner-pane"))||q(r.querySelector(".e-spinner-pane")));var s=e&&e.currentTarget?this.getResponse(e):null,a={event:e,response:s,operation:"cancel",file:t};this.trigger("success",a)}},i.prototype.renderFailureState=function(e,t,r){var n=this;this.updateProgressBarClasses(r,Ae),this.removeProgressbar(r,"failure"),d(r.querySelector(".e-file-status"))||r.querySelector(".e-file-status").classList.add(Ae);var s=r.querySelector("."+ie);if(!d(s)){s.classList.remove(ie,De),s.classList.add(fe),s.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("retry"));var a=r.querySelector("."+je);a.addEventListener("click",function(h){n.reloadcanceledFile(h,t,r,!1)},!1)}},i.prototype.reloadcanceledFile=function(e,t,r,n){t.statusCode="1",t.status=this.localizedTexts("readyToUploadMessage"),n||(d(r.querySelector("."+re))||r.querySelector("."+re).classList.remove(Ae),d(r.querySelector("."+je))||q(r.querySelector("."+je)),this.pauseButton=null),d(r)||r.classList.add(jt),this.upload([t])},i.prototype.uploadComplete=function(e,t,r){var n=e.target;if(n.readyState===4&&n.status>=200&&n.status<=299){var s=this.getLiElement(t);if(d(s)&&(!r||d(r))&&this.showFileList)return;if(!d(s)){this.updateProgressBarClasses(s,Re),this.removeProgressbar(s,"success");var a=s.querySelector("."+ie);d(a)||(a.classList.add(Ee),a.setAttribute("title",this.localizedTexts("delete")),a.setAttribute("aria-label",this.localizedTexts("delete")),a.classList.remove(ie),a.classList.remove(De))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},i.prototype.getResponse=function(e){var t=e.currentTarget,r={readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials};return r},i.prototype.raiseSuccessEvent=function(e,t){var r=this,n=e&&e.currentTarget?this.getResponse(e):null,s=this.localizedTexts("uploadSuccessMessage"),a={e,response:n,operation:"upload",file:this.updateStatus(t,s,"2",!1),statusText:s},h=this.getLiElement(t);if(!d(h)){var l=h.querySelector("."+Nn);d(l)||(wt(h),q(l))}this.trigger("success",a,function(p){r.updateStatus(t,p.statusText,"2"),r.multiple?r.uploadedFilesData.push(t):r.uploadedFilesData=[t],r.trigger("change",{file:r.uploadedFilesData}),r.checkActionButtonStatus(),r.fileList.length>0?r.getLiElement(t).classList.contains(jt)?r.getLiElement(t).classList.remove(jt):(r.uploadSequential(),r.checkActionComplete(!0)):r.showFileList||r.checkActionComplete(!0)})},i.prototype.uploadFailed=function(e,t){var r=this,n=this.getLiElement(t),s=e&&e.currentTarget?this.getResponse(e):null,a=this.localizedTexts("uploadFailedMessage"),h={e,response:s,operation:"upload",file:this.updateStatus(t,a,"0",!1),statusText:a};d(n)||this.renderFailureState(e,t,n),this.trigger("failure",h,function(l){r.updateStatus(t,l.statusText,"0"),r.checkActionButtonStatus(),r.uploadSequential(),r.checkActionComplete(!0)})},i.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},i.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},i.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}},i.prototype.getSelectedFileStatus=function(e){for(var t=[],r=0,n=0;n<e.length;n++)for(var s=e[n],a=0;a<this.filesData.length;a++)if(this.filesData[a].name===s.name&&this.filesData[a].status===s.status){t[r]=this.filesData[a],++r;break}return t},i.prototype.updateProgressBarClasses=function(e,t){var r=e.querySelector("."+ui);d(r)||(r.classList.add(t),this.actionButtons&&this.clearButton&&this.uploadWrapper&&(t==="e-upload-progress"&&!this.clearButton.hasAttribute("disabled")?this.clearButton.setAttribute("disabled","disabled"):(t==="e-upload-success"||t==="e-upload-fails")&&this.uploadWrapper.querySelectorAll(".e-upload-progress-bar.e-upload-progress:not(.e-upload-success):not(.e-upload-fails)").length===0&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled")))},i.prototype.removeProgressbar=function(e,t){var r=this;d(e.querySelector("."+ct))||(this.progressAnimation=new zr({duration:1250}),this.progressAnimation.animate(e.querySelector("."+ct),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector("."+nr),{name:"FadeOut"}),setTimeout(function(){r.animateProgressBar(e,t)},750))},i.prototype.animateProgressBar=function(e,t){t==="success"?(e.classList.add(Re),d(e.querySelector("."+re))||(e.querySelector("."+re).classList.remove(De),this.progressAnimation.animate(e.querySelector("."+re),{name:"FadeIn"}),e.querySelector("."+re).classList.add(Re))):d(e.querySelector("."+re))||(e.querySelector("."+re).classList.remove(De),this.progressAnimation.animate(e.querySelector("."+re),{name:"FadeIn"}),e.querySelector("."+re).classList.add(Ae)),e.querySelector("."+ct)&&q(e.querySelector("."+ct))},i.prototype.setExtensions=function(e){e!==""&&!d(e)?this.element.setAttribute("accept",e):this.element.removeAttribute("accept")},i.prototype.templateComplier=function(e){if(e)try{return typeof e!="function"&&et(e,document).length?yt(le(e,document).innerHTML.trim()):yt(e)}catch{return yt(e)}},i.prototype.setRTL=function(){this.enableRtl?M([this.uploadWrapper],Wn):te([this.uploadWrapper],Wn)},i.prototype.localizedTexts=function(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)},i.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains(ar)&&this.uploadWrapper.classList.remove(ar),!d(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!d(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!d(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(ar),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),d(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),d(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},i.prototype.checkHTMLAttributes=function(e){for(var t=e?d(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"],r=0,n=t;r<n.length;r++){var s=n[r];if(!d(this.element.getAttribute(s)))switch(s){case"accept":(d(this.uploaderOptions)||this.uploaderOptions.allowedExtensions===void 0||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(d(this.uploaderOptions)||this.uploaderOptions.multiple===void 0||e){var a=this.element.getAttribute(s)==="multiple"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true";this.setProperties({multiple:a},!e),this.initialAttr.multiple=!0}break;case"disabled":if(d(this.uploaderOptions)||this.uploaderOptions.enabled===void 0||e){var h=!(this.element.getAttribute(s)==="disabled"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true");this.setProperties({enabled:h},!e),this.initialAttr.disabled=!0}}}},i.prototype.chunkUpload=function(e,t,r){var n=0,s=Math.min(this.asyncSettings.chunkSize,e.size),a=0,h=e.rawFile.slice(n,s),l={chunkIndex:a,blob:h,file:e,start:n,end:s,retryCount:0,request:null};this.sendRequest(e,l,t,r)},i.prototype.sendRequest=function(e,t,r,n){var s=this,a=new FormData,h=e.rawFile.slice(t.start,t.end);a.append(this.uploaderName,h,e.name),a.append("chunk-index",t.chunkIndex.toString()),a.append("chunkIndex",t.chunkIndex.toString());var l=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);a.append("total-chunk",l.toString()),a.append("totalChunk",l.toString());var p=new Ht({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});p.emitError=!1,p.onLoad=function(c){return s.chunkUploadComplete(c,t,r),{}},p.onUploadProgress=function(c){return s.chunkUploadInProgress(c,t,r),{}};var u={fileData:e,customFormData:[],cancel:!1,chunkSize:this.asyncSettings.chunkSize===0?null:this.asyncSettings.chunkSize};p.beforeSend=function(c){u.currentRequest=p.httpRequest,u.currentChunkIndex=t.chunkIndex,u.currentChunkIndex===0?s.trigger("uploading",u,function(f){s.uploadingEventCallback(a,f,c,e)}):s.trigger("chunkUploading",u,function(f){s.uploadingEventCallback(a,f,c,e)})},p.onError=function(c){return s.chunkUploadFailed(c,t,r),{}},p.send(a),t.request=p},i.prototype.uploadingEventCallback=function(e,t,r,n){t.cancel?this.eventCancelByArgs(r,t,n):this.updateFormData(e,t.customFormData)},i.prototype.eventCancelByArgs=function(e,t,r){var n=this;if(e.cancel=!0,t.fileData.statusCode!=="5"){t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel");var s=this.getLiElement(t.fileData);if(s){d(s.querySelector("."+re))||(s.querySelector("."+re).innerHTML=this.localizedTexts("fileUploadCancel"),s.querySelector("."+re).classList.add(Ae)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var a=s.querySelector("."+fe);a&&a.parentElement.insertBefore(this.pauseButton,a),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(h){n.reloadcanceledFile(h,r,s)},!1),this.checkActionButtonStatus()}}},i.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||d(this.asyncSettings.chunkSize))},i.prototype.chunkUploadComplete=function(e,t,r){var n=this,s=e.target,a;if(s.readyState===4&&s.status>=200&&s.status<300){var h=e&&e.currentTarget?this.getResponse(e):null,l=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),p={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:l,chunkSize:this.asyncSettings.chunkSize,response:h};if(this.trigger("chunkSuccess",p),(d(r)||!r)&&(a=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),t.file.statusCode==="5"){var u={event:e,fileData:t.file,cancel:!1,customFormData:[]};this.trigger("canceling",u,function(f){if(f.cancel){t.file.statusCode="3";var g=a.querySelector("."+ie);!d(a)&&!d(g)&&(wt(g),q(a.querySelector(".e-spinner-pane"))),n.sendNextRequest(t)}else{t.request.emitError=!1,s.abort();var v=new FormData,m=n.element.getAttribute("name");v.append(m,t.file.name),v.append("cancel-uploading",t.file.name),v.append("cancelUploading",t.file.name),n.updateFormData(v,f.customFormData);var y=new Ht(n.asyncSettings.removeUrl,"POST",!0,null);y.emitError=!1,y.onLoad=function(w){return n.removeChunkFile(w,t,r),{}},y.send(v)}})}else{if(l-1===t.chunkIndex&&l>t.chunkIndex){var c=this.pausedData.indexOf(t);c>=0&&this.pausedData.splice(c,1),d(this.template)&&(d(r)||!r)&&a&&(a&&!d(a.querySelector("."+ge))&&q(a.querySelector("."+ge)),this.removeChunkProgressBar(t)),this.raiseSuccessEvent(e,t.file);return}t.file.statusCode!=="4"&&this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)},i.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},i.prototype.removeChunkFile=function(e,t,r){if(d(this.template)&&d(r)&&!r){var n=this.getLiElement(t.file),s=n.querySelector("."+ie),a=s;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(n,Ae),this.removeProgressbar(n,"failure"),s&&(s.classList.remove(ie),s.classList.add(fe),s.setAttribute("title",this.localizedTexts("remove")));var h=n.querySelector("."+ge);h&&(h.classList.add(je),h.classList.remove(ge),h.setAttribute("title",this.localizedTexts("retry"))),!d(n)&&!d(s)&&!d(n.querySelector(".e-spinner-pane"))&&(wt(a),q(n.querySelector(".e-spinner-pane")))}},i.prototype.pauseUpload=function(e,t,r){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var n={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,r,n),this.sequentialUpload&&this.uploadSequential()},i.prototype.abortUpload=function(e,t,r){e.file.statusCode!=="4"&&(e.request.emitError=!1,e.request.httpRequest.abort());var n=this.getLiElement(e.file);if(d(this.template)&&(d(t)||!t)){var s=n.querySelector("."+ge);s.classList.remove(ge),s.classList.add(ut),s.setAttribute("title",this.localizedTexts("resume")),s.nextElementSibling.classList.add(fe),s.nextElementSibling.classList.remove(ie),s.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var a=0;a<this.pausedData.length;a++)this.pausedData[a].file.name===e.file.name&&this.pausedData.splice(a,1);this.pausedData.push(e),this.trigger("pausing",r)},i.prototype.resumeUpload=function(e,t,r){var n=this.getLiElement(e.file),s;d(n)||(s=n.querySelector("."+ut)),!d(s)&&(d(r)||!r)&&(s.classList.remove(ut),s.classList.add(ge),s.setAttribute("title",this.localizedTexts("pause")),s.nextElementSibling.classList.remove(fe),s.nextElementSibling.classList.add(ie),s.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var a={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",a);for(var h=0;h<this.pausedData.length;h++)this.pausedData[h].end===this.pausedData[h].file.size?this.chunkUploadComplete(t,e,r):this.pausedData[h].file.name===e.file.name&&(this.pausedData[h].start=this.pausedData[h].end,this.pausedData[h].end=this.pausedData[h].end+this.asyncSettings.chunkSize,this.pausedData[h].end=Math.min(this.pausedData[h].end,this.pausedData[h].file.size),this.pausedData[h].chunkIndex=this.pausedData[h].chunkIndex+1,this.sendRequest(this.pausedData[h].file,this.pausedData[h],r))},i.prototype.updateMetaData=function(e){this.uploadMetaData.indexOf(e)===-1?this.uploadMetaData.push(e):(this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e))},i.prototype.removeChunkProgressBar=function(e){var t=this.getLiElement(e.file);if(!d(t)){this.updateProgressBarClasses(t,Re),this.removeProgressbar(t,"success");var r=t.querySelector("."+ie);d(r)||(r.classList.add(Ee),r.setAttribute("title",this.localizedTexts("delete")),r.classList.remove(ie,De))}},i.prototype.chunkUploadFailed=function(e,t,r){var n=this,s=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),a;d(this.template)&&(d(r)||!r)&&(a=this.getLiElement(t.file));var h=e&&e.currentTarget?this.getResponse(e):null,l={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:s,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:h};this.trigger("chunkFailure",l,function(p){if(!p.cancel)if(t.retryCount<n.asyncSettings.retryCount)setTimeout(function(){n.retryRequest(a,t,r)},n.asyncSettings.retryAfterDelay);else{if(!d(a)){var u=a.querySelector("."+ge)?a.querySelector("."+ge):a.querySelector("."+ut);d(u)||(u.classList.add(je),u.classList.remove(ge,ut)),n.updateProgressBarClasses(a,Ae),n.removeProgressbar(a,"failure"),a.querySelector(".e-icons").classList.remove(De);var c=a.querySelector("."+ie)?a.querySelector("."+ie):a.querySelector("."+fe);c.classList.remove(ie),d(a.querySelector("."+ge))||q(a.querySelector("."+ge)),t.start>0?(c.classList.add(Ee),c.setAttribute("title",n.localizedTexts("delete"))):(c.classList.add(fe),c.setAttribute("title",n.localizedTexts("remove")))}t.retryCount=0;var f=t.file,g=n.localizedTexts("uploadFailedMessage"),v={e,response:h,operation:"upload",file:n.updateStatus(f,g,"0",!1),statusText:g};n.trigger("failure",v,function(m){n.updateStatus(f,m.statusText,"0"),n.uploadSequential(),n.checkActionComplete(!0)})}})},i.prototype.retryRequest=function(e,t,r){d(this.template)&&(d(r)||!r)&&e&&this.updateProgressBarClasses(e,Ae),t.retryCount+=1,this.sendRequest(t.file,t)},i.prototype.checkPausePlayAction=function(e){var t=e.target,r=e.target.parentElement,n=this.fileList.indexOf(r),s=this.filesData[n],a=this.getCurrentMetaData(s);t.classList.contains(ge)?this.pauseUpload(a,e):t.classList.contains(ut)?this.resumeUpload(a,e):t.classList.contains(je)&&(a.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(a,!1):this.retryUpload(a,!0))},i.prototype.retryUpload=function(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add(jt)},i.prototype.chunkUploadInProgress=function(e,t,r){var n=this;if(t.file.statusCode!=="4"){t.file.statusCode!=="4"&&t.file.statusCode!=="5"&&(t.file.statusCode="3",t.file.status=this.localizedTexts("inProgress")),this.updateMetaData(t);var s=this.getLiElement(t.file);if(!d(s)){var a=s.querySelector("."+je);if(d(a)||(a.classList.add(ge),a.setAttribute("title",this.localizedTexts("pause")),a.classList.remove(je)),!d(s)){if(!(s.querySelectorAll("."+ct).length>0)){var h=s.querySelector("."+re);d(this.template)&&(h.classList.add(De),h.classList.remove(Ae),this.createProgressBar(s),this.updateProgressBarClasses(s,De));var l=s.querySelector("."+fe)?s.querySelector("."+fe):s.querySelector("."+Ee);d(l)||(l.classList.add(ie),l.setAttribute("title",this.localizedTexts("abort")),l.classList.remove(fe))}if(!isNaN(Math.round(e.loaded/e.total*100))&&d(this.template)&&t.file.statusCode!=="4"){var p=void 0,u=Math.ceil(t.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&u&&(p=Math.round(t.chunkIndex/u*100),this.changeProgressValue(s,p.toString()+"%"))}t.chunkIndex===0&&this.checkActionButtonStatus()}if(d(s.querySelector("."+ge))&&d(this.template)&&d(s.querySelector("."+Ee))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),this.browserName==="msie"&&this.pauseButton.classList.add("e-msie");var c=s.querySelector("."+ie);c.parentElement.insertBefore(this.pauseButton,c),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(f){n.checkPausePlayAction(f)},!1)}}}},i.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do e=e/1024,t++;while(e>99);return t>=2&&(e=e*1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},i.prototype.sortFileList=function(e){e=e||this.sortFilesList;for(var t=e,r=[],n=0;n<t.length;n++)r.push(t[n].name);for(var s=r.sort(),a=[],h=0,l=s;h<l.length;h++)for(var p=l[h],n=0;n<t.length;n++)p===t[n].name&&a.push(t[n]);return a},i.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=["aria-label","directory","webkitdirectory","tabindex"],t=0,r=e;t<r.length;t++){var n=r[t];this.element.removeAttribute(n)}d(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),q(this.uploadWrapper)),this.uploadWrapper=null,this.uploadWrapper=null,this.browseButton=null,this.dropAreaWrapper=null,this.dropZoneElement=null,this.dropArea=null,this.keyboardModule=null,this.clearButton=null,this.uploadButton=null,o.prototype.destroy.call(this)},i.prototype.upload=function(e,t){var r=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t))this.sequenceUpload(e);else{var n=this.getFilesInArray(e),s={customFormData:[],currentRequest:null,cancel:!1};this.trigger("beforeUpload",s,function(a){a.cancel||(r.customFormDatas=a.customFormData&&a.customFormData.length>0?a.customFormData:r.customFormDatas,r.uploadFiles(n,t))})}},i.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=e:t.push(e),t},i.prototype.serverReadFileBase64=function(e,t,r){var n=this;return new Promise(function(s,a){var h=n.fileStreams[e].rawFile;try{var l=new FileReader;l.onload=function(p){return function(){try{var u=p.result,c=u?u.split(";base64,")[1]:null;s(c)}catch(f){a(f)}}}(l),l.readAsDataURL(h.slice(t,t+r))}catch(p){a(p)}})},i.prototype.uploadFileCount=function(e){var t=this.filesData;if(!t||t.length===0)return-1;var r=t.length;return r},i.prototype.getFileRead=function(e,t){var r=this.filesData;if(!r||r.length===0)return-1;var n=r[e],s=this.newFileRef++;return this.fileStreams[s]=n,s},i.prototype.uploadFiles=function(e,t){var r=[];if(!(this.asyncSettings.saveUrl===""||d(this.asyncSettings.saveUrl))){if(!t||d(t))if(this.multiple)r=this.filterfileList(e);else{var n=[];n.push(e[0]),r=this.filterfileList(n)}else r=e;for(var s=0;s<r.length;s++)this.uploadFilesRequest(r,s,t)}},i.prototype.uploadFilesRequest=function(e,t,r){var n=this,s=this.checkChunkUpload(),a=new Ht(this.asyncSettings.saveUrl,"POST",!0,null);a.emitError=!1;var h={fileData:e[t],customFormData:[],cancel:!1},l=new FormData;if(a.beforeSend=function(u){h.currentRequest=a.httpRequest,n.trigger("uploading",h,function(c){c.cancel&&n.eventCancelByArgs(u,c,e[t]),n.customFormDatas&&n.customFormDatas.length>0&&n.updateFormData(l,n.customFormDatas),n.updateFormData(l,c.customFormData)})},e[t].statusCode==="1"){var p=this.element.getAttribute("name");l.append(p,e[t].rawFile,e[t].name),s&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],r,t):(a.onLoad=function(u){return h.cancel?{}:(n.uploadComplete(u,e[t],r),{})},a.onUploadProgress=function(u){return h.cancel?{}:(n.uploadInProgress(u,e[t],r,a),{})},a.onError=function(u){return n.uploadFailed(u,e[t]),{}},a.send(l))}},i.prototype.spliceFiles=function(e){for(var t=this.fileList[e],r=this.getFilesData(),n=+t.getAttribute("data-files-count"),s=0,a=0;a<e;a++)s+=+this.fileList[a].getAttribute("data-files-count");for(var h=s+n-1,l=h;l>=s;l--)r.splice(l,1)},i.prototype.remove=function(e,t,r,n,s){var a=this;d(n)&&(n=!0);var h={event:s,cancel:!1,filesData:[],customFormData:[],postRawFile:n,currentRequest:null},l={cancel:!1,customFormData:[],currentRequest:null};this.trigger("beforeRemove",l,function(p){if(!p.cancel)if(a.isFormUpload())h.filesData=e,a.trigger("removing",h,function(w){if(!w.cancel)for(var C=a.getFilesInArray(e),T=!1,A=void 0,L=0,k=C;L<k.length;L++){var R=k[L];if(T||(A=a.fileList.indexOf(R.list)),A>-1){var N=d(R.input)?null:R.input;N&&q(N),a.spliceFiles(A),q(a.fileList[A]),a.fileList.splice(A,1),T=!0,A=-1}}});else if(a.isForm&&(d(a.asyncSettings.removeUrl)||a.asyncSettings.removeUrl===""))h.filesData=a.getFilesData(),a.trigger("removing",h,function(w){w.cancel||a.clearAll()});else{var u=[];e=d(e)?a.filesData:e,e instanceof Array?u=e:u.push(e),h.filesData=u;for(var c=a.asyncSettings.removeUrl,f=!(c===""||d(c)),g=function(w){var C=a.uploadedFilesData.indexOf(w);(w.statusCode==="2"||w.statusCode==="4"||w.statusCode==="0"&&C!==-1)&&f?a.removeUploadedFile(w,h,r,t):r?a.removeFilesData(w,t):a.trigger("removing",h,function(T){T.cancel||a.removeFilesData(w,t)}),s&&!s.target.classList.contains(fe)&&a.checkActionComplete(!1)},v=0,m=u;v<m.length;v++){var y=m[v];g(y)}}})},i.prototype.clearAll=function(){var e=this;if(d(this.listParent)){this.browserName!=="msie"&&(this.element.value=""),this.filesData=[];return}var t={cancel:!1,filesData:this.filesData};this.trigger("clearing",t,function(r){r.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})},i.prototype.getFilesData=function(e){return d(e)?this.filesData:this.getSelectedFiles(e)},i.prototype.pause=function(e,t){e=e||this.filesData;var r=this.getFilesInArray(e);this.pauseUploading(r,t)},i.prototype.pauseUploading=function(e,t){for(var r=this.getFiles(e),n=0;n<r.length;n++)r[n].statusCode==="3"&&this.pauseUpload(this.getCurrentMetaData(r[n],null),null,t)},i.prototype.getFiles=function(e){var t=[];return!d(e)&&!(e instanceof Array)?t.push(e):t=e,t},i.prototype.resume=function(e,t){e=e||this.filesData;var r=this.getFilesInArray(e);this.resumeFiles(r,t)},i.prototype.resumeFiles=function(e,t){for(var r=this.getFiles(e),n=0;n<r.length;n++)r[n].statusCode==="4"&&this.resumeUpload(this.getCurrentMetaData(r[n],null),null,t)},i.prototype.retry=function(e,t,r){e=e||this.filesData;var n=this.getFilesInArray(e);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(n,t,r)},i.prototype.retryFailedFiles=function(e,t,r){for(var n=this.getFiles(e),s=0;s<n.length;s++)if(n[s].statusCode==="5"||n[s].statusCode==="0")if(this.asyncSettings.chunkSize>0&&this.getCurrentMetaData(n[s],null))this.retryUpload(this.getCurrentMetaData(n[s],null),t);else{var a=void 0;r||(a=this.fileList[this.filesData.indexOf(n[s])]),this.reloadcanceledFile(null,n[s],a,r)}},i.prototype.cancel=function(e){e=e||this.filesData;var t=this.getFilesInArray(e);this.cancelUpload(t)},i.prototype.cancelUpload=function(e){var t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var r=0;r<t.length;r++)if(t[r].statusCode==="3"){var n=this.getCurrentMetaData(t[r],null);n.file.statusCode="5",n.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(n),this.showHideUploadSpinner(t[r])}}else for(var r=0;r<t.length;r++)t[r].statusCode==="3"&&(t[r].statusCode="5",t[r].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[r]))},i.prototype.showHideUploadSpinner=function(e){var t=this.getLiElement(e);if(!d(t)&&d(this.template)){var r=t.querySelector("."+ie);_i({target:r,width:"20px"}),Gi(r)}},B([$t({saveUrl:"",removeUrl:""},Dl)],i.prototype,"asyncSettings",void 0),B([D(!1)],i.prototype,"sequentialUpload",void 0),B([D({})],i.prototype,"htmlAttributes",void 0),B([D("")],i.prototype,"cssClass",void 0),B([D(!0)],i.prototype,"enabled",void 0),B([D(null)],i.prototype,"template",void 0),B([D(!0)],i.prototype,"multiple",void 0),B([D(!0)],i.prototype,"autoUpload",void 0),B([D(!0)],i.prototype,"enableHtmlSanitizer",void 0),B([$t({},El)],i.prototype,"buttons",void 0),B([D("")],i.prototype,"allowedExtensions",void 0),B([D(0)],i.prototype,"minFileSize",void 0),B([D(3e7)],i.prototype,"maxFileSize",void 0),B([D(null)],i.prototype,"dropArea",void 0),B([ti([{}],Ol)],i.prototype,"files",void 0),B([D(!0)],i.prototype,"showFileList",void 0),B([D(!1)],i.prototype,"directoryUpload",void 0),B([D("Default")],i.prototype,"dropEffect",void 0),B([W()],i.prototype,"created",void 0),B([W()],i.prototype,"actionComplete",void 0),B([W()],i.prototype,"rendering",void 0),B([W()],i.prototype,"beforeUpload",void 0),B([W()],i.prototype,"fileListRendering",void 0),B([W()],i.prototype,"selected",void 0),B([W()],i.prototype,"uploading",void 0),B([W()],i.prototype,"success",void 0),B([W()],i.prototype,"failure",void 0),B([W()],i.prototype,"removing",void 0),B([W()],i.prototype,"beforeRemove",void 0),B([W()],i.prototype,"clearing",void 0),B([W()],i.prototype,"progress",void 0),B([W()],i.prototype,"change",void 0),B([W()],i.prototype,"chunkSuccess",void 0),B([W()],i.prototype,"chunkFailure",void 0),B([W()],i.prototype,"chunkUploading",void 0),B([W()],i.prototype,"canceling",void 0),B([W()],i.prototype,"pausing",void 0),B([W()],i.prototype,"resuming",void 0),i=B([ii],i),i}(xi),Il=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),It=function(o,i,e,t){var r=arguments.length,n=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,i,e,t);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(i,e,n):s(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n};function _n(o,i){for(var e=P({},o),t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];i.indexOf(n)<0&&Ka(e,n)}return e}function xl(o,i){var e=i===40?0:o.childElementCount-1,t=e,r,n=o.querySelector(".e-selected");n&&n.classList.remove("e-selected");for(var s=0,a=o.children.length;s<a;s++)o.children[s].classList.contains("e-focused")&&(r=o.children[s],t=s,r.classList.remove("e-focused"),i===40?t++:t--,t===(i===40?o.childElementCount:-1)&&(t=e));r=o.children[t],t=Gs(o,r,t,i),t!==-1&&(M([o.children[t]],"e-focused"),o.children[t].focus())}function Gs(o,i,e,t,r){if(r===void 0&&(r=0),(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(e===(t===40?o.childElementCount-1:0)?e=t===40?0:o.childElementCount-1:t===40?e++:e--),i=o.children[e],i.classList.contains("e-separator")||i.classList.contains("e-disabled")){if(r++,r===o.childElementCount)return e=-1;e=Gs(o,i,e,t,r)}return e}function Ml(o,i){var e=[].slice.call(o.getElementsByClassName("e-blank-icon"));if(e.length){var t=o.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!d(t)){t.classList.contains("e-url")&&(t=t.querySelector(".e-menu-url"));var r=t.querySelector(".e-menu-icon"),n,s=o.classList.contains("e-rtl");s?n={padding:"paddingRight",margin:"marginLeft"}:n={padding:"paddingLeft",margin:"marginRight"};var a=parseInt(getComputedStyle(r).fontSize,10)+parseInt(getComputedStyle(r)[n.margin],10)+parseInt(getComputedStyle(t).paddingLeft,10)+"px";e.forEach(function(h){h.classList.contains("e-url")&&h.querySelector(".e-menu-url")?h.querySelector(".e-menu-url").style[n.padding]=a:h.style[n.padding]=a})}}}var Gn=function(o){Il(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return It([D("")],i.prototype,"iconCss",void 0),It([D("")],i.prototype,"id",void 0),It([D(!1)],i.prototype,"separator",void 0),It([D("")],i.prototype,"text",void 0),It([D("")],i.prototype,"url",void 0),It([D(!1)],i.prototype,"disabled",void 0),i}(lt),Ys=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ee=function(o,i,e,t){var r=arguments.length,n=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,i,e,t);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(i,e,n):s(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},be={ICON:"e-menu-icon",ITEM:"e-item",POPUP:"e-dropdown-popup",SEPARATOR:"e-separator",VERTICAL:"e-vertical",POPUPWIDTH:"e-dropdown-popup-width"},Ll=function(o){Ys(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return ee([D("SlideDown")],i.prototype,"effect",void 0),ee([D(400)],i.prototype,"duration",void 0),ee([D("ease")],i.prototype,"easing",void 0),i}(lt),Fl=function(o){Ys(i,o);function i(e,t){var r=o.call(this,e,t)||this;return r.isPopupCreated=!0,r}return i.prototype.preRender=function(){},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.createPopupOnClick&&!this.isPopupCreated?(this.createPopup(),this.openPopUp()):this.closePopup()},i.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},i.prototype.addItems=function(e,t){for(var r,n=this.items.length,s=0,a=this.items.length;s<a;s++)if(t===this.items[s].text){n=s;break}for(var h=e.length-1;h>=0;h--)r=new Gn(this,"items",e[h],!0),this.items.splice(n,0,r);this.canOpen()||this.createItems()},i.prototype.removeItems=function(e,t){for(var r=!1,n=0,s=e.length;n<s;n++)for(var a=0,h=this.items.length;a<h;a++)if(e[n]===(t?this.items[a].id:this.items[a].text)){this.items.splice(a,1),r=!0;break}r&&this.getULElement()&&this.createItems()},i.prototype.createPopup=function(){var e,t=this.createElement("div",{className:this.popupWidth!=="auto"?be.POPUP+" "+be.POPUPWIDTH:be.POPUP,id:this.element.id+"-popup"});if(document.body.appendChild(t),this.dropDown=new Ar(t,{width:this.popupWidth,relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),this.dropDown.element.setAttribute("role","dialog"),this.dropDown.element.setAttribute("aria-label","dropdown menu"),d(this.popupContent)||(this.popupContent.style.display=""),this.dropDown.element.style.position==="fixed"&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),Ci(this.element,(e={},e["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e.type="button",e)),this.cssClass&&M([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0,this.createPopupOnClick){var r=Pt(this.activeElem[0],"split-btn");r&&(r.isPopupCreated=!0)}},i.prototype.getTargetElement=function(){return this.createPopupOnClick&&!this.isColorPicker()&&!d(this.popupContent)?this.popupContent:typeof this.target=="string"?le(this.target):this.target},i.prototype.createItems=function(e){var t=this,r=this.items,n=this.hasIcon(this.items,"iconCss"),s,a,h,l,p=this.getULElement();if(p?p.innerHTML="":p=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}}),this.itemTemplate){var u=this.compiletemplate(this.itemTemplate);r.forEach(function(m){var y=t.createElement("li",{className:m.separator?be.ITEM+" "+be.SEPARATOR:be.ITEM,attrs:m.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":m.text},id:m.id?m.id:xe("e-"+t.getModuleName()+"-item")}),w=u(m,t,"template",null,!1,null,y);w&&G(w,y),m.disabled&&y.classList.add("e-disabled");var C={item:m,element:y};t.trigger("beforeItemRender",C),C.item.disabled!==m.disabled&&y.classList[C.item.disabled?"add":"remove"]("e-disabled"),p.appendChild(y)}),this.isReact&&this.renderReactTemplates()}else for(var c=0;c<r.length;c++){a=r[c];var f=a.text;h=this.createElement("li",{innerHTML:a.url?"":f,className:a.separator?be.ITEM+" "+be.SEPARATOR:be.ITEM,attrs:a.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":f},id:a.id?a.id:xe("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?h.textContent=a.url?"":f:h.innerHTML=a.url?"":f,a.url&&(h.appendChild(this.createAnchor(a)),h.classList.add("e-url")),a.iconCss?(s=this.createElement("span",{className:be.ICON+" "+a.iconCss}),a.url?h.childNodes[0].appendChild(s):h.insertBefore(s,h.childNodes[0])):n&&!a.separator&&h.classList.add("e-blank-icon");var g=a.disabled;a.disabled&&h.classList.add("e-disabled"),l={item:a,element:h},this.trigger("beforeItemRender",l);var v=l.item.disabled;g!==v&&(l.item.disabled?h.classList.add("e-disabled"):h.classList.remove("e-disabled")),p.appendChild(h)}e&&this.getPopUpElement().appendChild(p),n&&Ml(this.getPopUpElement())},i.prototype.compiletemplate=function(e){if(this.itemTemplate)try{if(typeof this.itemTemplate!="function"){var t=document.querySelector(this.itemTemplate);if(t)return yt(t.innerHTML.trim())}return yt(e)}catch{return yt(e)}},i.prototype.hasIcon=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r][""+t])return!0;return!1},i.prototype.createAnchor=function(e){var t=this.enableHtmlSanitizer?Si.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:t,attrs:{href:e.url}})},i.prototype.initialize=function(){this.button=new Ds({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=xe("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-label",this.element.textContent?this.element.textContent:"dropdownbutton"),this.target&&!this.isColorPicker()&&!this.createPopupOnClick||!this.createPopupOnClick?this.createPopup():(this.isPopupCreated=!1,this.target&&!this.isColorPicker()&&this.createPopupOnClick&&(this.popupContent=this.getTargetElement(),this.popupContent.style.display="none"))},i.prototype.isColorPicker=function(){if(!this.element)return!1;var e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))},i.prototype.appendArrowSpan=function(){this.cssClass=d(this.cssClass)?"":this.cssClass,this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(be.VERTICAL)>-1?"bottom":"right")+" e-caret"}))},i.prototype.setActiveElem=function(e){this.activeElem=e},i.prototype.getModuleName=function(){return"dropdown-btn"},i.prototype.canOpen=function(){var e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e},i.prototype.destroy=function(){var e=this;if(o.prototype.destroy.call(this),this.getModuleName()==="dropdown-btn"){var t;this.element.querySelector("span.e-caret")&&q(this.element.querySelector("span.e-caret")),this.cssClass&&(t=this.cssClass.split(" ")),this.button.destroy(),t&&te([this.element],t),te(this.activeElem,["e-active"]);var r=this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"];r.forEach(function(n){e.element.removeAttribute(n)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents()}},i.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var e=document.getElementById(this.getPopUpElement().id);e&&(te([e],["e-popup-open","e-popup-close"]),q(e))}S.remove(this.getPopUpElement(),"click",this.clickHandler),S.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&this.dropDown&&(this.dropDown.element=null,this.dropDown=void 0)}this.isPopupCreated=!1;var t=Pt(this.activeElem[0],"split-btn");if(this.createPopupOnClick&&t){var r=Pt(this.activeElem[1],"dropdown-btn");r&&(r.isPopupCreated=!1)}},i.prototype.getPopUpElement=function(){var e=null;if(!this.dropDown&&this.activeElem[0].classList.contains("e-split-btn")){var t=Pt(this.activeElem[1],"dropdown-btn");t&&(this.dropDown=t.dropDown)}return this.dropDown&&(e=this.dropDown.element),e},i.prototype.getULElement=function(){var e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e},i.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||S.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),S.add(this.element,"click",this.clickHandler,this),S.add(this.element,"keydown",this.keyBoardHandler,this),S.add(window,"resize",this.windowResize,this)},i.prototype.windowResize=function(){!this.canOpen()&&this.dropDown&&this.dropDown.refreshPosition(this.element)},i.prototype.popupWireEvents=function(){this.delegateMousedownHandler||(this.delegateMousedownHandler=this.mousedownHandler.bind(this));var e=this.getPopUpElement();this.createPopupOnClick&&S.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(S.add(e,"click",this.clickHandler,this),S.add(e,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&S.add(e,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=Er(e,{selector:"."+be.ITEM})},i.prototype.popupUnWireEvents=function(){var e=this.getPopUpElement();this.createPopupOnClick&&S.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(S.remove(e,"click",this.clickHandler),S.remove(e,"keydown",this.keyBoardHandler),this.closeActionEvents&&S.remove(e,this.closeActionEvents,this.focusoutHandler))},i.prototype.keyBoardHandler=function(e){if(!(e.target===this.element&&(e.keyCode===9||!e.altKey&&e.keyCode===40||e.keyCode===38)))switch(e.keyCode){case 38:case 40:e.altKey&&(e.keyCode===38||e.keyCode===40)?this.keyEventHandler(e):this.upDownKeyHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e);break}},i.prototype.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},i.prototype.upDownKeyHandler=function(e){this.target&&(e.keyCode===38||e.keyCode===40)||(e.preventDefault(),xl(this.getULElement(),e.keyCode))},i.prototype.keyEventHandler=function(e){if(!(this.target&&(e.keyCode===13||e.keyCode===9))){if(e.keyCode===13&&this.activeElem[0].classList.contains("e-split-btn")){this.triggerSelect(e),this.activeElem[0].focus();return}e.target&&e.target.className.indexOf("e-edit-template")>-1&&e.keyCode===32||(e.keyCode!==9&&e.preventDefault(),e.keyCode===27||e.keyCode===38||e.keyCode===9?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))}},i.prototype.getLI=function(e){return e.tagName==="LI"?e:E(e,"li")},i.prototype.mousedownHandler=function(e){var t=e.target;this.dropDown&&!this.canOpen()&&this.getPopUpElement()&&!(E(t,'[id="'+this.getPopUpElement().id+'"]')||E(t,'[id="'+this.element.id+'"]'))&&this.closePopup(e)},i.prototype.focusoutHandler=function(e){if(this.isPopupCreated&&!this.canOpen()){var t=e.relatedTarget||e.target;if(t&&t.className.indexOf("e-item")>-1){var r=this.getLI(t);if(r){var n=Array.prototype.indexOf.call(this.getULElement().children,r),s=this.items[n];if(s){var a={element:r,item:s,event:e};this.trigger("select",a)}}}this.closePopup(e)}},i.prototype.clickHandler=function(e){var t=e.target;if(E(t,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&this.target!==""&&!this.isColorPicker()&&!this.createPopupOnClick?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if(E(t,'[id="'+this.getPopUpElement().id+'"]')){var r=this.getLI(e.target);r&&(this.triggerSelect(e),this.closePopup(e,this.activeElem[0]))}},i.prototype.triggerSelect=function(e){var t,r,n,s=this.getLI(e.target);s&&(r=Array.prototype.indexOf.call(this.getULElement().children,s),n=this.items[r],n&&(t={element:s,item:n,event:e},this.trigger("select",t)))},i.prototype.openPopUp=function(e){var t=this;e===void 0&&(e=null);var r=this.getPopUpElement();if(this.activeElem[0]&&this.activeElem[0].classList.contains("e-dropdown-btn")&&r.style.width&&r.style.width!=="auto"&&this.setWidth(r),!this.target)this.createItems(!0);else if(this.activeElem.length>1){var n=Pt(this.activeElem[0],"split-btn");n.isReact&&r.childNodes.length<1&&(n.appendReactElement&&n.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&r.childNodes.length<1&&(this.appendReactElement&&this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());var s=this.getULElement();this.popupWireEvents();var a={element:s,items:this.items,event:e,cancel:!1};this.trigger("beforeOpen",a,function(h){if(!h.cancel){var l=t.getULElement(),p=t.animationSettings.effect!=="None"?{name:t.animationSettings.effect,duration:t.animationSettings.duration,timingFunction:t.animationSettings.easing}:null;if(p&&t.animatePopup(p,l),t.dropDown.show(null,t.element),M([t.element],"e-active"),t.element.setAttribute("aria-expanded","true"),t.element.setAttribute("aria-owns",t.getPopUpElement().id),l&&!t.isSafari()&&l.focus(),t.enableRtl&&l.parentElement.style.left!=="0px"){var u=void 0;t.element.parentElement&&t.element.parentElement.classList.contains("e-split-btn-wrapper")?u=t.element.parentElement.offsetWidth:u=t.element.offsetWidth;var c=l.parentElement.offsetWidth-u,f=parseFloat(l.parentElement.style.left)-c;f<0&&(f=0),l.parentElement.style.left=f+"px"}var g={element:l,items:t.items};t.trigger("open",g),l&&t.isSafari()&&l.focus()}})},i.prototype.animatePopup=function(e,t){new zr(e).animate(t,{begin:function(r){r.element.parentElement.style.height=r.element.parentElement.offsetHeight+"px"}})},i.prototype.setWidth=function(e){var t=x(e.style.width);if(t.indexOf("%")>-1){var r=this.element.offsetWidth*parseFloat(t)/100;e.style.width=r+"px"}},i.prototype.closePopup=function(e,t){var r=this;e===void 0&&(e=null);var n=this.getULElement(),s={element:n,items:this.items,event:e,cancel:!1};this.trigger("beforeClose",s,function(a){if(a.cancel)n&&n.focus();else{var h=r.getPopUpElement();h&&S.remove(h,"keydown",r.keyBoardHandler),r.popupUnWireEvents();var l=r.getULElement(),p=void 0;l&&(p=l.querySelector(".e-selected")),p&&p.classList.remove("e-selected"),r.dropDown&&r.dropDown.hide(),te(r.activeElem,"e-active"),r.element.setAttribute("aria-expanded","false"),r.element.removeAttribute("aria-owns"),t&&t.focus();var u={element:l,items:r.items};r.trigger("close",u),!r.target&&l&&q(l),(!r.target||r.isColorPicker()||r.target&&!r.isColorPicker())&&r.createPopupOnClick&&r.destroyPopup()}})},i.prototype.unWireEvents=function(){this.createPopupOnClick||S.remove(document,"mousedown touchstart",this.delegateMousedownHandler),S.remove(this.element,"click",this.clickHandler),S.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(S.remove(this.getPopUpElement(),"click",this.clickHandler),S.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler)),S.remove(window,"resize",this.windowResize)},i.prototype.onPropertyChanged=function(e,t){var r=["content","cssClass","iconCss","iconPosition","disabled","enableRtl"];this.button.setProperties(_n(e,r));var n;this.isPopupCreated&&(n=this.getPopUpElement(),this.dropDown.setProperties(_n(e,["enableRtl"])));for(var s=0,a=Object.keys(e);s<a.length;s++){var h=a[s];switch(h){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(t.cssClass=d(t.cssClass)?"":t.cssClass,e.cssClass.indexOf(be.VERTICAL)>-1||t.cssClass.indexOf(be.VERTICAL)>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var l=this.element.querySelector("span.e-caret");e.cssClass.indexOf(be.VERTICAL)>-1?cn(l,["e-icon-bottom"],["e-icon-right"]):cn(l,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(t.cssClass&&te([n],t.cssClass.split(" ")),e.cssClass&&M([n],e.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup();break}}},i.prototype.focusIn=function(){this.element.focus()},ee([D("")],i.prototype,"content",void 0),ee([D("")],i.prototype,"cssClass",void 0),ee([D(!1)],i.prototype,"disabled",void 0),ee([D("")],i.prototype,"iconCss",void 0),ee([D("Left")],i.prototype,"iconPosition",void 0),ee([D(!0)],i.prototype,"enableHtmlSanitizer",void 0),ee([ti([],Gn)],i.prototype,"items",void 0),ee([D(!1)],i.prototype,"createPopupOnClick",void 0),ee([D("")],i.prototype,"target",void 0),ee([D("")],i.prototype,"closeActionEvents",void 0),ee([D(null)],i.prototype,"itemTemplate",void 0),ee([D("auto")],i.prototype,"popupWidth",void 0),ee([$t({effect:"None"},Ll)],i.prototype,"animationSettings",void 0),ee([W()],i.prototype,"beforeItemRender",void 0),ee([W()],i.prototype,"beforeOpen",void 0),ee([W()],i.prototype,"beforeClose",void 0),ee([W()],i.prototype,"close",void 0),ee([W()],i.prototype,"open",void 0),ee([W()],i.prototype,"select",void 0),ee([W()],i.prototype,"created",void 0),i=ee([ii],i),i}(xi),kl=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ye=function(o,i,e,t){var r=arguments.length,n=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,i,e,t);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(i,e,n):s(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Yn="e-appbar",lr="e-horizontal-bottom",hr="e-sticky",$n="e-prominent",Xn="e-dense",pr="e-rtl",Zn="e-light",Kn="e-dark",Jn="e-primary",Qn="e-inherit",Bl=function(o){kl(i,o);function i(e,t){return o.call(this,e,t)||this}return i.prototype.destroy=function(){o.prototype.destroy.call(this),this.element.classList.remove(Yn),this.element.removeAttribute("style"),this.element.removeAttribute("role")},i.prototype.getModuleName=function(){return"appbar"},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.preRender=function(){},i.prototype.render=function(){this.element.classList.add(Yn),this.element.tagName!=="HEADER"&&this.element.setAttribute("role","banner"),this.cssClass&&M([this.element],this.cssClass.split(" ")),this.position==="Bottom"&&this.element.classList.add(lr),this.isSticky&&this.element.classList.add(hr),this.enableRtl&&this.element.classList.add(pr),this.setHeightMode(),this.setColorMode(),d(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element)},i.prototype.onPropertyChanged=function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];switch(s){case"mode":te([this.element],[Xn,$n]),this.setHeightMode();break;case"position":this.position==="Bottom"?M([this.element],lr):te([this.element],lr);break;case"cssClass":t.cssClass&&te([this.element],t.cssClass.split(" ")),e.cssClass&&M([this.element],e.cssClass.split(" "));break;case"isSticky":this.isSticky?M([this.element],hr):te([this.element],hr);break;case"htmlAttributes":if(!d(this.htmlAttributes)){if(!d(t.htmlAttributes))for(var a=Object.keys(t.htmlAttributes),h=0,l=a;h<l.length;h++){var p=l[h];p==="class"?te([this.element],t.htmlAttributes[""+p]):this.element.removeAttribute(p)}this.setHtmlAttributes(e.htmlAttributes,this.element)}break;case"colorMode":te([this.element],[Kn,Jn,Qn,Zn]),this.setColorMode();break;case"enableRtl":this.enableRtl?M([this.element],pr):te([this.element],pr);break}}},i.prototype.setHtmlAttributes=function(e,t){for(var r=Object.keys(e),n=0,s=r;n<s.length;n++){var a=s[n];a==="class"?M([t],e[""+a]):t.setAttribute(a,e[""+a])}},i.prototype.setHeightMode=function(){this.mode==="Prominent"?this.element.classList.add($n):this.mode==="Dense"&&this.element.classList.add(Xn)},i.prototype.setColorMode=function(){switch(this.colorMode){case"Light":this.element.classList.add(Zn);break;case"Dark":this.element.classList.add(Kn);break;case"Primary":this.element.classList.add(Jn);break;case"Inherit":this.element.classList.add(Qn);break}},Ye([D("Regular")],i.prototype,"mode",void 0),Ye([D("Top")],i.prototype,"position",void 0),Ye([D()],i.prototype,"cssClass",void 0),Ye([D(!1)],i.prototype,"isSticky",void 0),Ye([D()],i.prototype,"htmlAttributes",void 0),Ye([D("Light")],i.prototype,"colorMode",void 0),Ye([W()],i.prototype,"created",void 0),Ye([W()],i.prototype,"destroyed",void 0),i=Ye([ii],i),i}(xi),Rl="e-icons",di="e-frame",dt="e-check",es="e-checkbox-wrapper",Wt="e-stop",Hl="e-selectall-parent",Pl="e-input-group-icon e-back-icon e-icons",ts="e-input-group-icon e-clear-icon e-icons",Vl="e-input-filter",Nl="e-filter-parent",jl="e-ddl-device-filter",cr="e-clear-icon",is="e-popup-full-page",Wl="e-ddl-device",rs="e-input-focus",Ul=function(){function o(i){this.activeLi=[],this.activeEle=[],this.parent=i,this.removeEventListener(),this.addEventListener()}return o.prototype.getModuleName=function(){return"CheckBoxSelection"},o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlurHandler,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),S.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this),this.parent.on("popupFullScreen",this.setPopupFullScreen,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlurHandler),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),this.parent.off("popupFullScreen",this.setPopupFullScreen))},o.prototype.listOption=function(i){var e=this;if(d(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(r){e.checboxCreate(r)};else{var t=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(r){e.checboxCreate(r),t.apply(e,[r])}}},o.prototype.setPlaceholder=function(i){un.setPlaceholder(i.filterBarPlaceholder,this.filterInput)},o.prototype.checboxCreate=function(i){var e;if(d(i.item)?e=i:e=i.item,this.parent.enableGroupCheckBox||e.className!=="e-list-group-item "&&e.className!=="e-list-group-item"){var t=Ja(this.parent.createElement),r=le("div."+Rl,e);return e.insertBefore(t,e.childNodes[d(r)?0:1]),le("."+di,t),this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),e}else return e},o.prototype.setSelectAll=function(){this.parent.showSelectAll?(d(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:Hl}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(d(this.parent.filterParent)?G([this.checkAllParent],this.parent.popupWrapper):G([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(d(this.parent.filterParent)?ye([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),S.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1&&!this.parent.enableVirtualization&&!this.parent.isDynamicDataChange||this.parent.isDynamicDataChange&&this.parent.listData&&this.parent.listData.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):d(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},o.prototype.destroy=function(){this.removeEventListener(),S.remove(document,"mousedown",this.onDocumentClick),this.checkAllParent=null,this.clearIconElement=null,this.filterInput=null,this.filterInputObj=null,this.checkWrapper=null,this.selectAllSpan=null},o.prototype.listSelection=function(i){var e;if(!d(i.e))i.li.querySelector(".e-checkbox-wrapper .e-frame"),e=d(i.e.target)?i.li.querySelector(".e-checkbox-wrapper").childNodes[1]:i.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(i.e.target))?i.e.target:i.li.querySelector(".e-checkbox-wrapper").childNodes[1];else{var t=i.li.querySelector(".e-checkbox-wrapper");e=t?t.childNodes[1]:i.li.lastElementChild.childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(e=i.li.firstElementChild.childNodes[1]),d(e)||(this.checkWrapper=E(e,"."+es)),!d(this.checkWrapper)){var r=le("."+di,this.checkWrapper),n=!1;this.validateCheckNode(this.checkWrapper,r.classList.contains(dt),i.li,i.e,n)}},o.prototype.validateCheckNode=function(i,e,t,r,n){this.changeState(i,e?"uncheck":"check",r,!0,n)},o.prototype.clickHandler=function(i){var e;i.currentTarget.classList.contains(this.checkAllParent.className)||i.currentTarget.classList.value===this.checkAllParent.className?e=i.currentTarget.firstElementChild.lastElementChild:e=i.currentTarget,this.checkWrapper=E(e,"."+es);var t=!0;if(!d(this.checkWrapper)){var r=le("."+di,this.checkWrapper);this.validateCheckNode(this.checkWrapper,r.classList.contains(dt),null,i,t)}i.preventDefault()},o.prototype.changeState=function(i,e,t,r,n){var s=i.getElementsByClassName(di)[0];e==="check"&&!s.classList.contains(dt)?(s.classList.remove(Wt),s.classList.add(dt),n&&(this.parent.selectAllItems(!0,t),this.setLocale(!0))):e==="uncheck"&&(s.classList.contains(dt)||s.classList.contains(Wt))?(te([s],[dt,Wt]),n&&(this.parent.selectAllItems(!1,t),this.setLocale())):e==="indeterminate"&&!s.classList.contains(Wt)&&(te([s],[dt]),s.classList.add(Wt),n&&(this.parent.selectAllItems(!1,t),this.setLocale()))},o.prototype.setSearchBox=function(i){if(d(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:Nl}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:Vl}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var e=!1;return Y.isDevice&&this.parent.isDeviceFullScreen&&(e=!0,this.parent.mobFilter=!1),this.filterInputObj=un.createInput({element:this.filterInput,buttons:e?[Pl,ts]:[ts],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),d(this.parent.cssClass)||(this.parent.cssClass.split(" ").indexOf("e-outline")!==-1?M([this.filterInputObj.container],"e-outline"):this.parent.cssClass.split(" ").indexOf("e-filled")!==-1&&M([this.filterInputObj.container],"e-filled")),G([this.filterInputObj.container],this.parent.filterParent),ye([this.parent.filterParent],i.popupElement),Ci(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-label":"multiselect","aria-expanded":"true","aria-controls":i.popupElement.id}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+cr),!Y.isDevice&&this.clearIconElement&&(S.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),S.add(this.filterInput,"input",this.parent.onInput,this.parent),S.add(this.filterInput,"keyup",this.parent.keyUp,this.parent),S.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),S.add(this.filterInput,"blur",this.onBlurHandler,this),S.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},o.prototype.clickOnBackIcon=function(i){this.parent.hidePopup(),te([document.body,this.parent.popupObj.element],is),this.parent.inputElement.focus()},o.prototype.clearText=function(i){this.parent.targetInputElement.value="",this.parent.allowFiltering&&this.parent.targetInputElement.value===""&&this.parent.search(null),this.parent.refreshListItems(null),this.parent.refreshPopup(),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),(!this.parent.enableVirtualization||this.parent.enableVirtualization&&(d(this.parent.value)||this.parent.value&&this.parent.value.length===0))&&this.setReorder(i),this.boundPreventListSelection=this.preventListSelection.bind(this),this.parent.popupWrapper.addEventListener("mouseup",this.boundPreventListSelection,!0),i.preventDefault()},o.prototype.preventListSelection=function(i){i.stopPropagation(),this.parent.popupWrapper.removeEventListener("mouseup",this.boundPreventListSelection,!0),this.boundPreventListSelection=null},o.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add(Wl),this.parent.popupObj.element.classList.add(jl),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector("."+cr),this.clearIconElement.style.visibility="hidden",S.add(this.backIconElement,"click",this.clickOnBackIcon,this),S.add(this.clearIconElement,"click",this.clearText,this)},o.prototype.setSearchBoxPosition=function(){var i=this.filterInput.parentElement.getBoundingClientRect().height,e=0,t=0,r=0;this.checkAllParent&&(e=this.checkAllParent.getBoundingClientRect().height),this.parent.header&&(r=this.parent.header.getBoundingClientRect().height),this.parent.footer&&(t=this.parent.footer.getBoundingClientRect().height),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-i-e-r-t+"px",this.parent.list.style.height=window.innerHeight-i-e-r-t+"px";var n=this.filterInput.parentElement.querySelector("."+cr);q(this.filterInput),n.parentElement.insertBefore(this.filterInput,n)},o.prototype.setPopupFullScreen=function(){this.parent&&this.parent.popupObj&&(Ci(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),M([document.body,this.parent.popupObj.element],is),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%")},o.prototype.targetElement=function(){return d(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=this.parent.targetInputElement.value===""?"hidden":"visible"),this.parent.targetInputElement.value},o.prototype.onBlurHandler=function(i){if(!this.parent.element.classList.contains("e-listbox")){var e=void 0;if(this.parent.keyAction)return;if(Y.isIE&&(e=!d(i)&&i.target),Y.isIE||(e=!d(i)&&i.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(e)&&!Y.isIE&&this.filterInput){this.filterInput.focus();return}if(this.parent.scrollFocusStatus&&this.filterInput){i.preventDefault(),this.filterInput.focus(),this.parent.scrollFocusStatus=!1;return}this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(i,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove(rs),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!Y.isDevice&&this.parent.hidePopup()}},o.prototype.onDocumentClick=function(i){if(this.parent.getLocaleName()!=="listbox"){var e=i.target;!d(this.parent.popupObj)&&E(e,'[id="'+this.parent.popupObj.element.id+'"]')&&(this.filterInput&&this.filterInput.value!==""||i.preventDefault()),!(!d(this.parent.popupObj)&&E(e,'[id="'+this.parent.popupObj.element.id+'"]'))&&!d(this.parent.overAllWrapper)&&!this.parent.overAllWrapper.contains(i.target)?(this.parent.overAllWrapper.classList.contains(Qa.focus)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlurHandler(i,!0),this.parent.focused=!0):this.parent.scrollFocusStatus=(Y.isIE||Y.info.name==="edge")&&document.activeElement===this.filterInput,!d(this.parent.overAllWrapper)&&!this.parent.overAllWrapper.contains(i.target)&&this.parent.overAllWrapper.classList.contains("e-input-focus")&&!this.parent.isPopupOpen()&&(Y.isIE?this.parent.onBlurHandler():this.parent.onBlurHandler(i)),this.filterInput===e&&this.filterInput.focus()}},o.prototype.getFocus=function(i){if(this.parent.overAllWrapper.classList.remove(rs),this.parent.keyAction&&i.value!=="clear"&&i.value!=="focus"){this.parent.keyAction=!1;return}i.value==="focus"&&(this.filterInput.focus(),this.parent.removeFocus(),S.remove(this.parent.list,"keydown",this.parent.onKeyDown)),i.value==="clear"&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden")},o.prototype.checkSelectAll=function(i){i.value==="check"&&(this.changeState(this.checkAllParent,i.value,null,null,!1),this.setLocale(!0)),i.value==="uncheck"&&(this.changeState(this.checkAllParent,i.value,null,null,!1),this.setLocale()),i.value==="indeterminate"&&(this.changeState(this.checkAllParent,i.value,null,null,!1),this.setLocale())},o.prototype.setLocale=function(i){if(this.parent.selectAllText!=="Select All"||this.parent.unSelectAllText!=="Unselect All"){var e=i?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var t=yt(e),r=i?"unSelectAllText":"selectAllText",n=0,s=t({},this.parent,r,null,!this.parent.isStringTemplate);n<s.length;n++){var a=s[n];this.selectAllSpan.textContent=a.textContent}}else{var h={selectAllText:"Select All",unSelectAllText:"Unselect All"},l=new Ir(this.parent.getLocaleName(),{},this.parent.locale);l.getConstant("selectAllText")===""&&(l=new Ir("dropdowns",h,this.parent.locale)),d(this.selectAllSpan)||(this.selectAllSpan.textContent=i?l.getConstant("unSelectAllText"):l.getConstant("selectAllText"))}},o.prototype.getActiveList=function(i){i.li.classList.contains("e-active")?this.activeLi.push(i.li.cloneNode(!0)):this.activeLi.splice(i.index,1)},o.prototype.setReorder=function(i){if(this.parent.enableSelectionOrder&&!d(this.parent.value)){var e=this.parent.ulElement.querySelectorAll("li.e-active").length,t=void 0,r=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});if(e>0){var n=this.parent.ulElement.querySelectorAll("li.e-active");if(n.forEach(function(a){r.appendChild(a)}),t=this.parent.ulElement.querySelectorAll("li.e-active"),M(t,"e-reorder-hide"),this.parent.enableVirtualization){var s=this.parent.list.querySelector(".e-virtual-ddl-content");ye([r],s)}else ye([r],this.parent.list)}this.parent.focusAtFirstListItem()}},o}(),$s=function(){function o(i){this.daysVariation=0,this.parent=i,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return o.prototype.getChangedData=function(i){var e=this,t=P({},this.actionObj.event,null,!0);if(t[this.parent.eventFields.startTime]=this.actionObj.start,t[this.parent.eventFields.endTime]=this.actionObj.end,d(this.actionObj.isAllDay)||(t[this.parent.eventFields.isAllDay]=this.actionObj.isAllDay),this.parent.activeViewOptions.group.resources.length>0){var r=this.getOriginalElement(this.actionObj.element);if(r){var n=r.map(function(a){return parseInt(a.getAttribute("data-group-index"),10)});if(n.indexOf(this.actionObj.groupIndex)===-1||!d(i)&&i.length>0){var s=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);n=n.filter(function(a){return a!==s}),n.push(this.actionObj.groupIndex),i&&i.length>0?i.forEach(function(a){e.parent.resourceBase.getResourceData(a,e.actionObj.groupIndex,n)}):this.parent.resourceBase.getResourceData(t,this.actionObj.groupIndex,n)}}}return t},o.prototype.saveChangedData=function(i,e){e===void 0&&(e=!1),this.parent.activeEventData.event=this.actionObj.event,this.parent.currentAction="Save";var t,r=[i.data];e&&(r=i.selectedData);for(var n=0,s=r;n<s.length;n++){var a=s[n],h=this.parent.activeViewOptions.group.resources.length>0?parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex:!0;if(+a[this.parent.eventFields.startTime]==+this.actionObj.event[this.parent.eventFields.startTime]&&+a[this.parent.eventFields.endTime]==+this.actionObj.event[this.parent.eventFields.endTime]&&h){this.parent.crudModule.crudObj.isCrudAction=!1;return}if(a[this.parent.eventFields.recurrenceRule]){var l=a[this.parent.eventFields.recurrenceID]||a[this.parent.eventFields.id];if(a[this.parent.eventFields.id]===a[this.parent.eventFields.recurrenceID]&&(a[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),t="EditOccurrence"),this.parent.enableRecurrenceValidation&&this.parent.eventWindow.editOccurrenceValidation(l,a,this.actionObj.event))return}else t=null;(a[this.parent.eventFields.startTimezone]||a[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(a),this.parent.crudModule.saveEvent(a,t)}},o.prototype.calculateIntervalTime=function(i){var e=O(i).getTime(),t=Ie*this.actionObj.interval;return e=e+Math.floor((i.getTime()-e)/t)*t,new Date(e)},o.prototype.getContentAreaDimension=function(){var i=this.parent.element.querySelector("."+$),e=[].slice.call(i.querySelector("tr").children);!this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.isAdaptive&&!this.parent.enableAdaptiveUI&&!this.parent.virtualScrollModule&&(e=this.getResourceElements(e));var t=e[0].getBoundingClientRect(),r=e.slice(-1)[0].getBoundingClientRect(),n={bottom:i.scrollHeight-5,left:this.parent.enableRtl?r.left:t.left,right:this.parent.enableRtl?t.right:r.right,top:0,leftOffset:this.parent.enableRtl?r.right:t.right,rightOffset:this.parent.enableRtl?t.left:r.left};return n},o.prototype.getIndex=function(i){var e=[].slice.call(this.parent.getContentTable().querySelector("tr").children),t={minIndex:0,maxIndex:e.length-1};if(this.actionObj.action==="resize"&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.activeView.isTimelineView()){var r=this.getResourceElements(e);t.minIndex=r[0].cellIndex,t.maxIndex=r.slice(-1)[0].cellIndex}return i<t.minIndex&&(i=t.minIndex),i>t.maxIndex&&(i=t.maxIndex),i},o.prototype.updateTimePosition=function(i,e){for(var t=0,r=0,n=this.actionObj.cloneElement;r<n.length;r++){var s=n[r],a=s.querySelector("."+xr);if(a){var h=this.actionObj.start,l=this.actionObj.end;e&&e.length>0&&(h=e[parseInt(t.toString(),10)][this.parent.eventFields.startTime],l=e[parseInt(t.toString(),10)][this.parent.eventFields.endTime]),a.innerHTML=this.parent.getTimeString(h)+" - "+this.parent.getTimeString(l)}t++}if(!(!this.parent.activeViewOptions.timeScale.enable||!this.parent.isAdaptive||this.parent.currentView==="Month"||this.parent.currentView==="TimelineMonth")){var p=this.parent.element.querySelector("."+Yi);if(!p){p=b("div",{className:Yi});var u=this.parent.activeView.isTimelineView()?we:Mr;this.parent.element.querySelector("."+u).appendChild(p)}p.innerHTML=this.parent.getTimeString(i);var c=0;if(this.parent.activeView.isTimelineView())if(this.parent.enableRtl){var f=parseInt(this.actionObj.clone.style.right,10);c=this.actionObj.action==="drag"||this.resizeEdges.left?f+this.actionObj.clone.offsetWidth:f,p.style.right=x(c)}else{var g=parseInt(this.actionObj.clone.style.left,10);c=this.actionObj.action==="drag"||this.resizeEdges.left?g:g+this.actionObj.clone.offsetWidth,p.style.left=x(c)}else c=this.actionObj.action==="drag"||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,p.style.top=x(c)}},o.prototype.getResourceElements=function(i){var e=this;return i.filter(function(t){return parseInt(t.getAttribute("data-group-index"),10)===e.actionObj.groupIndex})},o.prototype.getOriginalElement=function(i){var e,t=i.getAttribute("data-guid"),r=i.offsetParent&&i.offsetParent.classList.contains(gi);if(r||this.parent.activeView.isTimelineView()||this.actionObj.action!=="resize"&&this.parent.virtualScrollModule)e=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+t+'"]'));else{var n=E(i,"tr");n&&(e=[].slice.call(n.querySelectorAll('[data-guid="'+t+'"]')))}return e},o.prototype.createCloneElement=function(i){var e=b("div",{innerHTML:i.outerHTML}),t=e.children[0],r=[it];r.push(this.actionObj.action==="drag"?eo:As),(this.parent.currentView==="Month"||this.parent.currentView==="TimelineMonth")&&r.push(to),M([t],r),M([i],tt),d(i.parentElement)||i.parentElement.appendChild(t),t.style.width=x(t.offsetWidth-2);var n=document.querySelector(this.parent.eventDragArea);return this.parent.eventDragArea&&this.actionObj.action==="drag"&&n&&n.appendChild(t),he(t,{border:"0px"}),t},o.prototype.removeCloneElementClasses=function(){var i=this.actionObj.originalElement;(this.parent.currentView==="Month"||this.parent.currentView==="TimelineYear"||this.parent.currentView==="Day"||this.parent.currentView==="Week"||this.parent.currentView==="WorkWeek")&&(i=[].slice.call(this.parent.element.querySelectorAll("."+tt))),te(i,tt)},o.prototype.removeCloneElement=function(){this.actionObj.originalElement=[];for(var i=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone")),e=0,t=i;e<t.length;e++){var r=t[e];pe(r)}for(var n=0,s=this.actionObj.cloneElement;n<s.length;n++){var a=s[n];d(a.parentNode)||pe(a)}this.actionObj.cloneElement=[];var h=this.parent.element.querySelector("."+Yi);h&&pe(h)},o.prototype.getCursorElement=function(i){var e=this.parent.eventBase.getPageCoordinates(i);return document.elementFromPoint(e.clientX,e.clientY)},o.prototype.autoScroll=function(){var i=this.parent.element.querySelector("."+$),e=i.offsetHeight<=i.scrollHeight,t=i.offsetWidth<=i.scrollWidth,r=e&&i.scrollTop>=0&&i.scrollTop+i.offsetHeight<=i.scrollHeight,n=t&&i.scrollLeft>=0&&i.scrollLeft+i.offsetWidth<=i.scrollWidth;if(this.actionObj.action==="resize"&&this.scrollEdges.right&&i.scrollLeft+i.offsetWidth>i.scrollWidth){var s=[].slice.call(this.parent.getContentTable().querySelector("tr").children).length-1,a=Math.ceil((this.actionObj.clone.offsetLeft+this.actionObj.clone.offsetWidth)/this.actionObj.cellWidth);n=a===s}r&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(i.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,this.actionObj.action==="resize"&&i.scrollHeight!==i.offsetHeight+i.scrollTop&&i.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),n&&(this.scrollEdges.left||this.scrollEdges.right)&&(i.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,this.actionObj.action==="resize"&&i.scrollWidth!==i.offsetWidth+i.scrollLeft&&i.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},o.prototype.autoScrollValidation=function(){if(!this.actionObj.scroll.enable)return!1;var i=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=i,i.bottom||i.top||i.left||i.right},o.prototype.actionClass=function(i){i==="addClass"?M([this.parent.element],tt):te([this.parent.element],tt)},o.prototype.updateScrollPosition=function(i){var e=this;this.scrollEventArgs=i,this.actionObj.scroll.enable&&d(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval(function(){if(e.autoScrollValidation()&&!e.actionObj.clone.classList.contains(Se)){if(e.parent.activeView.isTimelineView()&&e.parent.activeViewOptions.group.resources.length>0&&e.actionObj.groupIndex<0)return;e.autoScroll(),e.actionObj.action==="drag"?e.parent.dragAndDropModule.updateDraggingDateTime(e.scrollEventArgs):e.parent.resizeModule.updateResizingDirection(e.scrollEventArgs)}},this.actionObj.scroll.timeDelay))},o.prototype.updateOriginalElement=function(i){var e='[data-id="'+i.getAttribute("data-id")+'"]';this.parent.activeViewOptions.group.resources.length>0&&(e=e.concat('[data-group-index = "'+i.getAttribute("data-group-index")+'"]'));var t=[].slice.call(this.parent.element.querySelectorAll(e));M(t,tt);var r=[].slice.call(this.parent.element.querySelectorAll("."+it));te(r,tt)},o.prototype.getUpdatedEvent=function(i,e,t){var r=JSON.parse(JSON.stringify(t));return r[this.parent.eventFields.startTime]=i,r[this.parent.eventFields.endTime]=e,r},o.prototype.dynamicYearlyEventsRendering=function(i,e){if(e===void 0&&(e=!1),!!d(this.parent.eventDragArea)){var t=this.actionObj.cellWidth-7;if(e&&(this.resizeEdges.left||this.resizeEdges.right)&&(t=this.actionObj.cellWidth*i.count),!e&&this.parent.activeViewOptions.orientation==="Horizontal"&&this.parent.activeViewOptions.group.resources.length===0){var r=this.yearEvent.isSpannedEvent(i,i[this.parent.eventFields.startTime]);r[this.parent.eventFields.startTime].getTime()===r[this.parent.eventFields.endTime].getTime()&&(r.isSpanned.count=1),t=r.isSpanned.count*this.actionObj.cellWidth}if(!e&&this.parent.activeViewOptions.orientation==="Vertical"&&this.parent.activeViewOptions.group.resources.length!==0){var r=this.yearEvent.isSpannedEvent(i,i[this.parent.eventFields.startTime]);t=r.isSpanned.count*this.actionObj.cellWidth}var n=this.createAppointmentElement(this.actionObj.groupIndex,i[this.parent.eventFields.subject]);n.setAttribute("drag","true"),M([n],it),he(n,{width:t+"px",border:"0px","pointer-events":"none",position:"absolute",overflow:"hidden",padding:"3px"}),this.actionObj.clone.style.backgroundColor!==""&&he(n,{backgroundColor:this.actionObj.clone.style.backgroundColor});var s=O(i[this.parent.eventFields.startTime]).getTime(),a="."+_+'[data-date="'+s+'"]';this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(a="."+_+'[data-date="'+s+'"][data-group-index="'+this.actionObj.groupIndex+'"]');var h=this.parent.element.querySelector(a);if(!d(h)){if(e){var l=h.querySelector("."+Xt),p=this.actionObj.cellHeight*i.count-(l?l.offsetHeight:0)-7;(this.resizeEdges.right||this.resizeEdges.left)&&(p=parseInt(this.actionObj.clone.style.height,10)),he(n,{height:p+"px"})}this.renderDynamicElement(h,n,!0),this.actionObj.cloneElement.push(n)}}},o.prototype.renderDynamicElement=function(i,e,t){if(i.querySelector("."+ae))i.querySelector("."+ae).appendChild(e);else{var r=b("div",{className:ae});r.appendChild(e),i.appendChild(r)}},o.prototype.createAppointmentElement=function(i,e){var t=b("div",{className:Oe,innerHTML:e});return this.parent.activeViewOptions.group.resources.length>0&&t.setAttribute("data-group-index",i.toString()),t},o.prototype.dynamicEventsRendering=function(i){var e=this;if(d(this.parent.eventDragArea)){var t=this.parent.activeView.renderDates,r=[].slice.call(this.parent.element.querySelectorAll("."+_)),n=this.parent.activeViewOptions.workDays,s;if(this.parent.activeViewOptions.group.resources.length>0){var a=this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll?this.parent.resourceBase.renderedResources:this.parent.resourceBase.lastResourceLevel,h=a.filter(function(k){return k.groupIndex===e.actionObj.groupIndex});t=h[0].renderDates;var l="."+_+'[data-group-index="'+this.actionObj.groupIndex+'"]';r=[].slice.call(this.parent.element.querySelectorAll(l)),n=h[0].workDays,s=h[0].groupOrder}if(this.monthEvent.dateRender=t,this.monthEvent.getSlotDates(n),this.resizeEdges.left||this.resizeEdges.right)for(var p=[].slice.call(this.parent.element.querySelectorAll("."+it)),u=0,c=p;u<c.length;u++){var f=c[u];pe(f)}for(var g=this.monthEvent.splitEvent(i,t),v=0,m=g;v<m.length;v++){var y=m[v],w=this.parent.getIndexOfDate(t,O(y[this.monthEvent.fields.startTime])),C=y.data.count,T=C*this.actionObj.cellWidth-7,A=this.monthEvent.createAppointmentElement(y,this.actionObj.groupIndex,!0);A.setAttribute("drag","true"),M([A],it),this.monthEvent.applyResourceColor(A,y,"backgroundColor",s),he(A,{width:T+"px",border:"0px","pointer-events":"none"});var L=r[parseInt(w.toString(),10)];L&&(this.monthEvent.renderElement(L,A,!0),this.actionObj.cloneElement.push(A))}}},o.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},o}(),zl=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ql=function(o){zl(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return i.prototype.wireResizeEvent=function(e){for(var t=[].slice.call(e.querySelectorAll("."+Lr)),r=0,n=t;r<n.length;r++){var s=n[r];S.add(s,Y.touchStartEvent,this.resizeStart,this)}},i.prototype.resizeHelper=function(){if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)for(var e=0,t=this.actionObj.originalElement.length;e<t;e++){var r=this.createCloneElement(this.actionObj.originalElement[parseInt(e.toString(),10)]);this.actionObj.cloneElement[parseInt(e.toString(),10)]=r,this.actionObj.element===this.actionObj.originalElement[parseInt(e.toString(),10)]&&(this.actionObj.clone=r)}else this.actionObj.element&&(this.actionObj.clone=this.createCloneElement(this.actionObj.element)),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element]},i.prototype.resizeStart=function(e){var t=this;if(!(e&&e.type==="touchstart"&&(!this.parent.uiStateValues.isTapHold||!E(e.target,"."+Is)))){this.parent.eventBase.removeSelectedAppointmentClass(),this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var r=E(e.target,"."+Lr);this.actionObj.element=E(r,"."+Oe),this.actionObj.event=this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute("data-guid"));var n=P({},this.actionObj.event,null,!0),s={cancel:!1,data:n,element:this.actionObj.element,event:e,interval:this.actionObj.interval,scroll:{enable:!0,scrollBy:30,timeDelay:100}};this.parent.trigger(io,s,function(a){if(!a.cancel){t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.resizeEdges={left:r.classList.contains(gn),right:r.classList.contains(vn),top:r.classList.contains(fn),bottom:r.classList.contains(dn)},t.actionObj.groupIndex=t.parent.uiStateValues.isGroupAdaptive?t.parent.uiStateValues.groupIndex:0;var h=t.parent.element.querySelector("."+_);t.actionObj.cellWidth=t.parent.getElementWidth(h),t.actionObj.cellHeight=t.parent.getElementHeight(h);var l=t.parent.activeViewOptions.headerRows.map(function(T){return T.option});if(t.parent.activeView.isTimelineView()&&l.length>0&&["Date","Hour"].indexOf(l.slice(-1)[0])<0){for(var p=t.parent.getContentTable().querySelector("tr"),u=0,c=[].slice.call(p.children),f=0,g=c;f<g.length;f++){var v=g[f];u+=parseInt(v.getAttribute("colspan"),10)}var m=p.getBoundingClientRect();t.actionObj.cellWidth=m.width/u,t.actionObj.cellHeight=m.height}var y=t.parent.eventBase.getPageCoordinates(e);t.actionObj.X=y.pageX,t.actionObj.Y=y.pageY,t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10),t.actionObj.interval=a.interval,t.actionObj.scroll=a.scroll,t.actionObj.start=new Date(n[t.parent.eventFields.startTime].getTime()),t.actionObj.end=new Date(n[t.parent.eventFields.endTime].getTime()),t.actionObj.originalElement=t.getOriginalElement(t.actionObj.element),t.parent.currentView==="Month"&&(t.daysVariation=-1,t.monthEvent=new Mi(t.parent));var w=t.parent.element.querySelector("."+$);if(t.scrollArgs={element:w,width:w.scrollWidth,height:w.scrollHeight},["Month","TimelineYear"].indexOf(t.parent.currentView)<0){var C=Math.round(t.scrollArgs.width/t.actionObj.cellWidth)*t.actionObj.cellWidth;t.scrollArgs.width=t.scrollArgs.width<C?C:t.scrollArgs.width}S.add(document,Y.touchMoveEvent,t.resizing,t),S.add(document,Y.touchEndEvent,t.resizeStop,t)}})}},i.prototype.resizing=function(e){if(e&&e.type==="touchmove"&&e.preventDefault(),this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),this.parent.element.querySelectorAll("."+As).length===0&&this.resizeHelper(),!(!d(e.target)&&e.target.classList.contains(Xe))){var t=this.parent.eventBase.getPageCoordinates(e);if(this.parent.currentView==="Month"||this.parent.currentView==="TimelineYear"){var r=document.documentElement,n=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),s=(window.pageYOffset||r.scrollTop)-(r.clientTop||0);this.actionObj.pageX=t.pageX-n,this.actionObj.pageY=t.pageY-s}else this.actionObj.pageX=t.pageX,this.actionObj.pageY=t.pageY;this.updateScrollPosition(e),this.updateResizingDirection(e);var a=P({},this.actionObj.event,null,!0),h={cancel:!1,data:a,element:this.actionObj.element,event:e,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.group.resources.length>0&&(h.groupIndex=this.actionObj.groupIndex),this.parent.trigger(ro,h)}},i.prototype.updateResizingDirection=function(e){if(this.parent.currentView==="Month"||this.parent.currentView==="TimelineYear"){this.monthResizing();return}var t=this.resizeValidation(e);if(this.resizeEdges.left){if(t){var r=this.getLeftRightStyles(e,!0);if(parseInt(r.width,10)<1)return;for(var n=0,s=this.actionObj.cloneElement;n<s.length;n++){var a=s[n];he(a,r),M([a],gn)}}this.horizontalResizing(!this.parent.enableRtl)}if(this.resizeEdges.right){if(t){var h=this.getLeftRightStyles(e,!1);if(parseInt(h.width,10)<1)return;for(var l=0,p=this.actionObj.cloneElement;l<p.length;l++){var a=p[l];he(a,h),M([a],vn)}}this.horizontalResizing(this.parent.enableRtl)}if(this.resizeEdges.top){if(t){var u=this.getTopBottomStyles(e,!0);if(parseInt(u.height,10)<1)return;for(var c=0,f=this.actionObj.cloneElement;c<f.length;c++){var a=f[c];he(a,u),M([a],fn)}}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(t){var g=this.getTopBottomStyles(e,!1);if(parseInt(g.height,10)<1)return;for(var v=0,m=this.actionObj.cloneElement;v<m.length;v++){var a=m[v];he(a,g),M([a],dn)}}this.verticalResizing(!1)}},i.prototype.monthResizing=function(){if(this.removeCloneElement(),!(d(this.actionObj.pageX)||d(this.actionObj.pageY))){var e=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY);if(!d(e)){var t=this.parent.getDateFromElement(e),r=this.parent.activeViewOptions.group.resources.length>0?parseInt(e.getAttribute("data-group-index"),10)===this.actionObj.groupIndex:!0,n=new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime()),s=new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());if(!this.parent.enableRtl&&this.resizeEdges.left||this.parent.enableRtl&&this.resizeEdges.right||this.resizeEdges.top?n=t:(!this.parent.enableRtl&&this.resizeEdges.right||this.parent.enableRtl&&this.resizeEdges.left||this.resizeEdges.bottom)&&(s=I(t,1)),r&&n<s){this.actionObj.start=n,this.actionObj.end=s;var a=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);this.parent.currentView==="TimelineYear"?this.yearEventsRendering(a):this.dynamicEventsRendering(a),this.updateOriginalElement(this.actionObj.clone)}}}},i.prototype.yearEventsRendering=function(e){for(var t=[].slice.call(this.parent.element.querySelectorAll("."+it)),r=0,n=t;r<n.length;r++){var s=n[r];pe(s)}var a=new Date(e[this.parent.eventFields.endTime]),h=0;this.parent.activeViewOptions.group.resources.length===0&&(h=this.getMonthDiff(e[this.parent.eventFields.startTime],I(a,-1)));for(var l=0;l<=h;l++){var p=void 0;this.parent.activeViewOptions.group.resources.length===0?p=this.getEventCount(e,this.actionObj.start.getMonth()+l):(p=P({},e,null,!0),a=this.resizeEdges.left||this.resizeEdges.right?I(a,-1):a,p.count=this.getMonthDiff(e[this.parent.eventFields.startTime],a)+1),this.dynamicYearlyEventsRendering(p,!0)}},i.prototype.getMonthDiff=function(e,t){var r;return r=(t.getFullYear()-e.getFullYear())*12,r-=e.getMonth(),r+=t.getMonth(),r<=0?0:r},i.prototype.getEventCount=function(e,t){var r=P({},e,null,!0),n=r[this.parent.eventFields.startTime],s=r[this.parent.eventFields.endTime],a=new Date(this.parent.selectedDate.getFullYear(),t,1),h=I(new Date(this.parent.selectedDate.getFullYear(),t+1,0),1),l=1;return n.getTime()<a.getTime()&&(r[this.parent.eventFields.startTime]=a),s.getTime()>h.getTime()&&(r[this.parent.eventFields.endTime]=h),this.parent.activeViewOptions.group.resources.length===0&&(l=Math.ceil((r[this.parent.eventFields.endTime].getTime()-r[this.parent.eventFields.startTime].getTime())/Le)),r.count=l,r},i.prototype.resizeStop=function(e){var t=this;S.remove(document,Y.touchMoveEvent,this.resizing),S.remove(document,Y.touchEndEvent,this.resizeStop),clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionObj.action=null,this.removeCloneElementClasses(),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=this.parent.uiStateValues.isTapHold=!1;var r={cancel:!1,data:this.getChangedData(),element:this.actionObj.element,event:e};this.parent.trigger(no,r,function(n){n.cancel||(t.parent.isSpecificResourceEvents()&&(t.parent.crudModule.crudObj.sourceEvent=[t.parent.resourceBase.lastResourceLevel[parseInt(n.element.getAttribute("data-group-index"),10)]],t.parent.crudModule.crudObj.targetEvent=t.parent.crudModule.crudObj.sourceEvent,t.parent.crudModule.crudObj.isCrudAction=!0),t.saveChangedData(n))})},i.prototype.verticalResizing=function(e){var t=this.actionObj.clone.offsetTop;e||(t+=this.actionObj.clone.offsetHeight);var r=t/this.actionObj.cellHeight*this.actionObj.slotInterval,n=this.actionObj.clone.offsetParent;if(!d(n)){var s=O(this.parent.getDateFromElement(n));s.setHours(this.parent.activeView.getStartHour().getHours()),s.setMinutes(r+this.parent.activeView.getStartHour().getMinutes()),e?this.actionObj.start=this.calculateIntervalTime(s):this.actionObj.end=this.calculateIntervalTime(s),this.updateTimePosition(s)}},i.prototype.horizontalResizing=function(e){var t=new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime()),r=new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime()),n,s=this.parent.currentView,a=this.parent.currentView==="TimelineMonth";if(this.parent.activeView.isTimelineView()){var h=this.parent.getContentTable().querySelector("tr");if(this.parent.activeViewOptions.headerRows.length>0){var l=this.parent.activeViewOptions.headerRows.map(function(K){return K.option});s=l.slice(-1)[0],a&&s==="Hour"&&(s=l.slice(-2)[0]||"Month")}n=e?t:r;var p=0,u=[].slice.call(h.children),c=!1,f=this.actionObj.cellWidth/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount),g=parseFloat(this.parent.enableRtl?this.actionObj.clone.style.right:this.actionObj.clone.style.left);if(g=Math.round(g/f)*f,["Year","Month","Week","Date"].indexOf(s)!==-1){for(var v=0,m=0,y=u;m<y.length;m++){var w=y[m];v+=parseInt(w.getAttribute("colspan"),10)}var C=this.parent.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);C=Math.round(C/this.actionObj.cellWidth)*this.actionObj.cellWidth,e||(C+=this.parent.getElementWidth(this.actionObj.clone)-this.actionObj.cellWidth),p=a?Math.floor(C/Math.floor(this.parent.getElementWidth(h)/v)):Math.round(C/(this.parent.getElementWidth(h)/v)),p=e?p:a?p+1:p,c=p===u.length,p=p<0?0:p>=v?v-1:p}else{var T=this.actionObj.cellWidth;if(p=e?Math.round(g/this.actionObj.cellWidth):Math.ceil((g+(this.parent.getElementWidth(this.actionObj.clone)-T))/this.actionObj.cellWidth),this.parent.enableRtl){var A=Math.round(g/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.parent.getElementWidth(this.actionObj.clone)-this.actionObj.cellWidth);p=Math.floor(A/this.actionObj.cellWidth)}c=p===u.length,p=this.getIndex(p)}var L=void 0;if(["Year","Month","Week","Date"].indexOf(s)!==-1?L=new Date(this.parent.activeView.renderDates[parseInt(p.toString(),10)].getTime()):L=this.parent.getDateFromElement(h.children[parseInt(p.toString(),10)]),["TimelineMonth","Year","Month","Week","Date"].indexOf(s)!==-1||!this.parent.activeViewOptions.timeScale.enable)n=new Date(L.setHours(n.getHours(),n.getMinutes(),n.getSeconds()));else{e||(g+=this.parent.getElementWidth(this.actionObj.clone));var k=Math.floor(this.actionObj.slotInterval/this.actionObj.cellWidth*(g-Math.floor(g/this.actionObj.cellWidth)*this.actionObj.cellWidth));k=c||!e&&k===0?this.actionObj.slotInterval:k,n=new Date(L.getTime()),n=new Date(L.getTime()+k*Ie),this.updateTimePosition(n)}}else{var R=E(this.actionObj.clone,"td").cellIndex,N=Math.ceil((e?this.parent.getElementWidth(this.actionObj.element):0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,v=Math.ceil((this.parent.getElementWidth(this.actionObj.clone)-N)/this.actionObj.cellWidth),h=E(this.actionObj.clone,"tr"),F=e?R-v:R+v-1;F=this.getIndex(F),n=this.parent.getDateFromElement(h.children[parseInt(F.toString(),10)]),e?n.setHours(t.getHours(),t.getMinutes(),t.getSeconds()):n.setHours(r.getHours(),r.getMinutes(),r.getSeconds())}var j=["TimelineMonth","Year","Month","Week","Date"].indexOf(s)!==-1||!this.parent.activeViewOptions.timeScale.enable;if(e)r.getTime()-n.getTime()<=0&&(n=j?O(r):t),this.actionObj.start=j?n:this.calculateIntervalTime(n);else{var z=j&&n.getHours()===0&&n.getMinutes()===0?I(n,1):n;j&&z.getTime()-t.getTime()<=0&&(z=I(O(t),1)),this.actionObj.end=j?z:this.calculateIntervalTime(z)}},i.prototype.getTopBottomStyles=function(e,t){var r=this.parent.element.querySelector("."+$),n=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,s=t?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),a=t?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;s=a<0?this.actionObj.clone.offsetHeight:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:s,a=a<0?0:a,a=t?Math.floor(a/n)*n:a,s=a+s>=r.scrollHeight?r.scrollHeight-a:Math.ceil(s/n)*n,!t&&this.actionObj.clone.offsetTop+s>=this.parent.getContentTable().offsetHeight&&(s=this.parent.getContentTable().offsetHeight-this.actionObj.clone.offsetTop);var h={height:x(s<this.actionObj.cellHeight?Math.floor(s/n)*n:s),top:x(s<this.actionObj.cellHeight&&t?Math.ceil(a/n)*n:a),left:"0px",right:"0px",width:"100%"};return h},i.prototype.getLeftRightStyles=function(e,t){var r={},n=this.parent.activeView.isTimelineView(),s=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,a=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,h=t?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,l=n?Math.round(this.parent.getElementWidth(this.actionObj.element)/this.actionObj.cellWidth)*this.actionObj.cellWidth:this.parent.currentView==="Month"?this.parent.getElementWidth(this.actionObj.element):Math.ceil(this.parent.getElementWidth(this.actionObj.element)/this.actionObj.cellWidth)*this.actionObj.cellWidth,p=l+Math.ceil(h/this.actionObj.cellWidth)*this.actionObj.cellWidth,u=this.parent.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft;if(u=Math.round(u/a)*a,s){if(p=l+Math.ceil(h/a)*a,!t){var c=(+parseFloat(this.actionObj.element.style[this.parent.enableRtl?"right":"left"])).toFixed(1),f=Math.round(l/a)*a;(c!==u.toFixed(1)||f!==l)&&(p=Math.round((u+p)/a)*a-u)}this.actionObj.event[this.parent.eventFields.isAllDay]=!1}var g=!t&&p+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.parent.getElementWidth(this.actionObj.clone):(p<this.actionObj.cellWidth,p);if(this.parent.enableRtl){var v=n?parseInt(this.actionObj.element.style.right,10):-(p-this.actionObj.cellWidth);v=n?v:t||v>0?0:v,n&&!t&&(v=Math.round(v/a)*a,v=v-Math.ceil((this.actionObj.pageX-this.actionObj.X)/a)*a,v<0&&(v=parseInt(this.actionObj.clone.style.right,10),g=parseInt(this.actionObj.clone.style.width,10))),v=v>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:v,r.right=x(v),g=g+v>this.scrollArgs.width?this.parent.getElementWidth(this.actionObj.clone):g}else{var m=t?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.enableRtl?this.actionObj.element.offsetLeft:0;n&&(m=t?m:parseInt(this.actionObj.clone.style.left,10),this.parent.enableRtl?m=t?m:this.actionObj.pageX<this.actionObj.X-this.parent.getElementWidth(this.actionObj.clone)?parseInt(this.actionObj.clone.style.right,10):m:m=t&&this.actionObj.pageX>this.actionObj.X+this.parent.getElementWidth(this.actionObj.clone)&&this.parent.getElementWidth(this.actionObj.clone)===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):m);var y=m;m=n?s?t?this.actionObj.element.offsetLeft-Math.ceil((this.actionObj.element.offsetLeft-m)/a)*a:m:Math.floor(m/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(m)/this.actionObj.cellWidth)*this.actionObj.cellWidth,m<0&&(n&&t&&m%a?(m=parseInt(this.actionObj.clone.style.left,10),g=parseInt(this.actionObj.clone.style.width,10)):(m=0,g=this.parent.getElementWidth(this.actionObj.clone)));var w=Math.ceil(this.parent.getElementWidth(this.actionObj.clone)/this.actionObj.cellWidth)*this.actionObj.cellWidth;t&&(r.left=x(n?m:t?y<0?-m:Math.ceil((l-w)/this.actionObj.cellWidth)*this.actionObj.cellWidth:m))}return r.width=x(g),r},i.prototype.resizeValidation=function(e){var t=this.parent.eventBase.getPageCoordinates(e),r=this.getContentAreaDimension(),n=this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.timeScale.enable,s=this.actionObj.cellWidth,a=!1;return this.resizeEdges.left&&(t.pageX<r.leftOffset&&t.pageX>=r.left&&n&&(s=0),a=t.pageX-s>=r.left),this.resizeEdges.right&&(t.pageX>r.rightOffset&&t.pageX<=r.right&&n&&(s=0),a=t.pageX+s<=r.right),this.resizeEdges.top&&(a=this.actionObj.clone.offsetTop>=r.top),this.resizeEdges.bottom&&(a=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),a},i.prototype.getModuleName=function(){return"resize"},i}($s),_l=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ft=2,Xs=function(o){_l(i,o);function i(e){var t=o.call(this,e,"day")||this;return t.isResource=!1,t}return i.prototype.renderAppointments=function(){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea(),this.fields=this.parent.eventFields;for(var e=this.parent.currentView==="Year"?"."+Oe:"."+ae+",."+so,t=[].slice.call(this.parent.element.querySelectorAll(e)),r=0,n=t;r<n.length;r++){var s=n[r];pe(s)}this.renderedEvents=[],this.parent.currentView==="Year"?this.yearViewEvents():(this.removeCellHeight(),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?(this.isResource=!0,this.timelineResourceEvents()):this.timelineYearViewEvents()),this.parent.renderTemplates(),this.parent.notify(rt,{})},i.prototype.yearViewEvents=function(){for(var e=this.getMonths(),t=0,r=e;t<r.length;t++)for(var n=r[t],s=".e-month-calendar:nth-child("+(e.indexOf(n)+1)+") td.e-work-cells",a=[].slice.call(this.parent.element.querySelectorAll(s)),h=new Date(this.parent.selectedDate.getFullYear(),n,1),l=this.parent.calendarUtil.getMonthStartDate(new Date(h.getTime())),p=this.parent.calendarUtil.getMonthEndDate(new Date(h.getTime())),u=He(l,this.parent.activeViewOptions.firstDayOfWeek),c=I(xs(p,this.parent.activeViewOptions.firstDayOfWeek),1),f=0;u.getTime()<c.getTime();f++){var g=O(new Date(u.getTime())),v=I(new Date(g.getTime()),1);if(u=I(new Date(u.getTime()),1),!!this.parent.isMinMaxDate(g)){var m=this.parent.eventBase.filterEvents(g,v);if(m.length>0){var y=a[parseInt(f.toString(),10)];y&&y.appendChild(b("div",{className:Oe}))}}}},i.prototype.timelineYearViewEvents=function(){var e=this,t=this.parent.element.querySelector("."+_+":not(."+Pe+")");this.cellWidth=this.parent.getElementWidth(t),this.cellHeader=Ms(t.querySelector("."+Xt));var r=this.parent.element.querySelector("."+Zt);this.eventHeight=this.parent.getElementHeightFromClass(r,Oe);var n="."+bt+" tbody tr,."+mi+" tbody tr,."+ve+" tbody tr";this.addCellHeight(n,this.eventHeight,ft,this.cellHeader,this.moreIndicatorHeight);for(var s=[].slice.call(this.parent.element.querySelectorAll("."+Ue)),a=this.getMonths(),h=this.parent.activeViewOptions.group.resources.length>0&&this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:void 0,l=0;l<a.length;l++){var p=s[parseInt(l.toString(),10)],u=l+1,c=b("div",{className:ae});p.appendChild(c);var f=new Date(this.parent.selectedDate.getFullYear(),a[parseInt(l.toString(),10)],1),g=new Date(f.getFullYear(),f.getMonth()+1,0),v=f.getDay(),m=[];for(this.parent.activeViewOptions.orientation==="Horizontal"&&(this.renderedEvents=[]);f.getTime()<=g.getTime();){var y=void 0,w=void 0;if(this.parent.activeViewOptions.orientation==="Vertical"){var C=s[parseInt(v.toString(),10)];u=v+1,c=C.querySelector("."+ae),c||(c=b("div",{className:ae}),C.appendChild(c)),this.parent.enableRtl?w=l*this.cellWidth:y=l*this.cellWidth}else this.parent.enableRtl?w=(v+f.getDate()-1)*this.cellWidth:y=(v+f.getDate()-1)*this.cellWidth;var T=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+u+") td");this.cellHeight=T.offsetHeight;var A=O(new Date(f.getTime())),L=I(new Date(A.getTime()),1),k=void 0;this.parent.uiStateValues.isGroupAdaptive&&(k=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]);var R=this.parent.eventBase.filterEvents(A,L,void 0,k);R=this.parent.eventBase.sortByDateTime(R);for(var N=function(ne,se){var Z=P({},R[parseInt(ne.toString(),10)],null,!0);F.updateSpannedEvents(Z,A,L);var J=F.getIndex(A);Z.Index=J;var ce=F.cellHeader+F.eventHeight*(J+1)+ft+F.moreIndicatorHeight,Te=F.cellHeight-F.cellHeader-F.moreIndicatorHeight,Bt=Math.floor(Te/(F.eventHeight+ft)),ni=F.parent.rowAutoHeight?1:F.parent.activeViewOptions.maxEventsPerRow,ln=F.parent.activeViewOptions.maxEventsPerRow?se-ni:se-Bt<=0?1:se-Bt;if(F.parent.activeViewOptions.orientation==="Horizontal"){var ji=F.renderedEvents.filter(function(zi){return zi.Guid===Z.Guid}),Wi=m.filter(function(zi){return zi.Guid===Z.Guid});if(ji.length>0&&ji[0].MoreIndicator||Wi.length>0&&Wi[0].MoreIndicator){var Ui=F.parent.activeViewOptions.orientation==="Horizontal"?l:v;return F.renderMoreIndicator(c,ln,A,Ui,y,w,h),"continue"}else if(ji.length>0||Wi.length>0)return"continue"}var $a=F.maxOrIndicator||J<ni||F.cellHeight>ce;if(F.parent.rowAutoHeight||$a||F.cellHeight>ce)F.renderEvent(c,Z,l,y,w,f,v),(F.parent.rowAutoHeight||F.cellHeight>ce)&&F.updateCellHeight(T,ce),m.push(Z);else{var Ui=F.parent.activeViewOptions.orientation==="Horizontal"?l:v;F.renderMoreIndicator(c,ln,A,Ui,y,w,h),F.parent.activeViewOptions.orientation==="Horizontal"&&(Z.MoreIndicator=!0,F.renderedEvents.push(Z),m.push(Z))}},F=this,j=0,z=R.length;j<z;j++)N(j,z);f=I(new Date(f.getTime()),1),this.parent.activeViewOptions.orientation==="Vertical"&&(v++,this.renderedEvents=[])}}if(this.parent.rowAutoHeight&&this.parent.activeViewOptions.orientation==="Vertical"){var K=[].slice.call(this.parent.element.querySelectorAll("."+Ue)),V=[].slice.call(this.parent.element.querySelectorAll("."+ve+" tbody tr"));K.forEach(function(ne,se){var Z=[].slice.call(ne.querySelectorAll("."+Oe)),J=V[parseInt(se.toString(),10)].offsetTop+e.cellHeader+ft;Z.forEach(function(ce){var Te=parseInt(ce.getAttribute("data-index"),10);ce.style.top=J+Te*e.eventHeight+"px",ce.removeAttribute("data-index")})})}},i.prototype.updateSpannedEvents=function(e,t,r){var n=this.isResource&&this.parent.activeViewOptions.orientation==="Vertical"||!this.isResource&&this.parent.activeViewOptions.orientation==="Horizontal",s={isLeft:!0,isRight:!0,isBottom:!0,isTop:!0};t.getTime()<=e[this.fields.startTime].getTime()&&(n?s.isLeft=!1:s.isTop=!1),(r.getTime()>=e[this.fields.endTime].getTime()||n&&!this.isResource&&I(r,-1).getMonth()===e[this.fields.endTime].getMonth()||n&&this.isResource&&r.getTime()<=e[this.fields.endTime].getTime())&&(n?s.isRight=!1:s.isBottom=!1),e.data=s},i.prototype.timelineResourceEvents=function(){var e=this,t=this.parent.element.querySelector("."+$),r=t.offsetWidth>t.clientWidth,n=this.parent.element.querySelector("."+_);this.cellWidth=this.parent.getElementWidth(n),this.cellHeader=0;var s=this.parent.element.querySelector("."+Zt);this.eventHeight=this.parent.getElementHeightFromClass(s,Oe);var a="."+bt+" tbody tr,."+mi+" tbody tr,."+ve+" tbody tr";this.addCellHeight(a,this.eventHeight,ft,this.cellHeader,this.moreIndicatorHeight);var h=[].slice.call(this.parent.element.querySelectorAll("."+Ue)),l=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.activeViewOptions.allowVirtualScrolling?this.parent.resourceBase.renderedResources:this.parent.resourceBase.lastResourceLevel,p=this.getMonths();if(this.parent.activeViewOptions.orientation==="Horizontal")for(var u=0;u<p.length;u++)for(var c=new Date(this.parent.selectedDate.getFullYear(),p[parseInt(u.toString(),10)],1),f=0,g=l.length;f<g;f++)this.renderedEvents=[],this.renderResourceEvent(h[parseInt(u.toString(),10)],l[parseInt(f.toString(),10)],u,f,c);else for(var f=0,g=l.length;f<g;f++){this.renderedEvents=[];for(var u=0;u<p.length;u++){var c=new Date(this.parent.selectedDate.getFullYear(),p[parseInt(u.toString(),10)],1);this.renderResourceEvent(h[parseInt(f.toString(),10)],l[parseInt(f.toString(),10)],u,f,c)}}if(this.parent.rowAutoHeight&&!r&&t.offsetWidth>t.clientWidth){var v=[].slice.call(this.parent.element.querySelectorAll("."+Oe));v.forEach(function(C){C.style.removeProperty("left"),C.style.removeProperty("right")});var m=[].slice.call(this.parent.element.querySelectorAll("."+Ue)),y=this.parent.element.querySelector("."+ve),w=[].slice.call(y.querySelectorAll("tbody tr"));m.forEach(function(C,T){var A=[].slice.call(C.children),L=w[parseInt(T.toString(),10)];A.forEach(function(k,R){var N=L.querySelector("td:nth-child("+(R+1)+")"),F=[].slice.call(k.children),j=e.parent.getElementWidth(N),z=N.offsetLeft;if(e.parent.enableRtl){var K=y.offsetWidth-z-N.offsetWidth;F.forEach(function(V){V.style.width=Math.floor(parseInt(V.style.width,10)/j)*j+"px",V.style.right=K+"px"})}else F.forEach(function(V){V.style.width=Math.floor(parseInt(V.style.width,10)/j)*j+"px",V.style.left=z+"px"})})})}},i.prototype.renderResourceEvent=function(e,t,r,n,s){var a=b("div",{className:ae});e.appendChild(a);var h=I(Ti(new Date(s.getTime())),1),l=this.parent.eventBase.filterEvents(s,h,void 0,t),p=this.parent.activeViewOptions.orientation==="Vertical"?n:r,u=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+(p+1)+") td");this.cellHeight=u.offsetHeight,this.groupOrder=t.groupOrder;for(var c=[],f=function(y){var w=l[parseInt(y.toString(),10)],C=void 0,T=P({},w,null,!0);if(g.parent.activeViewOptions.group.resources.length>0){var A=g.isSpannedEvent(T,s);C=g.getIndex(A[g.fields.startTime]),T.Index=C}else C=g.getIndex(T[g.fields.startTime]),T.Index=C;var L=g.cellHeader+g.eventHeight*(y+1)+ft+g.moreIndicatorHeight,k=g.parent.activeViewOptions.orientation==="Vertical"?r*g.cellWidth:n*g.cellWidth;if(!g.parent.isMinMaxDate(T[g.fields.startTime]))return{value:void 0};if(g.parent.activeViewOptions.orientation==="Vertical"&&g.parent.activeViewOptions.group.resources.length>0){var R=g.renderedEvents.filter(function(z){return z.Guid===T.Guid}),N=c.filter(function(z){return z.Guid===T.Guid});if(R.length>0||N.length>0)return"continue"}if(g.parent.rowAutoHeight||g.cellHeight>L)g.renderEvent(a,T,r,k,k,s,n),g.updateCellHeight(u,L),c.push(T);else{var F=g.parent.activeViewOptions.orientation==="Horizontal"?r:n;if(g.renderMoreIndicator(a,l.length-y,s,F,k,k,n),g.parent.activeViewOptions.orientation==="Horizontal")for(var j=n;j<l.length;j++)g.renderedEvents.push(P({},l[parseInt(j.toString(),10)],{Index:C+j},!0));return"break"}},g=this,v=0;v<l.length;v++){var m=f(v);if(typeof m=="object")return m.value;if(m==="break")break}},i.prototype.renderEvent=function(e,t,r,n,s,a,h){var l=this,p=this.isSpannedEvent(t,a),u=this.createEventElement(p),c,f;if(p.isSpanned.count===1){var g=I(p[this.fields.endTime],-1);p[this.fields.endTime]=g>p[this.fields.startTime]?g:p[this.fields.endTime]}if(!(p[this.fields.startTime]>p[this.fields.endTime])){this.parent.activeViewOptions.orientation==="Horizontal"?(f=r+1,p[this.fields.startTime].getTime()===p[this.fields.endTime].getTime()&&(p.isSpanned.count=1),c=p.isSpanned.count*this.cellWidth):(f=h+1,c=this.isResource?p.isSpanned.count*this.cellWidth:this.cellWidth);var v=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+f+") td"),m=v.offsetTop+this.cellHeader+this.eventHeight*p.Index+ft;he(u,{width:c+"px",height:this.eventHeight+"px",left:n+"px",right:s+"px",top:m+"px"}),!this.isResource&&this.parent.rowAutoHeight&&this.parent.activeViewOptions.orientation==="Vertical"&&u.setAttribute("data-index",p.Index.toString());var y={data:p,element:u,cancel:!1,type:"event"};this.parent.trigger(Ls,y,function(w){w.cancel||(e.appendChild(u),l.wireAppointmentEvents(u,p),l.parent.activeViewOptions.group.resources.length>0?l.renderedEvents.push(P({},p,null,!0)):l.parent.activeViewOptions.orientation==="Vertical"?l.renderedEvents.push(P({},p,null,!0)):((p.isSpanned.isRight||p.isSpanned.isLeft)&&l.parent.activeViewOptions.orientation==="Horizontal"||!p.isSpanned.isRight)&&l.renderedEvents.push(P({},p,null,!0)))})}},i.prototype.renderMoreIndicator=function(e,t,r,n,s,a,h){if(!(this.parent.activeViewOptions.group.resources.length===0&&e.querySelector('[data-start-date="'+r.getTime()+'"]'))){var l;this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?l=I(Ti(new Date(r.getTime())),1):l=I(new Date(r.getTime()),1);var p=this.getMoreIndicatorElement(t,r,l),u=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+(n+1)+")"),c=u.offsetTop+(this.cellHeight-this.moreIndicatorHeight);s=Math.floor(s/this.cellWidth)*this.cellWidth,a=Math.floor(a/this.cellWidth)*this.cellWidth,he(p,{width:this.cellWidth+"px",left:s+"px",right:a+"px",top:c+"px"}),d(h)||p.setAttribute("data-group-index",h.toString()),e.appendChild(p),S.add(p,"click",this.moreIndicatorClick,this)}},i.prototype.createEventElement=function(e){var t=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),r=b("div",{className:Oe,attrs:{"data-id":"Appointment_"+e[this.fields.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-disabled":this.parent.eventBase.getReadonlyAttribute(e),"aria-label":this.parent.getAnnouncementString(e)}});if(this.cssClass&&M([r],this.cssClass),e[this.fields.isReadonly]&&M([r],ao),this.parent.activeViewOptions.group.resources.length>0){var n=this.getGroupIndexFromEvent(e);r.setAttribute("data-group-index",n.toString())}var s=[],a=P({},e,null,!0);if(this.parent.activeViewOptions.eventTemplate){var h=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate";s=this.parent.getAppointmentTemplate()(a,this.parent,"eventTemplate",h,!1,void 0,void 0,this.parent.root)}else{var l=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",p=b("div",{className:Fs,innerHTML:t+(l?";&nbsp"+l:"")}),u=b("div",{className:xr+(this.parent.isAdaptive?" "+Fr:""),innerHTML:this.parent.getTimeString(a[this.fields.startTime])}),c=b("div",{className:xr+(this.parent.isAdaptive?" "+Fr:""),innerHTML:this.parent.getTimeString(a[this.fields.endTime])});M([p],"e-text-center"),e[this.fields.isAllDay]?s=[p]:!a.isLeft&&!a.isRight?s=[u,p,c]:(a.isLeft||s.push(u),s.push(p),a.isRight||s.push(c))}var f=b("div",{className:oo});return G(s,f),r.appendChild(f),this.parent.eventBase.renderSpannedIcon(r,e.isSpanned),this.renderResizeHandler(r,e.data,e[this.fields.isReadonly]),this.applyResourceColor(r,a,"backgroundColor",this.groupOrder),r},i.prototype.isSpannedEvent=function(e,t){var r=new Date(t.getFullYear(),t.getMonth(),1),n=I(new Date(t.getFullYear(),t.getMonth()+1,0),1),s=P({},e,null,!0),a=s[this.fields.startTime],h=s[this.fields.endTime],l={isLeft:!1,isRight:!1,count:1},p=new Date(this.parent.selectedDate.getFullYear(),this.parent.firstMonthOfYear,1),u=ze(p,this.parent.monthsCount);if(this.isResource&&this.updateSpannedEvents(e,r,n),this.parent.activeViewOptions.orientation==="Vertical"&&this.parent.activeViewOptions.group.resources.length>0){this.updateSpannedEventDetails(a,h,p,u,s,l);var c=s[this.fields.startTime],f=new Date(s[this.fields.endTime]-1);l.count=f.getMonth()-c.getMonth()+this.parent.monthsCount*(f.getFullYear()-c.getFullYear())+1}else if(this.updateSpannedEventDetails(a,h,r,n,s,l),this.parent.activeViewOptions.group.resources.length===0||this.parent.uiStateValues.isGroupAdaptive){var g=O(s[this.fields.endTime]).getTime(),v=O(s[this.fields.startTime]).getTime();(e[this.fields.isAllDay]&&g===e[this.fields.endTime].getTime()||l.isRight)&&(g=I(new Date(g),-1).getTime()),l.count=Math.round((g-v)/Le)+1}return s.isSpanned=l,O(a).getTime()<O(this.parent.minDate).getTime()&&(s[this.fields.startTime]=this.parent.minDate),O(h).getTime()>O(this.parent.maxDate).getTime()&&(s[this.fields.endTime]=this.parent.maxDate),s},i.prototype.updateSpannedEventDetails=function(e,t,r,n,s,a){e.getTime()<r.getTime()&&(s[this.fields.startTime]=r,a.isLeft=!0),t.getTime()>n.getTime()&&(s[this.fields.endTime]=n,a.isRight=!0)},i.prototype.getOverlapEvents=function(e,t){var r=[],n,s;if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.calendarUtil.getMonthStartDate(new Date(e.getTime())),h=I(this.parent.calendarUtil.getMonthEndDate(new Date(e.getTime())),-1);n=O(new Date(a.getTime())).getTime(),s=O(new Date(h.getTime())).getTime()}else this.parent.rowAutoHeight?(n=O(new Date(e.getTime())).getTime(),s=I(O(new Date(e.getTime())),1).getTime()):n=s=O(new Date(e.getTime())).getTime();for(var l=0,p=t;l<p.length;l++){var u=p[l],c=new Date(u[this.fields.startTime].getTime()),f=new Date(u[this.fields.endTime].getTime()),g=u[this.fields.isAllDay]?O(f).getTime()>n:O(f).getTime()>=n;(O(c).getTime()<=n&&g||O(c).getTime()>=n&&O(f).getTime()<=s||this.parent.activeViewOptions.orientation==="Vertical"&&O(c).getTime()>=n&&O(f).getTime()>=s)&&r.push(u)}return r},i.prototype.getMonths=function(){var e=this;return Array.apply(null,{length:this.parent.monthsCount}).map(function(t,r){return e.parent.firstMonthOfYear+r})},i.prototype.removeCellHeight=function(){for(var e="."+bt+" tbody tr,."+mi+" tbody tr,."+ve+" tbody tr",t=[].slice.call(this.element.querySelectorAll(e)),r=0,n=t;r<n.length;r++){var s=n[r];s.firstElementChild.style.height=""}},i.prototype.destroy=function(){o.prototype.destroy.call(this),this.parent=null},i}(Kt),Gl=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ns=1440,Yl=function(o){Gl(i,o);function i(){var e=o!==null&&o.apply(this,arguments)||this;return e.widthUptoCursorPoint=0,e.heightUptoCursorPoint=0,e.cursorPointIndex=0,e.isHeaderRows=!1,e.isTimelineDayProcess=!1,e.widthPerMinute=0,e.heightPerMinute=0,e.minDiff=0,e.isStepDragging=!1,e.isMorePopupOpened=!1,e.isAllDayDrag=!1,e.isMultiSelect=!1,e.multiData=[],e.updatedData=[],e.swagData=[],e.startTime=0,e.isAllDayTarget=!1,e.targetTd=null,e.isCursorAhead=!1,e.enableCurrentViewDrag=!1,e.isPreventMultiDrag=!1,e.slotsUptoCursor=-1,e.eleTop=0,e.distanceUptoCursor=0,e}return i.prototype.wireDragEvent=function(e){new lo(e,{abort:"."+Lr,clone:!0,isDragScroll:!0,enableTailMode:!!this.parent.eventDragArea,cursorAt:this.parent.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.dragArea,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)})},i.prototype.setDragArea=function(){var e=document.querySelector(this.parent.eventDragArea);this.dragArea=this.parent.eventDragArea&&e?e:this.parent.element.querySelector("."+ve)},i.prototype.dragHelper=function(e){var t=this;if(e.sender&&e.sender.type==="touchmove"&&(!this.parent.uiStateValues.isTapHold||!e.element.classList.contains(Is)))return null;if(this.setDragActionDefaultValues(),this.actionObj.element=e.element,e.sender&&["Day","Week","WorkWeek"].indexOf(this.parent.currentView)>-1){var r=this.parent.eventBase.getPageCoordinates(e.sender);this.distanceUptoCursor=r.clientY-this.actionObj.element.getBoundingClientRect().top,this.eleTop=parseFloat(this.actionObj.element.style.top),this.slotsUptoCursor=-1}this.actionObj.action="drag";var n=[];return!this.parent.allowMultiDrag||d(this.parent.selectedElements)||this.parent.selectedElements.length===0||this.parent.selectedElements.length>0&&this.parent.selectedElements.indexOf(this.actionObj.element)===-1?n=[e.element]:(n=this.parent.selectedElements,this.isMultiSelect=!0),n.forEach(function(s){var a=t.createCloneElement(s);s.getAttribute("data-guid")===t.actionObj.element.getAttribute("data-guid")&&(t.actionObj.clone=a,!t.parent.eventDragArea&&t.parent.currentView!=="Month"&&t.parent.activeViewOptions.timeScale.enable&&!t.parent.activeView.isTimelineView()&&!t.actionObj.element.classList.contains(Se)&&he(t.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),t.actionObj.clone.style.top=x(t.actionObj.element.offsetTop)),t.actionObj.cloneElement.push(a),t.actionObj.originalElement.push(s)}),this.actionObj.clone},i.prototype.dragPosition=function(e){if(this.parent.eventDragArea)return{left:e.left,top:e.top};var t=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,r=x(0);this.parent.currentView==="Month"&&(r=e.left);var n;this.isStepDragging?n=Math.ceil(this.actionObj.clone.getBoundingClientRect().right)+this.actionObj.interval:n=this.actionObj.clone.getBoundingClientRect().right;var s=this.parent.element.querySelector("."+$),a=s.getBoundingClientRect().right;this.parent.activeView.isTimelineView()&&this.parent.currentView!=="TimelineYear"&&!this.parent.enableRtl&&this.actionObj.pageX>n&&!this.isMorePopupOpened&&!(this.actionObj.pageX>a)&&(this.isCursorAhead=!0),this.parent.activeView.isTimelineView()&&(r=x(this.actionObj.clone.offsetLeft));var h;if(this.parent.activeView.isTimelineView()||!this.parent.timeScale.enable||!d(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains(gi))h=x(this.actionObj.clone.offsetTop);else if(this.parent.currentView==="Month")h=x(0);else if(this.actionObj.clone.classList.contains(Se))h=x(this.parent.element.querySelector("."+_t).offsetTop),he(this.actionObj.clone,{width:x(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.enableRtl&&x(0)});else{this.actionObj.element.classList.contains(Se)&&!this.actionObj.clone.classList.contains(Se)&&he(this.actionObj.clone,{height:x(this.actionObj.cellHeight),width:x(this.actionObj.cellWidth-1),pointerEvents:"none"});var l=parseInt(e.top,10);if(l=l<0?0:l,this.slotsUptoCursor<0){var p=Math.floor((this.eleTop+this.distanceUptoCursor)/t),u=Math.floor(this.eleTop/t);this.slotsUptoCursor=p-u}l=(Math.floor((l+this.distanceUptoCursor+1)/t)-this.slotsUptoCursor)*t,h=x(l<0?0:l);var c=this.parent.element.querySelector(".e-content-wrap").scrollHeight,f=parseInt(h,10)+this.actionObj.clone.offsetHeight;f>c&&(h=parseInt(h,10)-(f-c)+"px"),this.isPreventMultiDrag&&(h=x(this.actionObj.clone.offsetTop))}return{left:r,top:h}},i.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector("."+_);this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},i.prototype.dragStart=function(e){var t=this,r=this.actionObj.element.getAttribute("data-guid");this.actionObj.event=this.parent.eventBase.getEventByGuid(r);var n=P({},this.actionObj.event,null,!0);d(n)||(this.startTime=n[this.parent.eventFields.startTime].getTime()),this.parent.allowMultiDrag||this.parent.eventBase.removeSelectedAppointmentClass();var s={cancel:!1,data:n,selectedData:this.getSelectedData(),event:e,excludeSelectors:null,element:this.actionObj.element,interval:this.actionObj.interval,navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100}};this.parent.trigger(ho,s,function(a){if(a.cancel||!d(t.actionObj.element)&&d(t.actionObj.element.parentElement)){var h=t.actionObj.element.ej2_instances[0];d(h)||h.intDestroy(e.event),t.actionObj.action="",t.removeCloneElementClasses(),t.removeCloneElement();return}t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.actionObj.start=n[t.parent.eventFields.startTime],t.actionObj.end=n[t.parent.eventFields.endTime],t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10),t.actionObj.interval=a.interval,t.actionObj.navigation=a.navigation,t.actionObj.scroll=a.scroll,t.enableCurrentViewDrag=s.dragWithinRange&&!s.navigation.enable&&t.parent.allowMultiDrag,t.actionObj.excludeSelectors=a.excludeSelectors;var l=t.parent.element.querySelector("."+$);if(t.scrollArgs={element:l,width:l.scrollWidth,height:l.scrollHeight},t.widthPerMinute=t.actionObj.cellWidth/t.actionObj.slotInterval*t.actionObj.interval,t.heightPerMinute=t.actionObj.cellHeight/t.actionObj.slotInterval*t.actionObj.interval,t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=-1,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.minDiff=0,t.isMorePopupOpened=!1,t.daysVariation=-1,t.isAllDayTarget=t.actionObj.clone.classList.contains(Se),(t.parent.activeView.isTimelineView()||!t.parent.timeScale.enable)&&t.parent.currentView!=="TimelineYear"){!d(t.actionObj.clone.offsetParent)&&t.actionObj.clone.offsetParent.classList.contains(gi)&&(t.isMorePopupOpened=!0),t.actionObj.pageX=e.event.pageX;var p=t.parent.activeViewOptions.headerRows;t.isHeaderRows=p.length>0&&p[p.length-1].option!=="Hour"&&p[p.length-1].option!=="Date",t.isTimelineDayProcess=!t.parent.activeViewOptions.timeScale.enable||t.isHeaderRows||t.parent.currentView==="TimelineMonth"||p.length>0&&p[p.length-1].option==="Date",t.isAllDayDrag=!t.isTimelineDayProcess&&n[t.parent.eventFields.isAllDay],t.isStepDragging=!t.isTimelineDayProcess&&!t.isAllDayDrag&&t.actionObj.slotInterval!==t.actionObj.interval,t.isTimelineDayProcess?t.timelineEventModule=new Kt(t.parent,"day"):t.timelineEventModule=new Kt(t.parent,"hour")}if(t.parent.currentView==="TimelineYear"&&(t.yearEvent=new Xs(t.parent)),t.parent.currentView==="Month"&&(t.startTime=O(new Date(t.startTime)).getTime(),t.updateOriginalElement(t.actionObj.clone),t.monthEvent=new Mi(t.parent)),t.parent.currentView==="Day"||t.parent.currentView==="Week"||t.parent.currentView==="WorkWeek"){t.verticalEvent=new ks(t.parent),t.verticalEvent.initializeValues();var u=t.splitEvent(t.actionObj.event);u.forEach(function(c){var f='.e-day-wrapper[data-date="'+O(c[t.parent.eventFields.startTime]).getTime()+'"]';t.parent.activeViewOptions.group.resources.length>0&&(f=f.concat('[data-group-index = "'+t.actionObj.groupIndex+'"]'));var g=t.parent.element.querySelector(f);if(g){var v=g.querySelector('[data-id="'+t.actionObj.clone.getAttribute("data-id")+'"]');v&&M([v],tt)}})}})},i.prototype.getSelectedData=function(){if(this.isMultiSelect&&this.multiData.length===0&&this.parent.selectedElements.length>0)for(var e=0,t=this.parent.selectedElements;e<t.length;e++){var r=t[e],n=r.getAttribute("data-guid"),s=this.parent.eventBase.getEventByGuid(n);this.multiData.push(P({},s,null,!0))}return this.multiData},i.prototype.drag=function(e){if(e.event&&e.event.type==="touchmove"&&e.event.preventDefault(),this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),!(!d(e.target)&&e.target.classList&&e.target.classList.contains(Xe))){var t=P({},this.actionObj.event,null,!0),r=this.parent.eventBase.getPageCoordinates(e);if(this.actionObj.Y=this.actionObj.pageY=r.pageY,this.actionObj.X=this.actionObj.pageX=r.pageX,this.actionObj.target=e.target,this.widthUptoCursorPoint=this.widthUptoCursorPoint===0?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=this.heightUptoCursorPoint===0?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,["Day","Week","WorkWeek"].indexOf(this.parent.currentView)>-1&&(this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains(Se):this.actionObj.event[this.parent.eventFields.isAllDay]),this.isStepDragging&&this.minDiff===0&&this.calculateMinutesDiff(t),(this.parent.currentView==="Month"||this.isAllDayDrag)&&this.daysVariation<0){var n=this.parent.getDateFromElement(this.actionObj.target);if(d(n))this.daysVariation=0;else{var s=O(n),a=O(new Date(t[this.parent.eventFields.startTime].getTime()));this.daysVariation=(s.getTime()-a.getTime())/Le}}else this.daysVariation=0;if(this.parent.eventDragArea){var h=r.target;this.actionObj.clone.style.top=x(h.offsetTop),this.actionObj.clone.style.left=x(h.offsetLeft);var l=E(h,"."+po);l?this.parent.currentView==="Week"||this.parent.currentView==="WorkWeek"||this.parent.currentView==="Day"||(this.actionObj.clone.style.width=x(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")}this.updateScrollPosition(e),this.updateNavigatingPosition(e),this.updateDraggingDateTime(e);var p={data:t,event:e,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end,selectedData:this.updatedData};this.parent.group.resources.length>0&&(p.groupIndex=this.actionObj.groupIndex),this.parent.trigger(co,p)}},i.prototype.calculateMinutesDiff=function(e){this.parent.enableRtl?this.minDiff=(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.minDiff=this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=e[this.parent.eventFields.startTime],r=this.parent.activeView.renderDates[0],n=qr(r,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());n.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(n.startHour.getTime()-t.getTime())/Ie)},i.prototype.dragStop=function(e){var t=this;if(this.isCursorAhead=!1,this.isPreventMultiDrag=!1,this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=this.parent.uiStateValues.isTapHold=!1,!this.isAllowDrop(e)){var r=e.target.classList&&!e.target.classList.contains("e-work-cells")&&this.parent.cellTemplate?E(e.target,".e-work-cells"):e.target,n={cancel:!1,data:this.getChangedData(this.updatedData),selectedData:this.updatedData,event:e,element:this.actionObj.element,target:r};this.actionObj.action=null,this.parent.trigger(uo,n,function(s){if(!s.cancel){if(t.parent.isSpecificResourceEvents()){t.parent.crudModule.crudObj.isCrudAction=!0,t.parent.crudModule.crudObj.sourceEvent=[t.parent.resourceBase.lastResourceLevel[parseInt(n.element.getAttribute("data-group-index"),10)]];var a=parseInt(n.target.getAttribute("data-group-index"),10)||t.actionObj.groupIndex;t.parent.crudModule.crudObj.targetEvent=[t.parent.resourceBase.lastResourceLevel[parseInt(a.toString(),10)]]}t.saveChangedData(s,t.isMultiSelect)}}),this.updatedData=[],this.multiData=[],this.isMultiSelect=!1,this.parent.selectedElements=[]}},i.prototype.updateNavigatingPosition=function(e){var t=this;if(this.actionObj.navigation.enable){var r=this.parent.getCurrentTime();d(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval(function(){if(r){var n=t.parent.getCurrentTime(),s=n.getSeconds(),a=r.getSeconds()+t.actionObj.navigation.timeDelay/1e3;a=a>=60?a-60:a,a===s&&(r=t.parent.getCurrentTime(),t.viewNavigation(e),t.updateDraggingDateTime(e))}},this.actionObj.navigation.timeDelay))}},i.prototype.updateDraggingDateTime=function(e){!d(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains(gi)?this.morePopupEventDragging(e):this.parent.activeView.isTimelineView()&&this.parent.currentView!=="TimelineYear"?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.parent.getElementWidth(this.parent.element.querySelector("."+_)),this.calculateTimelineTime(e)):this.parent.currentView==="Month"||this.parent.currentView==="TimelineYear"?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},i.prototype.navigationWrapper=function(){if(this.parent.activeView.isTimelineView()){var p=void 0;if(this.parent.activeViewOptions.group.resources.length>0?p=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):p=this.parent.element.querySelector("."+Ue),!d(p)){var u=p.querySelector("."+ae);u||(u=b("div",{className:ae}),p.appendChild(u)),this.actionObj.cloneElement.forEach(function(c){u.appendChild(c)})}}else if(this.parent.currentView==="Month"||!this.parent.timeScale.enable){var e=[].slice.call(this.parent.element.querySelectorAll("."+_));this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index;var t=e[this.actionObj.index].querySelector("."+ae);t||(t=b("div",{className:ae}),e[this.actionObj.index].appendChild(t)),t.appendChild(this.actionObj.clone)}else{var r=this.actionObj.clone.classList.contains(Se)?"."+ht:"."+ae;if(this.parent.element.querySelectorAll(r).item(this.actionObj.index).appendChild(this.actionObj.clone),r==="."+ht){var n=this.getAllDayEventHeight(),s=[].slice.call(this.parent.element.querySelectorAll("."+Ft+":first-child"));if(s[0].offsetHeight<n)for(var a=0,h=s;a<h.length;a++){var l=h[a];l.style.height=(n+2)/12+"em"}this.actionObj.clone.style.height=x(n)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,10)}},i.prototype.viewNavigation=function(e){var t,r=this.parent.element.querySelector("."+$);r&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||E(this.actionObj.clone,"."+ht))&&(r.scrollLeft===0&&Math.round(this.actionObj.X)<=Math.round(r.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?t=this.parent.enableRtl?"Next":"Previous":Math.round(r.scrollLeft)+r.clientWidth===r.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(r.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(t=this.parent.enableRtl?"Previous":"Next"),t&&this.parent.changeDate(this.parent.activeView.getNextPreviousDate(t)))},i.prototype.morePopupEventDragging=function(e){if(!(d(e.target)||e.target&&d(E(e.target,"td")))){var t=P({},this.actionObj.event,null,!0),r=t[this.parent.eventFields.endTime].getTime()-t[this.parent.eventFields.startTime].getTime(),n=E(e.target,"td");if(!(this.parent.currentView==="TimelineYear"&&(!n.classList.contains(_)||n.classList.contains(Pe)))){var s=this.parent.getDateFromElement(n),a=new Date(s.getTime());a.setMilliseconds(r),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(n.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(s.getTime()),this.actionObj.end=new Date(a.getTime()),this.actionObj.clone.style.top=x(n.offsetParent.offsetTop),this.actionObj.clone.style.left=x(n.offsetLeft),this.actionObj.clone.style.width=x(n.offsetWidth);var h=n,l;if(this.parent.activeView.isTimelineView()){var p=E(n,"tr").rowIndex;h=this.parent.element.querySelectorAll(".e-appointment-container").item(p)}l=h.querySelector("."+ae),l||(l=b("div",{className:ae}),h.appendChild(l)),this.appendCloneElement(l)}}},i.prototype.calculateVerticalTime=function(e){var t=this;if(!(d(this.actionObj.target)||this.actionObj.target&&d(E(this.actionObj.target,"tr"))||!d(E(this.actionObj.target,"td"))&&!E(this.actionObj.target,"td").classList.contains(_)&&!E(this.actionObj.target,"td").classList.contains(Ft))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var r=this.parent.element.querySelector("."+$),n=P({},this.actionObj.event,null,!0),s=n[this.parent.eventFields.startTime],a=n[this.parent.eventFields.endTime],h=Ze(a)-Ze(s),l=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;l=l<0?0:l,(this.scrollEdges.top||this.scrollEdges.bottom)&&(l=this.scrollEdges.top?r.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight+window.pageYOffset:r.scrollTop+r.offsetHeight-this.actionObj.clone.offsetHeight+window.pageYOffset+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint),l=Math.round(l/this.actionObj.cellHeight)*this.actionObj.cellHeight,r.scrollTop>0&&l<r.scrollHeight&&(this.actionObj.clone.style.top=x(l)));var p=this.parent.activeViewOptions.timeScale.enable?l/this.actionObj.cellHeight:0,u=this.actionObj.cellHeight/this.actionObj.slotInterval,c=parseInt(this.actionObj.clone.style.top,10)-l,f;if(this.isAllDayDrag)f=this.parent.element.querySelector("."+_t);else{var g=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"));f=g[parseInt(p.toString(),10)]}var v;!d(E(this.actionObj.target,"td"))&&(E(this.actionObj.target,"td").classList.contains(_)||E(this.actionObj.target,"td").classList.contains(Ft))&&(v=E(this.actionObj.target,"td").cellIndex);var m=d(v)?E(this.actionObj.clone,"td").cellIndex:v;if(this.actionObj.index=m,!d(f)){var y=f.children[parseInt(m.toString(),10)];this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.actionObj.groupIndex=parseInt(y.getAttribute("data-group-index"),10));var w,C;if(this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag)(!this.enableCurrentViewDrag||this.multiData.length===0)&&this.appendCloneElement(this.getEventWrapper(m)),w=this.parent.getDateFromElement(y),w.setMinutes(w.getMinutes()+c/u),C=new Date(w.getTime()),this.actionObj.element.classList.contains(Se)?C.setMinutes(C.getMinutes()+this.actionObj.slotInterval):C.setMilliseconds(h);else{w=this.parent.getDateFromElement(y),w.setDate(w.getDate()-this.daysVariation),w.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),C=new Date(w.getTime()),C.setMilliseconds(h),!this.actionObj.element.classList.contains(Se)&&this.actionObj.clone.classList.contains(Se)&&(C=I(O(C),1));var T=this.parent.activeViewOptions.group.byDate||this.parent.virtualScrollModule&&!this.parent.activeViewOptions.timeScale.enable?m:void 0;this.updateAllDayEvents(w,C,T)}this.actionObj.start=new Date(+w),this.actionObj.end=new Date(+C);for(var A=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),L=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone")),k=0,R=L;k<R.length;k++){var N=R[k];pe(N)}if(this.multiData.length>0){if(this.isAllDayTarget&&this.isAllDayDrag&&!d(this.actionObj.isAllDay)&&!this.actionObj.isAllDay){var F=parseInt(E(this.actionObj.target,"td").getAttribute("data-date"),10);this.multiData.forEach(function(Te){if(t.swagData.push(P({},Te,null,!0)),Te[t.parent.eventFields.isAllDay]){Te[t.parent.eventFields.startTime]=new Date(Te[t.parent.eventFields.startTime].getTime()+(F-t.startTime));var Bt=new Date(Te[t.parent.eventFields.startTime]),ni=new Date(Bt.setMinutes(Bt.getMinutes()+t.actionObj.slotInterval));Te[t.parent.eventFields.endTime]=ni,Te[t.parent.eventFields.isAllDay]=!1}}),this.startTime=F}if(this.isAllDayTarget&&this.isAllDayDrag&&!d(this.actionObj.isAllDay)&&this.actionObj.isAllDay&&this.swagData.length>0){this.multiData=this.swagData,this.swagData=[];var j=P({},this.actionObj.event,null,!0);this.startTime=j[this.parent.eventFields.startTime].getTime()}var z=A[this.parent.eventFields.startTime].getTime()-this.startTime;if(this.enableCurrentViewDrag)for(var K=this.getRenderedDates(),V=0;V<this.multiData.length;V++){var ne=P({},this.multiData[parseInt(V.toString(),10)],null,!0),se=new Date(ne[this.parent.eventFields.startTime].getTime()+z),Z=this.parent.getIndexOfDate(K,O(se));if(Z<0){this.isPreventMultiDrag=!0;break}this.isPreventMultiDrag=!1}if(!this.isPreventMultiDrag)for(var J=0;J<this.multiData.length;J++){this.updatedData[parseInt(J.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(J.toString(),10)],z);var Z=this.getDayIndex(this.updatedData[parseInt(J.toString(),10)]);if(Z>=0){var ce=this.updatedData[parseInt(J.toString(),10)][this.parent.eventFields.isAllDay],N=this.getEventWrapper(Z,ce);this.appendCloneElement(N,this.actionObj.cloneElement[parseInt(J.toString(),10)]),this.updateEventHeight(this.updatedData[parseInt(J.toString(),10)],J,Z)}else d(this.actionObj.cloneElement[parseInt(J.toString(),10)].parentNode)||pe(this.actionObj.cloneElement[parseInt(J.toString(),10)])}}else this.updateEventHeight(A);this.updateTimePosition(this.actionObj.start,this.updatedData)}}},i.prototype.splitEvent=function(e){var t=this.parent.eventFields,r=[],n=e[t.startTime],s=e[t.endTime];if(O(new Date(n.getTime()))<O(new Date(s.getTime()))){for(var a=O(new Date(n.getTime())),h=new Date(a.getTime()),l=0;a<new Date(s.getTime());l++){h=new Date(h.setDate(a.getDate()+1));var p=P({},e,null,!0);p[t.startTime]=new Date(a),p[t.endTime]=new Date(h),a=new Date(a.setDate(a.getDate()+1)),r.push(p)}var u=r.length-1;r[0][t.startTime]=n,r[parseInt(u.toString(),10)][t.endTime]=s}else r.push(e);return r},i.prototype.updateMultipleData=function(e,t){var r=P({},e,null,!0);!d(this.actionObj.isAllDay)&&this.parent.activeViewOptions.timeScale.enable&&(this.isAllDayTarget&&r[this.parent.eventFields.isAllDay]||!this.isAllDayTarget&&!r[this.parent.eventFields.isAllDay])&&(r[this.parent.eventFields.isAllDay]=this.actionObj.isAllDay);var n=r[this.parent.eventFields.endTime].getTime()-r[this.parent.eventFields.startTime].getTime();if(r[this.parent.eventFields.isAllDay]){var s=Math.ceil(t/864e5),a=Math.ceil(n/(1e3*3600*24)),h=new Date(r[this.parent.eventFields.startTime]);r[this.parent.eventFields.startTime]=O(new Date(h.setDate(h.getDate()+s))),r[this.parent.eventFields.endTime]=I(r[this.parent.eventFields.startTime],a)}else r[this.parent.eventFields.startTime]=new Date(r[this.parent.eventFields.startTime].getTime()+t),r[this.parent.eventFields.endTime]=new Date(r[this.parent.eventFields.startTime].getTime()+n);return r},i.prototype.getDayIndex=function(e){var t=P({},e,null,!0),r=O(t[this.parent.eventFields.startTime]);if(this.parent.activeViewOptions.timeScale.enable&&!t[this.parent.eventFields.isAllDay]){var n=this.parent.activeView.getStartHour();r.setMilliseconds(n.getTime()-O(n).getTime())}var s=r.getTime(),a="",h=mn;return this.parent.activeViewOptions.timeScale.enable&&t[this.parent.eventFields.isAllDay]?h=ht:h=_,a="."+h+'[data-date="'+s+'"]',this.parent.activeViewOptions.group.resources.length>0&&(a=a+'[data-group-index="'+this.actionObj.groupIndex+'"]'),this.targetTd=this.parent.element.querySelector(a),d(this.targetTd)?-1:this.targetTd.cellIndex},i.prototype.updateEventHeight=function(e,t,r){this.verticalEvent.initializeValues();var n=this.verticalEvent.getStartCount();if(!this.parent.uiStateValues.isGroupAdaptive)for(var s=0;s<this.actionObj.groupIndex;s++)this.verticalEvent.dateRender[parseInt(s.toString(),10)]&&(n=n+this.verticalEvent.dateRender[parseInt(s.toString(),10)].length);var a=this.parent.uiStateValues.isGroupAdaptive?n:this.actionObj.groupIndex,h=!!(this.parent.activeViewOptions.group.byDate&&!d(this.parent.getDateFromElement(this.actionObj.target)));if(h||!this.parent.activeViewOptions.group.byDate)for(var l=-1,p=this.parent.activeViewOptions.group.byDate?this.parent.getIndexOfDate(this.verticalEvent.dateRender[parseInt(a.toString(),10)],O(this.parent.getDateFromElement(d(t)?this.actionObj.target:this.targetTd))):d(t)?this.actionObj.index-n:r-n,u=this.splitEvent(e),c=this.parent.eventBase.isAllDayAppointment(e)||u.length>2||this.parent.eventSettings.spannedEventPlacement!=="TimeSlot"?[e]:u,s=0;s<c.length;s++){if(s>0){var f='.e-day-wrapper[data-date="'+O(c[parseInt(s.toString(),10)][this.parent.eventFields.startTime]).getTime()+'"]';this.parent.activeViewOptions.group.resources.length>0&&(f=f.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var g=this.parent.element.querySelector(f);g?(p=p+1,l=g.cellIndex):p=-1}if(p>=0){var v=this.verticalEvent.isSpannedEvent(c[parseInt(s.toString(),10)],p,a),m=v[this.verticalEvent.fields.startTime],y=v[this.verticalEvent.fields.endTime],w=this.parent.activeViewOptions.timeScale.enable?this.verticalEvent.getHeight(m,y):this.actionObj.element.offsetHeight,C=this.parent.activeViewOptions.timeScale.enable?this.verticalEvent.getTopValue(m):this.actionObj.element.offsetTop;if(d(t))s===0?(this.actionObj.clone.style.top=x(C),this.actionObj.clone.style.height=x(w)):this.renderSpannedEvents(v,l,C,w);else{var T=this.actionObj.cellWidth;if(e[this.parent.eventFields.isAllDay]){C=this.parent.element.querySelector("."+_t).offsetTop,w=this.getAllDayEventHeight();var A=e[this.parent.eventFields.endTime].getTime()-e[this.parent.eventFields.startTime].getTime(),L=Math.ceil(A/(1e3*3600*24));L>=0&&(T=L*this.actionObj.cellWidth)}this.actionObj.cloneElement[parseInt(t.toString(),10)]&&(s===0?(this.actionObj.cloneElement[parseInt(t.toString(),10)].style.top=x(C),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.height=x(w),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.width=x(T),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.left=x(0)):this.renderSpannedEvents(v,l,C,w))}}}},i.prototype.renderSpannedEvents=function(e,t,r,n){var s=e[this.parent.eventFields.startTime].getTime(),a=e[this.parent.eventFields.endTime].getTime();if(s!==a){var h=this.verticalEvent.createAppointmentElement(e,!1,e.isSpanned,this.actionObj.groupIndex);M([h],[it,"e-dynamic-clone"]),he(h,{width:"100%",height:n+"px",top:r+"px",border:"0px"});var l=[].slice.call(this.parent.element.querySelectorAll("."+ae));l[parseInt(t.toString(),10)].appendChild(h)}},i.prototype.getRenderedDates=function(){var e=this,t,r,n=this.parent.activeView.renderDates;if((t=this.parent.eventBase.slots).push.apply(t,this.parent.activeView.renderDates.map(function(a){return+a})),this.parent.activeViewOptions.group.resources.length>0){this.parent.eventBase.slots=[];var s=this.parent.resourceBase.lastResourceLevel.filter(function(a){return a.groupIndex===e.actionObj.groupIndex});n=s[0].renderDates,(r=this.parent.eventBase.slots).push.apply(r,n.map(function(a){return+a}))}return n},i.prototype.updateAllDayEvents=function(e,t,r){this.parent.eventBase.slots=[];var n=this.getUpdatedEvent(e,t,this.actionObj.event),s=this.getRenderedDates(),a=this.parent.eventBase.splitEvent(n,s),h='.e-all-day-cells[data-date="'+a[0][this.parent.eventFields.startTime].getTime()+'"]';this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(h=h.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var l=[].slice.call(this.parent.element.querySelectorAll(h));if(l.length>0||!d(r)){var p=d(r)?l[0].cellIndex:r;this.appendCloneElement(this.getEventWrapper(p)),this.actionObj.clone.style.width=x(a[0].data.count*this.actionObj.cellWidth)}},i.prototype.swapDragging=function(e){if(!this.isPreventMultiDrag){var t=!d(E(this.actionObj.target,"td"))&&E(this.actionObj.target,"td").cellIndex;if(E(this.actionObj.target,"."+we)&&!E(this.actionObj.clone,"."+ht)){M([this.actionObj.clone],Se),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!0;var r=this.getAllDayEventHeight(),n=[].slice.call(this.parent.element.querySelectorAll("."+Ft+":first-child"));if(n[0].offsetHeight<r)for(var s=0,a=n;s<a.length;s++){var h=a[s];h.style.height=(r+2)/12+"em"}he(this.actionObj.clone,{width:x(this.actionObj.cellWidth),height:x(r),top:x(this.parent.element.querySelector("."+_t).offsetTop)})}if(E(this.actionObj.target,"."+_)&&!E(this.actionObj.clone,"."+mn)){te([this.actionObj.clone],Se),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!1;var l=this.actionObj.element.offsetHeight===0?this.actionObj.height:this.actionObj.element.offsetHeight;he(this.actionObj.clone,{left:x(0),height:x(l),width:x(this.actionObj.cellWidth)})}}},i.prototype.calculateVerticalDate=function(e){if(!(d(e.target)||e.target&&d(E(e.target,"tr"))||e.target&&e.target.tagName==="DIV")){var t=P({},this.actionObj.event,null,!0);d(this.parent.eventDragArea)&&this.removeCloneElement();var r=Ze(t[this.parent.eventFields.endTime])-Ze(t[this.parent.eventFields.startTime]),n=E(this.actionObj.target,"td");if(!d(n)){var s=n.parentElement;this.actionObj.index=s.rowIndex*s.children.length+n.cellIndex;var a=[].slice.call(this.parent.element.querySelectorAll("."+_));n=a[this.actionObj.index];var h=this.parent.getDateFromElement(n);if(!d(h)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(n.getAttribute("data-group-index"),10));var l=new Date(h.setDate(h.getDate()-this.daysVariation)),p=new Date(l.getTime()),u=Ze(t[this.parent.eventFields.startTime])-Ze(O(new Date(+t[this.parent.eventFields.startTime])));p.setMilliseconds(u);var c=new Date(p.getTime());c.setMilliseconds(r),this.actionObj.start=new Date(p.getTime()),this.actionObj.end=new Date(c.getTime())}}var f=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);if(d(this.parent.eventDragArea))for(var g=[].slice.call(this.parent.element.querySelectorAll("."+it)),v=0,m=g;v<m.length;v++){var y=m[v];pe(y)}if(this.multiData&&this.multiData.length>0){var w=O(new Date(f[this.parent.eventFields.startTime])),u=w.getTime()-this.startTime;this.parent.currentView==="TimelineYear"&&this.parent.group.resources.length>0&&(u=(w.getFullYear()-new Date(this.startTime).getFullYear())*12,u-=new Date(this.startTime).getMonth(),u+=w.getMonth());for(var C=0;C<this.multiData.length;C++)this.updatedData[parseInt(C.toString(),10)]=this.updateMultipleVerticalDate(this.multiData[parseInt(C.toString(),10)],u),this.parent.currentView==="TimelineYear"?this.dynamicYearlyEventsRendering(this.updatedData[parseInt(C.toString(),10)]):this.dynamicEventsRendering(this.updatedData[parseInt(C.toString(),10)])}else this.parent.currentView==="TimelineYear"?this.dynamicYearlyEventsRendering(f):this.dynamicEventsRendering(f)}},i.prototype.updateMultipleVerticalDate=function(e,t){var r=P({},e,null,!0),n=r[this.parent.eventFields.endTime].getTime()-r[this.parent.eventFields.startTime].getTime(),s=new Date(r[this.parent.eventFields.startTime]);if(this.parent.currentView==="TimelineYear"&&this.parent.group.resources.length>0)r[this.parent.eventFields.startTime]=new Date(s.setMonth(s.getMonth()+t));else{var a=Math.ceil(t/Le);r[this.parent.eventFields.startTime]=new Date(s.setDate(s.getDate()+a))}return r[this.parent.eventFields.endTime]=new Date(r[this.parent.eventFields.startTime].getTime()+n),r},i.prototype.calculateTimelineTime=function(e){var t=P({},this.actionObj.event,null,!0),r=Ze(t[this.parent.eventFields.endTime])-Ze(t[this.parent.eventFields.startTime]),n=this.parent.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);n=Math.round(n/this.actionObj.cellWidth)*this.actionObj.cellWidth;var s;this.parent.enableRtl&&(s=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=x(s)),n=this.getOffsetValue(n,s);var a=this.getColumnIndex(n),h=this.parent.element.querySelector("."+$),l=h.getBoundingClientRect().right,p=this.parent.activeView.isTimelineView()&&!this.parent.enableRtl&&this.actionObj.pageX>this.actionObj.clone.getBoundingClientRect().right&&!this.isMorePopupOpened&&!(this.actionObj.pageX>l),u=this.parent.eventDragArea?h.scrollLeft-h.offsetLeft:0;(this.isCursorAhead||p)&&!this.isStepDragging&&(this.isCursorAhead=!0);var c=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left+u)/this.actionObj.cellWidth);this.parent.enableRtl&&(c=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(e,t,n,c);var f=this.parent.getContentTable().querySelector("tr"),g=this.getCursorCurrentIndex(a,c,f);g=g<0?0:g;var v=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[parseInt(g.toString(),10)].getTime()):this.parent.getDateFromElement(f.children[parseInt(g.toString(),10)]);if(v=this.isAllDayDrag?O(v):v,this.isStepDragging){var m=this.getWidthDiff(f,g);if(m!==0){var y=Math.ceil(m/this.widthPerMinute);if(v.setMinutes(v.getMinutes()+y*this.actionObj.interval),this.isCursorAhead||p)v.setMilliseconds(-r);else{v.setMinutes(v.getMinutes()-this.minDiff);var w=this.actionObj.interval*Ie;y=Math.abs(v.getTime()-this.actionObj.start.getTime())/w;var C=Math.trunc(y);C!==y&&(y=C*w*(v>this.actionObj.start?1:-1),v=new Date(this.actionObj.start.getTime()+y))}}else v=this.actionObj.start}else if((this.isCursorAhead||p)&&!this.isAllDayDrag){var T=this.isTimelineDayProcess||this.isAllDayDrag?ns:this.actionObj.slotInterval;v.setMinutes(v.getMinutes()+T),v.setMilliseconds(-r),v.getTime()===O(v).getTime()&&v.getMinutes()===0&&r===0&&v.setMinutes(-T)}else v.setMinutes(v.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess||this.isAllDayDrag?ns:this.actionObj.slotInterval));if(this.isStepDragging||(v=this.calculateIntervalTime(v)),this.isTimelineDayProcess||this.isAllDayDrag){var A=t[this.parent.eventFields.startTime];v.setHours(A.getHours(),A.getMinutes(),A.getSeconds())}if(this.parent.eventDragArea){var L=this.parent.getDateFromElement(e.target);if(!d(L))if(!this.parent.activeViewOptions.timeScale.enable||this.parent.currentView==="TimelineMonth"){var A=t[this.parent.eventFields.startTime];v=new Date(L.setHours(A.getHours(),A.getMinutes(),A.getSeconds()))}else v=L}var k=new Date(v.getTime());k.setMilliseconds(r);var R=[this.getUpdatedEvent(v,k,this.actionObj.event)];if(this.multiData.length>0){for(var N=R[0][this.parent.eventFields.startTime].getTime()-this.startTime,F=0;F<this.multiData.length;F++)this.updatedData[parseInt(F.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(F.toString(),10)],N);R=this.updatedData}for(var j=0;j<R.length;j++){var z=this.multiData.length>0?this.actionObj.cloneElement[parseInt(j.toString(),10)]:this.actionObj.clone;if(d(this.parent.eventDragArea)){var K=this.timelineEventModule.splitEvent(R[parseInt(j.toString(),10)],this.timelineEventModule.dateRender),V=K[0].data,ne=this.timelineEventModule.getStartTime(K[0],V),se=this.timelineEventModule.getEndTime(K[0],V),Z=this.timelineEventModule.getEventWidth(ne,se,t[this.parent.eventFields.isAllDay],V.count),J=this.parent.getIndexOfDate(this.timelineEventModule.dateRender,O(new Date(ne.getTime())));J=J<0?0:J;var ce=this.timelineEventModule.getPosition(ne,se,t[this.parent.eventFields.isAllDay],J);this.parent.enableRtl?z.style.right=x(ce):z.style.left=x(ce),this.isMorePopupOpened||(z.style.width=x(Z))}this.parent.activeViewOptions.group.resources.length>0&&this.calculateResourceGroupingPosition(e,z),this.actionObj.start=new Date(v.getTime()),this.actionObj.end=new Date(k.getTime()),this.updateTimePosition(this.actionObj.start,this.updatedData)}},i.prototype.getOffsetValue=function(e,t){if(this.scrollEdges.left||this.scrollEdges.right){var r=this.parent.element.querySelector("."+$);this.parent.enableRtl?(t=r.offsetWidth-r.scrollLeft,this.scrollEdges.right?t=t-r.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(t=t+this.widthUptoCursorPoint,t-this.widthUptoCursorPoint>=r.scrollWidth&&(this.actionObj.clone.style.width=x(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),t=r.scrollLeft-r.scrollWidth)),d(this.parent.eventDragArea)&&(this.actionObj.clone.style.left=x(t))):(this.scrollEdges.left?(e=r.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,r.scrollLeft+r.offsetWidth>=r.offsetWidth?r.scrollLeft=r.scrollLeft-1:this.actionObj.clone.offsetLeft===0&&(e=r.scrollLeft)):e=r.scrollLeft+r.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),e=e<0?0:e,d(this.parent.eventDragArea)&&(this.actionObj.clone.style.left=x(e)))}return e},i.prototype.getWidthDiff=function(e,t){var r=this.scrollArgs.element.getBoundingClientRect();if(r.left<=this.actionObj.pageX&&r.right>=this.actionObj.pageX){var n=e.children[parseInt(t.toString(),10)].offsetLeft,s=this.actionObj.pageX-r.left;return this.parent.enableRtl?n+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+s):this.scrollArgs.element.scrollLeft+s-n}return 0},i.prototype.getColumnIndex=function(e){var t=Math.round(e/this.actionObj.cellWidth);return this.isHeaderRows?t:this.getIndex(t)},i.prototype.getCursorCurrentIndex=function(e,t,r){var n=e+t;if(this.isHeaderRows){var s=Math.floor(r.offsetWidth/this.actionObj.cellWidth);return n>s-1?s-1:n}return n>r.children.length-1?r.children.length-1:n},i.prototype.cursorIndex=function(e,t,r,n){var s=E(e.target,".e-work-cells");if(!d(s)&&!this.isMorePopupOpened){var a=this.parent.getDateFromElement(s);if(a=this.isAllDayDrag?O(a):a,this.isHeaderRows){var h=Math.floor(r/this.actionObj.cellWidth);a=new Date(this.timelineEventModule.dateRender[h+n].getTime())}var l=a.getTime()-t[this.parent.eventFields.startTime].getTime();if(this.isTimelineDayProcess||this.isAllDayDrag)this.cursorPointIndex=Math.abs(Math.ceil(l/Le));else{var p=Math.floor(l/Ie/(this.actionObj.slotInterval/this.actionObj.cellWidth));this.cursorPointIndex=Math.floor(p/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex}}else this.cursorPointIndex=0},i.prototype.calculateResourceGroupingPosition=function(e,t){var r=this.parent.element.querySelector("."+$),n=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),s=fo(r.querySelector("table"));s=d(s)?0:s;var a=this.parent.rowAutoHeight?~~(r.querySelector("table").offsetHeight/n.length):this.actionObj.cellHeight,h=Math.floor(Math.floor(this.actionObj.Y+(r.scrollTop-s-(window.scrollY||window.pageYOffset))-vo(r,this.parent.uiStateValues.isTransformed))/a);h=h<0?0:h>n.length-1?n.length-1:h,this.actionObj.index=h;var l=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(h),p=l.querySelector("."+ae);p||(p=b("div",{className:ae}),l.appendChild(p)),this.appendCloneElement(p,t);var u=E(this.actionObj.target,"td");if(this.actionObj.groupIndex=u&&!isNaN(parseInt(u.getAttribute("data-group-index"),10))?parseInt(u.getAttribute("data-group-index"),10):this.actionObj.groupIndex,!!d(this.parent.eventDragArea)){var c=this.parent.getElementHeight(n[parseInt(h.toString(),10)])*h;if(this.parent.rowAutoHeight){var f=this.getCursorElement(e);f&&(c=f.classList.contains(_)?f.offsetTop:f.offsetParent&&f.offsetParent.classList.contains(Oe)?f.offsetParent.offsetTop:c)}t.style.top=x(c)}},i.prototype.appendCloneElement=function(e,t){t===void 0&&(t=null),t=d(t)?this.actionObj.clone:t;var r=document.querySelector(this.parent.eventDragArea);this.parent.eventDragArea&&r?r.appendChild(t):e.appendChild(t)},i.prototype.getEventWrapper=function(e,t){var r;if(d(t)&&(t=this.actionObj.clone.classList.contains(Se)),this.parent.activeViewOptions.timeScale.enable){var n=t?"."+ht:"."+ae;r=this.parent.element.querySelectorAll(n).item(e)}else{var s=this.parent.element.querySelectorAll("."+_).item(e);r=s.querySelector("."+ae),r||(r=b("div",{className:ae}),s.appendChild(r))}return r},i.prototype.getAllDayEventHeight=function(){var e=b("div",{className:Oe});this.parent.element.querySelector("."+ht).appendChild(e);var t=e.offsetHeight;return pe(e),t},i.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=this.actionObj.excludeSelectors.split(","),r=!1,n=0,s=t;n<s.length;n++){var a=s[n];if(e.target.classList.contains(a)){r=!0;break}}return r},i.prototype.getModuleName=function(){return"dragAndDrop"},i}($s),Pi=function(){function o(i){this.previousNextAction="Next",this.parent=i}return o.prototype.isTimelineView=function(){return this.parent.currentView.indexOf("Timeline")!==-1},o.prototype.getContentRows=function(){return[]},o.prototype.refreshHeader=function(){},o.prototype.refreshResourceHeader=function(){var i=this.element.querySelector("."+mi),e=Array.from(i.querySelectorAll("."+go));e.forEach(function(a){var h=Array.from(a.children);h.forEach(function(l){!l.classList.contains(mo)&&!l.classList.contains(yo)&&pe(l)})});var t=this.parent.resourceBase.renderedResources;if(!d(t)&&t.length>0)for(var r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)],s=t[parseInt(r.toString(),10)];this.parent.activeView&&!d(n)&&!d(s)&&parseInt(n.getAttribute("data-group-index"),10)===s.groupIndex&&this.parent.activeView.setResourceHeaderContent(n,s,bo)}this.parent.renderTemplates(),this.parent.notify(rt,{})},o.prototype.getDayName=function(i){return this.parent.getDayNames("abbreviated")[i.getDay()]},o.prototype.getDate=function(i){return this.parent.globalize.formatDate(i,{format:"d",calendar:this.parent.getCalendarMode()})},o.prototype.getTime=function(i){return this.parent.isAdaptive?this.parent.activeViewOptions.timeFormat==="HH:mm"||this.parent.activeViewOptions.timeFormat==="HH.mm"?this.parent.globalize.formatDate(i,{format:"H",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(i,{skeleton:"h",calendar:this.parent.getCalendarMode()}):this.parent.getTimeString(i)},o.prototype.getTimelineDate=function(i){var e=this.parent.globalize.formatDate(i,{skeleton:"MMMd",calendar:this.parent.getCalendarMode()})+", "+this.parent.getDayNames("wide")[i.getDay()];return ue(e,"multiple")},o.prototype.createEventTable=function(i){var e=b("div",{className:Zt});return G(this.getEventRows(i),e),e},o.prototype.getEventRows=function(i){for(var e=[],t,r=0;r<i;r++)t=b("div",{className:Ue}),this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderedResources&&t.setAttribute("data-group-index",this.parent.resourceBase.renderedResources[parseInt(r.toString(),10)].groupIndex.toString()),e.push(t);return e},o.prototype.collapseRows=function(i){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(i.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(i.querySelector("."+Zt)))},o.prototype.createTableLayout=function(i){var e=i||"",t=b("table",{className:Bs+" "+e}),r=b("tbody");return t.appendChild(r),t},o.prototype.setAriaAttributes=function(i){i.setAttribute("role","grid"),this.parent.currentView!=="Year"&&i.setAttribute("id",this.parent.element.id+"_table"),i.setAttribute("aria-label",this.getLabelText(this.parent.currentView))},o.prototype.createColGroup=function(i,e){if(!d(e)){var t=e.length;e[0]&&e[0].colSpan&&(t=e.map(function(s){return s.colSpan}).reduce(function(s,a){return s+a}));for(var r=b("colgroup"),n=0;n<t;n++)r.appendChild(b("col"));ye([r],i)}},o.prototype.getScrollXIndent=function(i){return i.offsetHeight-i.clientHeight>0?Li():0},o.prototype.scrollTopPanel=function(i){this.getDatesHeaderElement().firstElementChild.scrollLeft=i.scrollLeft},o.prototype.scrollHeaderLabels=function(i){for(var e=this.element.querySelector(".e-date-header-wrap table"),t=e.offsetWidth/e.querySelectorAll("colgroup col").length,r=function(f,g){for(var v,m=0,y=0,w=g?-i.scrollLeft:i.scrollLeft,C=0,T=f;C<T.length;C++){var A=T[C];if(y+=parseInt(A.getAttribute("colSpan"),10),y>Math.floor(w/t)){v=A;break}m+=A.offsetWidth}d(v)||(v.children[0].style[g?"right":"left"]=w-m+"px")},n=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"],s=0,a=n;s<a.length;s++){var h=a[s],l=[].slice.call(this.element.querySelectorAll(h));if(l.length>0){for(var p=0,u=l;p<u.length;p++){var c=u[p];c.children[0].style[this.parent.enableRtl?"right":"left"]=""}r(l,this.parent.enableRtl)}}},o.prototype.addAttributes=function(i,e){i.template&&G(i.template,e),i.colSpan&&e.setAttribute("colspan",i.colSpan.toString()),i.className&&M([e],i.className)},o.prototype.getHeaderBarHeight=function(){var i=2;if(this.parent.headerModule&&(i+=Ms(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive){var e=this.parent.element.querySelector("."+Rs);e&&(i+=e.offsetHeight)}return i},o.prototype.renderPanel=function(i){i===wo?ye([this.element],this.parent.element.querySelector("."+Oi)):this.parent.element.querySelector("."+Oi).appendChild(this.element)},o.prototype.setPanel=function(i){this.element=i},o.prototype.getPanel=function(){return this.element},o.prototype.getDatesHeaderElement=function(){return this.element.querySelector("."+ri)},o.prototype.getDateSlots=function(i,e){return[]},o.prototype.generateColumnLevels=function(){return[]},o.prototype.getColumnLevels=function(){return this.colLevels},o.prototype.highlightCurrentTime=function(){},o.prototype.getStartDate=function(){return this.renderDates[0]},o.prototype.getEndDate=function(){return this.renderDates[this.renderDates.length-1]},o.prototype.startDate=function(){return this.renderDates[0]},o.prototype.endDate=function(){return I(this.renderDates[this.renderDates.length-1],1)},o.prototype.getStartHour=function(){var i=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return d(i)&&(i=new Date(2e3,0,0,0)),i},o.prototype.getEndHour=function(){var i=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return d(i)&&(i=new Date(2e3,0,0,0)),i},o.prototype.isCurrentDate=function(i){return i.setHours(0,0,0,0)===new Date(this.parent.currentTimezoneDate).setHours(0,0,0,0)},o.prototype.isCurrentMonth=function(i){return this.parent.activeViewOptions.displayDate||this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeView.getStartDate().getTime()<=this.parent.getCurrentTime().getTime()&&this.parent.activeView.getEndDate().getTime()>=this.parent.getCurrentTime().getTime():i.getFullYear()===this.parent.getCurrentTime().getFullYear()&&i.getMonth()===this.parent.getCurrentTime().getMonth()},o.prototype.isWorkDay=function(i,e){return e===void 0&&(e=this.parent.activeViewOptions.workDays),!d(e)&&e.indexOf(i.getDay())>=0},o.prototype.isWorkHour=function(i,e,t,r){return d(e)||d(t)?!1:(e.setMilliseconds(0),t.setMilliseconds(0),O(i).getTime()!==O(e).getTime()&&(e=new Date(2e3,0,0,e.getHours(),e.getMinutes(),e.getMilliseconds()),t=new Date(2e3,0,0,t.getHours(),t.getMinutes(),t.getMilliseconds())),!(Gt(i)<Gt(e)||Gt(i)>=Gt(t)||!this.isWorkDay(i,r)))},o.prototype.getRenderDates=function(i,e){e===void 0&&(e=this.parent.selectedDate);var t=[];if(this.parent.currentView==="Week"||this.parent.currentView==="TimelineWeek")for(var r=O(e),n=He(r,this.parent.activeViewOptions.firstDayOfWeek),s=0,a=Ce*this.parent.activeViewOptions.interval;s<a;s++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,i))&&t.push(n),n=I(n,1);else if(this.parent.currentView==="WorkWeek"||this.parent.currentView==="TimelineWorkWeek")for(var n=He(O(e),this.parent.activeViewOptions.firstDayOfWeek),s=0,h=Ce*this.parent.activeViewOptions.interval;s<h;s++)this.isWorkDay(n,i)&&t.push(n),n=I(n,1);else{var l=this.parent.currentView==="Agenda"?this.parent.agendaDaysCount:this.parent.activeViewOptions.interval,n=O(e);do(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,i))&&t.push(n),n=I(n,1);while(l!==t.length)}return i||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t},o.prototype.getNextPreviousDate=function(i){if(this.previousNextAction=i,this.parent.currentView==="Day"||this.parent.currentView==="TimelineDay")if(this.parent.activeViewOptions.showWeekend){var e=this.parent.activeViewOptions.interval;return I(this.parent.selectedDate,i==="Next"?e:-e)}else{var t=void 0;if(i==="Next")for(t=I(this.renderDates.slice(-1)[0],1);!this.isWorkDay(t);)t=I(t,1);else{t=I(this.renderDates[0],-1);var r=0;do this.isWorkDay(t)&&(r+=1),this.parent.activeViewOptions.interval!==r&&(t=I(t,-1));while(this.parent.activeViewOptions.interval!==r)}return t}var n=i==="Next"?Ce:-7;return I(this.parent.selectedDate,n*this.parent.activeViewOptions.interval)},o.prototype.formatViewLabel=function(i,e,t){var r={type:"date",skeleton:"full",calendar:this.parent.getCalendarMode()};return this.parent.localeObj.getConstant(i)+" "+this.parent.localeObj.getConstant("start")+" "+this.parent.globalize.formatDate(e,r)+" "+this.parent.localeObj.getConstant("endAt")+" "+this.parent.globalize.formatDate(t,r)},o.prototype.getLabelText=function(i){var e=i.charAt(0).toLowerCase()+i.substring(1);return i==="Year"||i==="TimelineYear"?this.formatViewLabel(e,this.parent.activeView.getStartDate(),this.parent.activeView.getEndDate()):this.renderDates.length>0?this.parent.currentView==="Day"||this.parent.currentView==="TimelineDay"?this.parent.localeObj.getConstant(e)+" of "+ue(this.parent.globalize.formatDate(this.parent.selectedDate,{type:"date",skeleton:"full",calendar:this.parent.getCalendarMode()}),"single"):this.formatViewLabel(e,this.renderDates[0],this.renderDates[this.renderDates.length-1]):""},o.prototype.getDateRangeText=function(i,e){if(i===void 0&&(i=this.renderDates[0]),e===void 0&&(e=this.renderDates),this.parent.isAdaptive){var t=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";return ue(this.parent.globalize.formatDate(this.parent.selectedDate,{format:t,calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(i,e[e.length-1])},o.prototype.formatDateRange=function(i,e){var t=this.parent.globalize,r=this.parent.getCalendarMode();if(i===e&&(e=null),!d(this.parent.activeViewOptions.dateFormat)){var n="";return e?(n=t.formatDate(i,{format:this.parent.activeViewOptions.dateFormat,calendar:r})+" - "+t.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),ue(n,"multiple")):(n=t.formatDate(i,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),ue(n,"multiple"))}var s,a;if(d(this.parent.locale)||this.parent.locale==="en"||this.parent.locale==="en-US"?a=mt("dateFormats.long",So(r)):a=mt("main."+this.parent.locale+".dates.calendars."+r+".dateFormats.long",Co),!e)return ue(t.formatDate(i,{format:a,calendar:r}),"single");var h=a.trim().toLocaleLowerCase();return h.substr(0,1)==="d"?i.getFullYear()===e.getFullYear()?i.getMonth()===e.getMonth()?s=t.formatDate(i,{format:"dd",calendar:r})+" - "+t.formatDate(e,{format:"dd MMMM yyyy",calendar:r}):s=t.formatDate(i,{format:"dd MMM",calendar:r})+" - "+t.formatDate(e,{format:"dd MMM yyyy",calendar:r}):s=t.formatDate(i,{format:"dd MMM yyyy",calendar:r})+" - "+t.formatDate(e,{format:"dd MMM yyyy",calendar:r}):h.substr(0,1)==="m"?i.getFullYear()===e.getFullYear()?i.getMonth()===e.getMonth()?s=t.formatDate(i,{format:"MMMM dd",calendar:r})+" - "+t.formatDate(e,{format:"dd, yyyy",calendar:r}):s=t.formatDate(i,{format:"MMM dd",calendar:r})+" - "+t.formatDate(e,{format:"MMM dd, yyyy",calendar:r}):s=t.formatDate(i,{format:"MMM dd, yyyy",calendar:r})+" - "+t.formatDate(e,{format:"MMM dd, yyyy",calendar:r}):s=t.formatDate(i,{format:a,calendar:r})+" - "+t.formatDate(e,{format:a,calendar:r}),ue(s,"multiple")},o.prototype.getMobileDateElement=function(i,e){var t=b("div",{className:e,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(i,{format:"d",calendar:this.parent.getCalendarMode()})+'</div><div class="e-m-day">'+ue(this.parent.globalize.formatDate(i,{format:"E",calendar:this.parent.getCalendarMode()}),"single")+"</div>"});return t},o.prototype.setResourceHeaderContent=function(i,e,t){if(t===void 0&&(t=Oo),this.parent.activeViewOptions.resourceHeaderTemplate){var r={resource:e.resource,resourceData:e.resourceData},n=this.parent.element.id+"_",s=this.parent.activeViewOptions.resourceHeaderTemplateName,a=n+s+"resourceHeaderTemplate",h=[].slice.call(this.parent.getResourceHeaderTemplate()(r,this.parent,"resourceHeaderTemplate",a,!1,void 0,void 0,this.parent.root));G(h,i)}else{var l=b("div",{className:t});this.parent.sanitize(e.resourceData[e.resource.textField],l),i.appendChild(l)}},o.prototype.renderResourceMobileLayout=function(){this.parent.resourceBase.lastResourceLevel&&this.parent.resourceBase.lastResourceLevel.length<=0||(this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree())},o.prototype.addAutoHeightClass=function(i){!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&M([i],Hs)},o.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll("."+$+" col, ."+we+" col"))},o.prototype.setColWidth=function(i){if(this.isTimelineView()){var e=this.getColElements(),t=this.element.querySelector("."+ve+" tbody"),r=this.parent.getElementWidth(t)/(e.length/2);if(i.offsetHeight!==i.clientHeight){var n=this.parent.element.querySelector("."+Jt);!d(n)&&n.offsetHeight!==i.clientHeight&&he(n,{height:x(i.clientHeight)})}var s="."+Me+",."+Qt+",."+Eo+",."+Do+",."+Ao,a=[].slice.call(this.element.querySelectorAll(s));a.forEach(function(h){var l=d(h.getAttribute("colspan"))?"1":h.getAttribute("colspan"),p=parseInt(l,10);he(h,{width:x(r*p)})})}},o.prototype.resetColWidth=function(){for(var i=this.getColElements(),e=0,t=i;e<t.length;e++){var r=t[e];r.style.width=""}},o.prototype.getContentAreaElement=function(){return this.element.querySelector("."+$)},o.prototype.wireExpandCollapseIconEvents=function(){if(this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>1)for(var i=[].slice.call(this.element.querySelectorAll("."+To)),e=0,t=i;e<t.length;e++){var r=t[e];S.clearEvents(r),S.add(r,"click",this.parent.resourceBase.onTreeIconClick,this.parent.resourceBase)}},o.prototype.scrollToDate=function(i){if(!(["Month","TimelineMonth"].indexOf(this.parent.currentView)===-1||d(i))){var e=this.getContentAreaElement(),t=new Date(O(new Date(+i)).getTime()).getTime(),r=e.querySelector("."+_+'[data-date="'+t+'"]');this.parent.currentView==="Month"&&r&&(e.scrollWidth>e.clientWidth&&(this.parent.enableRtl?e.scrollLeft=-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):e.scrollLeft=r.offsetLeft),e.scrollTop=r.offsetTop),this.parent.currentView==="TimelineMonth"&&r&&(this.parent.enableRtl?e.scrollLeft=-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):e.scrollLeft=r.offsetLeft)}},o.prototype.setPersistence=function(){if(this.parent.enablePersistence){var i=this.element.querySelector(".e-content-wrap");d(i)||(this.parent.scrollLeft=i.scrollLeft,this.parent.scrollTop=i.scrollTop)}},o.prototype.retainScrollPosition=function(){if(this.parent.enablePersistence){var i=this.parent.element.querySelector(".e-content-wrap");!d(i)&&!d(this.parent.scrollLeft)&&!d(this.parent.scrollTop)&&(i.scrollTop=this.parent.scrollTop,i.scrollLeft=this.parent.scrollLeft)}},o.prototype.getViewStartDate=function(){var i=this.renderDates[0];return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(i=this.parent.resourceBase.getResourceRenderDates()[0]),i},o.prototype.getViewEndDate=function(){var i=I(this.renderDates[this.renderDates.length-1],1);return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(i=I(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0],1)),i},o.prototype.getAdjustedDate=function(i){return!this.parent.activeViewOptions.timeScale.enable||this.parent.currentView==="Month"||this.parent.currentView==="TimelineYear"&&this.parent.activeViewOptions.group.resources.length===0?new Date(i.setHours(0,0,0,0)):this.parent.currentView==="TimelineYear"&&this.parent.activeViewOptions.group.resources.length>0?(i.setHours(0,0,0,0),new Date(i.setDate(1))):null},o.prototype.resetColLevels=function(){this.parent.resourceBase.expandedResources=[];for(var i=this.parent.virtualScrollModule.getRenderedCount(),e=this.parent.activeViewOptions.group.byDate?this.colLevels[0]:this.parent.resourceBase.renderedResources,t=0,r=0;r<e.length&&!(t>=i);r++)t+=e[parseInt(r.toString(),10)].colSpan,this.parent.resourceBase.expandedResources.push(e[parseInt(r.toString(),10)]);this.parent.activeViewOptions.group.byDate?(this.colLevels[0]=this.parent.resourceBase.expandedResources,this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources)):(this.colLevels[this.colLevels.length-2]=this.parent.resourceBase.expandedResources,this.parent.resourceBase.renderedResources=this.parent.resourceBase.expandedResources),this.parent.currentView!=="Month"&&(this.colLevels[this.colLevels.length-1]=this.colLevels[this.colLevels.length-1].slice(0,t),this.parent.resourceBase.expandedResources=this.colLevels[this.colLevels.length-1])},o.prototype.getGroupIndices=function(i){var e=[];return this.parent.virtualScrollModule&&this.parent.activeViewOptions.group.resources.length>0&&(i||this.parent.virtualScrollModule.existingDataCollection.length>0)&&!this.parent.uiStateValues.isGroupAdaptive&&(i=d(i)?this.parent.virtualScrollModule.existingDataCollection:i,e=i.map(function(t){return t.groupIndex})),e},o.prototype.destroy=function(){this.element&&this.element.parentNode&&pe(this.element),this.element=null,this.renderDates=null,this.colLevels=null},o}(),$l=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Vi=function(o){$l(i,o);function i(e){var t=o.call(this,e)||this;return t.viewClass="e-day-view",t.isInverseTableSelect=!0,t.baseCssClass="e-vertical-view",t.appointment=null,t}return i.prototype.getModuleName=function(){return"verticalView"},i.prototype.addEventListener=function(){this.parent.on(nt,this.scrollUiUpdate,this),this.parent.on(st,this.renderEvents,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(nt,this.scrollUiUpdate),this.parent.off(st,this.renderEvents))},i.prototype.renderEvents=function(){this.appointment=this.parent.activeViewOptions.timeScale.enable?new ks(this.parent):new Mi(this.parent),this.appointment.renderAppointments(),this.parent.notify(at,{})},i.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.notify(_r,e),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,!d(this.parent.quickPopup)&&!this.parent.uiStateValues.isTapHold&&this.parent.quickPopup.quickPopupHide(),this.setPersistence()},i.prototype.onAdaptiveMove=function(e){this.parent.uiStateValues.action&&e.preventDefault()},i.prototype.onAdaptiveScroll=function(e){this.parent&&!this.parent.isDestroyed&&(this.parent.removeNewEventElement(),this.parent.uiStateValues.top=e.target.scrollTop)},i.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();d(t)||(t.scrollTop=e.scrollTop)},i.prototype.scrollUiUpdate=function(e){if(this.parent){var t=this.parent.element.querySelector("."+we),r=this.getHeaderBarHeight(),n=this.getLeftPanelElement(),s=this.getScrollableElement(),a=this.getDatesHeaderElement(),h=this.parent.element.offsetHeight-r-a.offsetHeight;this.setContentHeight(s,n,h),this.setColWidth(s);var l=Li();a.firstElementChild.style[e.cssProperties.rtlBorder]="",a.style[e.cssProperties.rtlPadding]="";var p=this.parent.enableAllDayScroll?!(s.offsetWidth-s.clientWidth<=t.offsetWidth-t.clientWidth&&t.classList.contains("e-all-day-scroll")):!0;s.offsetWidth-s.clientWidth>0&&p?(a.firstElementChild.style[e.cssProperties.border]=l>0?"1px":"0px",a.style[e.cssProperties.padding]=l>0?l-1+"px":"0px"):(a.firstElementChild.style[e.cssProperties.border]="",a.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.currentView.indexOf("Timeline")>-1&&(s.scrollTop=this.parent.uiStateValues.top),this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(n&&(n.scrollTop=this.parent.uiStateValues.top),s.scrollTop=this.parent.uiStateValues.top,s.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime(),this.retainScrollPosition(),!d(n)&&!d(s)&&n.scrollTop!==s.scrollTop&&(n.scrollTop=s.scrollTop)}},i.prototype.setContentHeight=function(e,t,r){this.parent.isAdaptive&&!this.isTimelineView()?e.style.height=this.parent.height==="auto"?"auto":x(r):(d(t)||(t.style.height=this.parent.height==="auto"?"auto":x(r-this.getScrollXIndent(e))),e.style.height=this.parent.height==="auto"?"auto":x(r))},i.prototype.scrollToWorkHour=function(){if(this.parent.workHours.highlight){var e=this.element.querySelector("."+yn);e&&(this.getScrollableElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},i.prototype.scrollToHour=function(e,t){var r=this.parent.getStartEndTime(e);if(!d(t)){var n=this.element.querySelector("."+Me+'[data-date="'+new Date(O(t)).getTime()+'"]');if(n)if(this.parent.enableRtl){var s=this.element.querySelector("."+ve);this.getScrollableElement().scrollLeft=-(s.offsetWidth-n.offsetLeft-n.offsetWidth)}else this.getScrollableElement().scrollLeft=n.offsetLeft}d(r)||(this.getScrollableElement().scrollTop=this.getTopFromDateTime(r))},i.prototype.scrollToDate=function(e){this.scrollToHour(null,e)},i.prototype.generateColumnLevels=function(){var e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=[];if(this.parent.activeViewOptions.group.resources.length>0){if(t=this.parent.resourceBase.generateResourceLevels(e),this.parent.activeViewOptions.group.hideNonWorkingDays)for(;t[0].length===0;)this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(this.previousNextAction)},!0),this.parent.activeView.getRenderDates(),this.parent.headerModule&&(this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.headerModule.updateDateRange()),e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=this.parent.resourceBase.generateResourceLevels(e);if(this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],n=r.resourceData[r.resource.startHourField],s=r.resourceData[r.resource.endHourField],a=this.getDateSlots(r.renderDates,r.workDays,n,s);t=[a]}}else t.push(e);return this.colLevels=t,t},i.prototype.getDateSlots=function(e,t,r,n){r===void 0&&(r=this.parent.workHours.start),n===void 0&&(n=this.parent.workHours.end);for(var s=[],a=this.parent.getStartEndTime(r),h=this.parent.getStartEndTime(n),l=0,p=e;l<p.length;l++){var u=p[l],c=[Me];this.isCurrentDate(u)&&c.push(Fi),s.push({date:u,type:"dateHeader",className:c,colSpan:1,workDays:t,startHour:new Date(+a),endHour:new Date(+h)})}return s},i.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},i.prototype.highlightCurrentTime=function(){var e=this;if(!(this.parent.activeViewOptions.headerRows.length>0&&this.parent.activeViewOptions.headerRows.slice(-1)[0].option!=="Hour")){var t=this.parent.getCurrentTime();if(this.parent.showTimeIndicator&&this.isWorkHourRange(t)){var r=this.getCurrentTimeIndicatorIndex();if(r.length>0&&!d(this.element.querySelector("."+_))){if(this.changeCurrentTimePosition(),d(this.currentTimeIndicatorTimer)){var n=Ie-(t.getSeconds()*1e3+t.getMilliseconds());n<=Ie-1e3&&window.setTimeout(function(){d(e.currentTimeIndicatorTimer)||(e.clearCurrentTimeIndicatorTimer(),e.changeCurrentTimePosition(),e.updateCurrentTimeIndicatorTimer())},n),this.updateCurrentTimeIndicatorTimer()}}else this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()}},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[];if(!d(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=0,r=O(this.parent.getCurrentTime());if(this.parent.virtualScrollModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.byDate)for(var n=0,s=this.parent.resourceBase.expandedResources;n<s.length;n++){var a=s[n];O(a.date).getTime()===r.getTime()&&e.push(t),t+=1}else for(var h=0,l=this.parent.resourceBase.renderedResources;h<l.length;h++){var a=l[h],p=this.parent.getIndexOfDate(a.renderDates,r);if(p>=0){var u=this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*p+t:t+p;e.push(u)}t+=this.parent.activeViewOptions.group.byDate?1:a.renderDates.length}}else{var c=this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates,p=this.parent.getIndexOfDate(c,O(this.parent.getCurrentTime()));p>=0&&e.push(p)}return e},i.prototype.clearCurrentTimeIndicatorTimer=function(){d(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())},i.prototype.updateCurrentTimeIndicatorTimer=function(){var e=this;this.currentTimeIndicatorTimer=window.setInterval(function(){e.changeCurrentTimePosition()},Ie)},i.prototype.removeCurrentTimeIndicatorElements=function(){for(var e="."+bn+",."+Ei+",."+kr,t=[].slice.call(this.element.querySelectorAll(e)),r=0,n=t;r<n.length;r++){var s=n[r];pe(s)}},i.prototype.changeCurrentTimePosition=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],r=this.getTopFromDateTime(this.parent.getCurrentTime()),n=x(r),s=Math.floor(r/t.cells[0].offsetHeight),a=this.getLeftPanelElement(),h=[].slice.call(a.querySelectorAll("tr"));if(!(d(s)||isNaN(s)||s===h.length)){for(var l=[].slice.call(this.element.querySelectorAll("."+Io)),p=0,u=e[0];p<u;p++)l[parseInt(p.toString(),10)].appendChild(b("div",{className:bn,styles:"top:"+n}));for(var c=0,f=e;c<f.length;c++){var g=f[c];l.length>g&&l[parseInt(g.toString(),10)].appendChild(b("div",{className:Ei,styles:"top:"+n}))}var v=b("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:kr,styles:"top:"+n});s<=h.length&&(te(a.querySelectorAll("."+$i),$i),h[parseInt(s.toString(),10)]&&M([h[parseInt(s.toString(),10)].lastElementChild],$i),ye([v],a),v.style.top=x(v.offsetTop-v.offsetHeight/2))}}},i.prototype.getTopFromDateTime=function(e){var t=this.getStartEndHours(this.parent.activeViewOptions.startHour),r=this.getStartEndHours(this.parent.activeViewOptions.endHour),n=(e.getHours()-t.getHours())*60+(e.getMinutes()-t.getMinutes()),s=qr(O(new Date(e.getTime())),t,r),a=(s.endHour.getTime()-s.startHour.getTime())/Ie,h=this.parent.activeViewOptions.timeScale.interval,l=0;return t.getHours()===0&&t.getMinutes()===0&&r.getHours()===0&&r.getMinutes()===0?l=h:l=this.parent.activeViewOptions.timeScale.slotCount!==1?h:h>a?a:h,n*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/l},i.prototype.getWorkCellHeight=function(){return parseFloat(this.parent.getElementHeight(this.element.querySelector("."+_)).toFixed(2))},i.prototype.getTdContent=function(e,t,r){var n,s=b("div"),a="",h=this.parent.element.id+"_";switch(t){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){a="dateHeaderTemplate";var l={date:e,type:t},p=this.parent.activeViewOptions.dateHeaderTemplateName;n=[].slice.call(this.parent.getDateHeaderTemplate()(l,this.parent,a,h+p+a,!1,void 0,void 0,this.parent.root))}else s.innerHTML=this.parent.activeView.isTimelineView()?'<span class="e-header-date e-navigate">'+this.getTimelineDate(e)+"</span>":'<div class="e-header-day">'+ue(this.getDayName(e),"single")+"</div>"+('<div class="e-header-date e-navigate" role="link">'+this.getDate(e)+"</div>"),n=[].slice.call(s.childNodes);break;case"majorSlot":if(this.parent.activeViewOptions.timeScale.majorSlotTemplate){a="majorSlotTemplate";var l={date:e,type:t};n=[].slice.call(this.parent.getMajorSlotTemplate()(l,this.parent,a,h+a,!1,void 0,void 0,this.parent.root))}else s.innerHTML="<span>"+this.getTime(e)+"</span>",n=[].slice.call(s.childNodes);break;case"minorSlot":if(this.parent.activeViewOptions.timeScale.minorSlotTemplate){a="minorSlotTemplate";var l={date:e,type:t};n=[].slice.call(this.parent.getMinorSlotTemplate()(l,this.parent,a,h+a,!1,void 0,void 0,this.parent.root))}else n=[].slice.call(s.childNodes);break;case"alldayCells":if(this.parent.activeViewOptions.cellTemplate){var p=this.parent.activeViewOptions.cellTemplateName;a="cellTemplate";var l={date:e,type:t,groupIndex:r};n=[].slice.call(this.parent.getCellTemplate()(l,this.parent,a,h+p+a,!1,void 0,void 0,this.parent.root))}break}return n},i.prototype.refreshHeader=function(){pe(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(rt,{});var e=this.element.querySelector("."+we);e&&(e.scrollLeft=this.parent.uiStateValues.left)},i.prototype.renderLayout=function(e){this.setPanel(b("div",{className:ki}));var t=[this.baseCssClass,this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||M([this.element],[xo,this.viewClass]),this.parent.activeViewOptions.allowVirtualScrolling&&!this.parent.uiStateValues.isGroupAdaptive&&t.push(Yr),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&t.push(Ws),this.renderPanel(e),M([this.element],t),this.element.appendChild(this.createTableLayout(Bi)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+Gr)&&this.renderResourceMobileLayout(),this.parent.notify(rt,{})},i.prototype.renderHeader=function(){var e=b("tr"),t=b("td");if(t.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){var r=b("td",{className:Ps});r.appendChild(this.renderLeftIndent()),e.appendChild(r)}e.appendChild(t),ye([e],this.element.querySelector("tbody"))},i.prototype.renderContent=function(){this.parent.activeViewOptions.group.resources.length>0&&(this.parent.resourceBase.renderedResources=P([],this.parent.resourceBase.lastResourceLevel,null,!0));var e=b("tr"),t=b("td");if(this.parent.isAdaptive){t.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");var r=b("div",{className:Br});this.parent.activeViewOptions.timeScale.enable&&r.appendChild(this.renderTimeCells()),r.appendChild(this.renderContentArea()),t.appendChild(r),S.add(r,"scroll",this.onAdaptiveScroll,this),S.add(r,Y.touchMoveEvent,this.onAdaptiveMove,this),e.appendChild(t)}else{var n=this.colLevels.slice(0);this.parent.virtualScrollModule&&this.resetColLevels();var s=this.renderContentArea();if(t.appendChild(s),this.parent.activeViewOptions.timeScale.enable){var a=b("td");a.appendChild(this.renderTimeCells()),e.appendChild(a)}e.appendChild(t),this.parent.virtualScrollModule&&(this.colLevels=n,this.parent.virtualScrollModule.renderVirtualTrack(s))}this.element.querySelector("tbody").appendChild(e)},i.prototype.renderLeftIndent=function(){for(var e=b("div",{className:Rr}),t=this.createTableLayout(),r=b("tr"),n=this.colLevels.length,s,a=0;a<n;a++){var h=r.cloneNode(),l={className:[this.colLevels[parseInt(a.toString(),10)][0]&&this.colLevels[parseInt(a.toString(),10)][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&l.className.indexOf(Me)!==-1){l.className.push(Vs);var p=this.parent.getWeekNumberContent(this.renderDates);l.template=[b("span",{innerHTML:""+p,attrs:{title:this.parent.localeObj.getConstant("week")+" "+p}})]}s=this.createTd(l),this.parent.renderHeaderIndentTemplate(l,s),h.appendChild(s),t.querySelector("tbody").appendChild(h)}var u=r.cloneNode(),c=b("div",{attrs:{tabindex:"0",role:"button",title:this.parent.localeObj.getConstant("expandAllDaySection"),"aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("expandAllDaySection")},className:Mo+" "+Lo+" "+Hr+" "+Fr}),f={className:[Ft],type:"emptyCells"};return s=this.createTd(f),s.appendChild(c),this.parent.renderHeaderIndentTemplate(f,s),u.appendChild(s),t.querySelector("tbody").appendChild(u),e.appendChild(t),e},i.prototype.renderDatesHeader=function(){var e=b("div",{className:ri}),t=b("div",{className:we});e.appendChild(t);for(var r=this.createTableLayout(),n=b("tr",{className:Fo}),s=this.colLevels.length,a=this.colLevels[s-1],h=0;h<s;h++){for(var l=n.cloneNode(),p=this.colLevels[parseInt(h.toString(),10)],u=0;u<p.length;u++)l.appendChild(this.createTd(p[parseInt(u.toString(),10)]));r.querySelector("tbody").appendChild(l)}return this.createAllDayRow(r,a),this.createColGroup(r,a),t.appendChild(r),e},i.prototype.createAllDayRow=function(e,t){for(var r=b("tr",{className:_t}),n=0;n<t.length;n++){var s=P({},t[parseInt(n.toString(),10)]);s.className=[Ft],s.type="alldayCells";var a=this.createTd(s);a.setAttribute("data-date",s.date.getTime().toString()),d(s.groupIndex)?this.parent.uiStateValues.isGroupAdaptive&&a.setAttribute("data-group-index",""+this.parent.uiStateValues.groupIndex):a.setAttribute("data-group-index",""+s.groupIndex),this.wireCellEvents(a),r.appendChild(a)}e.querySelector("tbody").appendChild(r);var h=b("thead");h.appendChild(this.parent.eventBase.createEventWrapper("allDay")),ye([h],e)},i.prototype.createTd=function(e){var t=b("td");if(this.addAttributes(e,t),e.date&&e.type){var r=this.getTdContent(e.date,e.type,e.groupIndex);r&&r.length&&G(r,t)}this.parent.isMinMaxDate(O(new Date(""+e.date)))||M([t],Xe),e.type==="resourceHeader"&&this.setResourceHeaderContent(t,e),e.type==="dateHeader"&&e.className.indexOf(Me)>=0&&(t.setAttribute("data-date",e.date.getTime().toString()),d(e.groupIndex)||t.setAttribute("data-group-index",""+e.groupIndex),this.wireMouseEvents(t));var n={elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(de,n),t},i.prototype.wireCellEvents=function(e){S.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)},i.prototype.wireMouseEvents=function(e){S.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||S.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i.prototype.renderTimeCells=function(){var e=this,t=b("div",{className:Mr}),r=this.createTableLayout(),n=b("tr"),s=function(a){a.type=a.first?"majorSlot":"minorSlot",a.className=a.last?[js,Qt]:[Qt];var h=n.cloneNode(),l={date:a.date,type:a.type,className:a.className};return h.appendChild(e.createTd(l)),r.querySelector("tbody").appendChild(h),a};return this.getTimeSlotRows(s),t.appendChild(r),t},i.prototype.renderContentArea=function(){var e=b("div",{className:$}),t=this.createTableLayout(ve);return this.setAriaAttributes(t),this.addAutoHeightClass(t),this.renderContentTable(t),this.createColGroup(t,this.colLevels.slice(-1)[0]),e.appendChild(t),this.wireCellEvents(t.querySelector("tbody")),S.add(e,"scroll",this.onContentScroll,this),S.add(e,Y.touchMoveEvent,this.onAdaptiveMove,this),e},i.prototype.renderContentTable=function(e){var t=e.querySelector("tbody");G(this.getContentRows(),t),this.renderContentTableHeader(e)},i.prototype.getContentRows=function(){var e=this,t=[],r=b("tr"),n=b("td"),s=this.getGroupIndices(),a=function(h){for(var l=r.cloneNode(),p=0,u=e.colLevels[e.colLevels.length-1];p<u.length;p++){var c=u[p],f=!0;if(e.parent.virtualScrollModule&&e.parent.activeViewOptions.group.resources.length>0&&s.indexOf(c.groupIndex)>-1&&(f=!1),f){var g=e.createContentTd(c,h,n);l.appendChild(g)}}return t.push(l),h};return this.getTimeSlotRows(a),t},i.prototype.createContentTd=function(e,t,r){var n=r.cloneNode();e.colSpan&&n.setAttribute("colspan",e.colSpan.toString());var s=this.getContentTdClass(t),a=O(e.date);this.parent.isMinMaxDate(a)||s.push(Xe),a=new Date(a.setHours(t.date.getHours(),t.date.getMinutes(),t.date.getSeconds(),t.date.getMilliseconds()));var h="workCells";if(e.className.indexOf(Di)!==-1&&(s.push(Ai),h="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(a,e.startHour,e.endHour,e.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(a,e.workDays))&&s.push(yn),M([n],s),this.parent.activeViewOptions.cellTemplate){var l={date:a,type:h,groupIndex:e.groupIndex},p=this.parent.element.id+"_",u=this.parent.activeViewOptions.cellTemplateName,c=p+u+"cellTemplate",f=[].slice.call(this.parent.getCellTemplate()(l,this.parent,"cellTemplate",c,!1,void 0,void 0,this.parent.root));G(f,n)}n.setAttribute("data-date",a.getTime().toString());var g="full";if(this.parent.activeViewOptions.timeScale.enable){var m=this.parent.globalize.formatDate(a,{type:"dateTime",skeleton:g,calendar:this.parent.getCalendarMode()}),y=this.parent.globalize.formatDate(this.getEndDateFromStartDate(a),{type:"dateTime",skeleton:g,calendar:this.parent.getCalendarMode()});n.setAttribute("aria-label",m+" "+this.parent.localeObj.getConstant("endAt")+" "+y)}else{var v=this.parent.globalize.formatDate(e.date,{skeleton:g,calendar:this.parent.getCalendarMode()});n.setAttribute("aria-label",v)}if(!d(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var w=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;n.setAttribute("data-group-index",""+w)}var C={elementType:h,element:n,date:a,groupIndex:e.groupIndex};return this.parent.trigger(de,C),n},i.prototype.getContentTdClass=function(e){return e.last?[_]:[_,Ns]},i.prototype.renderContentTableHeader=function(e){var t=b("thead");t.appendChild(this.parent.eventBase.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&t.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator")),ye([t],e)},i.prototype.getScrollableElement=function(){return this.parent.isAdaptive&&!this.isTimelineView()?this.element.querySelector("."+Br):this.getContentAreaElement()},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+Mr)},i.prototype.getEndDateFromStartDate=function(e){var t=this.parent.activeViewOptions.timeScale.interval*Ie,r=t/this.parent.activeViewOptions.timeScale.slotCount,n=new Date(e.getTime());return n.setMilliseconds(n.getMilliseconds()+r),n},i.prototype.getStartEndHours=function(e){if(!d(e)&&e!==""){var t=new Date(2e3,0,0,0),r=e.split(":");return r.length===2&&t.setHours(parseInt(r[0],10),parseInt(r[1],10),0),t}return new Date(2e3,0,0,0)},i.prototype.getTimeSlotRows=function(e){var t=[],r=this.getStartEndHours(this.parent.activeViewOptions.startHour),n=this.getStartEndHours(this.parent.activeViewOptions.endHour),s=this.parent.activeViewOptions.timeScale.interval*Ie,a=s/this.parent.activeViewOptions.timeScale.slotCount,h=Math.round(Le/a),l=r.getTime(),p=n.getTime();if(l!==p){var u=r.getTimezoneOffset()!==n.getTimezoneOffset()?p-l-36e5:p-l;h=Math.round(u/a)}this.parent.activeViewOptions.timeScale.enable||(h=1);for(var c=this.parent.getStartEndTime(this.parent.workHours.start),f=this.parent.getStartEndTime(this.parent.workHours.end),g=0;g<h;g++){var v=new Date(l+a*g);if(ko(v)||new Date(l).getTimezoneOffset()!==v.getTimezoneOffset()){var m=new Date(l).getTimezoneOffset()-v.getTimezoneOffset();v=new Date(v.getTime()-1e3*60*m)}var y=g%(s/a),w={date:new Date(""+v),startHour:c,endHour:f,first:y===0,middle:y<this.parent.activeViewOptions.timeScale.slotCount-1,last:y===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};e&&e(w),t.push(w)}return t},i.prototype.getAdjustedDate=function(e){if(this.parent.activeViewOptions.timeScale.enable){for(var t=this.getTimeSlotRows(),r=new Date(new Date(t[0].date.getTime()).setHours(e.getHours(),e.getMinutes(),e.getMilliseconds())),n=0;n<t.length;n++)if(t[parseInt(n.toString(),10)].date.getTime()>r.getTime())return e.setHours(t[n-1].date.getHours(),t[n-1].date.getMinutes(),t[n-1].date.getMilliseconds()),new Date(e)}else return new Date(e.setHours(0,0,0,0));return null},i.prototype.destroy=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)&&(this.clearCurrentTimeIndicatorTimer(),this.element)){this.appointment&&(this.appointment.destroy(),this.appointment=null);var e=this.getContentAreaElement();e&&(S.remove(e,"scroll",this.onContentScroll),S.remove(e,Y.touchMoveEvent,this.onAdaptiveMove)),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),o.prototype.destroy.call(this)}},i}(Pi),Xl=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zs=function(o){Xl(i,o);function i(e){var t=o.call(this,e)||this;return t.viewClass="e-day-view",t}return i.prototype.getModuleName=function(){return"day"},i}(Vi),Zl=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ks=function(o){Zl(i,o);function i(e){var t=o.call(this,e)||this;return t.viewClass="e-week-view",t}return i.prototype.startDate=function(){return this.getViewStartDate()},i.prototype.endDate=function(){return this.getViewEndDate()},i.prototype.getModuleName=function(){return"week"},i}(Vi),Kl=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Js=function(o){Kl(i,o);function i(e){var t=o.call(this,e)||this;return t.viewClass="e-work-week-view",t}return i.prototype.startDate=function(){return this.getViewStartDate()},i.prototype.endDate=function(){return this.getViewEndDate()},i.prototype.getModuleName=function(){return"workWeek"},i}(Vi),Jl=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ni=function(o){Jl(i,o);function i(e){var t=o.call(this,e)||this;return t.dayNameFormat="wide",t.viewClass="e-month-view",t.isInverseTableSelect=!1,t.monthEvent=null,t.monthDates={},t}return i.prototype.addEventListener=function(){this.parent.on(nt,this.onScrollUIUpdate,this),this.parent.on(st,this.onDataReady,this),this.parent.on(Pr,this.onCellClick,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(nt,this.onScrollUIUpdate),this.parent.off(st,this.onDataReady),this.parent.off(Pr,this.onCellClick))},i.prototype.onDataReady=function(e){this.monthEvent=new Mi(this.parent),this.monthEvent.renderAppointments(),this.parent.notify(at,{})},i.prototype.onCellClick=function(e){},i.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.notify(_r,e),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.uiStateValues.top=e.target.scrollTop,this.parent.uiStateValues.left=e.target.scrollLeft,this.setPersistence()},i.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+wn)},i.prototype.onScrollUIUpdate=function(e){var t=this.getHeaderBarHeight(),r=this.getDatesHeaderElement(),n=this.getContentAreaElement(),s=this.parent.element.offsetHeight-t-r.offsetHeight,a=this.getLeftPanelElement();this.parent.height!=="auto"&&this.setContentHeight(n,a,s);var h=Li();if(r.firstElementChild.style[e.cssProperties.rtlBorder]="",r.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(r.firstElementChild.style[e.cssProperties.border]=h>0?"1px":"0px",r.style[e.cssProperties.padding]=h>0?h-1+"px":"0px"):(r.firstElementChild.style[e.cssProperties.border]="",r.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition||!e.isPreventScrollUpdate&&this.parent.currentView==="TimelineMonth"){var l=this.parent.currentView==="TimelineMonth"?this.parent.uiStateValues.top:e.scrollPosition.top;a&&(a.scrollTop=l),n.scrollTop=l,this.parent.uiStateValues.isInitial?(this.scrollToSelectedDate(),this.parent.uiStateValues.isInitial=!1):n.scrollLeft=this.parent.currentView==="TimelineMonth"?this.parent.uiStateValues.left:e.scrollPosition.left}this.retainScrollPosition()},i.prototype.scrollToSelectedDate=function(){var e=this.element.querySelector("."+Me+'[data-date="'+this.parent.selectedDate.getTime().toString()+'"]'),t=this.getContentAreaElement();d(e)?t.scrollLeft=0:t.scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-e.offsetLeft-e.offsetWidth):e.offsetLeft,t.scrollLeft===0&&this.parent.uiStateValues.isInitial&&(this.parent.uiStateValues.left=0)},i.prototype.setContentHeight=function(e,t,r){e.style.height="auto",this.parent.currentView==="Month"&&(e.style.height=x(r)),t&&(this.parent.currentView==="MonthAgenda"&&(r=this.parent.activeViewOptions.interval>1?this.getContentAreaElement().firstElementChild.offsetHeight:this.element.querySelector("."+ve).offsetHeight),t.style.height="auto",t.style.height=x(r-this.getScrollXIndent(e)))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),this.parent.currentView==="MonthAgenda"&&(e=[t]),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],n=this.getDateSlots(r.renderDates,r.workDays);if(this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.group.hideNonWorkingDays){var s=n.findIndex(function(a,h){return h!==0&&a.date.getDay()===n[0].date.getDay()});n=s>-1?n.slice(0,s):n}e=[n]}}else e.push(t);return this.colLevels=e,e},i.prototype.getDateSlots=function(e,t){for(var r=this.parent.activeViewOptions.showWeekend?Ce:t.length,n=[],s=this.isCurrentMonth(this.parent.selectedDate),a=0;a<r;a++){var h=[Me],l=e.slice(0,r).map(function(p){return p.getDay()});s&&l.indexOf(this.parent.currentTimezoneDate.getDay())===a&&h.push(Fi),n.push({date:e[parseInt(a.toString(),10)],type:"monthDay",className:h,colSpan:1,workDays:t})}return n},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"},i.prototype.renderLayout=function(e){this.dayNameFormat=this.getDayNameFormat(),this.setPanel(b("div",{className:ki}));var t=[this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&(t.push("e-by-date"),this.parent.currentView!=="Month"&&(this.parent.activeViewOptions.group.hideNonWorkingDays=!1)),this.parent.activeViewOptions.allowVirtualScrolling&&!this.parent.uiStateValues.isGroupAdaptive&&t.push(Yr),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&t.push(Ws),M([this.element],t),this.renderPanel(e),this.element.appendChild(this.createTableLayout(Bi)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();var r=this.parent.currentView==="MonthAgenda"?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!r.querySelector("."+Gr)&&this.renderResourceMobileLayout(),this.parent.notify(rt,{}),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)},i.prototype.refreshHeader=function(){pe(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(rt,{});var e=this.element.querySelector("."+we),t=this.element.querySelector("."+$);e&&(e.scrollLeft=this.parent.uiStateValues.left),t&&(t.scrollLeft=this.parent.uiStateValues.left)},i.prototype.wireCellEvents=function(e){S.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),S.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||S.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i.prototype.renderHeader=function(){var e=b("tr");this.renderLeftIndent(e);var t=b("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),ye([e],this.element.querySelector("tbody"))},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.showWeekNumber&&e.appendChild(b("td",{className:"e-left-indent"}))},i.prototype.renderContent=function(){this.parent.activeViewOptions.group.resources.length>0&&(this.parent.resourceBase.renderedResources=P([],this.parent.resourceBase.lastResourceLevel,null,!0));var e=b("tr");this.parent.activeViewOptions.showWeekNumber&&e.appendChild(this.renderWeekNumberContent());var t=b("td"),r=this.colLevels.slice(0);this.parent.virtualScrollModule&&this.resetColLevels();var n=b("div",{className:$}),s=this.renderContentArea();if(this.parent.currentView==="Month")n.appendChild(s);else{var a=b("div",{className:Oi});a.appendChild(s),n.appendChild(a)}S.add(n,"scroll",this.onContentScroll,this),t.appendChild(n),e.appendChild(t),this.parent.virtualScrollModule&&(this.colLevels=r,this.parent.virtualScrollModule.renderVirtualTrack(n)),this.element.querySelector("tbody").appendChild(e),this.renderAppointmentContainer()},i.prototype.renderWeekNumberContent=function(){var e=this.renderDates.map(function(u){return new Date(+u)}),t=b("td"),r=b("div",{className:wn});t.appendChild(r);var n=this.createTableLayout();r.appendChild(n);for(var s=this.parent.activeViewOptions.showWeekend?Ce:this.parent.activeViewOptions.workDays.length,a=0,h=this.renderDates.length/s;a<h;a++){var l=e.splice(0,s),p=this.parent.getWeekNumberContent(l);n.querySelector("tbody").appendChild(this.createWeekNumberElement(p))}return t},i.prototype.renderAppointmentContainer=function(){},i.prototype.renderDatesHeader=function(){var e=b("div",{className:ri}),t=b("div",{className:we});e.appendChild(t);var r=this.createTableLayout();if(this.parent.currentView==="Month"){var n=b("thead");n.appendChild(b("tr")),ye([n],r)}this.createColGroup(r,this.colLevels[this.colLevels.length-1]);for(var s=b("tr"),a=0;a<this.colLevels.length;a++){for(var h=this.colLevels[parseInt(a.toString(),10)],l=s.cloneNode(),p=0;p<h.length;p++){var u=h[parseInt(p.toString(),10)];l.appendChild(this.createHeaderCell(u))}r.querySelector("tbody").appendChild(l)}return t.appendChild(r),e},i.prototype.createHeaderCell=function(e){var t=b("td");if(this.addAttributes(e,t),e.type==="monthDay"){var r=b("span",{innerHTML:ue(this.parent.getDayNames(this.dayNameFormat)[e.date.getDay()],"single")});t.appendChild(r)}if(e.type==="resourceHeader"&&this.setResourceHeaderContent(t,e),e.type==="dateHeader"){if(M([t],Xt),t.setAttribute("data-date",e.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){var n={date:e.date,type:e.type},s=this.parent.element.id+"_",a=this.parent.activeViewOptions.dateHeaderTemplateName,h=s+a+"dateHeaderTemplate",l=[].slice.call(this.parent.getDateHeaderTemplate()(n,this.parent,"dateHeaderTemplate",h,!1,void 0,void 0,this.parent.root));l&&l.length&&G(l,t)}else{var r=b("span",{className:Vr}),p="full",u=this.parent.globalize.formatDate(e.date,{skeleton:p,calendar:this.parent.getCalendarMode()});r.setAttribute("title",ue(u,"multiple"));var c=this.parent.calendarUtil.isMonthStart(e.date)&&!this.isCurrentDate(e.date)&&!this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()});r.innerHTML=ue(c,"single"),t.appendChild(r)}this.wireCellEvents(t)}var f={elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(de,f),t},i.prototype.getContentSlots=function(){if(!(this.colLevels[this.colLevels.length-1]&&this.colLevels[this.colLevels.length-1][0]))return[];var e=[],t=function(L,k,R,N){var F={date:new Date(+k),groupIndex:R.groupIndex,workDays:R.workDays,type:"monthCells",className:N||[_]};e[parseInt(L.toString(),10)]||(e[parseInt(L.toString(),10)]=[]),e[parseInt(L.toString(),10)].push(F)},r=this.parent.currentView!=="MonthAgenda"&&this.parent.activeViewOptions.group.resources.length>0;if(r&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.activeViewOptions.group.byDate)for(var n=0,s=this.colLevels[this.colLevels.length-2];n<s.length;n++)for(var a=s[n],h=a.renderDates.map(function(L){return new Date(+L)}),l=this.parent.activeViewOptions.showWeekend?Ce:a.workDays.length,p=0;p<a.renderDates.length/l;p++)for(var u=h.splice(0,l),c=0,f=u;c<f.length;c++){var g=f[c];t(p,g,a)}else for(var h=this.renderDates.map(function(R){return new Date(+R)}),l=this.parent.activeViewOptions.showWeekend?Ce:this.parent.activeViewOptions.workDays.length,v=this.colLevels.slice(0,1)[0],m=this.renderDates.map(Number).indexOf(+v[0].date),p=0;p<this.renderDates.length/l;p++)for(var u=h.splice(0,l),y=m,w=function(F){var j=u[parseInt(y.toString(),10)];if(y++,r){var z=C.colLevels[C.colLevels.length-1],K=z.length/l,V=z.slice(0,K);if(C.parent.activeViewOptions.group.hideNonWorkingDays&&(V=z.filter(function(Z){return Z.date.getDay()===j.getDay()}),V.length===0))return F=F-1,T=F,"continue";for(var ne=0;ne<V.length;ne++){var se=void 0;ne!==0&&(se=[_,Ro]),t(p,j,V[parseInt(ne.toString(),10)],se)}}else t(p,j,C.colLevels[C.colLevels.length-1][0]);T=F},C=this,T,A=m;A<this.colLevels[0].length+m&&A<u.length;A++)w(A),A=T;return e},i.prototype.updateClassList=function(e){!this.isCustomMonth()&&this.isOtherMonth(e.date)&&e.className.push(Pe),this.parent.isMinMaxDate(e.date)||e.className.push(Xe),this.updateSelectedCellClass(e)},i.prototype.updateSelectedCellClass=function(e){},i.prototype.isOtherMonth=function(e){return e.getTime()<this.monthDates.start.getTime()||e.getTime()>this.monthDates.end.getTime()},i.prototype.renderContentArea=function(){var e=this.createTableLayout(ve);this.setAriaAttributes(e),this.addAutoHeightClass(e),this.parent.currentView==="TimelineMonth"&&this.createColGroup(e,this.colLevels[this.colLevels.length-1]);var t=new Date(this.parent.selectedDate.getTime());this.monthDates={start:this.parent.calendarUtil.firstDateOfMonth(t),end:this.parent.calendarUtil.lastDateOfMonth(ze(t,this.parent.activeViewOptions.interval-1))};var r=e.querySelector("tbody");return G(this.getContentRows(),r),this.wireCellEvents(r),e},i.prototype.getContentRows=function(){for(var e=[],t=b("tr"),r=b("td"),n=this.getContentSlots(),s=this.parent.currentView==="TimelineMonth",a=s?this.getGroupIndices():[],h=0;h<n.length;h++)if(!(a.length>0&&a.indexOf(n[parseInt(h.toString(),10)][0].groupIndex)>-1)){for(var l=t.cloneNode(),p=0;p<n[parseInt(h.toString(),10)].length;p++){var u=this.createContentTd(n[parseInt(h.toString(),10)][parseInt(p.toString(),10)],r);l.appendChild(u)}e.push(l)}return e},i.prototype.createContentTd=function(e,t){var r=t.cloneNode();e.colSpan&&r.setAttribute("colspan",e.colSpan.toString()),this.updateClassList(e);var n=e.type;if(e.className.indexOf(Di)!==-1&&(e.className.push(Ai),n="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(e.date,e.workDays)&&e.className.push(Yt),this.isCurrentDate(e.date)&&e.className.push(Bo),M([r],e.className),r.setAttribute("data-date",e.date.getTime().toString()),!d(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var s=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;r.setAttribute("data-group-index",""+s)}if(this.renderDateHeaderElement(e,r),this.parent.activeViewOptions.cellTemplate){var a={date:e.date,type:n,groupIndex:e.groupIndex},h=this.parent.element.id+"_",l=this.parent.activeViewOptions.cellTemplateName,p=h+l+"cellTemplate",u=[].slice.call(this.parent.getCellTemplate()(a,this.parent,"cellTemplate",p,!1,void 0,void 0,this.parent.root));G(u,r)}var c={elementType:n,element:r,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(de,c),r},i.prototype.renderDateHeaderElement=function(e,t){if(this.parent.currentView!=="TimelineMonth"){var r=b("div",{className:Xt});if(this.parent.activeViewOptions.cellHeaderTemplate){var n={date:e.date,type:e.type,groupIndex:e.groupIndex},s=this.parent.element.id+"_",a=this.parent.activeViewOptions.cellHeaderTemplateName,h=s+a+"cellHeaderTemplate",l=[].slice.call(this.parent.getCellHeaderTemplate()(n,this.parent,"cellHeaderTemplate",h,!1,void 0,void 0,this.parent.root));G(l,r)}else{var p=this.parent.calendarUtil.isMonthStart(e.date)&&!this.isCurrentDate(e.date)&&!this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()});r.innerHTML=ue(p,"single")}if(t.appendChild(r),this.getModuleName()==="month"){M([r],Vr);var u="full",c=this.parent.globalize.formatDate(e.date,{skeleton:u,calendar:this.parent.getCalendarMode()});t.setAttribute("aria-label",c)}}},i.prototype.getMonthStart=function(e){var t=this.parent.currentView==="Month"&&!d(this.parent.activeViewOptions.displayDate)&&!this.parent.uiStateValues.isSwipeScroll&&(this.parent.uiStateValues.isCustomMonth||this.isCustomRange()),r=t?this.parent.activeViewOptions.displayDate:!(this.parent.uiStateValues.isCustomMonth||!this.parent.uiStateValues.isSwipeScroll&&this.isCustomRange())&&this.isCustomMonth()?e:this.parent.calendarUtil.firstDateOfMonth(e),n=He(r,this.parent.activeViewOptions.firstDayOfWeek);return new Date(n.getFullYear(),n.getMonth(),n.getDate())},i.prototype.getMonthEnd=function(e){if(this.isCustomMonth()){var t=this.getMonthStart(e),r=Ce*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:Sn);return I(t,r-1)}else{var n=ze(e,this.parent.activeViewOptions.interval-1),s=He(this.parent.calendarUtil.lastDateOfMonth(n),this.parent.activeViewOptions.firstDayOfWeek);return I(s,Ce-1)}},i.prototype.isCustomRange=function(){var e=this.parent.getCurrentViewDates();if(e&&e.length>0){var t=O(this.parent.selectedDate).getTime(),r=He(e[e.length-1],this.parent.activeViewOptions.firstDayOfWeek);return!(t>=He(e[0],this.parent.activeViewOptions.firstDayOfWeek).getTime()&&t<=I(r,6).getTime())}return!1},i.prototype.getRenderDates=function(e,t){t===void 0&&(t=this.parent.selectedDate);var r=[],n=O(t),s=this.getMonthStart(n),a=this.getMonthEnd(n);do(this.parent.activeViewOptions.showWeekend||this.isWorkDay(s,e))&&r.push(s),s=I(s,1),s.getHours()>0&&(s=O(s));while(s.getTime()<=a.getTime());return e||(this.renderDates=r),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),r},i.prototype.getNextPreviousDate=function(e){if(this.isCustomMonth()){var t=this.parent.getCurrentViewDates(),r=He(e==="Next"?t[t.length-1]:t[0],this.parent.activeViewOptions.firstDayOfWeek);return I(r,e==="Next"?Ce:-(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:Sn)*Ce)}else return ze(this.parent.selectedDate,(e==="Next"?1:-1)*this.parent.activeViewOptions.interval)},i.prototype.getStartDate=function(){return this.getMonthStart(this.parent.selectedDate)},i.prototype.getEndDate=function(){return this.getMonthEnd(this.parent.selectedDate)},i.prototype.getEndDateFromStartDate=function(e){return I(new Date(e.getTime()),1)},i.prototype.getDateRangeText=function(e,t){if(e===void 0&&(e=this.parent.selectedDate),t===void 0&&(t=null),this.parent.isAdaptive||d(this.parent.activeViewOptions.dateFormat)){var r=7;e=!d(t)&&t.length>r-1?t[r-1]:e;var n=void 0,s=!1;if(this.isCustomMonth()){var a=!d(t)&&t.length>0?t:this.parent.getCurrentViewDates();s=a[0].getMonth()!==a[a.length-1].getMonth()||a[0].getFullYear()!==a[a.length-1].getFullYear(),s&&(e=a[0],n=a[a.length-1])}var h=this.parent.currentView!=="Month"||!this.isCustomMonth();if(this.parent.activeViewOptions.interval>1&&h||s){if(n=n||ze(Ti(e),this.parent.activeViewOptions.interval-1),e.getFullYear()===n.getFullYear()){var l=this.parent.globalize.formatDate(e,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" - "+this.parent.globalize.formatDate(n,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(n,{skeleton:"y",calendar:this.parent.getCalendarMode()});return ue(l,"single")}var p=this.parent.globalize.formatDate(e,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" "+e.getFullYear()+" - "+this.parent.globalize.formatDate(n,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(n,{skeleton:"y",calendar:this.parent.getCalendarMode()});return ue(p,"single")}var u=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";return ue(this.parent.globalize.formatDate(e,{format:u,calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(!d(t)&&t.length>0?t[0]:this.parent.selectedDate)},i.prototype.getLabelText=function(e){var t=e.charAt(0).toLowerCase()+e.substring(1);return this.formatViewLabel(t,this.getStartDate(),this.getEndDate())},i.prototype.createWeekNumberElement=function(e){var t=b("tr"),r=b("td",{className:Vs,attrs:{title:e?this.parent.localeObj.getConstant("week")+" "+e:""},innerHTML:e||""});t.appendChild(r);var n={elementType:"weekNumberCell",element:r};return this.parent.trigger(de,n),t},i.prototype.unWireEvents=function(){var e=this.element.querySelector("."+$);e&&S.remove(e,"scroll",this.onContentScroll)},i.prototype.isCustomMonth=function(){return this.parent.currentView==="Month"&&(!d(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)},i.prototype.getModuleName=function(){return"month"},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.element&&(this.monthEvent&&(this.monthEvent.destroy(),this.monthEvent=null),this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),o.prototype.destroy.call(this))},i}(Pi),Ql=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zr=function(o){Ql(i,o);function i(e){var t=o.call(this,e)||this;return t.viewClass="e-year-view",t.isInverseTableSelect=!1,t.yearEventModule=null,t}return i.prototype.getModuleName=function(){return"year"},i.prototype.renderLayout=function(e){this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.setPanel(b("div",{className:ki}));var t=this.parent.activeViewOptions.orientation==="Horizontal"?"e-horizontal":"e-vertical";M([this.element],[this.viewClass,t,e]),this.renderPanel(e),this.parent.activeViewOptions.allowVirtualScrolling&&M([this.element],[Yr]);var r=this.createTableLayout(Bi);this.element.appendChild(r),this.element.querySelector("table").setAttribute("role","presentation");var n=r.querySelector("tbody");this.rowCount=this.getRowColumnCount("row"),this.columnCount=this.getRowColumnCount("column"),this.renderHeader(n),this.renderContent(n),this.parent.currentView!=="Year"&&this.parent.uiStateValues.isGroupAdaptive&&(this.generateColumnLevels(),this.renderResourceMobileLayout()),S.add(this.element.querySelector("."+$),"scroll",this.onContentScroll,this),this.parent.notify(rt,{})},i.prototype.renderHeader=function(e){},i.prototype.renderContent=function(e){var t=b("tr");e.appendChild(t);var r=b("td");t.appendChild(r),this.element.querySelector("tbody").appendChild(t);var n=b("div",{className:$});r.appendChild(n);var s=this.createTableLayout("e-calendar-table");n.appendChild(s);var a=b("tr");s.querySelector("tbody").appendChild(a);var h=b("td");a.appendChild(h);var l=b("div",{className:"e-calendar-wrapper"});h.appendChild(l);for(var p=this.getMonths(),u=0,c=p;u<c.length;u++){var f=c[u],g=new Date(this.parent.selectedDate.getFullYear(),f,1),v=b("div",{className:"e-month-calendar e-calendar",attrs:{"data-role":"calendar"}});v.appendChild(this.renderCalendarHeader(g)),v.appendChild(this.renderCalendarContent(g)),l.appendChild(v)}this.renderDates.splice(0,1)},i.prototype.renderCalendarHeader=function(e){var t=b("div",{className:"e-header e-month"}),r=b("div",{className:"e-day e-title"});if(this.parent.activeViewOptions.monthHeaderTemplate){var n={date:e,type:"monthHeader"};this.renderTemplates(this.parent.getMonthHeaderTemplate(),n,"monthHeaderTemplate",this.parent.activeViewOptions.monthHeaderTemplateName,r)}else r.innerHTML=this.getMonthName(e);return t.appendChild(r),this.parent.trigger(de,{elementType:"headerCells",element:r,date:e}),t},i.prototype.renderCalendarContent=function(e){var t=this.getMonthDates(e),r=b("div",{className:"e-content e-month"}),n=this.createTableLayout("e-calendar-table "+ve);r.appendChild(n),this.setAriaAttributes(n);var s=b("thead",{className:"e-week-header"}),a=b("tr"),h=He(Nr(e),this.parent.activeViewOptions.firstDayOfWeek);this.parent.activeViewOptions.showWeekNumber&&a.appendChild(b("th"));for(var l=0;l<Ce;l++){if(this.parent.activeViewOptions.dayHeaderTemplate){var p=b("th"),u={date:h,type:"dayHeader"};this.renderTemplates(this.parent.getDayHeaderTemplate(),u,"dayHeaderTemplate",this.parent.activeViewOptions.dayHeaderTemplateName,p),a.appendChild(p)}else a.appendChild(b("th",{innerHTML:this.parent.getDayNames("narrow")[h.getDay()]}));var c=new Date(h.getTime()+Le);h=c.getDate()===h.getDate()?I(c,1):c}s.appendChild(a),ye([s],n);for(var f=n.querySelector("tbody");t.length>0;){var g=t.splice(0,Ce),v=b("tr");if(this.parent.activeViewOptions.showWeekNumber){var m=this.parent.getWeekNumberContent(g),y=b("td",{className:"e-week-number",attrs:{title:this.parent.localeObj.getConstant("week")+" "+m},innerHTML:m});v.appendChild(y),this.parent.trigger(de,{elementType:"weekNumberCells",element:y})}for(var w=0,C=g;w<C.length;w++){var T=C[w],y=b("td",{className:"e-cell "+_,attrs:{"data-date":T.getTime().toString()}});if(this.parent.activeViewOptions.cellHeaderTemplate){var u={date:T,type:"monthCells"};this.renderTemplates(this.parent.getCellHeaderTemplate(),u,"cellHeaderTemplate",this.parent.activeViewOptions.cellHeaderTemplateName,y)}else{var A=b("span",{className:"e-day",innerHTML:this.parent.globalize.formatDate(T,{skeleton:"d",calendar:this.parent.getCalendarMode()}),attrs:{title:this.parent.globalize.formatDate(T,{type:"date",skeleton:"full"})}});y.appendChild(A)}if(this.parent.activeViewOptions.cellTemplate){var u={date:T,type:"monthCells"};this.renderTemplates(this.parent.getCellTemplate(),u,"cellTemplate",this.parent.activeViewOptions.cellTemplateName,y)}var L=[];e.getMonth()!==T.getMonth()&&(L.push(Pe),y.firstElementChild&&!this.parent.activeViewOptions.cellTemplate&&y.firstElementChild.setAttribute("aria-disabled","true")),this.isCurrentDate(T)&&e.getMonth()===T.getMonth()&&(L=L.concat(["e-today","e-selected"])),L.length>0&&M([y],L),v.appendChild(y),e.getMonth()===T.getMonth()&&this.renderDates.push(new Date(T)),this.parent.isMinMaxDate(T)?(S.add(y,"click",this.onCellClick,this),this.parent.isAdaptive||S.add(y,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)):M([y],Xe),this.parent.trigger(de,{elementType:"workCells",element:y,date:T})}f.appendChild(v)}return r},i.prototype.createTableColGroup=function(e){for(var t=b("colgroup"),r=0;r<e;r++)t.appendChild(b("col"));return t},i.prototype.getMonthName=function(e){var t=this.parent.globalize.formatDate(e,{format:this.parent.activeViewOptions.dateFormat||"MMMM y",calendar:this.parent.getCalendarMode()});return ue(t,"multiple")},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots([this.parent.selectedDate],this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),this.parent.uiStateValues.isGroupAdaptive){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];e=[this.getDateSlots([this.parent.selectedDate],r.workDays)]}}else e.push(t);return e.pop(),this.colLevels=e,e},i.prototype.getDateSlots=function(e,t,r,n){r===void 0&&(r=this.parent.workHours.start),n===void 0&&(n=this.parent.workHours.end);var s=[{date:e[0],type:"dateHeader",className:[Me],colSpan:1,workDays:t,startHour:new Date(+this.parent.globalize.parseDate(r,{skeleton:"Hm"})),endHour:new Date(+this.parent.globalize.parseDate(n,{skeleton:"Hm"}))}];return s},i.prototype.getMonthDates=function(e){for(var t=He(Nr(e),this.parent.activeViewOptions.firstDayOfWeek),r=I(new Date(+t),6*Ce),n=[],s=t;s.getTime()<r.getTime();s=I(s,1))n.push(O(new Date(s)));return n},i.prototype.getRowColumnCount=function(e){for(var t=this.getMonths(),r=this.parent.selectedDate.getFullYear(),n=[],s=0,a=t;s<a.length;s++){var h=a[s];n.push(new Date(r,h,1).getDay()+new Date(r,h+1,0).getDate())}var l=Math.max.apply(Math,n),p;return e==="row"?p=this.parent.activeViewOptions.orientation==="Horizontal"?t.length:l:p=this.parent.activeViewOptions.orientation==="Horizontal"?l:t.length,p},i.prototype.isCurrentDate=function(e){return O(new Date).getTime()===O(new Date(e.getTime())).getTime()},i.prototype.getMonths=function(){var e=this;return Array.apply(null,{length:this.parent.activeViewOptions.monthsCount}).map(function(t,r){return e.parent.firstMonthOfYear+r})},i.prototype.renderTemplates=function(e,t,r,n,s){var a=this.parent.element.id+"_"+n+r,h=[].slice.call(e(t,this.parent,r,a,!1,void 0,void 0,this.parent.root));G(h,s)},i.prototype.onCellClick=function(e){var t=E(e.target,"."+_),r=this.parent.getDateFromElement(t);this.parent.activeCellsData=this.parent.getCellDetails(t);var n=r.getTime()<this.getStartDate().getTime();if(n||r.getTime()>this.getEndDate().getTime()){this.parent.changeDate(this.parent.activeView.getNextPreviousDate(n?"Previous":"Next"),e);var s=this.parent.activeCellsData.startTime.getTime(),a=s>=this.getStartDate().getTime()&&s<=this.getEndDate().getTime(),h=a?s:(n?this.getEndDate():this.getStartDate()).getTime(),l=this.parent.element.querySelector(":not(."+Pe+')[data-date="'+h+'"]');this.parent.selectCell(l),this.parent.activeCellsData=this.parent.getCellDetails(l)}else{var p=I(new Date(r.getTime()),1),u=this.parent.eventBase.filterEvents(r,p),c={date:r,event:u,element:e.target};t.classList.contains(Pe)&&(t=this.parent.element.querySelector(":not(."+Pe+')[data-date="'+t.getAttribute("data-date")+'"]')),this.parent.activeCellsData=this.parent.getCellDetails(t);var f=P(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});this.parent.trigger(Pr,f),this.parent.quickPopup.moreEventClick(c,p)}},i.prototype.onContentScroll=function(e){var t=e.target,r=this.getDatesHeaderElement();this.parent.notify(_r,e),r&&(r.firstElementChild.scrollLeft=t.scrollLeft);var n="."+bt+",."+Jt,s=this.element.querySelector(n);s&&(s.scrollTop=t.scrollTop),this.parent.isAdaptive||(this.parent.uiStateValues.top=e.target.scrollTop),this.parent.uiStateValues.left=e.target.scrollLeft,this.setPersistence()},i.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.offsetHeight-this.getHeaderBarHeight(),r=this.element.querySelector("."+ri);r&&(t-=r.offsetHeight);var n=this.element.querySelector("."+$);if(n&&(n.style.height=x(t)),!this.parent.isAdaptive&&r){var s=Li();n.offsetWidth-n.clientWidth>0?(r.firstElementChild.style[e.cssProperties.border]=s>0?"1px":"0px",r.style[e.cssProperties.padding]=s>0?s-1+"px":"0px"):(r.firstElementChild.style[e.cssProperties.border]="",r.style[e.cssProperties.padding]="")}this.setColWidth(this.getContentAreaElement());var a="."+bt+",."+Jt,h=this.element.querySelector(a);if(h){var l=n.scrollWidth>n.clientWidth;h.style.height=x(t-(l?17:0))}e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.uiStateValues.isInitial=!1,this.parent.uiStateValues.top=this.parent.uiStateValues.left=0):(h&&(h.scrollTop=this.parent.uiStateValues.top),n.scrollTop=this.parent.uiStateValues.top,n.scrollLeft=this.parent.uiStateValues.left)),this.retainScrollPosition()},i.prototype.getStartDate=function(){return new Date(this.parent.selectedDate.getFullYear(),this.parent.firstMonthOfYear%12,1)},i.prototype.getEndDate=function(){return I(ze(this.getStartDate(),this.parent.monthsCount),-1)},i.prototype.startDate=function(){return this.parent.currentView==="Year"?He(this.getStartDate(),this.parent.activeViewOptions.firstDayOfWeek):this.getStartDate()},i.prototype.endDate=function(){return this.parent.currentView==="Year"?I(xs(this.getEndDate(),this.parent.activeViewOptions.firstDayOfWeek),1):I(this.getEndDate(),1)},i.prototype.getEndDateFromStartDate=function(e){var t=new Date(e.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=Ti(t)),I(new Date(t.getTime()),1)},i.prototype.getNextPreviousDate=function(e){return Ho(this.parent.selectedDate,e==="Next"?1:-1)},i.prototype.getDateRangeText=function(e,t){e===void 0&&(e=this.parent.selectedDate),t===void 0&&(t=null);var r=!d(t)&&t.length>0,n=r?t[0]:this.getStartDate(),s=r?t[t.length-1]:this.getEndDate();return n.getFullYear()!==s.getFullYear()?this.parent.globalize.formatDate(n,{skeleton:"yMMM"})+" - "+this.parent.globalize.formatDate(s,{skeleton:"yMMM"}):this.parent.globalize.formatDate(r?t[0]:e,{skeleton:"y"})},i.prototype.addEventListener=function(){this.parent.on(nt,this.onScrollUiUpdate,this),this.parent.on(st,this.onDataReady,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(nt,this.onScrollUiUpdate),this.parent.off(st,this.onDataReady))},i.prototype.onDataReady=function(e){this.yearEventModule=new Xs(this.parent),this.yearEventModule.renderAppointments(),this.parent.notify(at,e)},i.prototype.scrollToDate=function(e){var t=+new Date(O(e)),r=this.element.querySelector("."+_+":not(."+Pe+')[data-date="'+t+'"]');r&&(r=E(r,".e-month-calendar"),this.getContentAreaElement().scrollTop=r.offsetTop)},i.prototype.destroy=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)&&this.element){var e=this.element.querySelector("."+$);e&&S.remove(e,"scroll",this.onContentScroll),this.yearEventModule&&(this.yearEventModule.destroy(),this.yearEventModule=null),this.parent.resourceBase&&this.parent.resourceBase.destroy(),o.prototype.destroy.call(this)}},i}(Pi),eh=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Qs=function(o){eh(i,o);function i(e){return o.call(this,e)||this}return i.prototype.createAgendaContentElement=function(e,t,r,n,s){var a=this,h,l=this.parent.eventFields;if(e==="noEvents"){var p=[{subject:this.parent.localeObj.getConstant("noEvents")}];h=wi.createList(this.parent.createElement,p,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:'<div class="'+jr+'">'+this.parent.localeObj.getConstant("noEvents")+"</div>"}),h.querySelector(".e-agenda-item").children.length===0&&h.firstElementChild.appendChild(b("div",{className:jr,innerHTML:this.parent.localeObj.getConstant("noEvents")}))}else{h=wi.createList(this.parent.createElement,t,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass});var u=[].slice.call(h.children);u.forEach(function(c,f){var g=b("div",{className:Oe,attrs:{"data-id":"Appointment_"+t[parseInt(f.toString(),10)][""+a.parent.eventFields.id],"data-guid":t[parseInt(f.toString(),10)].Guid,role:"button",tabindex:"0","aria-disabled":a.parent.eventBase.getReadonlyAttribute(t[parseInt(f.toString(),10)]),"aria-label":a.parent.getAnnouncementString(t[parseInt(f.toString(),10)])}});d(s)||g.setAttribute("data-group-index",s.toString()),a.parent.eventBase.applyResourceColor(g,t[parseInt(f.toString(),10)],"borderColor",n);var v;if(d(a.parent.activeViewOptions.eventTemplate))v=a.createAppointment(t[parseInt(f.toString(),10)]);else{M([g],Po);var m=a.parent.element.id+"_",y=a.parent.activeViewOptions.eventTemplateName,w=m+y+"eventTemplate";if(v=a.parent.getAppointmentTemplate()(t[parseInt(f.toString(),10)],a.parent,"eventTemplate",w,!1,void 0,void 0,a.parent.root),!d(t[parseInt(f.toString(),10)][l.recurrenceRule])){var C=t[parseInt(f.toString(),10)][l.id]===t[parseInt(f.toString(),10)][l.recurrenceID]?Cn:Tn;g.appendChild(b("div",{className:Hr+" "+C}))}}G([].slice.call(v),g),ei(c),c.appendChild(g);var T={data:P({},t[parseInt(f.toString(),10)],null,!0),element:c,cancel:!1};a.parent.trigger(Ls,T,function(A){A.cancel&&pe(c)})})}return r.appendChild(h),(this.parent.currentView==="MonthAgenda"&&this.parent.activeViewOptions.group.resources.length>0||this.parent.currentView==="Agenda")&&M([r],On),this.parent.renderTemplates(),r},i.prototype.createAppointment=function(e){var t=this.parent.eventFields,r=e[t.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),n=e[t.location]||this.parent.eventSettings.fields.location.default,s=b("div",{className:Vo});!d(n)&&n!==""&&(r+=",");var a=b("div",{className:Fs});if(this.parent.sanitize(r,a),s.appendChild(a),!d(n)&&n!==""){var h=b("div",{className:No});this.parent.sanitize(n,h),s.appendChild(h)}if(!d(e[t.recurrenceRule])){var l=e[t.id]===e[t.recurrenceID]?Cn:Tn;s.appendChild(b("div",{className:Hr+" "+l}))}var p=e[t.startTime],u=e[t.endTime],c=e[t.isAllDay],f=this.parent.localeObj.getConstant("allDay"),g=this.parent.getTimeString(p)+" - "+this.parent.getTimeString(u);if(!d(e.data)){var v=u.getTimezoneOffset()!==p.getTimezoneOffset()?u.getTime()-p.getTime()+36e5:u.getTime()-p.getTime(),m=v/Le>=1?f:g;f=m+" ("+this.parent.localeObj.getConstant("day")+" "+e.data.index+"/"+e.data.count+")"}var y=!d(e.data)||c?f:g,w=b("div",{className:jo,innerHTML:y});return[s,w]},i.prototype.processAgendaEvents=function(e){var t=[];if(d(e))return t;for(var r=0,n=e;r<n.length;r++){var s=n[r],a=this.parent.eventBase.splitEventByDay(s);t=t.concat(a.length>1?a:s)}return t},i.prototype.wireEventActions=function(){for(var e=[].slice.call(this.parent.element.querySelectorAll("."+Oe)),t=0,r=e;t<r.length;t++){var n=r[t];this.parent.eventBase.wireAppointmentEvents(n,this.parent.getEventDetails(n),!0)}for(var s=[].slice.call(this.parent.element.querySelectorAll(".e-m-date")),a=0,h=s;a<h.length;a++){var n=h[a];S.add(n,"click",this.parent.agendaModule.dayNavigationClick,this)}},i.prototype.calculateResourceTableElement=function(e,t,r,n){if(n===void 0&&(n=null),d(this.parent.resourceBase.lastResourceLevel)){var s=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(s)}for(var a=I(new Date(r.getTime()),t),h=this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"?t:1,l=this.parent.resourceBase.resourceCollection,p=this.parent.resourceBase.lastResourceLevel,u=r,c=r,f=this.parent.activeViewOptions.showWeekend,g=0;g<h;g++){var v=[],m=[],y=0,w=void 0,C=void 0,T=I(c,g);if(this.parent.currentView==="Agenda"&&this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.allowVirtualScrolling&&!f&&!this.isWorkDay(T)){do if(T=I(T,1),T>=n)break;while(!this.isWorkDay(T)||this.parent.eventBase.filterEvents(T,I(T,1)).length<1);if(T>=n)break;c=I(T,-g),a=I(T,1)}var A=this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"?I(T,1):a,L=this.parent.eventBase.filterEvents(T,A);if(L.length>0||!this.parent.hideEmptyAgendaDays||this.parent.currentView==="MonthAgenda"){for(var k=0;k<p.length;k++){t=!this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"?t:1;var R=[];r=T;var N=this.parent.eventBase.filterEvents(r,a,L,p[parseInt(k.toString(),10)]);if(N.length>0||!this.parent.hideEmptyAgendaDays||this.parent.currentView==="MonthAgenda")for(var F=0;F<t;F++){var j=this.parent.eventBase.filterEvents(r,I(r,1),N,void 0);if(((f||!f&&(this.parent.group.byDate?this.isWorkDay(r):this.isWorkDay(r,p[parseInt(k.toString(),10)].workDays)))&&(j.length>0||!this.parent.hideEmptyAgendaDays)||this.parent.currentView==="MonthAgenda")&&(R.push(j[0]),w={rowSpan:1,type:"eventColumn",resource:l[l.length-1],groupIndex:p[parseInt(k.toString(),10)].groupIndex,groupOrder:p[parseInt(k.toString(),10)].groupOrder,resourceData:p[parseInt(k.toString(),10)].resourceData,eventData:j,date:r},C={rowSpan:1,type:"dateColumn",resource:l[parseInt((l.length-1).toString(),10)],groupOrder:p[parseInt(k.toString(),10)].groupOrder,resourceData:p[parseInt(k.toString(),10)].resourceData,date:r},v[parseInt(y.toString(),10)]||(v[parseInt(y.toString(),10)]=[]),v[parseInt(y.toString(),10)].push(w),v[parseInt(y.toString(),10)].push(C),y++),r=I(r,1),r.getTime()>=a.getTime()||this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"){if(R.length>0){v[v.length-1][1].cssClass=On;var z={rowSpan:R.length,type:"resourceColumn",resource:l[parseInt((l.length-1).toString(),10)],groupOrder:p[parseInt(k.toString(),10)].groupOrder.slice(0,-1),resourceData:p[parseInt(k.toString(),10)].resourceData,groupIndex:v.length-R.length,className:[Wo],date:r};v[parseInt((v.length-R.length).toString(),10)].push(z),m.push(P({},z,null,!0))}break}}}for(var K=l.slice(0,-1),V=[],ne=0,se=0;se<K.length;se++)for(var R=K[K.length-(se+1)].dataSource,Z=0;Z<R.length;Z++)for(var J=0,ce=0;ce<m.length;ce++)m[parseInt(ce.toString(),10)].groupOrder[K.length-(se+1)]===R[parseInt(Z.toString(),10)][K[K.length-(se+1)].idField]&&(ne=ne+m[parseInt(ce.toString(),10)].rowSpan,V.push(P({},m[parseInt(ce.toString(),10)],null,!0))),++J===m.length&&V.length>0&&(V[0].rowSpan=ne,V[0].type="parentColumnLevel_"+(se+1),V[0].resource=K[K.length-(se+1)],V[0].resourceData=R[parseInt(Z.toString(),10)],V[0].date=r,v[V[0].groupIndex].push(V[0]),V=[],ne=0);this.createResourceTableRow(v,e)}}var Te=this.parent.eventBase.filterEvents(u,a);Te.length===0&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(e,u)},i.prototype.createResourceTableRow=function(e,t){var r=b("tr"),n,s=b("td"),a,h=0,l;if(this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"){for(var p=[],u=this.parent.resourceBase.resourceCollection.slice(0,-1),c=0;c<e.length;c++)p=p.concat(e[parseInt(c.toString(),10)]);l=u.length>0?"parentColumnLevel_"+u.length:"resourceColumn";for(var f=p.filter(function(F){return F.type===l}),g=0;g<f.length;g++)h=h+f[parseInt(g.toString(),10)].rowSpan}for(var v=0;v<e.length;v++){n=r.cloneNode();for(var m=e[parseInt(v.toString(),10)].length-1;m>=0;m--){var y=e[parseInt(v.toString(),10)][parseInt(m.toString(),10)],w=s.cloneNode();if(y.type==="dateColumn"){if(this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"){a=e[parseInt(v.toString(),10)][parseInt(m.toString(),10)];continue}w.setAttribute("data-date",y.date.getTime().toString()),w.appendChild(this.createDateHeaderElement(y.date));var C=[$e,En];y.cssClass&&C.push(y.cssClass),M([w],C),this.isCurrentDate(new Date(y.date.getTime()))&&M(w.childNodes,Us),n.appendChild(w)}else if(y.type==="eventColumn"){for(var T=y.eventData.length===0?"noEvents":"data",A=0;A<n.childNodes.length;A++){var L=n.childNodes.item(A),k=L.classList.contains("e-resource-column")?Uo:zs;this.parent.trigger(de,{elementType:k,element:L,date:y.date,groupIndex:y.groupIndex})}w=this.createAgendaContentElement(T,y.eventData,w,y.groupOrder,y.groupIndex),w.setAttribute("data-date",y.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda")&&M([w],[$e,zo]),n.appendChild(w);var R=y.eventData.length===0?Wr:qs;this.parent.trigger(de,{elementType:R,element:w,date:y.date,groupIndex:y.groupIndex})}else w.setAttribute("rowspan",y.rowSpan.toString()),M([w],qo),this.setResourceHeaderContent(w,y,y.className[0]),n.appendChild(w)}if(this.parent.activeViewOptions.group.byDate&&v===0&&this.parent.currentView!=="MonthAgenda"){var w=s.cloneNode();w.setAttribute("data-date",a.date.getTime().toString()),w.setAttribute("rowspan",h.toString()),w.appendChild(this.createDateHeaderElement(a.date)),M([w],[$e,En,_o]);var N=Dn(this.parent.selectedDate.getTime(),a.date.getTime());if(n.setAttribute("data-row-index",N.toString()),this.parent.element.querySelector('.e-agenda-view tr[data-row-index="'+N+'"]'))break;n.insertBefore(w,n.childNodes[0])}t.appendChild(n)}},i.prototype.createDateHeaderElement=function(e){var t;if(this.parent.activeViewOptions.dateHeaderTemplate){t=b("div",{className:An});var r={date:e,type:"dateHeader"},n=this.parent.element.id+"_",s=this.parent.activeViewOptions.dateHeaderTemplateName,a=n+s+"dateHeaderTemplate",h=[].slice.call(this.parent.getDateHeaderTemplate()(r,this.parent,"dateHeaderTemplate",a,!1,void 0,void 0,this.parent.root));G(h,t)}else t=this.getMobileDateElement(e,An);return t},i.prototype.renderEmptyContent=function(e,t,r){var n=this.createTableRowElement(t,"noEvents"),s=n.children[0],a=b("div",{className:Go,innerHTML:this.parent.localeObj.getConstant("noEvents")});s.appendChild(a),e.appendChild(n),r&&this.parent.trigger(de,{elementType:Wr,element:s,date:t})},i.prototype.createTableRowElement=function(e,t){var r=Dn(this.parent.selectedDate.getTime(),e.getTime()),n=b("tr",{attrs:{"data-row-index":r.toString()}}),s=b("td",{attrs:{class:t==="monthHeader"?yi:$e,"aria-selected":"false","data-column-index":r.toString(),"data-date":e.getTime().toString()}}),a=s.cloneNode(),h=s.cloneNode();return n.appendChild(a),t!=="noEvents"&&n.appendChild(h),n},i.prototype.destroy=function(){o.prototype.destroy.call(this)},i}(Pi),th=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ea=function(o){th(i,o);function i(e){var t=o.call(this,e)||this;return t.viewClass="e-agenda-view",t.isInverseTableSelect=!1,t.agendaDates={},t.virtualScrollTop=1,t}return i.prototype.getModuleName=function(){return"agenda"},i.prototype.renderLayout=function(){this.agendaDates={},this.element=b("div",{className:ki}),M([this.element],this.viewClass),this.element.appendChild(this.createTableLayout(Bi)),this.element.querySelector("table").setAttribute("role","presentation"),this.parent.element.querySelector("."+Oi).appendChild(this.element);var e=b("tr");this.element.querySelector("tbody").appendChild(e);var t=b("td");e.appendChild(t);var r=b("div",{className:$});t.appendChild(r);var n=this.createTableLayout(ve);this.setAriaAttributes(n),r.appendChild(n);var s=n.querySelector("tbody"),a=O(this.parent.selectedDate);this.renderEmptyContent(s,a),this.wireEvents(),this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+Gr)&&this.renderResourceMobileLayout(),this.parent.notify(rt,{})},i.prototype.eventLoad=function(e){this.dataSource=P([],this.parent.eventsData,null,!0);for(var t=0,r=this.parent.eventsData;t<r.length;t++){var n=r[t];delete n.generatedDates}var s=this.parent.activeViewOptions.allowVirtualScrolling?e.processedData:this.parent.eventsProcessed;if(this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];this.dataSource=this.parent.eventBase.filterEventsByResource(a,this.dataSource),s=this.parent.eventBase.filterEventsByResource(a,s)}this.parent.eventsProcessed=this.processAgendaEvents(s);var h=O(this.parent.selectedDate),l=this.element.querySelector("."+ve+" tbody");ei(l),this.renderInitialContent(l,h),this.wireEventActions();var p=E(l,"."+$);p.scrollTop=1,this.parent.notify(at,{}),this.parent.activeViewOptions.allowVirtualScrolling||this.retainScrollPosition()},i.prototype.refreshEvent=function(e){for(var t=[],r=this.parent.eventFields,n=0,s=this.dataSource;n<s.length;n++){var a=s[n];d(a[r.recurrenceID])&&!d(a[r.recurrenceRule])&&!d(a.generatedDates)&&e>=a.generatedDates.end&&(t=t.concat(this.parent.eventBase.generateOccurrence(a,e)))}this.parent.eventsProcessed=this.parent.eventsProcessed.concat(this.processAgendaEvents(t))},i.prototype.refreshHeader=function(){var e=this.element.querySelector("."+ve+" tbody");this.parent.activeViewOptions.group.byDate?ei(e):pe(e.firstElementChild);var t=O(this.parent.selectedDate),r=b("tbody"),n=new Date(t.getTime()),s=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(n):I(n,this.parent.agendaDaysCount);this.renderContent(r,n,s),G([].slice.call(r.childNodes),e)},i.prototype.renderInitialContent=function(e,t){var r=b("tbody"),n=new Date(t.getTime()),s=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(n):I(n,this.parent.agendaDaysCount);if(this.renderContent(r,n,s),G([].slice.call(r.childNodes),e),this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.parent.eventsData.length>0)for(var a=this.getContentAreaElement(),h=a.querySelector(".e-content-table");a.offsetWidth<=a.clientWidth&&!(this.parent.isAdaptive&&h.offsetHeight>=a.clientHeight);){var l=b("tbody");if(s=n,n=I(s,-this.parent.agendaDaysCount),this.renderContent(l,n,s),ye([].slice.call(l.childNodes),e),n<=this.parent.minDate)break}e.childNodes.length<=0&&this.renderEmptyContent(e,t,!0)},i.prototype.renderContent=function(e,t,r){var n=this.parent.eventFields,s=new Date(t.getTime()),a=this.appointmentFiltering(s,r);if(a.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays)if(!this.parent.activeViewOptions.showWeekend&&!this.isAgendaWorkDay(a[0][n.startTime]))for(var h=0,l=a;h<l.length;h++){var p=l[h];if(this.isAgendaWorkDay(p[n.startTime])){t=new Date(new Date(p[n.startTime].getTime()).setHours(0,0,0,0)),this.updateHeaderText(p[n.startTime]);break}}else t=new Date(new Date(a[0][n.startTime].getTime()).setHours(0,0,0,0)),this.updateHeaderText(a[0][n.startTime]);var u;if(!this.parent.hideEmptyAgendaDays||this.parent.agendaDaysCount>0&&a.length>0){if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var c=t;this.parent.activeViewOptions.group.byDate||(this.parent.activeViewOptions.allowVirtualScrolling=!1,c=s,this.parent.headerModule&&(this.parent.headerModule.updateDateRange(),this.parent.headerModule.updateHeaderItems("remove"))),this.calculateResourceTableElement(e,this.parent.agendaDaysCount,c,r)}else for(var f=0;f<this.parent.agendaDaysCount;f++){var g=this.createTableRowElement(t,"data"),v=this.element.querySelector('tr[data-row-index="'+ +g.dataset.rowIndex+'"]');if(v||!this.parent.activeViewOptions.showWeekend&&!this.isAgendaWorkDay(t)){if(t=I(t,1),!v&&this.parent.activeViewOptions.allowVirtualScrolling&&f--,t.getTime()>r.getTime())break;continue}var m=g.children[0],y=g.children[1],w=this.appointmentFiltering(t);if(w.length>0||!this.parent.hideEmptyAgendaDays&&w.length===0){var C=!this.parent.hideEmptyAgendaDays&&w.length===0?"noEvents":"data";m.appendChild(this.createDateHeaderElement(t)),g.appendChild(m),this.parent.trigger(de,{elementType:zs,element:m,date:t});var T=this.createAgendaContentElement(C,w,y);g.appendChild(T),T.querySelectorAll("li").length>0&&e.appendChild(g);var A=!this.parent.hideEmptyAgendaDays&&w.length===0?Wr:qs;this.parent.trigger(de,{elementType:A,element:T,date:t})}else this.parent.activeViewOptions.allowVirtualScrolling&&f--;if(this.isCurrentDate(new Date(t.getTime()))&&M(m.childNodes,Us),t=I(t,1),t.getTime()>r.getTime())break}u=new Date(t.getTime()-Le)}this.agendaDates={start:s,end:u}},i.prototype.isAgendaWorkDay=function(e){return this.parent.uiStateValues.isGroupAdaptive&&!this.parent.group.byDate?this.isWorkDay(e,this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].workDays):this.isWorkDay(e)},i.prototype.agendaScrolling=function(e){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),this.parent.activeViewOptions.allowVirtualScrolling&&this.virtualScrolling(e),this.parent.activeViewOptions.allowVirtualScrolling||this.setPersistence()},i.prototype.virtualScrolling=function(e){var t=e.target,r=t.scrollTop,n=t.scrollHeight,s=t.clientHeight,a=r+s,h=this.virtualScrollTop<r?"next":"previous",l=t.querySelector("tbody"),p=b("tbody"),u=this.getElementFromScrollerPosition(e),c=this.parent.getDateFromElement(u),f,g;if(r===0){if(f=this.getPreviousNextDate(I(c,-1),h),g=this.appointmentFiltering(f.start,f.end),g.length>0||!this.parent.hideEmptyAgendaDays){this.renderContent(p,f.start,f.end),ye([].slice.call(p.childNodes),l),this.wireEventActions();for(var v=0,m=l.children;v<m.length;v++)if(m[parseInt(v.toString(),10)].getAttribute("data-row-index")===u.getAttribute("data-column-index")){var y=m[parseInt(v.toString(),10)].offsetTop-this.element.querySelector(".e-agenda-item").offsetHeight;t.scrollTop=y;break}this.updateHeaderText(c)}}else a>=n-5?(f=this.getPreviousNextDate(I(c,1),h),g=this.appointmentFiltering(f.start,f.end),(g.length>0||!this.parent.hideEmptyAgendaDays)&&(this.renderContent(p,f.start,f.end),G([].slice.call(p.childNodes),l),this.wireEventActions(),this.updateHeaderText(c))):this.updateHeaderText(c);this.virtualScrollTop=r;var w=this.parent.eventBase.getSelectedAppointments();w.length>0&&w[w.length-1].focus()},i.prototype.getElementFromScrollerPosition=function(e){var t,r=e.target,n=r.scrollTop,s=r.scrollHeight,a=r.clientHeight,h=n+a,l=[].slice.call(r.querySelectorAll(".e-agenda-item")),p,u;if(l.length>0){if(n===0)p=l[0],t=E(p,"."+$e);else if(h===s)p=l[l.length-1],t=E(p,"."+$e);else for(var c=0,f=l.length;c<f;c++)if(p=l[parseInt(c.toString(),10)],u=p.getBoundingClientRect(),u.top>=0){t=E(p,"."+$e);break}}return t},i.prototype.updateHeaderText=function(e){this.parent.showHeaderBar&&this.parent.headerModule.updateDateRange(e)},i.prototype.getPreviousNextDate=function(e,t){var r=new Date(e.getTime()),n=this.getStartDateFromEndDate(e),s=this.getEndDateFromStartDate(e),a=0;do{if(this.parent.activeViewOptions.showWeekend||!this.parent.activeViewOptions.showWeekend&&this.isAgendaWorkDay(r)){var h=this.appointmentFiltering(r);(h.length>0||!this.parent.hideEmptyAgendaDays)&&a++}if(r=I(r,t==="next"?1:-1),r<n||r>s)break}while(a!==this.parent.agendaDaysCount);var l=I(r,t==="next"?-1:1);return t==="next"?{start:e,end:I(l,1)}:{start:l,end:I(e,1)}},i.prototype.appointmentFiltering=function(e,t){var r,n;!d(e)&&d(t)?(r=O(new Date(e.getTime())),n=$r(new Date(r.getTime()),Le)):(r=new Date(e.getTime()),n=new Date(t.getTime()));var s=this.parent.eventBase.filterEvents(r,n);return s.length===0&&(this.refreshEvent(e),s=this.parent.eventBase.filterEvents(r,n)),s},i.prototype.getStartDateFromEndDate=function(e){var t,r=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var n=Math.min.apply(Math,this.parent.eventsProcessed.map(function(s){return s[r.startTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(n):this.parent.minDate}else t=this.parent.hideEmptyAgendaDays?ze(e,-1):this.parent.minDate;return O(t)},i.prototype.getEndDateFromStartDate=function(e){var t,r=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var n=Math.max.apply(Math,this.parent.eventsProcessed.map(function(s){return s[r.endTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(n):this.parent.maxDate}else t=this.parent.hideEmptyAgendaDays?ze(e,1):this.parent.maxDate;return O(I(t,1))},i.prototype.getNextPreviousDate=function(e){var t=e==="Next"?1:-1;return I(this.parent.selectedDate,t)},i.prototype.startDate=function(){return O(this.parent.selectedDate)},i.prototype.endDate=function(){return this.parent.activeViewOptions.allowVirtualScrolling?this.getEndDateFromStartDate(this.startDate()):I(this.startDate(),this.parent.agendaDaysCount)},i.prototype.getDateRangeText=function(e){var t=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";if(this.parent.activeViewOptions.allowVirtualScrolling||this.parent.isAdaptive){var r=d(e)?this.parent.selectedDate:e;return ue(this.parent.globalize.formatDate(r,{format:t,calendar:this.parent.getCalendarMode()}),"multiple")}else{var n=this.parent.selectedDate,s=I(n,this.parent.agendaDaysCount-1);return this.formatDateRange(n,s)}},i.prototype.dayNavigationClick=function(e){var t=E(e.currentTarget,"."+$e),r=this.parent.getDateFromElement(t);!d(r)&&!this.parent.isAdaptive&&this.parent.isMinMaxDate(r)&&(this.parent.setProperties({selectedDate:r},!0),this.parent.changeView("Day",e))},i.prototype.wireEvents=function(){S.add(this.element.querySelector("."+$),In,this.agendaScrolling,this)},i.prototype.unWireEvents=function(){S.remove(this.element.querySelector("."+$),In,this.agendaScrolling);for(var e=[].slice.call(this.element.querySelectorAll(".e-m-date")),t=0,r=e;t<r.length;t++){var n=r[t];S.remove(n,"click",this.dayNavigationClick)}},i.prototype.addEventListener=function(){this.parent.on(nt,this.onAgendaScrollUiUpdate,this),this.parent.on(st,this.eventLoad,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(nt,this.onAgendaScrollUiUpdate),this.parent.off(st,this.eventLoad))},i.prototype.onAgendaScrollUiUpdate=function(){var e=this.getHeaderBarHeight();this.parent.headerModule&&(this.parent.activeViewOptions.allowVirtualScrolling?this.parent.headerModule.updateHeaderItems("add"):this.parent.headerModule.updateHeaderItems("remove"));var t=this.element.querySelector("."+$);this.parent.height!=="auto"&&(t.style.height=x(this.parent.element.offsetHeight-e))},i.prototype.scrollToDate=function(e){var t=new Date(+O(e));if(this.parent.activeViewOptions.allowVirtualScrolling)(!this.parent.hideEmptyAgendaDays||this.parent.getEvents(t,I(t,1),!0).length>0)&&this.parent.changeDate(t);else{var r=this.element.querySelector("."+$e+'[data-date="'+t.getTime()+'"]');r&&(this.getContentAreaElement().scrollTop=r.offsetTop)}},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.headerModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.headerModule.updateHeaderItems("remove"),o.prototype.destroy.call(this))},i}(Qs),ih=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),rh=function(o){ih(i,o);function i(e){var t=o.call(this,e)||this;return t.dayNameFormat="narrow",t.viewClass="e-month-agenda-view",t.monthAgendaDate=new Date(""+e.selectedDate),t}return i.prototype.getModuleName=function(){return"monthAgenda"},i.prototype.renderAppointmentContainer=function(){var e=this.getContentAreaElement(),t=b("div",{className:xn});e.appendChild(t);var r=b("div",{className:si});t.appendChild(r),this.appendAppContainer(r),this.setEventWrapperHeight()},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive?"narrow":"abbreviated"},i.prototype.updateSelectedCellClass=function(e){O(e.date).getTime()===O(new Date(""+this.parent.selectedDate)).getTime()&&e.className.push(Yo)},i.prototype.setEventWrapperHeight=function(){var e=(this.parent.headerModule?this.parent.headerModule.getHeaderElement().offsetHeight:0)+2,t=this.parent.element.querySelector("."+Rs);t&&(e+=t.offsetHeight);var r=this.getContentAreaElement().firstElementChild,n=this.element.querySelector("."+we),s=this.parent.element.offsetHeight-e-n.offsetHeight,a=this.parent.activeViewOptions.interval>1?Math.round(s*.8):r.offsetHeight,h=s-a,l=this.element.querySelector("."+xn),p=this.element.querySelector("."+si);this.parent.height!=="auto"&&(this.parent.activeViewOptions.interval>1&&(r.style.height=x(a),S.add(r,"scroll",this.onContentScroll,this)),l.style.height=p.style.height=x(h))},i.prototype.onDataReady=function(e){this.setEventWrapperHeight(),this.clearElements();var t=e.processedData;if(this.parent.uiStateValues.isGroupAdaptive){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];t=this.parent.eventBase.filterEventsByResource(r,t)}this.agendaBase=this.getAgendaBase(),this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(t);for(var n=0,s=0,a=this.renderDates;s<a.length;s++){var h=a[s],l=this.appointmentFiltering(h),p=this.element.querySelectorAll("."+_)[parseInt(n.toString(),10)];l.length>0&&(p.querySelector("."+Xi)||p.appendChild(b("div",{className:Xi})),h.getTime()===O(new Date(this.monthAgendaDate.getTime())).getTime()&&this.onEventRender(l,h)),n++}this.parent.notify(at,{})},i.prototype.onCellClick=function(e){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide();var t=this.appointmentFiltering(e.startTime);this.onEventRender(t,e.startTime),this.parent.notify(at,{}),this.monthAgendaDate=new Date(""+e.startTime),this.parent.setProperties({selectedDate:this.monthAgendaDate},!0)},i.prototype.onEventRender=function(e,t){this.agendaBase=this.getAgendaBase();var r=this.element.querySelector("."+si);if(ei(r),this.parent.activeViewOptions.group.resources.length===0||this.parent.uiStateValues.isGroupAdaptive)if(e.length>0){var n=b("div",{className:Ue});r.appendChild(this.agendaBase.createAgendaContentElement("data",e,n))}else this.appendAppContainer(r);else if(e.length>0){var s=this.createTableLayout(),a=s.querySelector("tbody");this.agendaBase.calculateResourceTableElement(a,1,t),s.appendChild(a),r.appendChild(s)}else this.appendAppContainer(r);this.agendaBase.wireEventActions()},i.prototype.appointmentFiltering=function(e){var t=O(new Date(e.getTime())),r=$r(new Date(t.getTime()),Le);return this.parent.eventBase.filterEvents(t,r)},i.prototype.clearElements=function(){for(var e=[].slice.call(this.element.querySelectorAll("."+Xi)),t=0,r=e;t<r.length;t++){var n=r[t];pe(n)}this.appendAppContainer(this.element.querySelector("."+si))},i.prototype.appendAppContainer=function(e){var t=b("div",{className:Ue});M([t],jr),t.innerHTML=this.parent.localeObj.getConstant("noEvents"),ei(e),e.appendChild(t)},i.prototype.getNextPreviousDate=function(e){var t=this.parent.selectedDate,r=e==="Next"?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval,n=ze(this.parent.selectedDate,r),s=e==="Next"?2:0,a=new Date(t.getFullYear(),t.getMonth()+s,0).getDate(),h=a>=this.monthAgendaDate.getDate()?this.monthAgendaDate.getDate():a;return this.monthAgendaDate=new Date(n.getFullYear(),n.getMonth(),h),this.monthAgendaDate},i.prototype.getAgendaBase=function(){return this.agendaBase||new Qs(this.parent)},i.prototype.destroy=function(){this.agendaBase&&(this.agendaBase.destroy(),this.agendaBase=null),o.prototype.destroy.call(this)},i}(Ni),ta=function(){function o(i,e){this.parent=i,this.renderDates=e}return o.prototype.groupByYear=function(i){for(var e={},t=0,r=i;t<r.length;t++){var n=r[t],s=n.getFullYear();e[parseInt(s.toString(),10)]=e[parseInt(s.toString(),10)]||[],e[parseInt(s.toString(),10)].push(n)}return e},o.prototype.groupByMonth=function(i){for(var e={},t=0,r=i;t<r.length;t++){var n=r[t],s=(n.getFullYear()-1970)*12+n.getMonth();e[parseInt(s.toString(),10)]=e[parseInt(s.toString(),10)]||[],e[parseInt(s.toString(),10)].push(n)}return e},o.prototype.groupByWeek=function(i){for(var e={},t=0,r=i;t<r.length;t++){var n=r[t],s=+new Date(1970,0,1),a=n.getTimezoneOffset()-new Date(1970,0,1).getTimezoneOffset(),h=Math.ceil(((+n-s-a*60*1e3)/Le+new Date(s).getDay()+1)/7);this.parent.activeViewOptions.firstDayOfWeek&&this.parent.activeViewOptions.firstDayOfWeek>new Date(+n).getDay()&&(h=h-1),e[parseInt(h.toString(),10)]=e[parseInt(h.toString(),10)]||[],e[parseInt(h.toString(),10)].push(n)}return e},o.prototype.generateSlots=function(i,e,t,r,n){for(var s=this,a=function(y,w){return s.parent.globalize.formatDate(y,{format:w,calendar:s.parent.getCalendarMode()})},h=[],l=Object.keys(i),p=0;p<l.length;p++){var u=i[l[parseInt(p.toString(),10)]],c=void 0;if(t.template){var f={date:u[0],type:n},g=this.parent.element.id+"_headerRowTemplate";c=[].slice.call(this.parent.templateParser(t.template)(f,this.parent,"template",g,!1))}else{var v=void 0;switch(t.option){case"Year":v='<span class="e-header-year">'+a(u[0],"y")+"</span>";break;case"Month":v='<span class="e-header-month">'+ue(a(u[0],"MMMM"),"single")+"</span>";break;case"Week":v='<span class="e-header-week">'+this.parent.getWeekNumberContent(u)+"</span>"}var m=b("div",{innerHTML:v});c=[].slice.call(m.childNodes)}h.push({date:u[0],type:n,className:[r],colSpan:u.length*e,template:c})}return h},o.prototype.generateColumnLevels=function(i,e){var t=[],r=this.parent.activeViewOptions.headerRows,n=1;r[r.length-1].option==="Hour"&&e.length>0&&(n=e.length/i.length);for(var s=[],a,h,l,p=0,u=r;p<u.length;p++){var c=u[p];switch(c.option){case"Year":a=this.groupByYear(this.renderDates),s=this.generateSlots(a,n,c,"e-header-year-cell","yearHeader"),t.push(s);break;case"Month":h=this.groupByMonth(this.renderDates),s=this.generateSlots(h,n,c,"e-header-month-cell","monthHeader"),t.push(s);break;case"Week":l=this.groupByWeek(this.renderDates),s=this.generateSlots(l,n,c,"e-header-week-cell","weekHeader"),t.push(s);break;case"Date":s=i,s=s.map(function(f){return f.colSpan=n,f}),t.push(s);break;case"Hour":e.length>0&&t.push(e);break}}return t},o}(),nh=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ia=function(o){nh(i,o);function i(e){var t=o.call(this,e)||this;return t.timelineAppointment=null,t.baseCssClass="e-timeline-view",t}return i.prototype.getModuleName=function(){return"timelineViews"},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+Jt)},i.prototype.scrollTopPanel=function(e){o.prototype.scrollTopPanel.call(this,e),this.scrollHeaderLabels(e)},i.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.workHours.start),t=this.isWorkDay(this.parent.selectedDate)&&this.parent.workHours.highlight&&!d(e)?new Date(+this.parent.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.selectedDate).setHours(0,0,0,0),r='[data-date="'+new Date(t).getTime().toString()+'"]',n=this.element.querySelector(r);n&&(this.getContentAreaElement().scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-n.offsetLeft-n.offsetWidth):n.offsetLeft)},i.prototype.scrollToHour=function(e,t){var r,n;if(t&&(n=this.parent.getIndexOfDate(this.renderDates,O(t)),n>=0&&(r=t,!d(e)))){var s=e.split(":");s.length===2&&(r=new Date(t.setHours(parseInt(s[0],10),parseInt(s[1],10),0)))}if(r=d(t)?this.parent.getStartEndTime(e):r,!d(r)){var a;d(e)||!this.parent.activeViewOptions.timeScale.enable?a=n*this.parent.getElementWidth(this.element.querySelector(".e-work-cells")):a=d(t)?this.getLeftFromDateTime(null,r):this.getLeftFromDateTime([n],r),this.getScrollableElement().scrollLeft=this.parent.enableRtl?-a:a}},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive);var r=[];if(this.parent.activeViewOptions.timeScale.enable&&(r=this.generateTimeSlots(e[e.length-1]),e.push(r)),this.parent.activeViewOptions.headerRows.length>0){var n=new ta(this.parent,this.renderDates);e=n.generateColumnLevels(t,r)}return e},i.prototype.generateTimeSlots=function(e){for(var t=this,r=function(v){return v.type=v.first?"majorSlot":"minorSlot",v.className=v.first?[Qt]:[Qt,js],v.workDays=t.parent.activeViewOptions.workDays,v},n=this.getTimeSlotRows(r),s=[],a=0,h=e;a<h.length;a++){var l=h[a];l.colSpan=n.length;for(var p=P([],n,null,!0),u=0,c=p;u<c.length;u++){var f=c[u],g=O(new Date(""+l.date));f.date=$r(g,Gt(f.date)),s.push(f)}}return s},i.prototype.changeCurrentTimePosition=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),r=this.element.querySelector("."+ve).offsetHeight,n=this.element.querySelector("."+we),s=this.element.querySelector("."+$);if(s.appendChild(b("div",{className:Ei,styles:(this.parent.enableRtl?"right":"left")+":"+x(t)+"; height:"+x(r)})),this.parent.virtualScrollModule){var a=this.parent.element.querySelector("."+Ei),h=this.parent.element.querySelector("."+$+" table");he(a,{transform:h.style.transform})}var l=b("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:kr});n.appendChild(l),l.style[this.parent.enableRtl?"right":"left"]=x(t-l.offsetWidth/2)}},i.prototype.getLeftFromDateTime=function(e,t){var r=this.getStartHour(),n=this.getEndHour(),s=0,a=(t.getHours()-r.getHours())*60+(t.getMinutes()-r.getMinutes()),h=qr(O(new Date(t.getTime())),r,n),l=(h.endHour.getTime()-h.startHour.getTime())/Ie,p=this.parent.activeViewOptions.timeScale.interval,u=0;if(r.getHours()===0&&r.getMinutes()===0&&n.getHours()===0&&n.getMinutes()===0?u=p:u=this.parent.activeViewOptions.timeScale.slotCount!==1?p:p>l?l:p,!d(e)&&e[0]!==0){var c=this.parent.activeView.colLevels.findIndex(function(v){return v[0].type==="dateHeader"});if(this.parent.activeView.colLevels[parseInt(c.toString(),10)]&&this.parent.activeView.colLevels[parseInt(c.toString(),10)][0].colSpan)s=e[0]*this.parent.activeView.colLevels[parseInt(c.toString(),10)][0].colSpan*this.parent.getElementWidth(this.element.querySelector(".e-work-cells"));else{var f=this.getEndHour(),g=f.getHours()===0?24:f.getHours();a=a+e[0]*((g-r.getHours())*60+(f.getMinutes()-r.getMinutes()))}}return s+a*this.parent.getElementWidth(this.element.querySelector(".e-work-cells"))*this.parent.activeViewOptions.timeScale.slotCount/u},i.prototype.renderHeader=function(){var e=b("tr");this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e);var t=b("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),ye([e],this.element.querySelector("tbody"))},i.prototype.createAllDayRow=function(e,t){},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,O(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},i.prototype.renderContent=function(){var e=b("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=b("td");t.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(t)}var r=b("td"),n=this.renderContentArea();n.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(n),r.appendChild(n),e.appendChild(r),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(n),this.element.querySelector("tbody").appendChild(e)},i.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.renderedResources.length:1},i.prototype.getResourceTdData=function(e,t){var r=this.parent.resourceBase.renderedResources[parseInt(e.toString(),10)],n=r.resourceData[r.resource.startHourField]||this.parent.workHours.start,s=r.resourceData[r.resource.endHourField]||this.parent.workHours.end;return t.startHour=this.parent.getStartEndTime(n),t.endHour=this.parent.getStartEndTime(s),t.workDays=r.resourceData[r.resource.workDaysField]||this.parent.workDays,t.className=r.className,t.groupIndex=r.groupIndex,t.groupOrder=r.groupOrder,t},i.prototype.renderContentTable=function(e){var t=e.querySelector("tbody");G(this.getContentRows(),t)},i.prototype.getContentRows=function(){for(var e=[],t=b("tr"),r=b("td"),n=this.getRowCount(),s=this.getGroupIndices(),a=0;a<n;a++)if(!(s.length>0&&s.indexOf(this.parent.resourceBase.renderedResources[parseInt(a.toString(),10)].groupIndex)>-1)){for(var h=t.cloneNode(),l=0,p=this.colLevels[this.colLevels.length-1];l<p.length;l++){var u=p[l];this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(u=this.getResourceTdData(a,u));var c=this.createContentTd(u,u,r);h.appendChild(c)}e.push(h)}return e},i.prototype.getContentTdClass=function(e){return e.first||!this.parent.activeViewOptions.timeScale.enable?[_]:[_,Ns]},i.prototype.renderEvents=function(){this.timelineAppointment=new Kt(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day"),this.timelineAppointment.renderAppointments(),this.parent.notify(at,{})},i.prototype.getAdjustedDate=function(e){if(this.parent.activeViewOptions.timeScale.enable){for(var t=this.colLevels[this.colLevels.length-1],r=0;r<t.length;r++)if(t[parseInt(r.toString(),10)].date.getTime()>e.getTime())return t[r-1].date}else return new Date(e.setHours(0,0,0,0));return null},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.timelineAppointment&&(this.timelineAppointment.destroy(),this.timelineAppointment=null),o.prototype.destroy.call(this))},i}(Vi),sh=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ra=function(o){sh(i,o);function i(e){var t=o.call(this,e)||this;return t.viewClass="e-timeline-month-view",t.isInverseTableSelect=!0,t.appointment=null,t}return i.prototype.getModuleName=function(){return"timelineMonth"},i.prototype.onDataReady=function(){this.appointment=new Kt(this.parent,"day"),this.appointment.renderAppointments(),this.parent.notify(at,{})},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+Jt)},i.prototype.scrollTopPanel=function(e){o.prototype.scrollTopPanel.call(this,e),this.scrollHeaderLabels(e)},i.prototype.setContentHeight=function(e,t,r){t&&(t.style.height=x(r-this.getScrollXIndent(e))),e.style.height=x(r)},i.prototype.getDateSlots=function(e,t){for(var r=[],n=0,s=e;n<s.length;n++){var a=s[n],h=[Me];this.isCurrentDate(a)&&h.push(Fi),r.push({date:a,type:"dateHeader",className:h,colSpan:1,workDays:t})}return r},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e)},i.prototype.renderContent=function(){var e=b("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=b("td");t.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(t)}var r=b("td");this.element.querySelector("tbody").appendChild(e);var n=b("div",{className:$});n.appendChild(this.renderContentArea()),n.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(n),S.add(n,"scroll",this.onContentScroll,this),r.appendChild(n),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(n),e.appendChild(r)},i.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.renderedResources.length:1},i.prototype.getContentSlots=function(){for(var e=[],t=0;t<this.getRowCount();t++)for(var r=0,n=this.colLevels[this.colLevels.length-1];r<n.length;r++){var s=n[r];if(s.className=[_],this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.resourceBase.renderedResources[parseInt(t.toString(),10)];s.workDays=a.resourceData[a.resource.workDaysField]||this.parent.workDays,s.className=s.className.concat(a.className),s.groupIndex=a.groupIndex,s.groupOrder=a.groupOrder}var h={date:new Date(+s.date),colSpan:s.colSpan,groupIndex:s.groupIndex,workDays:s.workDays,type:"monthCells",className:s.className};e[parseInt(t.toString(),10)]||(e[parseInt(t.toString(),10)]=[]),e[parseInt(t.toString(),10)].push(h)}return e},i.prototype.updateClassList=function(e){this.parent.isMinMaxDate(e.date)||e.className.push(Xe)},i.prototype.unWireEvents=function(){S.remove(this.getContentAreaElement(),"scroll",this.onContentScroll)},i.prototype.getMonthStart=function(e){var t=this.parent.calendarUtil.firstDateOfMonth(O(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.prototype.getMonthEnd=function(e){var t=this.parent.calendarUtil.firstDateOfMonth(O(e));return this.parent.calendarUtil.lastDateOfMonth(ze(new Date(+t),this.parent.activeViewOptions.interval-1))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive);var r=[];if(this.parent.activeViewOptions.headerRows.length>0){var n=new ta(this.parent,this.renderDates);e=n.generateColumnLevels(t,r)}return this.colLevels=e,e},i.prototype.getAdjustedDate=function(e){for(var t=this.colLevels[this.colLevels.length-1],r=0;r<t.length;r++)if(t[parseInt(r.toString(),10)].date.getTime()>e.getTime())return t[r-1].date;return null},i.prototype.destroy=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){if(this.element){var e=this.element.querySelector("."+$);e&&S.remove(e,"scroll",this.onContentScroll)}this.appointment&&(this.appointment.destroy(),this.appointment=null),o.prototype.destroy.call(this)}},i}(Ni),ah=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),na=function(o){ah(i,o);function i(e){var t=o.call(this,e)||this;return t.viewClass="e-timeline-year-view",t.isInverseTableSelect=!0,t}return i.prototype.getModuleName=function(){return"timelineYear"},i.prototype.renderHeader=function(e){var t=b("tr");if(e.appendChild(t),this.parent.activeViewOptions.orientation==="Vertical"&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)this.parent.resourceBase.renderResourceHeaderIndent(t);else{var r=b("td",{className:Ps});t.appendChild(r),r.appendChild(this.renderResourceHeader(Rr))}var n=this.parent.activeViewOptions.orientation==="Horizontal",s=this.parent.activeViewOptions.group.resources.length>0;this.isInverseTableSelect=!(n&&!s);var a=b("td");t.appendChild(a);var h=b("div",{className:ri});if(a.appendChild(h),this.parent.activeViewOptions.orientation==="Horizontal"&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)h.appendChild(this.renderResourceHeader(we)),this.columnCount=this.colLevels.slice(-1)[0].length;else{var l=b("div",{className:we});h.appendChild(l);var p=this.createTableLayout();l.appendChild(p),p.appendChild(this.createTableColGroup(this.columnCount));var u=b("tr");p.querySelector("tbody").appendChild(u);for(var c=this.getMonths(),f=this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(),c[0],1)),g=0;g<this.columnCount;g++){var v=new Date(this.parent.selectedDate.getFullYear(),c[parseInt(g.toString(),10)],1),m=b("td",{className:Me});this.parent.activeViewOptions.orientation==="Horizontal"?this.parent.dayHeaderTemplate?G(this.renderDayMonthHeaderTemplate(f[parseInt(g.toString(),10)],g,"dayHeaderTemplate"),m):m.innerHTML="<span>"+this.parent.getDayNames("abbreviated")[g%7]+"</span>":(this.parent.monthHeaderTemplate?G(this.renderDayMonthHeaderTemplate(v,c[parseInt(g.toString(),10)],"monthHeaderTemplate"),m):m.innerHTML="<span>"+this.getMonthName(v)+"</span>",m.setAttribute("data-date",v.getTime().toString())),u.appendChild(m),this.parent.trigger(de,{elementType:"headerCells",element:m})}}},i.prototype.renderResourceHeader=function(e){var t=b("div",{className:e}),r=this.createTableLayout();t.appendChild(r);var n=b("tr");if(this.parent.activeViewOptions.group.resources.length>0)this.colLevels=this.generateColumnLevels();else{var s=[{className:[Me],type:"headerCell"}];this.colLevels=[s]}for(var a=0,h=this.colLevels;a<h.length;a++){for(var l=h[a],p=n.cloneNode(),u=e===we?l:[l[0]],c=0,f=u;c<f.length;c++){var g=f[c],v=b("td");g.className&&M([v],g.className),e===we&&(g.template&&G(g.template,v),g.colSpan&&v.setAttribute("colspan",g.colSpan.toString()),g.groupIndex>-1&&v.setAttribute("data-group-index",g.groupIndex.toString()),this.setResourceHeaderContent(v,g)),e===Rr&&this.parent.renderHeaderIndentTemplate(g,v);var m={elementType:g.type,element:v,date:g.date,groupIndex:g.groupIndex};this.parent.trigger(de,m),p.appendChild(v)}r.querySelector("tbody").appendChild(p)}return e===we&&r.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length)),t},i.prototype.renderContent=function(e){var t=b("tr");e.appendChild(t);var r=b("td"),n=b("td"),s=[],a;if(this.parent.activeViewOptions.orientation==="Vertical"&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)s.push(r),r.appendChild(this.parent.resourceBase.createResourceColumn()),this.rowCount=this.parent.resourceBase.renderedResources.length;else{s.push(r);var h=b("div",{className:bt});r.appendChild(h),h.appendChild(this.createTableLayout()),a=h.querySelector("tbody")}s.push(n),G(s,t);var l=b("div",{className:$});n.appendChild(l);var p=this.createTableLayout(ve);this.setAriaAttributes(p),l.appendChild(p);var u=b("div",{className:Zt});l.appendChild(u),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(l);var c=p.querySelector("tbody");if(this.parent.rowAutoHeight){var f=[p],g=this.parent.element.querySelector("."+bt+" ."+Bs);g&&f.push(g),M(f,Hs)}if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var v=this.parent.activeViewOptions.orientation==="Horizontal"?this.colLevels.slice(-1)[0].length:this.columnCount;p.appendChild(this.createTableColGroup(v)),this.renderResourceContent(u,a,c)}else p.appendChild(this.createTableColGroup(this.columnCount)),this.renderDefaultContent(u,a,c)},i.prototype.renderDefaultContent=function(e,t,r){for(var n=this.getMonths(),s=this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(),n[0],1)),a=0;a<this.rowCount;a++){e.appendChild(b("div",{className:Ue}));var h=new Date(this.parent.selectedDate.getFullYear(),n[parseInt(a.toString(),10)],1),l=this.parent.calendarUtil.getMonthStartDate(new Date(h.getTime())),p=this.parent.calendarUtil.getMonthEndDate(new Date(h.getTime())),u=b("tr"),c=u.cloneNode();t.appendChild(c);var f=u.cloneNode();r.appendChild(f);var g=b("td",{className:yi});this.parent.activeViewOptions.orientation==="Horizontal"?(this.parent.monthHeaderTemplate?G(this.renderDayMonthHeaderTemplate(l,a,"monthHeaderTemplate"),g):g.innerHTML="<span>"+this.getMonthName(h)+"</span>",g.setAttribute("data-date",h.getTime().toString())):this.parent.dayHeaderTemplate?G(this.renderDayMonthHeaderTemplate(s[parseInt(a.toString(),10)],a,"dayHeaderTemplate"),g):g.innerHTML="<span>"+this.parent.getDayNames("abbreviated")[a%7]+"</span>",c.appendChild(g),this.parent.trigger(de,{elementType:"leftHeaderCells",element:g});for(var v=new Date(l.getTime()),m=0;m<this.columnCount;m++){var y=void 0;if(this.parent.activeViewOptions.orientation==="Vertical"){h=new Date(this.parent.selectedDate.getFullYear(),n[parseInt(m.toString(),10)],1),l=this.parent.calendarUtil.getMonthStartDate(new Date(h.getTime())),p=this.parent.calendarUtil.getMonthEndDate(new Date(h.getTime()));var w=a-l.getDay()+1;v=new Date(this.parent.selectedDate.getFullYear(),n[parseInt(m.toString(),10)],w),y=w>0&&v.getTime()<p.getTime()}else y=m>=l.getDay()&&v.getTime()<p.getTime();var C=this.parent.globalize.formatDate(v,{skeleton:"full",calendar:this.parent.getCalendarMode()}),T=b("td",{className:_,attrs:{"aria-label":C}});f.appendChild(T);var A=b("div",{className:Xt+" "+Vr,innerHTML:y?this.parent.globalize.formatDate(v,{skeleton:"d",calendar:this.parent.getCalendarMode()}):""});if(y){var L=[T],k=[];this.parent.activeViewOptions.workDays.indexOf(v.getDay())>-1&&k.push(Yt),this.parent.isMinMaxDate(v)||M([T],Xe),this.isCurrentDate(v)&&(k.push(Fi),this.parent.activeViewOptions.orientation==="Horizontal"?L.push(this.element.querySelector("."+Me+(":nth-child("+(m+1)+")"))):L.push(this.element.querySelectorAll("."+yi).item(a))),k.length>0&&M(L,k)}else M([T],Pe),this.parent.isMinMaxDate(v)||M([T],Xe);T.classList.contains(Pe)||(this.renderDates.push(new Date(v)),T.appendChild(A),y&&(T.setAttribute("data-date",v.getTime().toString()),this.wireEvents(T)),this.renderCellTemplate({date:v,type:"workCells"},T),this.parent.trigger(de,{elementType:"workCells",element:T,date:v}),y&&this.parent.activeViewOptions.orientation==="Horizontal"&&(v=I(new Date(v.getTime()),1)))}}this.renderDates.splice(0,1)},i.prototype.getContentRows=function(){for(var e=[],t=this.getMonths(),r=this.getGroupIndices(),n=0;n<this.parent.resourceBase.renderedResources.length;n++){var s=void 0;if(!(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(s=this.parent.resourceBase.renderedResources[parseInt(n.toString(),10)],r.length>0&&r.indexOf(s.groupIndex)>-1))){var a=b("tr");e.push(a);for(var h=new Date(this.parent.selectedDate.getFullYear(),t[parseInt(n.toString(),10)],1),l=this.parent.calendarUtil.getMonthStartDate(new Date(h.getTime())),p=0;p<this.columnCount;p++){var u=[],c=s.groupIndex;u=u.concat(s.className),u.indexOf(Di)>-1?u.push(Ai):u.push(Yt),h=new Date(this.parent.selectedDate.getFullYear(),t[parseInt(p.toString(),10)],1),l=this.parent.calendarUtil.getMonthStartDate(new Date(h.getTime()));var f=b("td",{className:_,attrs:{"aria-selected":"false","data-date":l.getTime().toString()}});M([f],u),f.setAttribute("data-group-index",c.toString()),this.renderCellTemplate({date:l,type:"resourceGroupCells",groupIndex:c},f),this.wireEvents(f),this.parent.trigger(de,{elementType:"resourceGroupCells",element:f,date:l}),a.appendChild(f)}}}return e},i.prototype.renderResourceContent=function(e,t,r){for(var n=this.getMonths(),s=0;s<this.rowCount;s++){e.appendChild(b("div",{className:Ue}));var a=b("tr");r.appendChild(a);var h=void 0;this.parent.activeViewOptions.orientation==="Vertical"&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(h=this.parent.resourceBase.renderedResources[parseInt(s.toString(),10)]);var l=new Date(this.parent.selectedDate.getFullYear(),n[parseInt(s.toString(),10)],1),p=this.parent.calendarUtil.getMonthStartDate(new Date(l.getTime()));if(this.parent.activeViewOptions.orientation==="Horizontal"){var u=a.cloneNode();t.appendChild(u);var c=b("td",{className:yi,attrs:{"data-date":p.getTime().toString()}});this.parent.monthHeaderTemplate?G(this.renderDayMonthHeaderTemplate(l,s,"monthHeaderTemplate"),c):c.innerHTML="<span>"+this.getMonthName(l)+"</span>",u.appendChild(c)}for(var f=0;f<this.columnCount;f++){var g=[],v=void 0;this.parent.activeViewOptions.orientation==="Vertical"?(v=h.groupIndex,g=g.concat(h.className),g.indexOf(Di)>-1?g.push(Ai):g.push(Yt),l=new Date(this.parent.selectedDate.getFullYear(),n[parseInt(f.toString(),10)],1),p=this.parent.calendarUtil.getMonthStartDate(new Date(l.getTime()))):(v=this.colLevels.slice(-1)[0][parseInt(f.toString(),10)].groupIndex,g.push(Yt));var m=this.parent.globalize.formatDate(p,{type:"dateTime",skeleton:"full",calendar:this.parent.getCalendarMode()}),y=this.parent.globalize.formatDate(this.parent.calendarUtil.getMonthEndDate(new Date(l.getTime())),{type:"dateTime",skeleton:"full",calendar:this.parent.getCalendarMode()}),w=b("td",{className:_,attrs:{"aria-selected":"false","data-date":p.getTime().toString(),"aria-label":m+" "+this.parent.localeObj.getConstant("endAt")+" "+y}});M([w],g),w.setAttribute("data-group-index",v.toString()),this.renderCellTemplate({date:p,type:"resourceGroupCells",groupIndex:v},w),this.wireEvents(w),a.appendChild(w),this.parent.trigger(de,{elementType:"resourceGroupCells",element:w,date:p})}}this.parent.activeViewOptions.orientation==="Vertical"&&this.collapseRows(this.parent.element.querySelector("."+$))},i.prototype.renderDayMonthHeaderTemplate=function(e,t,r){var n={date:e,type:r==="dayHeaderTemplate"?"dayHeader":"monthHeader"},s="schedule_"+this.parent.activeViewOptions.dayHeaderTemplateName+"dayHeaderTemplate",a="schedule_"+this.parent.activeViewOptions.dayHeaderTemplateName+"monthHeaderTemplate";return r==="dayHeaderTemplate"?(n.day=this.parent.getDayNames("wide")[t%7],[].slice.call(this.parent.getDayHeaderTemplate()(n,this.parent,"dayHeaderTemplate",s,!1,void 0,void 0,this.parent.root))):[].slice.call(this.parent.getMonthHeaderTemplate()(n,this.parent,"monthHeaderTemplate",a,!1,void 0,void 0,this.parent.root))},i.prototype.renderCellTemplate=function(e,t){if(!(!this.parent.activeViewOptions.cellTemplate||t.classList.contains(Pe))){var r={date:e.date,type:e.type};e.groupIndex&&(r.groupIndex=e.groupIndex);var n=this.parent.element.id+"_",s=this.parent.activeViewOptions.cellTemplateName,a=n+s+"cellTemplate",h=[].slice.call(this.parent.getCellTemplate()(r,this.parent,"cellTemplate",a,!1,void 0,void 0,this.parent.root));G(h,t)}},i.prototype.scrollToDate=function(e){var t;this.parent.activeViewOptions.group.resources!==null&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?t=+new Date(O(Nr(e))):t=+new Date(O(e));var r=this.element.querySelector('[data-date="'+t+'"]');if(r){var n=this.getScrollableElement();if(this.parent.enableRtl){var s=this.element.querySelector("."+ve);n.scrollLeft=-(s.offsetWidth-r.offsetLeft-r.offsetWidth)}else n.scrollLeft=r.offsetLeft;n.scrollTop=r.offsetTop}},i.prototype.getScrollableElement=function(){return this.parent.isAdaptive&&!this.isTimelineView()?this.element.querySelector("."+Br):this.getContentAreaElement()},i.prototype.wireEvents=function(e){S.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),S.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||S.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i}(Zr),oh=function(){function o(i){this.parent=i}return o.prototype.initializeCalendarExport=function(i,e){var t=this.getCalendarString(i,e);this.download(t,i)},o.prototype.getCalendarString=function(i,e){var t=this,r=e||P([],this.parent.eventsData,null,!0);r=this.parent.eventBase.sortByTime(r);var n=navigator.appVersion.indexOf("Win")!==-1?`\r
`:`
`,s=[],a=[],h=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),l=this.parent.eventFields;r.forEach(function(c){var f=c[l.id]||c.Guid||t.parent.eventBase.generateGuid(),g=[];if(c[l.recurrenceID]){var v=t.filterEvents(a,l.id,c[l.recurrenceID]);f=v.length>0?v[0].UID:f}if(!c[l.recurrenceID]&&c[l.recurrenceRule]&&c[l.recurrenceException]){var m=c[l.recurrenceException].split(","),y=t.filterEvents(r,l.recurrenceID,c[l.id]);y.forEach(function(F){g.push(Ur(F[l.startTime]))});var w=m.filter(function(F){return g.indexOf(F)===-1});c[l.recurrenceException]=w.length>0?w.join(",")+",":""}var C=c[l.startTimezone]||h,T=c[l.endTimezone]||h,A=c[l.isReadonly]?c[l.isReadonly]:!1,L=["BEGIN:VEVENT","LOCATION:"+(c[l.location]||""),"SUMMARY:"+(c[l.subject]||""),"UID:"+f,"DESCRIPTION:"+(c[l.description]||""),"ISREADONLY:"+A,"END:VEVENT"];if(c[l.isAllDay]?(L.splice(4,0,"DTEND;VALUE=DATE:"+t.convertDateToString(c[l.endTime],!0)),L.splice(4,0,"DTSTART;VALUE=DATE:"+t.convertDateToString(c[l.startTime],!0))):!c[l.isAllDay]&&!c[l.recurrenceRule]?(L.splice(4,0,"DTEND:"+t.convertDateToString(c[l.endTime])),L.splice(4,0,"DTSTART:"+t.convertDateToString(c[l.startTime]))):(L.splice(4,0,'DTEND;TZID="'+T+'":'+t.convertDateToString(c[l.endTime])),L.splice(4,0,'DTSTART;TZID="'+C+'":'+t.convertDateToString(c[l.startTime]))),c[l.recurrenceRule]&&L.splice(4,0,"RRULE:"+c[l.recurrenceRule]),c[l.recurrenceException])for(var m=c[l.recurrenceException].split(","),k=0;k<m.length-1;k++)L.splice(5,0,"EXDATE:"+t.convertDateToString($o(m[parseInt(k.toString(),10)]),c[l.isAllDay]));c[l.recurrenceID]&&L.splice(4,0,'RECURRENCE-ID;TZID="'+C+'":'+t.convertDateToString(c[l.startTime],c[l.isAllDay]));var R=t.customFieldFilter(c,l);R.length>0&&R.forEach(function(F){return L.splice(4,0,F+":"+(c[""+F]||""))});var N=P({},c);N.UID=f,a.push(N),s.push(L.join(n))});var p=["BEGIN:VCALENDAR","PRODID:-//Syncfusion Inc//Scheduler//EN","VERSION:2.0","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:"+(i||"Calendar"),"X-WR-TIMEZONE:"+h].join(n),u=p+n+s.join(n)+n+"END:VCALENDAR";return u},o.prototype.customFieldFilter=function(i,e){var t=Object.keys(e).map(function(n){return e[""+n]}),r=Object.keys(i);return r.filter(function(n){return t.indexOf(n)===-1&&n!=="Guid"})},o.prototype.convertDateToString=function(i,e){var t=("0000"+i.getFullYear().toString()).slice(-4),r=("00"+(i.getMonth()+1).toString()).slice(-2),n=("00"+i.getDate().toString()).slice(-2),s=("00"+i.getHours().toString()).slice(-2),a=("00"+i.getMinutes().toString()).slice(-2),h=("00"+i.getSeconds().toString()).slice(-2),l=e?t+r+n:t+r+n+"T"+s+a+h;return l},o.prototype.download=function(i,e){var t=new Blob([i],{type:"data:text/calendar;charset=utf8"});if(e=(e||"Calendar")+".ics",navigator.msSaveBlob)navigator.msSaveBlob(t,e);else{var r=document.createElementNS("http://www.w3.org/1999/xhtml","a");r.download=e,r.href=URL.createObjectURL(t);var n=document.createEvent("MouseEvent");n.initEvent("click",!0,!0),r.dispatchEvent(n),setTimeout(function(){URL.revokeObjectURL(r.href),r.href=void 0})}},o.prototype.filterEvents=function(i,e,t){return i.filter(function(r){return r[""+e]===t})},o.prototype.getModuleName=function(){return"iCalendarExport"},o.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.parent=null)},o}(),lh=function(){function o(i){this.allDay=!1,this.parent=i}return o.prototype.initializeCalendarImport=function(i){var e=this;if(i&&i instanceof Blob){var t=new FileReader;t.onload=function(){var r=t.result;e.iCalendarParser(r)},t.readAsText(i,"UTF-8")}else i&&typeof i=="string"&&this.iCalendarParser(i)},o.prototype.iCalendarParser=function(i){var e={isEvent:!1,curEvent:null,id:this.parent.eventBase.getEventMaxID(),count:0,events:[],key:null},t=i.length,r=i.search(/[^ \t]/),n=r,s,a;do{n=i.indexOf(`
`,r)+1,n===0?(n=t,a=0):n>1&&i[n-2]==="\r"?a=2:a=1;var h=i.charAt(r);h===" "||h===`
`||h==="	"?s+=i.slice(r+1,n-a):(s&&(e=this.updateEventData(s,e)),s=i.slice(r,n-a)),r=n}while(n!==t);s=s.trim(),s.length&&(e=this.updateEventData(s,e));var l=P([],e.events,null,!0);this.parent.addEvent(this.processOccurrence(l,e.id))},o.prototype.updateEventData=function(i,e){var t=this.parent.eventFields,r=`\r
`,n=e.id,s=e.events,a=e.isEvent,h=e.count,l=e.curEvent,p=e.key;if(!a&&i==="BEGIN:VEVENT"&&(a=!0,l={}),a&&i==="END:VEVENT"&&(a=!1,s.push(l),l=null),a){var u=i.indexOf(":"),c=i.substring(0,u).replace(/^\s\s*/,"").replace(/\s\s*$/,""),f=i.substring(u+1,i.length).replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(i.indexOf("SUMMARY")!==-1&&(c="SUMMARY"),i.indexOf("DTSTART")!==-1)l[t.startTime]=this.dateParsing(i),l[t.isAllDay]=this.allDay,this.allDay=!1;else if(i.indexOf("DTEND")!==-1)l[t.endTime]=this.dateParsing(i);else if(i.indexOf("EXDATE")!==-1)f=Ur(this.dateParsing(i)),l[t.recurrenceException]=d(l[t.recurrenceException])?f:l[t.recurrenceException]+","+f;else if(i.indexOf("RECURRENCE-ID")!==-1)f=Ur(this.dateParsing(i)),l[t.recurrenceException]=f,l[t.recurrenceID]=f;else switch(p=c||p,p){case"BEGIN":break;case"UID":l[""+c]=f,typeof n=="number"?(l[t.id]=parseInt(f,10),isNaN(l[t.id])&&(l[t.id]=n+h,h++)):l[t.id]=f;break;case"SUMMARY":l[t.subject]=this.getFormattedString(f);break;case"LOCATION":l[t.location]=this.getFormattedString(f);break;case"DESCRIPTION":l[t.description]?l[t.description]=this.getFormattedString(l[t.description]+r+f):l[t.description]=this.getFormattedString(f);break;case"ISREADONLY":l[t.isReadonly]=f.indexOf("true")>-1;break;case"RRULE":l[t.recurrenceRule]=f;break;default:if(this.parent.resourceCollection.length>0){var g=this.parent.resourceCollection.filter(function(v){return v.field===c});l[""+c]=g.length>0&&typeof g[0].dataSource[0][g[0].idField]=="number"?parseInt(f,10):f}else l[""+c]=f}}return{isEvent:a,curEvent:l,id:n,count:h,events:s,key:p}},o.prototype.processOccurrence=function(i,e){var t=this,r=[],n="UID",s=this.parent.eventFields,a=[];return this.parent.eventsData.forEach(function(h){a.push(h[s.id])}),i.forEach(function(h){var l,p;if(h.hasOwnProperty(s.recurrenceID)||(l=h,p=h[s.id]),a.indexOf(h[s.id])<0){var u=i.filter(function(g){return g.UID===h[""+n]});if(u.length>1&&d(h[s.recurrenceID])){p=typeof e=="number"?e++:p;for(var c=0;c<u.length;c++)if(u[parseInt(c.toString(),10)].hasOwnProperty(s.recurrenceID)){var f=u[parseInt(c.toString(),10)][s.recurrenceID];u[parseInt(c.toString(),10)][s.id]=typeof e=="number"?e++:t.parent.eventBase.generateGuid(),u[parseInt(c.toString(),10)][s.recurrenceID]=p,u[parseInt(c.toString(),10)][s.recurrenceException]=null,l[s.recurrenceException]=t.getExcludeDateString(l[s.recurrenceException],f),delete u[parseInt(c.toString(),10)][""+n],r.push(u[parseInt(c.toString(),10)])}delete l[""+n],l[s.id]=p,r.push(l)}else h.hasOwnProperty(s.recurrenceID)||(delete h[""+n],h[s.id]=typeof e=="number"?e++:p,r.push(h))}}),r},o.prototype.getExcludeDateString=function(i,e){if(d(i))return e;if(d(e))return i;var t=i.split(",").map(function(s){return s.split("T")[0]}),r=e.split(",").map(function(s){return s.split("T")[0]}),n=t.filter(function(s){return r.indexOf(s)>-1});return n.length>0?i:i+","+e},o.prototype.getFormattedString=function(i){return i=i||"",i.replace(/\\\,/g,",").replace(/\\\;/g,";").replace(/\\[nN]/g,`
`).replace(/\\\\/g,"\\")},o.prototype.dateParsing=function(i){var e=i.split(":"),t=e[e.length-1],r=new Date(this.getFormattedString(t));if(i&&(i.indexOf("VALUE=DATE")>-1||i.indexOf("RECURRENCE-ID;TZID")>-1)){var n=/^(\d{4})(\d{2})(\d{2})$/.exec(t);n!==null&&(r=new Date(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10))),i.indexOf("DTSTART")>-1&&(this.allDay=!0)}var s=/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})(Z)?$/.exec(t);return s!==null&&(s[7]==="Z"?r=new Date(Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),parseInt(s[6],10))):r=new Date(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),parseInt(s[6],10))),r},o.prototype.getModuleName=function(){return"iCalendarImport"},o.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed},o}(),Qe=function(){function o(){this.numFmtId=0,this.backColor="none",this.fontName="Calibri",this.fontSize=10.5,this.fontColor="#000000",this.italic=!1,this.bold=!1,this.underline=!1,this.strikeThrough=!1,this.wrapText=!1,this.hAlign="general",this.vAlign="bottom",this.indent=0,this.rotation=0,this.numberFormat="GENERAL",this.type="datetime",this.borders=new sa,this.isGlobalStyle=!1}return o}(),ss=function(){function o(){this.sz=10.5,this.name="Calibri",this.u=!1,this.b=!1,this.i=!1,this.color="FF000000",this.strike=!1}return o}(),hh=function(){function o(){}return o}(),ph=function(){function o(){}return o}(),ch=function(){function o(){}return o}(),as=function(){function o(){this.name="Normal",this.xfId=0}return o}(),os=function(){function o(i,e){this.numFmtId=i,this.formatCode=e}return o}(),Ut=function(){function o(i,e){this.lineStyle=i,this.color=e}return o}(),sa=function(){function o(){this.left=new Ut("none","#FFFFFF"),this.right=new Ut("none","#FFFFFF"),this.top=new Ut("none","#FFFFFF"),this.bottom=new Ut("none","#FFFFFF"),this.all=new Ut("none","#FFFFFF")}return o}(),uh=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ls=function(){function o(){}return o}(),hs=function(o){uh(i,o);function i(){var e=o!==null&&o.apply(this,arguments)||this;return e.add=function(t){for(var r=!1,n=0,s=0,a=e;s<a.length;s++){var h=a[s];h.index===t.index&&(e[n]=t,r=!0),n++}r||e.push(t)},e}return i}(Array),dh=function(){function o(){}return o}(),fh=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ps=function(){function o(){}return o}(),vh=function(o){fh(i,o);function i(){var e=o!==null&&o.apply(this,arguments)||this;return e.add=function(t){e.push(t)},e}return i}(Array),gh=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),mh=function(o){gh(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return i}(Array),yh=function(){var o=function(i,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},o(i,e)};return function(i,e){o(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),bh=function(){function o(){this.isSummaryRowBelow=!0,this.showGridLines=!0,this.enableRtl=!1}return o}(),cs=function(){function o(){}return o}(),wh=function(){function o(){}return o}(),Sh=function(){function o(){}return o}(),aa=function(){function o(){}return o}(),Ch=function(o){yh(i,o);function i(){var e=o!==null&&o.apply(this,arguments)||this;return e.add=function(t){for(var r=!1,n=0,s=0,a=e;s<a.length;s++){var h=a[s];if(i.isIntersecting(h,t)){var l=new aa;l.x=Math.min(h.x,t.x),l.y=Math.min(h.Y,t.y),l.width=Math.max(h.Width+h.X,t.width+t.x),l.height=Math.max(h.Height+h.Y,t.height+t.y),l.ref=e[n].ref.split(":")[0]+":"+t.ref.split(":")[1],e[n]=l,t=l,r=!0}n++}return r||e.push(t),t},e}return i.isIntersecting=function(e,t){return e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height},i}(Array),Th=function(){function o(){}return o}(),us=function(){function o(){}return o.save=function(i,e){if(i==null||i==="")throw new Error("ArgumentException: fileName cannot be undefined, null or empty");var t=i.substring(i.lastIndexOf(".")+1,i.length),r=this.getMimeType(t);if(r!==""&&(e=new Blob([e],{type:r})),this.isMicrosoftBrowser)navigator.msSaveBlob(e,i);else{var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");this.saveInternal(i,t,e,n,"download"in n)}},o.saveInternal=function(i,e,t,r,n){if(n){r.download=i;var s=window.URL.createObjectURL(t);r.href=s;var a=document.createEvent("MouseEvent");a.initEvent("click",!0,!0),r.dispatchEvent(a),setTimeout(function(){window.URL.revokeObjectURL(s),s=void 0})}else if(e!=="docx"&&e!=="xlsx"){var h=window.URL.createObjectURL(t),l=window.open(h,"_blank");l||(window.location.href=h)}else{var p=new FileReader;p.onloadend=function(){var u=window.open(p.result,"_blank");u||(window.location.href=p.result)},p.readAsDataURL(t)}},o.getMimeType=function(i){var e="";switch(i){case"html":e="text/html";break;case"pdf":e="application/pdf";break;case"docx":e="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case"xlsx":e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case"txt":e="text/plain";break}return e},o}(),oa=function(){function o(i){this.emitBOM=!0,this.encodingType="Ansi",this.initBOM(i)}return Object.defineProperty(o.prototype,"includeBom",{get:function(){return this.emitBOM},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){return this.encodingType},set:function(i){this.encodingType=i},enumerable:!0,configurable:!0}),o.prototype.initBOM=function(i){i==null?this.emitBOM=!0:this.emitBOM=i},o.prototype.getByteCount=function(i){if(vt(i,"string"),i===""){var e=this.utf8Len(i.charCodeAt(0));return e}return(this.type===null||this.type===void 0)&&(this.type="Ansi"),this.getByteCountInternal(i,0,i.length)},o.prototype.utf8Len=function(i){var e=i<=127?1:i<=2047?2:i<=65535?3:i<=2097151?4:0;return e},o.prototype.isHighSurrogate=function(i){return i>=55296&&i<=56319},o.prototype.toCodepoint=function(i,e){i=(1023&i)<<10;var t=i|1023&e;return t+65536},o.prototype.getByteCountInternal=function(i,e,t){var r=0;if(this.encodingType==="Utf8"||this.encodingType==="Unicode"){for(var n=this.encodingType==="Utf8",s=0;s<t;s++){var a=i.charCodeAt(n?e:e++);if(this.isHighSurrogate(a))if(n){var h=a,l=i.charCodeAt(++e);r+=this.utf8Len(this.toCodepoint(h,l))}else r+=4,++s;else n?r+=this.utf8Len(a):r+=2;n&&e++}return r}else return r=t,r},o.prototype.getBytes=function(i,e,t){if(vt(i,"string"),vt(e,"charIndex"),vt(t,"charCount"),e<0||t<0)throw new RangeError("Argument Out Of Range Exception: charIndex or charCount is less than zero");if(i.length-e<t)throw new RangeError("Argument Out Of Range Exception: charIndex and charCount do not denote a valid range in string");var r;if(i==="")return r=new ArrayBuffer(0),r;(this.type===null||this.type===void 0)&&(this.type="Ansi");var n=this.getByteCountInternal(i,e,t);switch(this.type){case"Utf8":return r=this.getBytesOfUtf8Encoding(n,i,e,t),r;case"Unicode":return r=this.getBytesOfUnicodeEncoding(n,i,e,t),r;default:return r=this.getBytesOfAnsiEncoding(n,i,e,t),r}},o.prototype.getString=function(i,e,t){if(vt(i,"bytes"),vt(e,"index"),vt(t,"count"),e<0||t<0)throw new RangeError("Argument Out Of Range Exception: index or count is less than zero");if(i.byteLength-e<t)throw new RangeError("Argument Out Of Range Exception: index and count do not denote a valid range in bytes");if(i.byteLength===0||t===0)return"";(this.type===null||this.type===void 0)&&(this.type="Ansi");var r="",n=new Uint8Array(i);switch(this.type){case"Utf8":var s=this.getStringOfUtf8Encoding(n,e,t);return s;case"Unicode":var a=new Uint16Array(i);return r=this.getStringofUnicodeEncoding(a,e,t),r;default:for(var h=e,l=0;l<t;l++){var p=n[h];r+=String.fromCharCode(p),h++}return r}},o.prototype.getBytesOfAnsiEncoding=function(i,e,t,r){for(var n=new ArrayBuffer(i),s=new Uint8Array(n),a=0,h=0;h<r;h++){var l=e.charCodeAt(t++);l<2048?s[a]=l:s[a]=63,a++}return n},o.prototype.getBytesOfUtf8Encoding=function(i,e,t,r){for(var n=new ArrayBuffer(i),s=new Uint8Array(n),a=t,h=0,l=0;l<r;l++){var p=e.charCodeAt(a);p<=127?s[h]=p:p<2048?(s[h]=192|p>>6,s[++h]=128|p&63):p<55296||p>=57344?(s[h]=224|p>>12,s[++h]=128|p>>6&63,s[++h]=128|p&63):(s[h]=239,s[++h]=191,s[++h]=189),++h,++a}return n},o.prototype.getBytesOfUnicodeEncoding=function(i,e,t,r){for(var n=new ArrayBuffer(i),s=new Uint16Array(n),a=0;a<r;a++){var h=e.charCodeAt(a);s[a]=h}return n},o.prototype.getStringOfUtf8Encoding=function(i,e,t){var r=0,n=e,s="";for(r;r<t;r++){for(var a=i[n++];n>i.length;)return s;a>127&&(a>191&&a<224&&n<t?a=(a&31)<<6|i[n]&63:a>223&&a<240&&n<i.byteLength?a=(a&15)<<12|(i[n]&63)<<6|i[++n]&63:a>239&&a<248&&n<i.byteLength&&(a=(a&7)<<18|(i[n]&63)<<12|(i[++n]&63)<<6|i[++n]&63),++n),s+=String.fromCharCode(a)}return s},o.prototype.getStringofUnicodeEncoding=function(i,e,t){if(t>i.length)throw new RangeError("ArgumentOutOfRange_Count");for(var r=new Uint16Array(t),n="",s=0;s<t&&s<i.length;s++)r[s]=i[e++];return n=String.fromCharCode.apply(null,r),n},o.prototype.destroy=function(){this.emitBOM=void 0,this.encodingType=void 0},o}();function vt(o,i){if(o==null)throw new Error("ArgumentException: "+i+" cannot be null or undefined")}var oe=function(){function o(){}return o.bitReverse=function(i){return o.reverseBits[i&15]<<12|o.reverseBits[i>>4&15]<<8|o.reverseBits[i>>8&15]<<4|o.reverseBits[i>>12]},o.bitConverterToInt32=function(i,e){return i[e]|i[e+1]<<8|i[e+2]<<16|i[e+3]<<24},o.bitConverterToInt16=function(i,e){return i[e]|i[e+1]<<8},o.bitConverterToUInt32=function(i){var e=new Uint32Array(1);return e[0]=i,e[0]},o.bitConverterToUInt16=function(i,e){var t=new Uint16Array(1);return t[0]=i[e]|i[e+1]<<8,t[0]},o.bitConverterUintToInt32=function(i){var e=new Int32Array(1);return e[0]=i,e[0]},o.bitConverterInt32ToUint=function(i){var e=new Uint32Array(1);return e[0]=i,e[0]},o.bitConverterInt32ToInt16=function(i){var e=new Int16Array(1);return e[0]=i,e[0]},o.byteToString=function(i){for(var e="",t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},o.byteIntToString=function(i){for(var e="",t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},o.arrayCopy=function(i,e,t,r,n){var s=new Uint8Array(i.buffer,e),a=s.subarray(0,n);t.set(a,r)},o.mergeArray=function(i,e){var t=new Uint8Array(i.length+e.length);return t.set(i),t.set(e,i.length),t},o.encodedString=function(i){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t,r,n,s,a,h,l,p=0,u=0;i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");var c=i.length*3/4;if(i.charAt(i.length-1)===e.charAt(64)&&c--,i.charAt(i.length-2)===e.charAt(64)&&c--,c%1!==0)throw new Error("Invalid base64 input, bad content length.");for(var f=new Uint8Array(c|0);p<i.length;)s=e.indexOf(i.charAt(p++)),a=e.indexOf(i.charAt(p++)),h=e.indexOf(i.charAt(p++)),l=e.indexOf(i.charAt(p++)),t=s<<2|a>>4,r=(a&15)<<4|h>>2,n=(h&3)<<6|l,f[u++]=t,h!==64&&(f[u++]=r),l!==64&&(f[u++]=n);return f},o.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],o.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],o}(),fi=[],zt=4,xt=2,Oh=101010256,Eh=12,Dh=33639248,vi=4096,me=function(){function o(){fi.length===0&&o.initCrc32Table(),this.files=[],this.level="Normal",us.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(o.prototype,"items",{get:function(){return this.files},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"compressionLevel",{get:function(){return this.level},set:function(i){this.level=i},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this.files===void 0?0:this.files.length},enumerable:!0,configurable:!0}),o.prototype.addItem=function(i){if(i==null)throw new Error("ArgumentException: item cannot be null or undefined");for(var e=0;e<this.files.length;e++){var t=this.files[e];if(t instanceof kt&&t.name===i.name)throw new Error("item with same name already exist")}this.files.push(i)},o.prototype.addDirectory=function(i){if(i==null)throw new Error("ArgumentException: string cannot be null or undefined");if(i.length===0)throw new Error("ArgumentException: string cannot be empty");if(i.slice(-1)!=="/"&&(i+="/"),this.files.indexOf(i)!==-1)throw new Error("item with same name already exist");this.files.push(i)},o.prototype.getItem=function(i){if(i>=0&&i<this.files.length)return this.files[i]},o.prototype.contains=function(i){return this.files.indexOf(i)!==-1},o.prototype.open=function(i){var e=oe.encodedString(i);if(e.length==0)throw new DOMException("stream");var t=new Ii(e),r=o.findValueFromEnd(t,Oh,65557);if(r<0)throw new DOMException("Can't locate end of central directory record. Possible wrong file format or archive is corrupt.");t.position=r+Eh;var n=o.ReadInt32(t),s=r-n;t.position=s,this.readCentralDirectoryDataAndExtractItems(t)},o.prototype.readCentralDirectoryDataAndExtractItems=function(i){if(i==null)throw new DOMException("stream");for(var e;o.ReadInt32(i)==Dh;)e=new Ah,e.readCentralDirectoryData(i);e.readData(i,e.checkCrc),e.decompressData(),this.files.push(new kt(e.unCompressedStream.buffer,e.name))},o.prototype.save=function(i){if(i==null||i.length===0)throw new Error("ArgumentException: fileName cannot be null or undefined");if(this.files.length===0)throw new Error("InvalidOperation");var e=this;return new Promise(function(t,r){e.saveInternal(i,!1).then(function(){t(e)})})},o.prototype.saveAsBlob=function(){var i=this;return new Promise(function(e,t){i.saveInternal("",!0).then(function(r){e(r)})})},o.prototype.saveInternal=function(i,e){var t=this,r=this;return new Promise(function(n,s){for(var a=[],h=0,l=0;l<r.files.length;l++){var p=t.getCompressedData(t.files[l]);p.then(function(u){if(h=r.constructZippedObject(a,u,h,u.isDirectory),a.length===r.files.length){var c=r.writeZippedContent(i,a,h,e);n(c)}})}})},o.prototype.destroy=function(){if(this.files!==void 0&&this.files.length>0){for(var i=0;i<this.files.length;i++){var e=this.files[i];e instanceof kt&&e.destroy(),e=void 0}this.files=[]}this.files=void 0,this.level=void 0},o.prototype.getCompressedData=function(i){var e=this,t=new Promise(function(r,n){if(i instanceof kt){var s=new FileReader;s.onload=function(){var h=new Uint8Array(s.result),l={fileName:i.name,crc32Value:0,compressedData:[],compressedSize:void 0,uncompressedDataSize:h.length,compressionType:void 0,isDirectory:!1};if(e.level==="Normal"){e.compressData(h,l,fi);for(var p=0,u=0;u<l.compressedData.length;u++)p+=l.compressedData[u].length;l.compressedSize=p,l.compressionType="\b\0"}else l.compressedSize=h.length,l.crc32Value=e.calculateCrc32Value(0,h,fi),l.compressionType="\0\0",l.compressedData.push(h);r(l)},s.readAsArrayBuffer(i.data)}else{var a={fileName:i,crc32Value:0,compressedData:"",compressedSize:0,uncompressedDataSize:0,compressionType:"\0\0",isDirectory:!0};r(a)}});return t},o.prototype.compressData=function(i,e,t){var r=new Ih(!0),n=0,s=0;do{if(n>=i.length){r.close();break}s=Math.min(i.length,n+16384);var a=i.subarray(n,s);e.crc32Value=this.calculateCrc32Value(e.crc32Value,a,t),r.write(a,0,s-n),n=s}while(n<=i.length);e.compressedData=r.compressedData,r.destroy()},o.prototype.constructZippedObject=function(i,e,t,r){var n=0,s=new Date;r&&(n=n|16),n=n|0;var a=this.writeHeader(e,s),h="PK"+a+e.fileName,l=this.writeCentralDirectory(e,a,t,n);return i.push({localHeader:h,centralDir:l,compressedData:e}),t+h.length+e.compressedSize},o.prototype.writeHeader=function(i,e){var t="";return t+=`
\0\0\0`,t+=i.compressionType,t+=this.getBytes(this.getModifiedTime(e),2),t+=this.getBytes(this.getModifiedDate(e),2),t+=this.getBytes(i.crc32Value,4),t+=this.getBytes(i.compressedSize,4),t+=this.getBytes(i.uncompressedDataSize,4),t+=this.getBytes(i.fileName.length,2),t+=this.getBytes(0,2),t},o.prototype.writeZippedContent=function(i,e,t,r){for(var n=0,s=[],a=0;a<e.length;a++){var h=e[a];for(n+=h.centralDir.length,s.push(this.getArrayBuffer(h.localHeader));h.compressedData.compressedData.length;)s.push(h.compressedData.compressedData.shift().buffer)}for(var a=0;a<e.length;a++)s.push(this.getArrayBuffer(e[a].centralDir));s.push(this.getArrayBuffer(this.writeFooter(e,n,t)));var l=new Blob(s,{type:"application/zip"});return r||us.save(i,l),l},o.prototype.writeCentralDirectory=function(i,e,t,r){var n="PK"+this.getBytes(20,2)+e+this.getBytes(0,2)+"\0\0\0\0"+this.getBytes(r,4)+this.getBytes(t,4)+i.fileName;return n},o.prototype.writeFooter=function(i,e,t){var r="PK\0\0\0\0"+this.getBytes(i.length,2)+this.getBytes(i.length,2)+this.getBytes(e,4)+this.getBytes(t,4)+this.getBytes(0,2);return r},o.prototype.getArrayBuffer=function(i){for(var e=new Uint8Array(i.length),t=0;t<i.length;++t)e[t]=i.charCodeAt(t)&255;return e.buffer},o.prototype.getBytes=function(i,e){for(var t="",r=0;r<e;r++)t+=String.fromCharCode(i&255),i=i>>>8;return t},o.prototype.getModifiedTime=function(i){var e=i.getHours();return e=e<<6,e=e|i.getMinutes(),e=e<<5,e=e|i.getSeconds()/2},o.prototype.getModifiedDate=function(i){var e=i.getFullYear()-1980;return e=e<<4,e=e|i.getMonth()+1,e=e<<5,e=e|i.getDate()},o.prototype.calculateCrc32Value=function(i,e,t){i^=-1;for(var r=0;r<e.length;r++)i=i>>>8^t[(i^e[r])&255];return i^-1},o.initCrc32Table=function(){for(var i,e=0;e<256;e++){i=e;for(var t=0;t<8;t++)i=i&1?3988292384^i>>>1:i>>>1;fi[e]=i}},o.findValueFromEnd=function(i,e,t){if(i==null)throw new DOMException("stream");var r=i.inputStream.buffer.byteLength;if(r<4)return-1;var n=new Uint8Array(4),s=Math.max(0,r-t),a=r-1-zt;i.position=a,i.read(n,0,zt);var h=n[0],l=h==e;if(!l){for(;a>s;)if(h<<=8,a--,i.position=a,h+=i.readByte(),h==e){l=!0;break}}return l?a:-1},o.ReadInt32=function(i){var e=new Uint8Array(zt);if(i.read(e,0,zt)!=zt)throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return oe.bitConverterToInt32(e,0)},o.ReadInt16=function(i){var e=new Uint8Array(xt);if(i.read(e,0,xt)!=xt)throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return oe.bitConverterToInt16(e,0)},o.ReadUInt16=function(i){{var e=new Uint8Array(xt);if(i.read(e,0,xt)!=xt)throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return oe.bitConverterToInt16(e,0)}},o}(),Ah=function(){function o(){this.headerSignature=67324752,this.checkCrc=!0,this.crc32=0}return o.prototype.readCentralDirectoryData=function(i){i.position+=4,this.options=me.ReadInt16(i),this.compressionMethod=me.ReadInt16(i),this.checkCrc=this.compressionMethod!=99,me.ReadInt32(i),this.crc32=oe.bitConverterToUInt32(me.ReadInt32(i)),this.compressedSize=me.ReadInt32(i),this.originalSize=me.ReadInt32(i);var e=me.ReadInt16(i),t=me.ReadInt16(i),r=me.ReadInt16(i);i.position+=4,this.externalAttributes=me.ReadInt32(i),this.localHeaderOffset=me.ReadInt32(i);var n=new Uint8Array(e);i.read(n,0,e);var s=oe.byteToString(n);s=s.replace("\\","/"),this.name=s,i.position+=t+r,this.options!=0&&(this.options=0)},o.prototype.readData=function(i,e){if(i.length==0)throw new DOMException("stream");i.position=this.localHeaderOffset,this.checkCrc=e,this.readLocalHeader(i),this.readCompressedData(i)},o.prototype.decompressData=function(){this.compressionMethod==8&&this.originalSize>0&&this.decompressDataOld()},o.prototype.decompressDataOld=function(){var i=new Lh(this.compressedStream,!0),e;this.originalSize>0&&(e=new Ii(new Uint8Array(this.originalSize)));for(var t=new Uint8Array(vi),r;(r=i.read(t,0,vi))>0;)e.write(t.subarray(0,r),0,r);this.unCompressedStream=e.toByteArray(),this.checkCrc},o.prototype.readLocalHeader=function(i){if(i.length==0)throw new DOMException("stream");if(me.ReadInt32(i)!=this.headerSignature)throw new DOMException("Can't find local header signature - wrong file format or file is corrupt.");i.position+=22;var e=me.ReadInt16(i),t=me.ReadUInt16(i);if(this.compressionMethod!=99)if(t>2){i.position+=e;var r=me.ReadInt16(i);if(r==23)throw new DOMException("UnSupported");i.position+=t-2}else i.position+=e+t},o.prototype.readCompressedData=function(i){var e;if(this.compressedSize>0){var t=this.compressedSize;e=new Ii(new Uint8Array(t));for(var r=new Uint8Array(vi);t>0;){var n=Math.min(t,vi);if(i.read(r,0,n)!=n)throw new DOMException("End of file reached - wrong file format or file is corrupt.");e.write(r.subarray(0,n),0,n),t-=n}this.compressedStream=new Uint8Array(e.inputStream)}else this.compressedSize<0||this.compressedSize==0},o}(),kt=function(){function o(i,e){if(i==null)throw new Error("ArgumentException: data cannot be null or undefined");if(e==null)throw new Error("ArgumentException: string cannot be null or undefined");if(e.length===0)throw new Error("string cannot be empty");this.data=i,this.name=e}return Object.defineProperty(o.prototype,"dataStream",{get:function(){return this.decompressedStream},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"name",{get:function(){return this.fileName},set:function(i){this.fileName=i},enumerable:!0,configurable:!0}),o.prototype.destroy=function(){this.fileName=void 0,this.data=void 0},o}(),qt=new Int16Array(286),Mt=new Uint8Array(286),ds=new Int16Array(30),ur=new Uint8Array(30),Ih=function(){function o(i){this.pendingBuffer=new Uint8Array(65536),this.pendingBufLength=0,this.pendingBufCache=0,this.pendingBufBitsInCache=0,this.bufferPosition=0,this.extraBits=0,this.currentHash=0,this.matchStart=0,this.matchLength=0,this.matchPrevAvail=!1,this.blockStart=0,this.stringStart=0,this.lookAhead=0,this.totalBytesIn=0,this.inputOffset=0,this.inputEnd=0,this.windowSize=32768,this.windowMask=this.windowSize-1,this.hashSize=32768,this.hashMask=this.hashSize-1,this.hashShift=Math.floor(17/3),this.maxDist=this.windowSize-262,this.checkSum=1,this.noWrap=!1,o.isHuffmanTreeInitiated||(o.initHuffmanTree(),o.isHuffmanTreeInitiated=!0),this.treeLiteral=new We(this,286,257,15),this.treeDistances=new We(this,30,1,15),this.treeCodeLengths=new We(this,19,4,7),this.arrDistances=new Uint16Array(16384),this.arrLiterals=new Uint8Array(16384),this.stream=[],this.dataWindow=new Uint8Array(2*this.windowSize),this.hashHead=new Int16Array(this.hashSize),this.hashPrevious=new Int16Array(this.windowSize),this.blockStart=this.stringStart=1,this.noWrap=i,i||this.writeZLibHeader()}return Object.defineProperty(o.prototype,"compressedData",{get:function(){return this.stream},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getCompressedString",{get:function(){var i="";if(this.stream!==void 0)for(var e=0;e<this.stream.length;e++)i+=String.fromCharCode.apply(null,this.stream[e]);return i},enumerable:!0,configurable:!0}),o.prototype.write=function(i,e,t){if(i==null)throw new Error("ArgumentException: data cannot null or undefined");var r=e+t;if(0>e||e>r||r>i.length)throw new Error("ArgumentOutOfRangeException: Offset or length is incorrect");if(typeof i=="string"){var n=new oa(!1);n.type="Utf8",i=new Uint8Array(n.getBytes(i,0,i.length)),r=e+i.length}for(this.inputBuffer=i,this.inputOffset=e,this.inputEnd=r,this.noWrap||(this.checkSum=xh.checksumUpdate(this.checkSum,this.inputBuffer,this.inputOffset,r));this.inputEnd!==this.inputOffset||this.pendingBufLength!==0;)this.pendingBufferFlush(),this.compressData(!1)},o.prototype.writeZLibHeader=function(){var i=30720;i|=64,i+=31-i%31,this.pendingBufferWriteShortBytes(i)},o.prototype.pendingBufferWriteShortBytes=function(i){this.pendingBuffer[this.pendingBufLength++]=i>>8,this.pendingBuffer[this.pendingBufLength++]=i},o.prototype.compressData=function(i){var e;do{this.fillWindow();var t=i&&this.inputEnd===this.inputOffset;e=this.compressSlow(t,i)}while(this.pendingBufLength===0&&e);return e},o.prototype.compressSlow=function(i,e){if(this.lookAhead<262&&!i)return!1;for(;this.lookAhead>=262||i;){if(this.lookAhead===0)return this.lookAheadCompleted(e);this.stringStart>=2*this.windowSize-262&&this.slideWindow();var t=this.matchStart,r=this.matchLength;if(this.lookAhead>=3&&this.discardMatch(),r>=3&&this.matchLength<=r?r=this.matchPreviousBest(t,r):this.matchPreviousAvailable(),this.bufferPosition>=16384)return this.huffmanIsFull(e)}return!0},o.prototype.discardMatch=function(){var i=this.insertString();i!==0&&this.stringStart-i<=this.maxDist&&this.findLongestMatch(i)&&this.matchLength<=5&&this.matchLength===3&&this.stringStart-this.matchStart>4096&&(this.matchLength=2)},o.prototype.matchPreviousAvailable=function(){this.matchPrevAvail&&this.huffmanTallyLit(this.dataWindow[this.stringStart-1]&255),this.matchPrevAvail=!0,this.stringStart++,this.lookAhead--},o.prototype.matchPreviousBest=function(i,e){this.huffmanTallyDist(this.stringStart-1-i,e),e-=2;do this.stringStart++,this.lookAhead--,this.lookAhead>=3&&this.insertString();while(--e>0);return this.stringStart++,this.lookAhead--,this.matchPrevAvail=!1,this.matchLength=2,e},o.prototype.lookAheadCompleted=function(i){return this.matchPrevAvail&&this.huffmanTallyLit(this.dataWindow[this.stringStart-1]&255),this.matchPrevAvail=!1,this.huffmanFlushBlock(this.dataWindow,this.blockStart,this.stringStart-this.blockStart,i),this.blockStart=this.stringStart,!1},o.prototype.huffmanIsFull=function(i){var e=this.stringStart-this.blockStart;this.matchPrevAvail&&e--;var t=i&&this.lookAhead===0&&!this.matchPrevAvail;return this.huffmanFlushBlock(this.dataWindow,this.blockStart,e,t),this.blockStart+=e,!t},o.prototype.fillWindow=function(){for(this.stringStart>=this.windowSize+this.maxDist&&this.slideWindow();this.lookAhead<262&&this.inputOffset<this.inputEnd;){var i=2*this.windowSize-this.lookAhead-this.stringStart;i>this.inputEnd-this.inputOffset&&(i=this.inputEnd-this.inputOffset),this.dataWindow.set(this.inputBuffer.subarray(this.inputOffset,this.inputOffset+i),this.stringStart+this.lookAhead),this.inputOffset+=i,this.totalBytesIn+=i,this.lookAhead+=i}this.lookAhead>=3&&this.updateHash()},o.prototype.slideWindow=function(){this.dataWindow.set(this.dataWindow.subarray(this.windowSize,this.windowSize+this.windowSize),0),this.matchStart-=this.windowSize,this.stringStart-=this.windowSize,this.blockStart-=this.windowSize;for(var i=0;i<this.hashSize;++i){var e=this.hashHead[i]&65535;this.hashHead[i]=e>=this.windowSize?e-this.windowSize:0}for(var i=0;i<this.windowSize;i++){var e=this.hashPrevious[i]&65535;this.hashPrevious[i]=e>=this.windowSize?e-this.windowSize:0}},o.prototype.insertString=function(){var i,e=(this.currentHash<<this.hashShift^this.dataWindow[this.stringStart+2])&this.hashMask;return this.hashPrevious[this.stringStart&this.windowMask]=i=this.hashHead[e],this.hashHead[e]=this.stringStart,this.currentHash=e,i&65535},o.prototype.findLongestMatch=function(i){var e=4096,t=258,r=this.stringStart,n,s=this.stringStart+this.matchLength,a=Math.max(this.matchLength,2),h=Math.max(this.stringStart-this.maxDist,0),l=this.stringStart+258-1,p=this.dataWindow[s-1],u=this.dataWindow[s],c=this.dataWindow;a>=32&&(e>>=2),t>this.lookAhead&&(t=this.lookAhead);do if(!(c[i+a]!==u||c[i+a-1]!==p||c[i]!==c[r]||c[i+1]!==c[r+1])){for(n=i+2,r+=2;c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&r<l;);if(r>s){if(this.matchStart=i,s=r,a=r-this.stringStart,a>=t)break;p=c[s-1],u=c[s]}r=this.stringStart}while((i=this.hashPrevious[i&this.windowMask]&65535)>h&&--e!==0);return this.matchLength=Math.min(a,this.lookAhead),this.matchLength>=3},o.prototype.updateHash=function(){this.currentHash=this.dataWindow[this.stringStart]<<this.hashShift^this.dataWindow[this.stringStart+1]},o.prototype.huffmanTallyLit=function(i){return this.arrDistances[this.bufferPosition]=0,this.arrLiterals[this.bufferPosition++]=i,this.treeLiteral.codeFrequencies[i]++,this.bufferPosition>=16384},o.prototype.huffmanTallyDist=function(i,e){this.arrDistances[this.bufferPosition]=i,this.arrLiterals[this.bufferPosition++]=e-3;var t=this.huffmanLengthCode(e-3);this.treeLiteral.codeFrequencies[t]++,t>=265&&t<285&&(this.extraBits+=Math.floor((t-261)/4));var r=this.huffmanDistanceCode(i-1);return this.treeDistances.codeFrequencies[r]++,r>=4&&(this.extraBits+=Math.floor(r/2-1)),this.bufferPosition>=16384},o.prototype.huffmanFlushBlock=function(i,e,t,r){this.treeLiteral.codeFrequencies[256]++,this.treeLiteral.buildTree(),this.treeDistances.buildTree(),this.treeLiteral.calculateBLFreq(this.treeCodeLengths),this.treeDistances.calculateBLFreq(this.treeCodeLengths),this.treeCodeLengths.buildTree();for(var n=4,s=18;s>n;s--)this.treeCodeLengths.codeLengths[We.huffCodeLengthOrders[s]]>0&&(n=s+1);for(var a=14+n*3+this.treeCodeLengths.getEncodedLength()+this.treeLiteral.getEncodedLength()+this.treeDistances.getEncodedLength()+this.extraBits,h=this.extraBits,s=0;s<286;s++)h+=this.treeLiteral.codeFrequencies[s]*Mt[s];for(var s=0;s<30;s++)h+=this.treeDistances.codeFrequencies[s]*ur[s];a>=h&&(a=h),e>=0&&t+4<a>>3?this.huffmanFlushStoredBlock(i,e,t,r):a==h?(this.pendingBufferWriteBits(2+(r?1:0),3),this.treeLiteral.setStaticCodes(qt,Mt),this.treeDistances.setStaticCodes(ds,ur),this.huffmanCompressBlock(),this.huffmanReset()):(this.pendingBufferWriteBits(4+(r?1:0),3),this.huffmanSendAllTrees(n),this.huffmanCompressBlock(),this.huffmanReset())},o.prototype.huffmanFlushStoredBlock=function(i,e,t,r){this.pendingBufferWriteBits(0+(r?1:0),3),this.pendingBufferAlignToByte(),this.pendingBufferWriteShort(t),this.pendingBufferWriteShort(~t),this.pendingBufferWriteByteBlock(i,e,t),this.huffmanReset()},o.prototype.huffmanLengthCode=function(i){if(i===255)return 285;for(var e=257;i>=8;)e+=4,i>>=1;return e+i},o.prototype.huffmanDistanceCode=function(i){for(var e=0;i>=4;)e+=2,i>>=1;return e+i},o.prototype.huffmanSendAllTrees=function(i){this.treeCodeLengths.buildCodes(),this.treeLiteral.buildCodes(),this.treeDistances.buildCodes(),this.pendingBufferWriteBits(this.treeLiteral.treeLength-257,5),this.pendingBufferWriteBits(this.treeDistances.treeLength-1,5),this.pendingBufferWriteBits(i-4,4);for(var e=0;e<i;e++)this.pendingBufferWriteBits(this.treeCodeLengths.codeLengths[We.huffCodeLengthOrders[e]],3);this.treeLiteral.writeTree(this.treeCodeLengths),this.treeDistances.writeTree(this.treeCodeLengths)},o.prototype.huffmanReset=function(){this.bufferPosition=0,this.extraBits=0,this.treeLiteral.reset(),this.treeDistances.reset(),this.treeCodeLengths.reset()},o.prototype.huffmanCompressBlock=function(){for(var i=0;i<this.bufferPosition;i++){var e=this.arrLiterals[i]&255,t=this.arrDistances[i];if(t--!==0){var r=this.huffmanLengthCode(e);this.treeLiteral.writeCodeToStream(r);var n=Math.floor((r-261)/4);n>0&&n<=5&&this.pendingBufferWriteBits(e&(1<<n)-1,n);var s=this.huffmanDistanceCode(t);this.treeDistances.writeCodeToStream(s),n=Math.floor(s/2-1),n>0&&this.pendingBufferWriteBits(t&(1<<n)-1,n)}else this.treeLiteral.writeCodeToStream(e)}this.treeLiteral.writeCodeToStream(256)},o.prototype.pendingBufferWriteBits=function(i,e){var t=new Uint32Array(1);t[0]=this.pendingBufCache|i<<this.pendingBufBitsInCache,this.pendingBufCache=t[0],this.pendingBufBitsInCache+=e,this.pendingBufferFlushBits()},o.prototype.pendingBufferFlush=function(i){if(this.pendingBufferFlushBits(),this.pendingBufLength>0){var e=new Uint8Array(this.pendingBufLength);e.set(this.pendingBuffer.subarray(0,this.pendingBufLength),0),this.stream.push(e)}this.pendingBufLength=0},o.prototype.pendingBufferFlushBits=function(){for(var i=0;this.pendingBufBitsInCache>=8&&this.pendingBufLength<65536;)this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache,this.pendingBufCache>>=8,this.pendingBufBitsInCache-=8,i++;return i},o.prototype.pendingBufferWriteByteBlock=function(i,e,t){var r=i.subarray(e,e+t);this.pendingBuffer.set(r,this.pendingBufLength),this.pendingBufLength+=t},o.prototype.pendingBufferWriteShort=function(i){this.pendingBuffer[this.pendingBufLength++]=i,this.pendingBuffer[this.pendingBufLength++]=i>>8},o.prototype.pendingBufferAlignToByte=function(){this.pendingBufBitsInCache>0&&(this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache),this.pendingBufCache=0,this.pendingBufBitsInCache=0},o.initHuffmanTree=function(){for(var i=0;i<144;)qt[i]=We.bitReverse(48+i<<8),Mt[i++]=8;for(;i<256;)qt[i]=We.bitReverse(256+i<<7),Mt[i++]=9;for(;i<280;)qt[i]=We.bitReverse(-256+i<<9),Mt[i++]=7;for(;i<286;)qt[i]=We.bitReverse(-88+i<<8),Mt[i++]=8;for(i=0;i<30;i++)ds[i]=We.bitReverse(i<<11),ur[i]=5},o.prototype.close=function(){do this.pendingBufferFlush(!0),this.compressData(!0)||(this.pendingBufferFlush(!0),this.pendingBufferAlignToByte(),this.noWrap||(this.pendingBufferWriteShortBytes(this.checkSum>>16),this.pendingBufferWriteShortBytes(this.checkSum&65535)),this.pendingBufferFlush(!0));while(this.inputEnd!==this.inputOffset||this.pendingBufLength!==0)},o.prototype.destroy=function(){this.stream=[],this.stream=void 0,this.pendingBuffer=void 0,this.treeLiteral=void 0,this.treeDistances=void 0,this.treeCodeLengths=void 0,this.arrLiterals=void 0,this.arrDistances=void 0,this.hashHead=void 0,this.hashPrevious=void 0,this.dataWindow=void 0,this.inputBuffer=void 0,this.pendingBufLength=void 0,this.pendingBufCache=void 0,this.pendingBufBitsInCache=void 0,this.bufferPosition=void 0,this.extraBits=void 0,this.currentHash=void 0,this.matchStart=void 0,this.matchLength=void 0,this.matchPrevAvail=void 0,this.blockStart=void 0,this.stringStart=void 0,this.lookAhead=void 0,this.totalBytesIn=void 0,this.inputOffset=void 0,this.inputEnd=void 0,this.windowSize=void 0,this.windowMask=void 0,this.hashSize=void 0,this.hashMask=void 0,this.hashShift=void 0,this.maxDist=void 0,this.checkSum=void 0,this.noWrap=void 0},o.isHuffmanTreeInitiated=!1,o}(),We=function(){function o(i,e,t,r){this.writer=i,this.codeMinCount=t,this.maxLength=r,this.codeFrequency=new Uint16Array(e),this.lengthCount=new Int32Array(r)}return Object.defineProperty(o.prototype,"treeLength",{get:function(){return this.codeCount},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"codeLengths",{get:function(){return this.codeLength},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"codeFrequencies",{get:function(){return this.codeFrequency},enumerable:!0,configurable:!0}),o.prototype.setStaticCodes=function(i,e){var t=new Int16Array(i.length);t.set(i,0),this.codes=t;var r=new Uint8Array(e.length);r.set(e,0),this.codeLength=r},o.prototype.reset=function(){for(var i=0;i<this.codeFrequency.length;i++)this.codeFrequency[i]=0;this.codes=void 0,this.codeLength=void 0},o.prototype.writeCodeToStream=function(i){this.writer.pendingBufferWriteBits(this.codes[i]&65535,this.codeLength[i])},o.prototype.buildCodes=function(){var i=new Int32Array(this.maxLength);this.codes=new Int16Array(this.codeCount);for(var e=0,t=0;t<this.maxLength;t++)i[t]=e,e+=this.lengthCount[t]<<15-t;for(var r=0;r<this.codeCount;r++){var n=this.codeLength[r];n>0&&(this.codes[r]=o.bitReverse(i[n-1]),i[n-1]+=1<<16-n)}},o.bitReverse=function(i){return o.reverseBits[i&15]<<12|o.reverseBits[i>>4&15]<<8|o.reverseBits[i>>8&15]<<4|o.reverseBits[i>>12]},o.prototype.getEncodedLength=function(){for(var i=0,e=0;e<this.codeFrequency.length;e++)i+=this.codeFrequency[e]*this.codeLength[e];return i},o.prototype.calculateBLFreq=function(i){for(var e,t,r,n=-1,s=0;s<this.codeCount;){r=1;var a=this.codeLength[s];for(a===0?(e=138,t=3):(e=6,t=3,n!==a&&(i.codeFrequency[a]++,r=0)),n=a,s++;s<this.codeCount&&n===this.codeLength[s]&&(s++,!(++r>=e)););r<t?i.codeFrequency[n]+=r:n!==0?i.codeFrequency[16]++:r<=10?i.codeFrequency[17]++:i.codeFrequency[18]++}},o.prototype.writeTree=function(i){for(var e,t,r,n=-1,s=0;s<this.codeCount;){r=1;var a=this.codeLength[s];for(a===0?(e=138,t=3):(e=6,t=3,n!==a&&(i.writeCodeToStream(a),r=0)),n=a,s++;s<this.codeCount&&n===this.codeLength[s]&&(s++,!(++r>=e)););if(r<t)for(;r-- >0;)i.writeCodeToStream(n);else n!==0?(i.writeCodeToStream(16),this.writer.pendingBufferWriteBits(r-3,2)):r<=10?(i.writeCodeToStream(17),this.writer.pendingBufferWriteBits(r-3,3)):(i.writeCodeToStream(18),this.writer.pendingBufferWriteBits(r-11,7))}},o.prototype.buildTree=function(){for(var i=this.codeFrequency.length,e=new Int32Array(i),t=0,r=0,n=0;n<i;n++){var s=this.codeFrequency[n];if(s!==0){for(var a=t++,h=0;a>0&&this.codeFrequency[e[h=Math.floor((a-1)/2)]]>s;)e[a]=e[h],a=h;e[a]=n,r=n}}for(;t<2;)e[t++]=r<2?++r:0;this.codeCount=Math.max(r+1,this.codeMinCount);for(var l=t,p=l,u=new Int32Array(4*t-2),c=new Int32Array(2*t-1),f=0;f<t;f++){var g=e[f],v=2*f;u[v]=g,u[v+1]=-1,c[f]=this.codeFrequency[g]<<8,e[f]=f}this.constructHuffmanTree(e,t,c,p,u),this.buildLength(u)},o.prototype.constructHuffmanTree=function(i,e,t,r,n){do{for(var s=i[0],a=i[--e],h=t[a],l=0,p=1;p<e;)p+1<e&&t[i[p]]>t[i[p+1]]&&p++,i[l]=i[p],l=p,p=l*2+1;for(;(p=l)>0&&t[i[l=Math.floor((p-1)/2)]]>h;)i[p]=i[l];i[p]=a;var u=i[0];a=r++,n[2*a]=s,n[2*a+1]=u;var c=Math.min(t[s]&255,t[u]&255);for(t[a]=h=t[s]+t[u]-c+1,l=0,p=1;p<e;)p+1<e&&t[i[p]]>t[i[p+1]]&&p++,i[l]=i[p],l=p,p=l*2+1;for(;(p=l)>0&&t[i[l=Math.floor((p-1)/2)]]>h;)i[p]=i[l];i[p]=a}while(e>1)},o.prototype.buildLength=function(i){this.codeLength=new Uint8Array(this.codeFrequency.length);for(var e=Math.floor(i.length/2),t=Math.floor((e+1)/2),r=0,n=0;n<this.maxLength;n++)this.lengthCount[n]=0;if(r=this.calculateOptimalCodeLength(i,r,e),r!==0){var s=this.maxLength-1;do{for(;this.lengthCount[--s]===0;);do this.lengthCount[s]--,this.lengthCount[++s]++,r-=1<<this.maxLength-1-s;while(r>0&&s<this.maxLength-1)}while(r>0);this.recreateTree(i,r,t)}},o.prototype.recreateTree=function(i,e,t){this.lengthCount[this.maxLength-1]+=e,this.lengthCount[this.maxLength-2]-=e;for(var r=2*t,n=this.maxLength;n!==0;n--)for(var s=this.lengthCount[n-1];s>0;){var a=2*i[r++];i[a+1]===-1&&(this.codeLength[i[a]]=n,s--)}},o.prototype.calculateOptimalCodeLength=function(i,e,t){var r=new Int32Array(t);r[t-1]=0;for(var n=t-1;n>=0;n--){var s=2*n+1;if(i[s]!==-1){var a=r[n]+1;a>this.maxLength&&(a=this.maxLength,e++),r[i[s-1]]=r[i[s]]=a}else{var a=r[n];this.lengthCount[a-1]++,this.codeLength[i[s-1]]=r[n]}}return e},o.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],o.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],o}(),xh=function(){function o(){}return o.checksumUpdate=function(i,e,t,r){var n=new Uint32Array(1);n[0]=i;for(var s=n[0],a=n[0]=s&65535,h=n[0]=s>>o.checkSumBitOffset;r>0;){var l=Math.min(r,o.checksumIterationCount);for(r-=l;--l>=0;)a=a+(n[0]=e[t++]&255),h=h+a;a%=o.checksumBase,h%=o.checksumBase}return s=h<<o.checkSumBitOffset|a,s},o.checkSumBitOffset=16,o.checksumBase=65521,o.checksumIterationCount=3800,o}(),Lt=function(){function o(i){this.buildTree(i)}return o.init=function(){var i,e;for(i=new Uint8Array(288),e=0;e<144;)i[e++]=8;for(;e<256;)i[e++]=9;for(;e<280;)i[e++]=7;for(;e<288;)i[e++]=8;for(o.m_LengthTree=new o(i),i=new Uint8Array(32),e=0;e<32;)i[e++]=5;o.m_DistanceTree=new o(i)},o.prototype.prepareData=function(i,e,t){for(var r=0,n=512,s=0;s<t.length;s++){var a=t[s];a>0&&i[a]++}for(var h=1;h<=o.MAX_BITLEN;h++)if(e[h]=r,r+=i[h]<<16-h,h>=10){var l=e[h]&130944,p=r&130944;n+=p-l>>16-h}return{code:r,treeSize:n}},o.prototype.treeFromData=function(i,e,t,r,n){for(var s=new Int16Array(n),a=512,h=128,l=o.MAX_BITLEN;l>=10;l--){var p=r&130944;r-=i[l]<<16-l;for(var u=r&130944,c=u;c<p;c+=h)s[oe.bitReverse(c)]=oe.bitConverterInt32ToInt16(-a<<4|l),a+=1<<l-9}for(var c=0;c<t.length;c++){var l=t[c];if(l!=0){r=e[l];var f=oe.bitReverse(r);if(l<=9)do s[f]=oe.bitConverterInt32ToInt16(c<<4|l),f+=1<<l;while(f<512);else{var g=s[f&511],v=1<<(g&15);g=-(g>>4);do s[g|f>>9]=oe.bitConverterInt32ToInt16(c<<4|l),f+=1<<l;while(f<v)}e[l]=r+(1<<16-l)}}return s},o.prototype.buildTree=function(i){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=this.prepareData(e,t,i);this.m_Tree=this.treeFromData(e,t,i,r.code,r.treeSize)},o.prototype.unpackSymbol=function(i){var e,t;if((e=i.peekBits(9))>=0){if((t=this.m_Tree[e])>=0)return i.skipBits(t&15),t>>4;var r=-(t>>4),n=t&15;if((e=i.peekBits(n))>=0)return t=this.m_Tree[r|e>>9],i.skipBits(t&15),t>>4;var s=i.availableBits;return e=i.peekBits(s),t=this.m_Tree[r|e>>9],(t&15)<=s?(i.skipBits(t&15),t>>4):-1}else{var s=i.availableBits;return e=i.peekBits(s),t=this.m_Tree[e],t>=0&&(t&15)<=s?(i.skipBits(t&15),t>>4):-1}},Object.defineProperty(o,"lengthTree",{get:function(){return this.m_LengthTree},enumerable:!0,configurable:!0}),Object.defineProperty(o,"distanceTree",{get:function(){return this.m_DistanceTree},enumerable:!0,configurable:!0}),o.MAX_BITLEN=15,o}(),Mh=function(){function o(){}return o.ChecksumUpdate=function(i,e,t,r){for(var n=i,s=n&65535,a=n>>this.DEF_CHECKSUM_BIT_OFFSET;r>0;){var h=Math.min(r,this.DEF_CHECKSUM_ITERATIONSCOUNT);for(r-=h;--h>=0;)s=s+(e[t++]&255),a=a+s;s%=this.DEF_CHECKSUM_BASE,a%=this.DEF_CHECKSUM_BASE}n=a<<this.DEF_CHECKSUM_BIT_OFFSET|s,i=n},o.ChecksumGenerate=function(i,e,t){var r=1;return o.ChecksumUpdate(r,i,e,t),r},o.DEF_CHECKSUM_BIT_OFFSET=16,o.DEF_CHECKSUM_BASE=65521,o.DEF_CHECKSUM_ITERATIONSCOUNT=3800,o}(),Lh=function(){function o(i,e){if(this.defaultHuffmanDynamicTree=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],this.DEF_HEADER_METHOD_MASK=3840,this.DEF_HEADER_INFO_MASK=61440,this.DEF_HEADER_FLAGS_FCHECK=31,this.DEF_HEADER_FLAGS_FDICT=32,this.DEF_HEADER_FLAGS_FLEVEL=192,this.DEF_MAX_WINDOW_SIZE=65535,this.DEF_HUFFMAN_REPEATE_MAX=258,this.DEF_HUFFMAN_END_BLOCK=256,this.DEF_HUFFMAN_LENGTH_MINIMUMCODE=257,this.DEF_HUFFMAN_LENGTH_MAXIMUMCODE=285,this.DEF_HUFFMAN_DISTANCE_MAXIMUMCODE=29,this.mCheckSum=1,this.tBuffer=0,this.mBufferedBits=0,this.mTempBuffer=new Uint8Array(4),this.mBlockBuffer=new Uint8Array(this.DEF_MAX_WINDOW_SIZE),this.mbNoWrap=!1,this.mWindowSize=0,this.mCurrentPosition=0,this.mDataLength=0,this.mbCanReadNextBlock=!0,this.mbCanReadMoreData=!0,this.mbCheckSumRead=!1,i==null)throw new DOMException("stream");if(i.length===0)throw new DOMException("stream - string can not be empty");Lt.init(),this.mInputStream=new Ii(i),this.mbNoWrap=e,this.mbNoWrap||this.readZLibHeader(),this.decodeBlockHeader()}return Object.defineProperty(o.prototype,"mBuffer",{get:function(){return this.tBuffer},set:function(i){this.tBuffer=i},enumerable:!0,configurable:!0}),o.prototype.peekBits=function(i){if(i<0)throw new DOMException("count","Bits count can not be less than zero.");if(i>32)throw new DOMException("count","Count of bits is too large.");if(this.mBufferedBits<i&&this.fillBuffer(),this.mBufferedBits<i)return-1;var e=~(4294967295<<i),t=oe.bitConverterUintToInt32(this.mBuffer&e);return t},o.prototype.fillBuffer=function(){var i=4-(this.mBufferedBits>>3)-(this.mBufferedBits&7?1:0);if(i!==0)for(var e=this.mInputStream.read(this.mTempBuffer,0,i),t=0;t<e;t++)this.mBuffer=oe.bitConverterInt32ToUint(this.mBuffer|oe.bitConverterInt32ToUint(this.mTempBuffer[t]<<this.mBufferedBits)),this.mBufferedBits+=8},o.prototype.skipBits=function(i){if(i<0)throw new DOMException("count","Bits count can not be less than zero.");i!==0&&(i>=this.mBufferedBits?(i-=this.mBufferedBits,this.mBufferedBits=0,this.mBuffer=0,i>0&&(this.mInputStream.position+=i>>3,i&=7,i>0&&(this.fillBuffer(),this.mBufferedBits-=i,this.mBuffer=oe.bitConverterInt32ToUint(this.mBuffer>>>i)))):(this.mBufferedBits-=i,this.mBuffer=oe.bitConverterInt32ToUint(this.mBuffer>>>i)))},Object.defineProperty(o.prototype,"availableBits",{get:function(){return this.mBufferedBits},enumerable:!0,configurable:!0}),o.prototype.readZLibHeader=function(){var i=this.readInt16();if(i===-1)throw new DOMException("Header of the stream can not be read.");if(i%31!==0)throw new DOMException("Header checksum illegal");if((i&this.DEF_HEADER_METHOD_MASK)!==2048)throw new DOMException("Unsupported compression method.");if(this.mWindowSize=Math.pow(2,((i&this.DEF_HEADER_INFO_MASK)>>12)+8),this.mWindowSize>65535)throw new DOMException("Unsupported window size for deflate compression method.");if((i&this.DEF_HEADER_FLAGS_FDICT)>>5===1)throw new DOMException("Custom dictionary is not supported at the moment.")},o.prototype.readInt16=function(){var i=this.readBits(8)<<8;return i|=this.readBits(8),i},o.prototype.readBits=function(i){var e=this.peekBits(i);return e===-1?-1:(this.mBufferedBits-=i,this.mBuffer=oe.bitConverterInt32ToUint(this.mBuffer>>>i),e)},o.prototype.decodeBlockHeader=function(){if(!this.mbCanReadNextBlock)return!1;var i=this.readBits(1);if(i===-1)return!1;var e=this.readBits(2);if(e===-1)return!1;switch(this.mbCanReadNextBlock=i===0,e){case 0:this.mbReadingUncompressed=!0,this.skipToBoundary();var t=this.readInt16Inverted(),r=this.readInt16Inverted();if(t!==(r^65535))throw new DOMException("Wrong block length.");if(t>65535)throw new DOMException("Uncompressed block length can not be more than 65535.");this.mUncompressedDataLength=t,this.mCurrentLengthTree=null,this.mCurrentDistanceTree=null;break;case 1:this.mbReadingUncompressed=!1,this.mUncompressedDataLength=-1,this.mCurrentLengthTree=Lt.lengthTree,this.mCurrentDistanceTree=Lt.distanceTree;break;case 2:this.mbReadingUncompressed=!1,this.mUncompressedDataLength=-1;var n=this.decodeDynamicHeader(this.mCurrentLengthTree,this.mCurrentDistanceTree);this.mCurrentLengthTree=n.lengthTree,this.mCurrentDistanceTree=n.distanceTree;break;default:throw new DOMException("Wrong block type.")}return!0},o.prototype.skipToBoundary=function(){this.mBuffer=oe.bitConverterInt32ToUint(this.mBuffer>>>(this.mBufferedBits&7)),this.mBufferedBits&=-8},o.prototype.readInt16Inverted=function(){var i=this.readBits(8);return i|=this.readBits(8)<<8,i},o.prototype.decodeDynamicHeader=function(i,e){var t=0,r=this.readBits(5),n=this.readBits(5),s=this.readBits(4);if(r<0||n<0||s<0)throw new DOMException("Wrong dynamic huffman codes.");r+=257,n+=1;var a=r+n,h=new Uint8Array(a),l=new Uint8Array(19);s+=4;for(var p=0;p<s;){var u=this.readBits(3);if(u<0)throw new DOMException("Wrong dynamic huffman codes.");l[this.defaultHuffmanDynamicTree[p++]]=u}var c=new Lt(l);for(p=0;;){var f=void 0,g=!1;for(f=c.unpackSymbol(this);!(f&-16);){if(h[p++]=t=f,p===a){g=!0;break}f=c.unpackSymbol(this)}if(g)break;if(f<0)throw new DOMException("Wrong dynamic huffman codes.");if(f>=17)t=0;else if(p===0)throw new DOMException("Wrong dynamic huffman codes.");var v=f-16,m=o.DEF_HUFFMAN_DYNTREE_REPEAT_BITS[v],y=this.readBits(m);if(y<0)throw new DOMException("Wrong dynamic huffman codes.");if(y+=o.DEF_HUFFMAN_DYNTREE_REPEAT_MINIMUMS[v],p+y>a)throw new DOMException("Wrong dynamic huffman codes.");for(;y-- >0;)h[p++]=t;if(p===a)break}var w=new Uint8Array(r);return w.set(h.subarray(0,r),0),i=new Lt(w),w=h.slice(r,r+n),e=new Lt(w),{lengthTree:i,distanceTree:e}},o.prototype.readHuffman=function(){for(var i=this.DEF_MAX_WINDOW_SIZE-(this.mDataLength-this.mCurrentPosition),e=!1,t={};i>=this.DEF_HUFFMAN_REPEATE_MAX;){var r=void 0;for(r=this.mCurrentLengthTree.unpackSymbol(this);!(r&-256);){if(t[(this.mDataLength+1)%this.DEF_MAX_WINDOW_SIZE]=r,this.mBlockBuffer[this.mDataLength++%this.DEF_MAX_WINDOW_SIZE]=r,e=!0,--i<this.DEF_HUFFMAN_REPEATE_MAX)return!0;r=this.mCurrentLengthTree.unpackSymbol(this)}if(r<this.DEF_HUFFMAN_LENGTH_MINIMUMCODE){if(r<this.DEF_HUFFMAN_END_BLOCK)throw new DOMException("Illegal code.");var n=e?1:0;this.mbCanReadMoreData=this.decodeBlockHeader();var s=this.mbCanReadMoreData?1:0;return!!(n|s)}if(r>this.DEF_HUFFMAN_LENGTH_MAXIMUMCODE)throw new DOMException("Illegal repeat code length.");var a=o.DEF_HUFFMAN_REPEAT_LENGTH_BASE[r-this.DEF_HUFFMAN_LENGTH_MINIMUMCODE],h=o.DEF_HUFFMAN_REPEAT_LENGTH_EXTENSION[r-this.DEF_HUFFMAN_LENGTH_MINIMUMCODE];if(h>0){var l=this.readBits(h);if(l<0)throw new DOMException("Wrong data.");a+=l}if(r=this.mCurrentDistanceTree.unpackSymbol(this),r<0||r>o.DEF_HUFFMAN_REPEAT_DISTANCE_BASE.length)throw new DOMException("Wrong distance code.");var p=o.DEF_HUFFMAN_REPEAT_DISTANCE_BASE[r];if(h=o.DEF_HUFFMAN_REPEAT_DISTANCE_EXTENSION[r],h>0){var l=this.readBits(h);if(l<0)throw new DOMException("Wrong data.");p+=l}for(var u=0;u<a;u++)this.mBlockBuffer[this.mDataLength%this.DEF_MAX_WINDOW_SIZE]=this.mBlockBuffer[(this.mDataLength-p)%this.DEF_MAX_WINDOW_SIZE],this.mDataLength++,i--;e=!0}return e},o.prototype.read=function(i,e,t){if(i==null)throw new DOMException("buffer");if(e<0||e>i.length-1)throw new DOMException("offset","Offset does not belong to specified buffer.");if(t<0||t>i.length-e)throw new DOMException("length","Length is illegal.");for(var r=t;t>0;)if(this.mCurrentPosition<this.mDataLength){var n=this.mCurrentPosition%this.DEF_MAX_WINDOW_SIZE,s=Math.min(this.DEF_MAX_WINDOW_SIZE-n,this.mDataLength-this.mCurrentPosition);s=Math.min(s,t),oe.arrayCopy(this.mBlockBuffer,n,i,e,s),this.mCurrentPosition+=s,e+=s,t-=s}else{if(!this.mbCanReadMoreData)break;var a=this.mDataLength;if(this.mbReadingUncompressed)if(this.mUncompressedDataLength===0){if(this.mbCanReadMoreData=this.decodeBlockHeader(),!this.mbCanReadMoreData)break}else{var n=this.mDataLength%this.DEF_MAX_WINDOW_SIZE,h=Math.min(this.mUncompressedDataLength,this.DEF_MAX_WINDOW_SIZE-n),l=this.readPackedBytes(this.mBlockBuffer,n,h);if(h!==l)throw new DOMException("Not enough data in stream.");this.mUncompressedDataLength-=l,this.mDataLength+=l}else if(!this.readHuffman())break;if(a<this.mDataLength){var p=a%this.DEF_MAX_WINDOW_SIZE,u=this.mDataLength%this.DEF_MAX_WINDOW_SIZE;p<u?this.checksumUpdate(this.mBlockBuffer,p,u-p):(this.checksumUpdate(this.mBlockBuffer,p,this.DEF_MAX_WINDOW_SIZE-p),u>0&&this.checksumUpdate(this.mBlockBuffer,0,u))}}if(!this.mbCanReadMoreData&&!this.mbCheckSumRead&&!this.mbNoWrap){this.skipToBoundary();var c=this.readInt32();if(c!==this.mCheckSum)throw new DOMException("Checksum check failed.");this.mbCheckSumRead=!0}return r-t},o.prototype.readPackedBytes=function(i,e,t){if(i==null)throw new DOMException("buffer");if(e<0||e>i.length-1)throw new DOMException('offset", "Offset can not be less than zero or greater than buffer length - 1.');if(t<0)throw new DOMException('length", "Length can not be less than zero.');if(t>i.length-e)throw new DOMException('length", "Length is too large.');if(this.mBufferedBits&7)throw new DOMException("Reading of unalligned data is not supported.");if(t===0)return 0;for(var r=0;this.mBufferedBits>0&&t>0;)i[e++]=this.mBuffer,this.mBufferedBits-=8,this.mBuffer=oe.bitConverterInt32ToUint(this.mBuffer>>>8),t--,r++;return t>0&&(r+=this.mInputStream.read(i,e,t)),r},o.prototype.readInt32=function(){var i=this.readBits(8)<<24;return i|=this.readBits(8)<<16,i|=this.readBits(8)<<8,i|=this.readBits(8),i},o.prototype.checksumUpdate=function(i,e,t){Mh.ChecksumUpdate(this.mCheckSum,i,e,t)},o.DEF_REVERSE_BITS=new Uint8Array([0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]),o.DEF_HUFFMAN_DYNTREE_REPEAT_MINIMUMS=[3,3,11],o.DEF_HUFFMAN_DYNTREE_REPEAT_BITS=[2,3,7],o.DEF_HUFFMAN_REPEAT_LENGTH_BASE=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],o.DEF_HUFFMAN_REPEAT_LENGTH_EXTENSION=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o.DEF_HUFFMAN_REPEAT_DISTANCE_BASE=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],o.DEF_HUFFMAN_REPEAT_DISTANCE_EXTENSION=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o}(),Ii=function(){function o(i){this.position=0,this.inputStream=new Uint8Array(i.buffer)}return Object.defineProperty(o.prototype,"length",{get:function(){return this.inputStream.buffer.byteLength},enumerable:!0,configurable:!0}),o.prototype.read=function(i,e,t){var r=new Uint8Array(this.inputStream.buffer,this.position+e),n=r.subarray(0,t);return i.set(n,0),this.position+=n.byteLength,n.byteLength},o.prototype.readByte=function(){return this.inputStream[this.position++]},o.prototype.write=function(i,e,t){oe.arrayCopy(i,0,this.inputStream,this.position+e,t),this.position+=t},o.prototype.toByteArray=function(){return new Uint8Array(this.inputStream.buffer)},o}(),Fh=function(){function o(i){this.intl=new Xr}return o.prototype.getFormatFunction=function(i,e){return i.type?(e&&(i.isServerRendered=!0),this.intl.getDateFormat(i)):this.intl.getNumberFormat(i)},o.prototype.toView=function(i,e){var t=i;return!d(e)&&!d(i)&&(t=e(i)),t},o.prototype.displayText=function(i,e,t){return this.toView(i,this.getFormatFunction(e,t))},o}(),kh=function(){function o(i,e){if(this.csvStr="",e==null?this.separator=",":this.separator=e,this.formatter=new Fh,this.isMicrosoftBrowser=!!navigator.msSaveBlob,i.isServerRendered!==null&&i.isServerRendered!==void 0&&(this.isServerRendered=i.isServerRendered),i.styles!==null&&i.styles!==void 0){this.globalStyles=new Map;for(var t=0;t<i.styles.length;t++)i.styles[t].name!==void 0&&i.styles[t].numberFormat!==void 0&&this.globalStyles.set(i.styles[t].name,i.styles[t].numberFormat)}i.worksheets!==null&&i.worksheets!==void 0&&this.parseWorksheet(i.worksheets[0])}return o.prototype.parseWorksheet=function(i){i.rows!==null&&i.rows!==void 0&&this.parseRows(i.rows)},o.prototype.parseRows=function(i){for(var e=1,t=0,r=i;t<r.length;t++){var n=r[t];if(n.index!==null&&n.index!==void 0){for(;e<n.index;)this.csvStr+=`\r
`,e++;this.parseRow(n)}else throw Error("Row index is missing.")}this.csvStr+=`\r
`},o.prototype.parseRow=function(i){if(i.cells!==null&&i.cells!==void 0)for(var e=1,t=0,r=i.cells;t<r.length;t++){var n=r[t];if(n.index!==null&&n.index!==void 0){for(;e<n.index;)this.csvStr+=this.separator,e++;this.parseCell(n)}else throw Error("Cell index is missing.")}},o.prototype.parseCell=function(i){var e=this.csvStr;if(i.value!==void 0)if(i.value instanceof Date)if(i.style!==void 0&&i.style.numberFormat!==void 0)try{e+=this.parseCellValue(this.formatter.displayText(i.value,{type:"dateTime",skeleton:i.style.numberFormat},this.isServerRendered))}catch{e+=this.parseCellValue(this.formatter.displayText(i.value,{type:"dateTime",format:i.style.numberFormat},this.isServerRendered))}else if(i.style!==void 0&&i.style.name!==void 0&&this.globalStyles.has(i.style.name))try{e+=this.parseCellValue(this.formatter.displayText(i.value,{type:"dateTime",skeleton:this.globalStyles.get(i.style.name)},this.isServerRendered))}catch{e+=this.parseCellValue(this.formatter.displayText(i.value,{type:"dateTime",format:this.globalStyles.get(i.style.name)},this.isServerRendered))}else e+=i.value;else typeof i.value=="boolean"?e+=i.value?"TRUE":"FALSE":typeof i.value=="number"?i.style!==void 0&&i.style.numberFormat!==void 0?e+=this.parseCellValue(this.formatter.displayText(i.value,{format:i.style.numberFormat,ignoreCurrency:!0},this.isServerRendered)):i.style!==void 0&&i.style.name!==void 0&&this.globalStyles.has(i.style.name)?e+=this.parseCellValue(this.formatter.displayText(i.value,{format:this.globalStyles.get(i.style.name),ignoreCurrency:!0},this.isServerRendered)):e+=i.value:e+=this.parseCellValue(i.value);this.csvStr=e},o.prototype.parseCellValue=function(i){for(var e="",t=i.length,r=0;r<t;r++)i[r]==='"'?e+=i[r].replace('"','""'):e+=i[r];return i=e,i.indexOf(this.separator)!==-1||i.indexOf(`
`)!==-1||i.indexOf('"')!==-1?i='"'+i+'"':i},o.prototype.save=function(i){if(this.buffer=new Blob(["\uFEFF"+this.csvStr],{type:"text/csv;charset=UTF-8"}),this.isMicrosoftBrowser)navigator.msSaveBlob(this.buffer,i);else{var e=window.URL.createObjectURL(this.buffer),t=document.createElementNS("http://www.w3.org/1999/xhtml","a");t.download=i,t.href=e;var r=document.createEvent("MouseEvent");r.initEvent("click",!0,!0),t.dispatchEvent(r),setTimeout(function(){window.URL.revokeObjectURL(e)})}},o.prototype.saveAsBlob=function(i){if(i!=null){var e=new oa,t="UTF-8";i.toUpperCase()=="ANSI"?(e.type="Ansi",t="ANSI"):i.toUpperCase()=="UNICODE"?(e.type="Unicode",t="UNICODE"):(e.type="Utf8",t="UTF-8");var r=e.getBytes(this.csvStr,0,this.csvStr.length);return new Blob([r],{type:"text/csv;charset="+t})}else return new Blob(["\uFEFF"+this.csvStr],{type:"text/csv;charset=UTF-8"})},o}(),fs=function(){function o(){this.parts=[]}return o.prototype.append=function(i){this.parts.push(i),this.blob=void 0},o.prototype.getBlob=function(){return new Blob(this.parts,{type:"text/plain"})},o}(),Bh=function(){function o(){}return o}(),Rh=function(){function o(i,e,t,r,n){if(this.sharedStringCount=0,this.unitsProportions=[96/75,96/300,96,96/25.4,96/2.54,1,96/72,96/72/12700],this.hyperlinkStyle={fontColor:"#0000FF",underline:!0},t!==void 0?this.culture=t:this.culture="en-US",r!==void 0?this.currency=r:this.currency="USD",this.intl=new Xr(this.culture),this.mSaveType=e,e==="xlsx"){if(this.mArchive=new me,this.sharedString=[],this.mFonts=[],this.mBorders=[],this.mStyles=[],this.printTitles=new Map,this.cellStyles=new Map,this.mNumFmt=new Map,this.mFills=new Map,this.mStyles.push(new Qe),this.mFonts.push(new ss),this.cellStyles.set("Normal",new as),this.mCellXfs=[],this.mCellStyleXfs=[],this.drawingCount=0,this.imageCount=0,i.styles!==null&&i.styles!==void 0){this.globalStyles=new Map;for(var s=0;s<i.styles.length;s++)if(i.styles[s].name!==void 0){if(this.cellStyles.has(i.styles[s].name))throw Error("Style name "+i.styles[s].name+" is already existed");var a=new Qe;a.isGlobalStyle=!0,this.parserCellStyle(i.styles[s],a,"none");var h=new as;h.name=a.name,h.xfId=a.index-1,this.cellStyles.set(h.name,h);var l={};i.styles[s].numberFormat!==void 0&&(l.format=i.styles[s].numberFormat),i.styles[s].type!==void 0?l.type=i.styles[s].type:l.type="datetime",l.format!==void 0&&this.globalStyles.set(i.styles[s].name,l)}}if(i.worksheets!==null&&i.worksheets!==void 0)this.parserWorksheets(i.worksheets);else throw Error("Worksheet is expected.");i.builtInProperties!==null&&i.builtInProperties!==void 0&&(this.builtInProperties=new Hh,this.parserBuiltInProperties(i.builtInProperties,this.builtInProperties))}else this.csvHelper=new kh(i,n)}return o.prototype.parserBuiltInProperties=function(i,e){i.author!==null&&i.author!==void 0&&(e.author=i.author),i.comments!==null&&i.comments!==void 0&&(e.comments=i.comments),i.category!==null&&i.category!==void 0&&(e.category=i.category),i.company!==null&&i.company!==void 0&&(e.company=i.company),i.manager!==null&&i.manager!==void 0&&(e.manager=i.manager),i.subject!==null&&i.subject!==void 0&&(e.subject=i.subject),i.title!==null&&i.title!==void 0&&(e.title=i.title),i.createdDate!==null&&i.createdDate!==void 0&&(e.createdDate=i.createdDate),i.modifiedDate!==null&&i.modifiedDate!==void 0&&(e.modifiedDate=i.modifiedDate),i.tags!==null&&i.tags!==void 0&&(e.tags=i.tags),i.status!==null&&i.status!==void 0&&(e.status=i.status)},o.prototype.parserWorksheets=function(i){this.worksheets=new mh;for(var e=i.length,t=0;t<e;t++){var r=i[t],n=new bh;this.mergeCells=new Ch,this.mergedCellsStyle=new Map,this.mHyperLinks=[],r.name!==null&&r.name!==void 0?n.name=r.name:n.name="Sheet"+(t+1).toString(),r.enableRtl!==null&&r.enableRtl!==void 0&&(n.enableRtl=r.enableRtl),n.index=t+1,r.columns!==null&&r.columns!==void 0&&this.parserColumns(r.columns,n),r.rows!==null&&r.rows!==void 0&&this.parserRows(r.rows,n),r.showGridLines!==null&&r.showGridLines!==void 0&&(n.showGridLines=r.showGridLines),r.freeze!==null&&r.freeze!==void 0&&this.parserFreezePanes(r.freeze,n),r.printTitle!==null&&r.printTitle!==void 0&&this.parserPrintTitle(r.printTitle,n),r.pageSetup!==void 0&&r.pageSetup.isSummaryRowBelow!==void 0&&(n.isSummaryRowBelow=r.pageSetup.isSummaryRowBelow),r.images!==void 0&&this.parserImages(r.images,n),r.autoFilters!==null&&r.autoFilters!==void 0&&this.parseFilters(r.autoFilters,n),n.index=t+1,n.mergeCells=this.mergeCells,n.hyperLinks=this.mHyperLinks,this.worksheets.push(n)}},o.prototype.mergeOptions=function(i,e){var t={};return this.applyProperties(i,t),this.applyProperties(e,t),t},o.prototype.applyProperties=function(i,e){for(var t=Object.keys(i),r=0;r<t.length;r++)t[r]!=="name"&&(e[t[r]]=i[t[r]])},o.prototype.getCellName=function(i,e){return this.getColumnName(e)+i.toString()},o.prototype.getColumnName=function(i){i--;var e="";do{var t=i%26;i=i/26-1,e=String.fromCharCode(65+t)+e}while(i>=0);return e},o.prototype.parserPrintTitle=function(i,e){var t="",r;if(i.fromRow!==null&&i.fromRow!==void 0){var n=i.fromRow,s=void 0;i.toRow!==null&&i.toRow!==void 0?s=i.toRow:s=i.fromRow,r="$"+n+":$"+s}var a;if(i.fromColumn!==null&&i.fromColumn!==void 0){var h=i.fromColumn,l=void 0;i.toColumn!==null&&i.toColumn!==void 0?l=i.toColumn:l=i.fromColumn,a="$"+this.getColumnName(h)+":$"+this.getColumnName(l)}r!==void 0&&(t+=e.name+"!"+r),a!==void 0&&r!==void 0?t+=","+(e.name+"!"+a):a!==void 0&&(t+=e.name+"!"+a),t!==""&&this.printTitles.set(e.index-1,t)},o.prototype.parserFreezePanes=function(i,e){e.freezePanes=new Sh,i.row!==null&&i.row!==void 0?e.freezePanes.row=i.row:e.freezePanes.row=0,i.column!==null&&i.column!==void 0?e.freezePanes.column=i.column:e.freezePanes.column=0,e.freezePanes.leftCell=this.getCellName(e.freezePanes.row+1,e.freezePanes.column+1)},o.prototype.parserColumns=function(i,e){var t=i.length;e.columns=[];for(var r=0;r<t;r++){var n=new dh;if(i[r].index!==null&&i[r].index!==void 0)n.index=i[r].index;else throw Error("Column index is missing.");i[r].width!==null&&i[r].width!==void 0&&(n.width=i[r].width),e.columns.push(n)}},o.prototype.parserRows=function(i,e){var t=i.length;e.rows=new vh;for(var r=0,n=0;n<t;n++){var s=this.parserRow(i[n],r);r=s.index,e.rows.add(s)}this.insertMergedCellsStyle(e)},o.prototype.insertMergedCellsStyle=function(i){var e=this;this.mergeCells.length>0&&this.mergedCellsStyle.forEach(function(t,r){var n=i.rows.filter(function(u){return u.index===t.y})[0];if(d(n)){var l=i.rows.filter(function(c){return c.index<=t.y}),p=new ps;p.index=t.y,p.cells=new hs,p.cells.add(e.createCell(t,r));var h=0;l.length>0&&(h=i.rows.indexOf(l[l.length-1])+1),i.rows.splice(h,0,p)}else{var s=n.cells.filter(function(u){return u.index===t.x})[0];if(!d(s))s.styleIndex=t.styleIndex;else{var a=n.cells.filter(function(u){return u.index<=t.x}),h=0;a.length>0&&(h=n.cells.indexOf(a[a.length-1])+1),n.cells.splice(h,0,e.createCell(t,r))}}})},o.prototype.createCell=function(i,e){var t=new ls;return t.refName=e,t.index=i.x,t.cellStyle=new Qe,t.styleIndex=i.styleIndex,t},o.prototype.parserRow=function(i,e){var t=new ps;if(i.height!==null&&i.height!==void 0&&(t.height=i.height),i.index!==null&&i.index!==void 0)t.index=i.index;else throw Error("Row index is missing.");return i.grouping!==null&&i.grouping!==void 0&&this.parseGrouping(i.grouping,t),this.parseCells(i.cells,t),t},o.prototype.parseGrouping=function(i,e){e.grouping=new wh,i.outlineLevel!==void 0&&(e.grouping.outlineLevel=i.outlineLevel),i.isCollapsed!==void 0&&(e.grouping.isCollapsed=i.isCollapsed),i.isHidden!==void 0&&(e.grouping.isHidden=i.isHidden)},o.prototype.parseCells=function(i,e){e.cells=new hs;for(var t=i!==void 0?i.length:0,r=1,n=1,s=0;s<t;s++){var a=i[s],h=new ls;if(a.index!==null&&a.index!==void 0)h.index=a.index;else throw Error("Cell index is missing.");if(h.index<r?r=h.index:h.index>n&&(n=h.index),h.refName=this.getCellName(e.index,h.index),a.rowSpan!==null&&a.rowSpan!==void 0?h.rowSpan=a.rowSpan-1:h.rowSpan=0,a.colSpan!==null&&a.colSpan!==void 0?h.colSpan=a.colSpan-1:h.colSpan=0,a.hyperlink!==null&&a.hyperlink!==void 0){var l=new cs;a.hyperlink.target!==void 0&&(l.target=a.hyperlink.target,a.hyperlink.displayText!==void 0?h.value=a.hyperlink.displayText:h.value=a.hyperlink.target,h.type=this.getCellValueType(h.value),l.ref=h.refName,l.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(l),h.cellStyle=new Qe,this.parserCellStyle(a.style!==void 0?this.mergeOptions(a.style,this.hyperlinkStyle):this.hyperlinkStyle,h.cellStyle,"string"),h.styleIndex=h.cellStyle.index)}a.formula!==null&&a.formula!==void 0&&(h.formula=a.formula,h.type="formula"),a.value!==null&&a.value!==void 0&&(h.formula!==void 0?h.value=0:(h.value=a.value,h.type=this.getCellValueType(h.value))),a.style!==null&&a.style!==void 0&&h.styleIndex===void 0?(h.cellStyle=new Qe,h.value instanceof Date?this.parserCellStyle(a.style,h.cellStyle,h.type,14):this.parserCellStyle(a.style,h.cellStyle,h.type),h.styleIndex=h.cellStyle.index):h.value instanceof Date&&(h.cellStyle=new Qe,this.parserCellStyle({},h.cellStyle,h.type,14),h.styleIndex=h.cellStyle.index),this.parseCellType(h),this.mergeCells=this.processMergeCells(h,e.index,this.mergeCells),e.cells.add(h),h.index+1}e.spans=r+":"+n},o.prototype.GetColors=function(){var i;return i=new Map,i.set("WHITE","FFFFFFFF"),i.set("SILVER","FFC0C0C0"),i.set("GRAY","FF808080"),i.set("BLACK","FF000000"),i.set("RED","FFFF0000"),i.set("MAROON","FF800000"),i.set("YELLOW","FFFFFF00"),i.set("OLIVE","FF808000"),i.set("LIME","FF00FF00"),i.set("GREEN","FF008000"),i.set("AQUA","FF00FFFF"),i.set("TEAL","FF008080"),i.set("BLUE","FF0000FF"),i.set("NAVY","FF000080"),i.set("FUCHSIA","FFFF00FF"),i.set("PURPLE","FF800080"),i},o.prototype.processColor=function(i){return i.indexOf("#")===0?i.replace("#","FF"):(i=i.toUpperCase(),this.rgbColors=this.GetColors(),this.rgbColors.has(i)?i=this.rgbColors.get(i):i="FF000000",i)},o.prototype.processCellValue=function(i,e){var t=i;if(i.indexOf("<font")!==-1||i.indexOf("<a")!==-1||i.indexOf("<b>")!==-1||i.indexOf("<i>")!==-1||i.indexOf("<u>")!==-1){var r="",n=i.indexOf("<",0),s=i.indexOf(">",n+1);if(n>=0&&s>=0){for(n!==0&&(r+='<r><t xml:space="preserve">'+this.processString(i.substring(0,n))+"</t></r>");n>=0&&s>=0;)if(s=i.indexOf(">",n+1),s>=0){var a=i.substring(n+1,s);n=i.indexOf("<",s+1),n<0&&(n=t.length);var h=t.substring(s+1,n);if(h.length!==0){var l=a.split(" ");if(l.length>0&&(r+="<r><rPr>"),l.length>1)for(var p=0,u=l;p<u.length;p++){var c=u[p],f=c.trim().substring(0,5);switch(f){case"size=":r+='<sz val="'+c.substring(6,c.length-1)+'"/>';break;case"face=":r+='<rFont val="'+c.substring(6,c.length-1)+'"/>';break;case"color":r+='<color rgb="'+this.processColor(c.substring(7,c.length-1))+'"/>';break;case"href=":var g=new cs;g.target=c.substring(6,c.length-1).trim(),g.ref=e.refName,g.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(g),r+='<color rgb="FF0000FF"/><u/><b/>';break}}else if(l.length===1){var v=l[0].trim();switch(v){case"b":r+="<b/>";break;case"i":r+="<i/>";break;case"u":r+="<u/>";break}}r+='</rPr><t xml:space="preserve">'+this.processString(h)+"</t></r>"}}return r===""?t:r}else return t}else return t},o.prototype.applyGlobalStyle=function(i,e){this.cellStyles.has(i.name)&&(e.index=this.mStyles.filter(function(t){return t.name===i.name})[0].index,e.name=i.name)},o.prototype.parserCellStyle=function(i,e,t,r){if(i.name!==null&&i.name!==void 0)if(e.isGlobalStyle)e.name=i.name;else{this.applyGlobalStyle(i,e);return}i.backColor!==null&&i.backColor!==void 0&&(e.backColor=i.backColor),e.borders=new sa,i.borders!==null&&i.borders!==void 0&&this.parserBorder(i.borders,e.borders.all),i.leftBorder!==null&&i.leftBorder!==void 0&&this.parserBorder(i.leftBorder,e.borders.left),i.rightBorder!==null&&i.rightBorder!==void 0&&this.parserBorder(i.rightBorder,e.borders.right),i.topBorder!==null&&i.topBorder!==void 0&&this.parserBorder(i.topBorder,e.borders.top),i.bottomBorder!==null&&i.bottomBorder!==void 0&&this.parserBorder(i.bottomBorder,e.borders.bottom),i.fontName!==null&&i.fontName!==void 0&&(e.fontName=i.fontName),i.fontSize!==null&&i.fontSize!==void 0&&(e.fontSize=i.fontSize),i.fontColor!==null&&i.fontColor!==void 0&&(e.fontColor=i.fontColor),i.italic!==null&&i.italic!==void 0&&(e.italic=i.italic),i.bold!==null&&i.bold!==void 0&&(e.bold=i.bold),i.hAlign!==null&&i.hAlign!==void 0&&(e.hAlign=i.hAlign.toLowerCase()),i.indent!==null&&i.indent!==void 0&&(e.indent=i.indent,e.hAlign==="left"||e.hAlign==="right"||(e.hAlign="left")),i.rotation!==null&&i.rotation!==void 0&&(e.rotation=i.rotation),i.vAlign!==null&&i.vAlign!==void 0&&(e.vAlign=i.vAlign.toLowerCase()),i.underline!==null&&i.underline!==void 0&&(e.underline=i.underline),i.strikeThrough!==null&&i.strikeThrough!==void 0&&(e.strikeThrough=i.strikeThrough),i.wrapText!==null&&i.wrapText!==void 0&&(e.wrapText=i.wrapText),i.numberFormat!==null&&i.numberFormat!==void 0?i.type!==null&&i.type!==void 0?e.numberFormat=this.getNumberFormat(i.numberFormat,i.type):e.numberFormat=this.getNumberFormat(i.numberFormat,t):(r!==void 0&&(e.numFmtId=14),e.numberFormat="GENERAL"),e.index=this.processCellStyle(e)},o.prototype.switchNumberFormat=function(i,e){var t=this.getNumberFormat(i,e);if(t!==i){var r=this.mNumFmt.get(i);if(r!==void 0&&(r.formatCode=t,this.mNumFmt.has(t))){for(var n=0,s=this.mCellStyleXfs;n<s.length;n++){var a=s[n];a.numFmtId===r.numFmtId&&(a.numFmtId=this.mNumFmt.get(t).numFmtId)}for(var h=0,l=this.mCellXfs;h<l.length;h++){var p=l[h];p.numFmtId===r.numFmtId&&(p.numFmtId=this.mNumFmt.get(t).numFmtId)}}}},o.prototype.changeNumberFormats=function(i){if(typeof i=="string"){var e=new RegExp(this.currency,"g");i=i.replace(e,"[$"+this.currency+"]")}else if(typeof i=="object")for(var t=0;t<i.length;t++)i[t]=i[t].replace(this.currency,"[$"+this.currency+"]");return i},o.prototype.getNumberFormat=function(i,e){var t;switch(e){case"number":try{t=this.intl.getNumberPattern({format:i,currency:this.currency,useGrouping:!0},!0),this.currency.length>1&&(t=this.changeNumberFormats(t))}catch{t=i}break;case"datetime":try{t=this.intl.getDatePattern({skeleton:i,type:"dateTime"},!0)}catch{try{t=this.intl.getDatePattern({format:i,type:"dateTime"},!0)}catch{t=i}}break;case"date":try{t=this.intl.getDatePattern({skeleton:i,type:"date"},!0)}catch{try{t=this.intl.getDatePattern({format:i,type:"date"},!0)}catch{t=i}}break;case"time":try{t=this.intl.getDatePattern({skeleton:i,type:"time"},!0)}catch{try{t=this.intl.getDatePattern({format:i,type:"time"},!0)}catch{t=i}}break;default:t=i;break}return t},o.prototype.parserBorder=function(i,e){i.color!==null&&i.color!==void 0?e.color=i.color:e.color="#000000",i.lineStyle!==null&&i.lineStyle!==void 0?e.lineStyle=i.lineStyle:e.lineStyle="thin"},o.prototype.processCellStyle=function(i){if(i.isGlobalStyle)return this.processNumFormatId(i),this.mStyles.push(i),this.mStyles.length;var e=this.compareStyle(i);return e.result?e.index:(this.processNumFormatId(i),this.mStyles.push(i),this.mStyles.length)},o.prototype.processNumFormatId=function(i){if(i.numberFormat!=="GENERAL"&&!this.mNumFmt.has(i.numberFormat)){var e=this.mNumFmt.size+164;this.mNumFmt.set(i.numberFormat,new os(e,i.numberFormat))}},o.prototype.isNewFont=function(i){for(var e=!1,t=0,r=0,n=this.mFonts;r<n.length;r++){var s=n[r];t++;var a=void 0;if(i.fontColor!==void 0&&(a="FF"+i.fontColor.replace("#","")),e=s.color===a&&s.b===i.bold&&s.i===i.italic&&s.u===i.underline&&s.strike===i.strikeThrough&&s.name===i.fontName&&s.sz===i.fontSize,e)break}return t=t-1,{index:t,result:e}},o.prototype.isNewBorder=function(i){var e=new Qe;return this.isAllBorder(i.borders)?e.borders.all.color===i.borders.all.color&&e.borders.all.lineStyle===i.borders.all.lineStyle:e.borders.left.color===i.borders.left.color&&e.borders.left.lineStyle===i.borders.left.lineStyle&&e.borders.right.color===i.borders.right.color&&e.borders.right.lineStyle===i.borders.right.lineStyle&&e.borders.top.color===i.borders.top.color&&e.borders.top.lineStyle===i.borders.top.lineStyle&&e.borders.bottom.color===i.borders.bottom.color&&e.borders.bottom.lineStyle===i.borders.bottom.lineStyle},o.prototype.isAllBorder=function(i){var e=new Qe;return e.borders.all.color!==i.all.color&&e.borders.all.lineStyle!==i.all.lineStyle},o.prototype.compareStyle=function(i){for(var e=!0,t=0,r=0,n=this.mStyles;r<n.length;r++){var s=n[r];if(e=s.isGlobalStyle?!1:s.backColor===i.backColor&&s.bold===i.bold&&s.numFmtId===i.numFmtId&&s.numberFormat===i.numberFormat&&s.type===i.type&&s.fontColor===i.fontColor&&s.fontName===i.fontName&&s.fontSize===i.fontSize&&s.hAlign===i.hAlign&&s.italic===i.italic&&s.underline===i.underline&&s.strikeThrough===i.strikeThrough&&s.vAlign===i.vAlign&&s.indent===i.indent&&s.rotation===i.rotation&&s.wrapText===i.wrapText&&s.borders.all.color===i.borders.all.color&&s.borders.all.lineStyle===i.borders.all.lineStyle&&s.borders.left.color===i.borders.left.color&&s.borders.left.lineStyle===i.borders.left.lineStyle&&s.borders.right.color===i.borders.right.color&&s.borders.right.lineStyle===i.borders.right.lineStyle&&s.borders.top.color===i.borders.top.color&&s.borders.top.lineStyle===i.borders.top.lineStyle&&s.borders.bottom.color===i.borders.bottom.color&&s.borders.bottom.lineStyle===i.borders.bottom.lineStyle,e){t=s.index;break}}return{index:t,result:e}},o.prototype.contains=function(i,e){var t=i.indexOf(e);return t>-1&&t<i.length},o.prototype.getCellValueType=function(i){return i instanceof Date?"datetime":typeof i=="boolean"?"boolean":typeof i=="number"?"number":"string"},o.prototype.parseCellType=function(i){var e=i.type,t,r=i.value;switch(e){case"datetime":if(r=this.toOADate(r),i.cellStyle!==void 0&&i.cellStyle.name!==void 0&&this.globalStyles.has(i.cellStyle.name)){var n=this.globalStyles.get(i.cellStyle.name);this.switchNumberFormat(n.format,n.type)}t="n";break;case"boolean":r=r?1:0,t="b";break;case"number":t="n",i.cellStyle!==void 0&&i.cellStyle.name!==void 0&&this.globalStyles.has(i.cellStyle.name)&&this.switchNumberFormat(this.globalStyles.get(i.cellStyle.name).format,"number");break;case"string":this.sharedStringCount++,t="s";var s=this.processCellValue(r,i);this.contains(this.sharedString,s)||this.sharedString.push(s),r=this.sharedString.indexOf(s);break}i.saveType=t,i.value=r},o.prototype.parserImages=function(i,e){var t=i.length;e.images=[];for(var r=0;r<t;r++){var n=this.parserImage(i[r]);e.images.push(n)}},o.prototype.parseFilters=function(i,e){if(e.autoFilters=new Bh,i.row!==null&&i.row!==void 0)e.autoFilters.row=i.row;else throw new Error("Argument Null Exception: row null or empty");if(i.lastRow!==null&&i.lastRow!==void 0)e.autoFilters.lastRow=i.lastRow;else throw new Error("Argument Null Exception: lastRow cannot be null or empty");if(i.column!==null&&i.column!==void 0)e.autoFilters.column=i.column;else throw new Error("Argument Null Exception: column cannot be null or empty");if(i.lastColumn!==null&&i.row!==void 0)e.autoFilters.lastColumn=i.lastColumn;else throw new Error("Argument Null Exception: lastColumn cannot be null or empty")},o.prototype.parserImage=function(i){var e=new Th;return i.image!==null&&i.image!==void 0&&(e.image=i.image),i.row!==null&&i.row!==void 0&&(e.row=i.row),i.column!==null&&i.column!==void 0&&(e.column=i.column),i.lastRow!==null&&i.lastRow!==void 0&&(e.lastRow=i.lastRow),i.lastColumn!==null&&i.lastColumn!==void 0&&(e.lastColumn=i.lastColumn),i.width!==null&&i.width!==void 0&&(e.width=i.width),i.height!==null&&i.height!==void 0&&(e.height=i.height),i.horizontalFlip!==null&&i.horizontalFlip!==void 0&&(e.horizontalFlip=i.horizontalFlip),i.verticalFlip!==null&&i.verticalFlip!==void 0&&(e.verticalFlip=i.verticalFlip),i.rotation!==null&&i.rotation!==void 0&&(e.rotation=i.rotation),e},o.prototype.saveAsBlob=function(i,e){var t=this;switch(i){case"text/csv":return new Promise(function(r,n){var s={};s.blobData=t.csvHelper.saveAsBlob(e),r(s)});default:return new Promise(function(r,n){t.saveInternal(),t.mArchive.saveAsBlob().then(function(s){var a={};a.blobData=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r(a)})})}},o.prototype.save=function(i,e){var t=this;if(i==null||i==="")throw new Error("Argument Null Exception: fileName cannot be null or empty");var r=i.match(".xlsx$"),n=i.match(".csv$");if(r!==null&&r[0]==="."+this.mSaveType)this.saveInternal(),this.mArchive.save(i).then(function(){t.mArchive.destroy()});else if(n!==null&&n[0]==="."+this.mSaveType)this.csvHelper.save(i);else throw Error("Save type and file extension is different.")},o.prototype.saveInternal=function(){this.saveWorkbook(),this.saveWorksheets(),this.saveSharedString(),this.saveStyles(),this.saveApp(this.builtInProperties),this.saveCore(this.builtInProperties),this.saveContentType(),this.saveTopLevelRelation(),this.saveWorkbookRelation()},o.prototype.saveWorkbook=function(){for(var i='<?xml version="1.0" encoding="utf-8"?><workbook xmlns:r = "http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns= "http://schemas.openxmlformats.org/spreadsheetml/2006/main"><workbookPr codeName="ThisWorkbook" defaultThemeVersion= "153222"/><bookViews><workbookView activeTab="0"/></bookViews>',e="<sheets>",t=this.worksheets.length,r=0;r<t;r++){var n=this.worksheets[r].name;n=n.replace("&","&amp;"),n=n.replace("<","&lt;"),n=n.replace(">","&gt;"),n=n.replace('"',"&quot;"),e+='<sheet name="'+n+'" sheetId="'+(r+1).toString()+'" r:id ="rId'+(r+1).toString()+'" />'}if(e+="</sheets>",i+=e,this.printTitles.size>0){var s="<definedNames>";this.printTitles.forEach(function(a,h){s+='<definedName name="_xlnm.Print_Titles" localSheetId="'+h+'">'+a+"</definedName>"}),s+="</definedNames>",i+=s}this.addToArchive(i+"</workbook>","xl/workbook.xml")},o.prototype.saveWorksheets=function(){for(var i=this.worksheets.length,e=0;e<i;e++)this.saveWorksheet(this.worksheets[e],e)},o.prototype.saveWorksheet=function(i,e){var t=new fs,r='<?xml version="1.0" encoding="utf-8" standalone="yes"?><worksheet xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';if(i.isSummaryRowBelow?r+="<sheetPr />":r+='<sheetPr><outlinePr summaryBelow="0" ></outlinePr></sheetPr>',r+=this.saveSheetView(i),i.columns!==void 0){for(var n="<cols>",s=0,a=i.columns;s<a.length;s++){var h=a[s];h.width!==void 0?n+='<col min="'+h.index+'" max="'+h.index+'" width="'+this.pixelsToColumnWidth(h.width)+'" customWidth="1" />':n+='<col min="'+h.index+'" max="'+h.index+'" width="8.43" customWidth="1" />'}r+=n+"</cols>"}if(r+="<sheetData>",t.append(r),r="",i.rows!==void 0)for(var l=0,p=i.rows;l<p.length;l++){var u=p[l],c='<row r="'+u.index+'" ';d(u.spans)||(c+='spans="'+u.spans+'" '),u.height!==void 0&&(c+='ht="'+this.pixelsToRowHeight(u.height)+'" customHeight="1" '),u.grouping!==void 0&&(u.grouping.isHidden&&(c+='hidden="1" '),u.grouping.outlineLevel!==void 0&&(c+='outlineLevel="'+u.grouping.outlineLevel+'" '),u.grouping.isCollapsed&&(c+='collapsed="1" ')),c+=">";for(var f=0,g=u.cells;f<g.length;f++){var v=g[f];v!==void 0&&(v.value!==void 0||v.cellStyle!==void 0)&&(c+='<c r="'+v.refName+'" ',v.saveType!==void 0&&(c+='t="'+v.saveType+'" '),v.styleIndex!==void 0&&(c+='s="'+v.styleIndex+'" '),c+=" >",v.formula!==void 0&&(c+="<f>"+v.formula+"</f>"),v.value!==void 0?c+="<v>"+v.value+"</v></c>":c+="</c>")}c+="</row>",t.append(c)}if(r+="</sheetData>",i.autoFilters!==null&&i.autoFilters!==void 0&&(r+='<autoFilter ref="'+this.getCellName(i.autoFilters.row,i.autoFilters.column)+":"+this.getCellName(i.autoFilters.lastRow,i.autoFilters.lastColumn)+'"/>'),i.mergeCells.length>0){r+='<mergeCells count="'+i.mergeCells.length+'">';for(var m=0,y=i.mergeCells;m<y.length;m++){var w=y[m];r+='<mergeCell ref="'+w.ref+'" />'}r+="</mergeCells>"}if(i.hyperLinks.length>0){r+="<hyperlinks>";for(var C=0,T=i.hyperLinks;C<T.length;C++){var A=T[C];r+='<hyperlink ref="'+A.ref+'" r:id="rId'+A.rId+'" />'}r+="</hyperlinks>"}r+='<pageMargins left="0.75" right="0.75" top="1" bottom="1" header="0.5" footer="0.5" /><headerFooter scaleWithDoc="1" alignWithMargins="0" differentFirst="0" differentOddEven="0" />',i.images!=null&&i.images.length>0&&(this.drawingCount++,this.saveDrawings(i,i.index),r+='<drawing r:id="rId'+(i.hyperLinks.length+1)+'"/>'),this.addToArchive(this.saveSheetRelations(i),"xl/worksheets/_rels/sheet"+i.index+".xml.rels"),t.append(r+"</worksheet>"),this.addToArchive(t.getBlob(),"xl/worksheets/sheet"+(e+1)+".xml")},o.prototype.saveDrawings=function(i,e){var t=new fs,r='<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">';if(i.images!==void 0){for(var n=0,s=0,a=i.images;s<a.length;s++){var h=a[s];h.height!==void 0&&h.width!==void 0?(this.updatelastRowOffset(i,h),this.updatelastColumnOffSet(i,h),h.lastRow-=1,h.lastColumn-=1):h.lastRow!==void 0&&h.lastColumn!==void 0&&(h.lastRowOffset=0,h.lastColOffset=0),n++,r+='<xdr:twoCellAnchor editAs="oneCell">',r+="<xdr:from><xdr:col>",r+=h.column-1,r+="</xdr:col><xdr:colOff>",r+=0,r+="</xdr:colOff><xdr:row>",r+=h.row-1,r+="</xdr:row><xdr:rowOff>",r+=0,r+="</xdr:rowOff></xdr:from>",r+="<xdr:to><xdr:col>",r+=h.lastColumn,r+="</xdr:col><xdr:colOff>",r+=h.lastColOffset,r+="</xdr:colOff><xdr:row>",r+=h.lastRow,r+="</xdr:row><xdr:rowOff>",r+=h.lastRowOffset,r+="</xdr:rowOff></xdr:to>",r+="<xdr:pic>",r+="<xdr:nvPicPr>",r+='<xdr:cNvPr id="'+n+'" name="Picture '+n+'"> </xdr:cNvPr>',r+='<xdr:cNvPicPr><a:picLocks noChangeAspect="1"/></xdr:cNvPicPr> </xdr:nvPicPr>',r+="<xdr:blipFill>",r+='<a:blip xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" r:embed="rId'+n+'" cstate="print">',r+="</a:blip><a:stretch><a:fillRect /></a:stretch></xdr:blipFill>",r+="<xdr:spPr>",r+="<a:xfrm",h.rotation!=null&&h.rotation<=3600&&h.rotation>=-3600&&(r+=' rot="'+h.rotation*6e4+'"'),h.verticalFlip!=null&&h.verticalFlip!=!1&&(r+=' flipV="1"'),h.horizontalFlip!=null&&h.horizontalFlip!=!1&&(r+=' flipH="1"'),r+="/>",r+='<a:prstGeom prst="rect"><a:avLst /></a:prstGeom></xdr:spPr>',r+="</xdr:pic><xdr:clientData /></xdr:twoCellAnchor>";var l=this.convertBase64toImage(h.image);this.imageCount+=1,this.addToArchive(l,"xl/media/image"+this.imageCount+".png")}t.append(r),t.append("</xdr:wsDr>"),this.saveDrawingRelations(i),this.addToArchive(t.getBlob(),"xl/drawings/drawing"+this.drawingCount+".xml")}},o.prototype.updatelastRowOffset=function(i,e){for(var t=e.height,r=e.row,n=0;t>=0;){var s=0;i.rows!==void 0&&i.rows[r-1]!==void 0?s=this.convertToPixels(i.rows[r-1].height===void 0?15:i.rows[r-1].height):s=this.convertToPixels(15);var a=s-n*s/256;if(a>t){e.lastRow=r,e.lastRowOffset=n+t*256/s;var h=0;i.rows!==void 0&&i.rows[r-1]!==void 0?h=this.convertToPixels(i.rows[r-1].height===void 0?15:i.rows[r-1].height):h=this.convertToPixels(15),e.lastRowOffset=h*e.lastRowOffset/256,e.lastRowOffset=Math.round(e.lastRowOffset/this.unitsProportions[7]);break}else t-=a,r++,n=0}},o.prototype.updatelastColumnOffSet=function(i,e){for(var t=e.width,r=e.column,n=0;t>=0;){var s=0;i.columns!==void 0&&i.columns[r-1]!==void 0?s=this.ColumnWidthToPixels(i.columns[r-1].width===void 0?8.43:i.columns[r-1].width):s=this.ColumnWidthToPixels(8.43);var a=s-n*s/1024;if(a>t){e.lastColumn=r,e.lastColOffset=n+t*1024/s;var h=0;i.columns!==void 0&&i.columns[r-1]!==void 0?h=this.ColumnWidthToPixels(i.columns[r-1].width===void 0?8.43:i.columns[r-1].width):h=this.ColumnWidthToPixels(8.43),e.lastColOffset=h*e.lastColOffset/1024,e.lastColOffset=Math.round(e.lastColOffset/this.unitsProportions[7]);break}else t-=a,r++,n=0}},o.prototype.convertToPixels=function(i){return i*this.unitsProportions[6]},o.prototype.convertBase64toImage=function(i){for(var e=window.atob(i),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);var s=new Blob([r],{type:"image/png"});return s},o.prototype.saveDrawingRelations=function(i){for(var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',t=i.images.length,r=this.imageCount-i.images.length,n=1;n<=t;n++)r++,e+='<Relationship Id="rId'+n+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" Target="../media/image'+r+'.png" />';this.addToArchive(e+"</Relationships>","xl/drawings/_rels/drawing"+this.drawingCount+".xml.rels")},o.prototype.pixelsToColumnWidth=function(i){var e=7,t=i>e+5?this.trunc((i-5)/e*100+.5)/100:i/(e+5);return t>1?(t*e+5)/e*256/256:t*(e+5)/e*256/256},o.prototype.ColumnWidthToPixels=function(i){var e=7,t=i>1?(i*e+5)/e*256/256:i*(e+5)/e*256/256;return this.trunc((256*t+this.trunc(128/e))/256*e)},o.prototype.trunc=function(i){var e=i-i%1;return e===0&&(i<0||i===0&&1/i!==1/0)?-0:e},o.prototype.pixelsToRowHeight=function(i){return i*this.unitsProportions[5]/this.unitsProportions[6]},o.prototype.saveSheetRelations=function(i){for(var e='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',t=0,r=i.hyperLinks;t<r.length;t++){var n=r[t];e+='<Relationship Id="rId'+n.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="'+this.processString(n.target)+'" TargetMode="External" />'}return i.images!=null&&i.images.length>0&&(e+='<Relationship Id="rId'+(i.hyperLinks.length+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing" Target="../drawings/drawing'+this.drawingCount+'.xml" />'),e+="</Relationships>",e},o.prototype.saveSheetView=function(i){var e='<sheetViews><sheetView workbookViewId="0" ';return i.enableRtl===!0&&(e+='rightToLeft="1"'),i.showGridLines===!1?e+='showGridLines="0" >':e+=">",i.freezePanes!==void 0&&(e+='<pane state="frozen" topLeftCell="'+i.freezePanes.leftCell+'" ',i.freezePanes.row!==0&&(e+='ySplit="'+i.freezePanes.row+'" '),i.freezePanes.column!==0&&(e+='xSplit="'+i.freezePanes.column+'" '),e+="/>"),e+="</sheetView></sheetViews > ",e},o.prototype.saveSharedString=function(){var i=this.sharedString.length;if(i>0){for(var e='<?xml version="1.0" encoding="utf-8"?><sst uniqueCount="'+i+'" count="'+this.sharedStringCount+'" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">',t="",r=0;r<i;r++)this.sharedString[r].indexOf("<r>")!==0?(t+="<si><t>",t+=this.processString(this.sharedString[r]),t+="</t></si>"):(t+="<si>",t+=this.sharedString[r],t+="</si>");t+="</sst>",this.addToArchive(e+t,"xl/sharedStrings.xml")}},o.prototype.processString=function(i){if(typeof i=="string")i.indexOf("&")!==-1&&(i=i.replace(/&/g,"&amp;")),i.indexOf("<")!==-1&&(i=i.replace(/</g,"&lt;")),i.indexOf(">")!==-1&&(i=i.replace(/>/g,"&gt;")),i.indexOf("\v")!==-1&&(i=i.replace(/\v/g,"_x000B_"));else if(typeof i=="object")for(var e=0;e<i.length;e++)i[e].indexOf("&")!==-1&&(i[e]=i[e].replace(/&/g,"&amp;")),i[e].indexOf("<")!==-1&&(i[e]=i[e].replace(/</g,"&lt;")),i[e].indexOf(">")!==-1&&(i[e]=i[e].replace(/>/g,"&gt;")),i[e].indexOf("\v")!==-1&&(i[e]=i[e].replace(/\v/g,"_x000B_"));return i},o.prototype.saveStyles=function(){this.updateCellXfsStyleXfs();var i='<?xml version="1.0" encoding="utf-8"?><styleSheet xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';i+=this.saveNumberFormats(),i+=this.saveFonts(),i+=this.saveFills(),i+=this.saveBorders(),i+=this.saveCellStyleXfs(),i+=this.saveCellXfs(),i+=this.saveCellStyles(),this.addToArchive(i+"</styleSheet>","xl/styles.xml")},o.prototype.updateCellXfsStyleXfs=function(){for(var i=0,e=this.mStyles;i<e.length;i++){var t=e[i],r=void 0;t.isGlobalStyle?(r=new ch,r.xfId=t.index-1):(r=new hh,r.xfId=0);var n=this.isNewFont(t);if(n.result)r.fontId=n.index;else{var s=new ss;s.b=t.bold,s.i=t.italic,s.name=t.fontName,s.sz=t.fontSize,s.u=t.underline,s.strike=t.strikeThrough,s.color="FF"+t.fontColor.replace("#",""),this.mFonts.push(s),r.fontId=this.mFonts.length-1}if(t.backColor!=="none"){var a="FF"+t.backColor.replace("#","");if(this.mFills.has(a)){var h=this.mFills.get(a);r.fillId=h}else{var h=this.mFills.size+2;this.mFills.set(a,h),r.fillId=h}}else r.fillId=0;if(this.isNewBorder(t)?r.borderId=0:(this.mBorders.push(t.borders),r.borderId=this.mBorders.length),t.numberFormat!=="GENERAL")if(this.mNumFmt.has(t.numberFormat)){var l=this.mNumFmt.get(t.numberFormat);r.numFmtId=l.numFmtId}else{var p=this.mNumFmt.size+164;this.mNumFmt.set(t.numberFormat,new os(p,t.numberFormat)),r.numFmtId=p}else t.numberFormat==="GENERAL"&&t.numFmtId===14?r.numFmtId=14:r.numFmtId=0;t.isGlobalStyle||(r.applyAlignment=1),r.alignment=new ph,r.alignment.indent=t.indent,r.alignment.horizontal=t.hAlign,r.alignment.vertical=t.vAlign,r.alignment.wrapText=t.wrapText?1:0,r.alignment.rotation=t.rotation,t.isGlobalStyle?(this.mCellStyleXfs.push(r),this.mCellXfs.push(r)):this.mCellXfs.push(r)}},o.prototype.saveNumberFormats=function(){if(this.mNumFmt.size>=1){var i='<numFmts count="'+this.mNumFmt.size+'">';return this.mNumFmt.forEach(function(e,t){i+='<numFmt numFmtId="'+e.numFmtId+'" formatCode="'+e.formatCode.replace(/"/g,"&quot;")+'" />'}),i+="</numFmts>"}else return""},o.prototype.saveFonts=function(){var i='<fonts count="'+this.mFonts.length+'">';if(this.mFonts.length>=1)for(var e=0,t=this.mFonts;e<t.length;e++){var r=t[e];i+="<font>",r.b&&(i+="<b />"),r.i&&(i+="<i />"),r.u&&(i+="<u />"),r.strike&&(i+="<strike />"),i+='<sz val="'+r.sz+'" />',i+='<color rgb="'+r.color+'" />',i+='<name val="'+r.name+'" /></font>'}return i+"</fonts>"},o.prototype.saveFills=function(){var i='<fills count="'+(this.mFills.size+2)+'"><fill><patternFill patternType="none"></patternFill></fill><fill><patternFill patternType="gray125"></patternFill></fill>';return this.mFills.size>=1&&this.mFills.forEach(function(e,t){i+='<fill><patternFill patternType="solid"><fgColor rgb="'+t+'" /><bgColor rgb="FFFFFFFF" /></patternFill></fill>'}),i+"</fills>"},o.prototype.saveBorders=function(){var i='<borders count="'+(this.mBorders.length+1)+'"><border><left /><right /><top /><bottom /><diagonal /></border>';if(this.mBorders.length>=1)for(var e=0,t=this.mBorders;e<t.length;e++){var r=t[e];if(this.isAllBorder(r)){var n=r.all.color.replace("#",""),s=r.all.lineStyle;i+='<border><left style="'+s+'"><color rgb="FF'+n+'" /></left><right style="'+s+'"><color rgb="FF'+n+'" /></right><top style="'+s+'"><color rgb="FF'+n+'" /></top><bottom style="'+s+'"><color rgb="FF'+n+'" /></bottom></border>'}else i+='<border><left style="'+r.left.lineStyle+'"><color rgb="FF'+r.left.color.replace("#","")+'" /></left><right style="'+r.right.lineStyle+'"><color rgb="FF'+r.right.color.replace("#","")+'" /></right><top style="'+r.top.lineStyle+'"><color rgb="FF'+r.top.color.replace("#","")+'" /></top><bottom style="'+r.bottom.lineStyle+'"><color rgb="FF'+r.bottom.color.replace("#","")+'" /></bottom></border>'}return i+"</borders>"},o.prototype.saveCellStyles=function(){var i=this,e='<cellStyles  count="'+this.cellStyles.size+'">';return this.cellStyles.forEach(function(t,r){e+='<cellStyle name="'+r+'" xfId="'+i.cellStyles.get(r).xfId+'"',r==="Normal"&&(e+=' builtinId="0"'),e+=" />"}),e+="</cellStyles>"},o.prototype.saveCellStyleXfs=function(){var i='<cellStyleXfs count="'+(this.mCellStyleXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" />';if(this.mCellStyleXfs.length>=1)for(var e=0,t=this.mCellStyleXfs;e<t.length;e++){var r=t[e];i+='<xf numFmtId="'+r.numFmtId+'" fontId="'+r.fontId+'" fillId="'+r.fillId+'" borderId="'+r.borderId+'" ',r.alignment!==void 0?i+=">"+this.saveAlignment(r)+"</xf>":i+=" />"}return i+"</cellStyleXfs>"},o.prototype.saveCellXfs=function(){var i='<cellXfs count="'+(this.mCellXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0" />';if(this.mCellXfs.length>=1)for(var e=0,t=this.mCellXfs;e<t.length;e++){var r=t[e];i+='<xf numFmtId="'+r.numFmtId+'" fontId="'+r.fontId+'" fillId="'+r.fillId+'" borderId="'+r.borderId+'" xfId="'+r.xfId+'" ',r.applyAlignment===1&&(i+='applyAlignment="1"'),i+=">"+this.saveAlignment(r)+"</xf>"}return i+"</cellXfs>"},o.prototype.saveAlignment=function(i){var e="<alignment ";return i.alignment.horizontal!==void 0&&(e+='horizontal="'+i.alignment.horizontal+'" '),i.alignment.indent!==void 0&&i.alignment.indent!==0?e+='indent="'+i.alignment.indent+'" ':i.alignment.rotation!==void 0&&i.alignment.rotation!==0&&(e+='textRotation="'+i.alignment.rotation+'" '),i.alignment.vertical!==void 0&&(e+='vertical="'+i.alignment.vertical+'" '),e+='wrapText="'+i.alignment.wrapText+'" />',e},o.prototype.saveApp=function(i){var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>Essential XlsIO</Application>';i!==void 0&&(i.manager!==void 0&&(e+="<Manager>"+i.manager+"</Manager>"),i.company!==void 0&&(e+="<Company>"+i.company+"</Company>")),this.addToArchive(e+"</Properties>","docProps/app.xml")},o.prototype.saveCore=function(i){var e=new Date,t='<?xml version="1.0" encoding="utf-8" standalone="yes"?><cp:coreProperties xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties">';this.builtInProperties!==void 0?(i.author!==void 0&&(t+="<dc:creator>"+i.author+"</dc:creator>"),i.subject!==void 0&&(t+="<dc:subject>"+i.subject+"</dc:subject>"),i.category!==void 0&&(t+="<cp:category>"+i.category+"</cp:category>"),i.comments!==void 0&&(t+="<dc:description>"+i.comments+"</dc:description>"),i.title!==void 0&&(t+="<dc:title>"+i.title+"</dc:title>"),i.tags!==void 0&&(t+="<cp:keywords>"+i.tags+"</cp:keywords>"),i.status!==void 0&&(t+="<cp:contentStatus>"+i.status+"</cp:contentStatus>"),i.createdDate!==void 0?t+='<dcterms:created xsi:type="dcterms:W3CDTF">'+i.createdDate.toISOString()+"</dcterms:created>":t+='<dcterms:created xsi:type="dcterms:W3CDTF">'+e.toISOString()+"</dcterms:created>",i.modifiedDate!==void 0?t+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+i.modifiedDate.toISOString()+"</dcterms:modified>":t+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+e.toISOString()+"</dcterms:modified>"):(t+='<dcterms:created xsi:type="dcterms:W3CDTF">'+e.toISOString()+"</dcterms:created>",t+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+e.toISOString()+"</dcterms:modified>"),t+="</cp:coreProperties>",this.addToArchive(t,"docProps/core.xml")},o.prototype.saveTopLevelRelation=function(){var i='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml" /><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml" /><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml" /></Relationships>';this.addToArchive(i,"_rels/.rels")},o.prototype.saveWorkbookRelation=function(){for(var i='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',e=this.worksheets.length,t=0,r=0;r<e;r++,t++)i+='<Relationship Id="rId'+(r+1).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+(r+1).toString()+'.xml" />';i+='<Relationship Id="rId'+(++t).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" />',this.sharedStringCount>0&&(i+='<Relationship Id="rId'+(++t).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" />'),this.addToArchive(i+"</Relationships>","xl/_rels/workbook.xml.rels")},o.prototype.saveContentType=function(){for(var i='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" />',e="",t=this.worksheets.length,r=0,n=0;n<t;n++)e+='<Override PartName="/xl/worksheets/sheet'+(n+1).toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" />',this.worksheets[n].images!=null&&this.worksheets[n].images.length>0&&(r++,e+='<Override PartName="/xl/drawings/drawing'+r.toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.drawing+xml" />');this.imageCount>0&&(e+='<Default Extension="png" ContentType="image/png" />'),this.sharedStringCount>0&&(i+='<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" />'),this.addToArchive(i+e+"</Types>","[Content_Types].xml")},o.prototype.addToArchive=function(i,e){if(typeof i=="string"){var t=new Blob([i],{type:"text/plain"}),r=new kt(t,e);this.mArchive.addItem(r)}else{var r=new kt(i,e);this.mArchive.addItem(r)}},o.prototype.processMergeCells=function(i,e,t){if(i.rowSpan!==0||i.colSpan!==0){var r=new aa;r.x=i.index,r.width=i.colSpan,r.y=e,r.height=i.rowSpan;var n=this.getCellName(r.y,r.x),s=this.getCellName(e+r.height,i.index+r.width);r.ref=n+":"+s,t.add(r);var a={x:r.x,y:r.y},h={x:i.index+r.width,y:e+r.height};this.updatedMergedCellStyles(a,h,i)}return t},o.prototype.updatedMergedCellStyles=function(i,e,t){for(var r=i.x;r<=e.x;r++)for(var n=i.y;n<=e.y;n++)this.mergedCellsStyle.set(this.getCellName(n,r),{x:r,y:n,styleIndex:t.styleIndex})},o.prototype.dateToTicks=function(i,e,t){var r=864e9,n=[0,31,59,90,120,151,181,212,243,273,304,334,365],s=[0,31,60,91,121,152,182,213,244,274,305,335,366];if(i>=1&&i<=9999&&e>=1&&e<=12){var a=this.isLeapYear(i)?s:n,h=i-1,l=h*365+(h/4|0)-(h/100|0)+(h/400|0)+a[e-1]+t-1;return l*r}throw new Error("Not a valid date")},o.prototype.timeToTicks=function(i,e,t){if(i>=0&&i<24&&e>=0&&e<60&&t>=0&&t<60){var r=i*3600+e*60+t;return r*1e4*1e3}throw new Error("Not valid time")},o.prototype.isLeapYear=function(i){return i%4===0&&(i%100!==0||i%400===0)},o.prototype.toOADate=function(i){var e=0;if(e=this.dateToTicks(i.getFullYear(),i.getMonth()+1,i.getDate())+this.timeToTicks(i.getHours(),i.getMinutes(),i.getSeconds()),e===0)return 0;var t=1e4*1e3*60*60*24,r=(((365*4+1)*25-1)*4+1)*4+((365*4+1)*25-1)*3-367,n=r*t,s=((365*4+1)*25-1-365)*t;if(e<s)throw new Error("Arg_OleAutDateInvalid");var a=1e3*60*60*24;return(e-n)/1e4/a},o}(),Hh=function(){function o(){}return o}(),Ph=function(){function o(i){this.parent=i}return o.prototype.initializeExcelExport=function(i){i===void 0&&(i={});var e=this.getExportColumns(i),t=i.fileName||"Schedule",r=i.exportType||"xlsx",n=i.includeOccurrences||!1,s;!d(i.separator)&&i.separator!==","&&(s=i.separator);var a;i.customData?a=n?this.parent.eventBase.getProcessedEvents(i.customData):i.customData:a=n?this.parent.eventsProcessed:this.parent.eventsData,this.processWorkbook(e,t,r,a,s)},o.prototype.processWorkbook=function(i,e,t,r,n){var s=this,a=[],h=[],l=[];i.forEach(function(f,g){a.push({index:g+1,width:f.name==="Id"?50:150})});var p={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};i.forEach(function(f,g){l.push({index:g+1,value:f.text,style:p})}),h.push({index:1,cells:l}),r.forEach(function(f,g){var v=[];i.forEach(function(m,y){var w={index:y+1,value:f[m.name]||""};if(m.name===s.parent.eventFields.startTime||m.name===s.parent.eventFields.endTime){var C={fontSize:12,numberFormat:"m/d/yyyy h:mm a"};w=P({},w,{style:C},!0)}v.push(w)}),h.push({index:g+2,cells:v})});var u=[{columns:a,rows:h}],c=new Rh({worksheets:u},t,this.parent.locale,void 0,n);c.save(e+"."+t)},o.prototype.getExportColumns=function(i){var e=this,t=i.fieldsInfo||[];if(t.length===0){var r=i.fields||Object.keys(this.parent.eventFields).map(function(n){return e.parent.eventFields[""+n]});r.forEach(function(n){t.push({name:n,text:n})})}return t},o.prototype.getModuleName=function(){return"excelExport"},o.prototype.destroy=function(){this.parent=null},o}(),Vh=function(){function o(i){this.parent=i}return o.prototype.print=function(i){d(i)?this.printScheduler():this.printSchedulerWithModel(i)},o.prototype.printScheduler=function(){var i=this.parent.element.cloneNode(!0);i.id=this.parent.element.id+"_print",document.body.appendChild(i);for(var e=this.parent.currentView==="MonthAgenda"?".e-appointment-wrap":".e-content-wrap",t=this.parent.element.querySelector(e),r=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("link, style")),n="",s=0,a=r;s<a.length;s++){var h=a[s];n+=h.outerHTML}var l=b("div");i.style.width=this.parent.element.offsetWidth+"px";var p=Math.round(parseInt(i.style.width,10)/100)*100;l.appendChild(i);var u=window.open("","print","height=550,width="+p+",tabbar=no");u.document.write("<!DOCTYPE html><html><head>"+n+"</head><body>"+l.innerHTML+"<script>(function() { window.ready = true; })();<\/script></body></html>"),u.document.close(),u.focus(),setTimeout(function(){if(u.ready&&t){t.scrollLeft=t.scrollLeft,t.scrollTop=t.scrollTop;var c=u.document.querySelector(".e-date-header-wrap");c&&(c.scrollLeft=t.scrollLeft);var f=u.document.querySelector(".e-time-cells-wrap");f&&(f.scrollTop=t.scrollTop);var g=u.document.querySelector(e);g&&(g.scrollLeft=t.scrollLeft,g.scrollTop=t.scrollTop),u.print(),u.close()}},500)},o.prototype.printSchedulerWithModel=function(i){var e=b("div",{id:this.parent.element.id+"_print",className:"e-print-schedule"});document.body.appendChild(e),Mn.Inject(Zs,Ks,Js,Ni,ea,rh,ia,ra,Zr,na),this.printInstance=new Mn(this.getPrintScheduleModel(i)),this.printInstance.isPrinting=!0,this.printInstance.registeredTemplate=this.parent.registeredTemplate,this.printInstance.root=this.parent.root?this.parent.root:this.parent,this.printInstance.appendTo(e),this.printInstance.on(Ln,this.contentReady,this),this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight)},o.prototype.getPrintScheduleModel=function(i){for(var e={},t=["agendaDaysCount","calendarMode","cssClass","currentView","dateFormat","enableRtl","endHour","eventSettings","firstDayOfWeek","firstMonthOfYear","group","height","locale","maxDate","minDate","readonly","resources","rowAutoHeight","selectedDate","showHeaderBar","showTimeIndicator","showWeekNumber","showWeekend","startHour","timeFormat","timeScale","timezone","views","width","workDays","workHours","dateHeaderTemplate","dateRangeTemplate","cellHeaderTemplate","dayHeaderTemplate","monthHeaderTemplate","cellTemplate","resourceHeaderTemplate","headerIndentTemplate","actionBegin","actionComplete","actionFailure","created","dataBinding","dataBound","destroyed","eventRendered","moreEventsClick","navigating","popupOpen","popupClose","renderCell"],r=["cellHeaderTemplate","dayHeaderTemplate","monthHeaderTemplate","cellTemplate","dateHeaderTemplate","dateRangeTemplate","eventTemplate","resourceHeaderTemplate","headerIndentTemplate"],n=["actionBegin","actionComplete","actionFailure","created","dataBinding","dataBound","destroyed","eventRendered","moreEventsClick","navigating","popupOpen","popupClose","renderCell"],s,a,h,l,p=0,u=t;p<u.length;p++){var c=u[p];switch(c){case"eventSettings":{s=Object.assign({},this.parent.eventSettings.properties),s.dataSource=this.parent.eventsData;var f=!d(i.eventSettings)&&!d(i.eventSettings.template)?i.eventSettings.template:s.template;s.template=!this.parent.isAngular&&typeof f=="function"?null:f,e.eventSettings=s;break}case"group":a=d(i.group)?this.parent.group:i.group,a.headerTooltipTemplate=null,e.group=a;break;case"timeScale":h=d(i.timeScale)?this.parent.timeScale:i.timeScale,this.parent.isAngular||(h.majorSlotTemplate=typeof h.majorSlotTemplate=="function"?null:h.majorSlotTemplate,h.minorSlotTemplate=typeof h.minorSlotTemplate=="function"?null:h.minorSlotTemplate),e.timeScale=h;break;case"views":if(l=d(i.views)?this.parent.views:i.views,!this.parent.isAngular&&l&&l.length>0&&typeof l[0]=="object")for(var g=function(w){r.forEach(function(C){d(w[""+C])||(w[""+C]=typeof w[""+C]=="function"?null:w[""+C])})},v=0,m=l;v<m.length;v++){var y=m[v];g(y)}e.views=l;break;default:if(r.indexOf(c)>-1){e[""+c]=d(i[""+c])?!this.parent.isAngular&&typeof this.parent[""+c]=="function"?null:this.parent[""+c]:!this.parent.isAngular&&typeof i[""+c]=="function"?null:i[""+c];break}if(n.indexOf(c)>-1){e[""+c]=i[""+c];break}e[""+c]=d(i[""+c])?this.parent[""+c]:i[""+c];break}}return e},o.prototype.contentReady=function(){var i=this;this.printWindow=Xo(this.printInstance.element,this.printWindow),this.printWindow.onbeforeunload=function(){i.printInstance&&(i.printInstance.off(Ln,i.contentReady),i.printInstance.element.remove(),i.printInstance.destroy(),i.printInstance=null),i.printWindow=null}},o.prototype.getModuleName=function(){return"print"},o.prototype.destroy=function(){this.parent=null},o}(),la=["isLazyUpdate","plugins","content","cssClass","disabled","enableHtmlSanitizer","enablePersistence","enableRtl","iconCss","iconPosition","isPrimary","isToggle","locale","created"],ha=[],pa=qe({props:la}),Nh=pa[0],ca=pa[1],Kr=Object.keys(ca);Kr.push("modelchanged","update:modelValue");for(var dr=0,vs=ha;dr<vs.length;dr++){var jh=vs[dr];Kr.push("update:"+jh)}var Wh=Fe({name:"ButtonComponent",mixins:[_e],props:Nh,watch:ca,emits:Kr,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Ds({}),propKeys:la,models:ha,hasChildDirective:!1,hasInjectedModules:!1,tagMapper:{},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("button",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},custom:function(){this.updated()},click:function(){return this.ej2Instances.click()},destroy:function(){return this.ej2Instances.destroy()},focusIn:function(){return this.ej2Instances.focusIn()}}}),ua=["isLazyUpdate","plugins","checked","cssClass","disabled","enableHtmlSanitizer","enablePersistence","enableRtl","htmlAttributes","indeterminate","label","labelPosition","locale","name","value","change","created"],da=["checked","indeterminate"],fa=qe({props:ua}),Uh=fa[0],va=fa[1],Jr=Object.keys(va);Jr.push("modelchanged","update:modelValue");for(var fr=0,gs=da;fr<gs.length;fr++){var zh=gs[fr];Jr.push("update:"+zh)}var qh=Fe({name:"CheckBoxComponent",mixins:[_e],props:Uh,watch:va,emits:Jr,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Zo({}),propKeys:ua,models:da,hasChildDirective:!1,hasInjectedModules:!1,tagMapper:{},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("input",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},trigger:function(o,i,e){if(H||(this.models=this.models?this.models:this.ej2Instances.referModels),(o==="change"||o==="input")&&this.models&&this.models.length!==0){var t=this.models.toString().match(/checked|value/)||[],r=t[0];i&&t&&!ot(i[r])&&(H?(o==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r]),this.ej2Instances.vueInstance.$emit("update:modelValue",i[r])))}else if(o==="actionBegin"&&i.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var t=this.models.toString().match(/currentView|selectedDate/)||[],r=t[0];i&&t&&!ot(i[r])&&(H?(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(o,i,e)},custom:function(){this.updated()},click:function(){return this.ej2Instances.click()},destroy:function(){return this.ej2Instances.destroy()},focusIn:function(){return this.ej2Instances.focusIn()}}}),ga=["isLazyUpdate","plugins","allowedExtensions","asyncSettings","autoUpload","buttons","cssClass","directoryUpload","dropArea","dropEffect","enableHtmlSanitizer","enablePersistence","enableRtl","enabled","files","htmlAttributes","locale","maxFileSize","minFileSize","multiple","sequentialUpload","showFileList","template","actionComplete","beforeRemove","beforeUpload","canceling","change","chunkFailure","chunkSuccess","chunkUploading","clearing","created","failure","fileListRendering","pausing","progress","removing","rendering","resuming","selected","success","uploading"],ma=[],ya=qe({props:ga}),_h=ya[0],ba=ya[1],Qr=Object.keys(ba);Qr.push("modelchanged","update:modelValue");for(var vr=0,ms=ma;vr<ms.length;vr++){var Gh=ms[vr];Qr.push("update:"+Gh)}var Yh=Fe({name:"UploaderComponent",mixins:[_e],props:_h,watch:ba,emits:Qr,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Al({}),propKeys:ga,models:ma,hasChildDirective:!0,hasInjectedModules:!1,tagMapper:{"e-files":"e-uploadedfiles"},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("input",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},custom:function(){this.updated()},bytesToSize:function(o){return this.ej2Instances.bytesToSize(o)},cancel:function(o){return this.ej2Instances.cancel(o)},clearAll:function(){return this.ej2Instances.clearAll()},createFileList:function(o){return this.ej2Instances.createFileList(o)},destroy:function(){return this.ej2Instances.destroy()},getFilesData:function(o){return this.ej2Instances.getFilesData(o)},pause:function(o,i){return this.ej2Instances.pause(o,i)},remove:function(o,i,e,t,r){return this.ej2Instances.remove(o,i,e,t,r)},resume:function(o,i){return this.ej2Instances.resume(o,i)},retry:function(o,i,e){return this.ej2Instances.retry(o,i,e)},sortFileList:function(o){return this.ej2Instances.sortFileList(o)},traverseFileTree:function(o,i){return this.ej2Instances.traverseFileTree(o,i)},upload:function(o,i){return this.ej2Instances.upload(o,i)}}}),wa=["isLazyUpdate","plugins","animationSettings","closeActionEvents","content","createPopupOnClick","cssClass","disabled","enableHtmlSanitizer","enablePersistence","enableRtl","iconCss","iconPosition","itemTemplate","items","locale","popupWidth","target","beforeClose","beforeItemRender","beforeOpen","close","created","open","select"],Sa=[],Ca=qe({props:wa}),$h=Ca[0],Ta=Ca[1],en=Object.keys(Ta);en.push("modelchanged","update:modelValue");for(var gr=0,ys=Sa;gr<ys.length;gr++){var Xh=ys[gr];en.push("update:"+Xh)}var Zh=Fe({name:"DropDownButtonComponent",mixins:[_e],props:$h,watch:Ta,emits:en,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Fl({}),propKeys:wa,models:Sa,hasChildDirective:!0,hasInjectedModules:!1,tagMapper:{"e-dropdownbuttonitems":"e-dropdownbuttonitem"},tagNameMapper:{"e-dropdownbuttonitems":"e-items"},isVue3:!H,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("button",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},custom:function(){this.updated()},addItems:function(o,i){return this.ej2Instances.addItems(o,i)},destroy:function(){return this.ej2Instances.destroy()},focusIn:function(){return this.ej2Instances.focusIn()},removeItems:function(o,i){return this.ej2Instances.removeItems(o,i)},toggle:function(){return this.ej2Instances.toggle()}}}),Kh=Fe({inject:{custom:{default:null}},render:function(o){if(!H){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("div",{class:"e-directive"},e)}},updated:function(){!H&&this.custom&&this.custom()},methods:{getTag:function(){return"e-items"}}}),Jh=Fe({render:function(){},methods:{getTag:function(){return"e-item"}}}),Oa=["isLazyUpdate","plugins","allowKeyboard","cssClass","enableCollision","enableHtmlSanitizer","enablePersistence","enableRtl","height","items","locale","overflowMode","scrollStep","width","beforeCreate","clicked","created","destroyed"],Ea=[],Da=qe({props:Oa}),Qh=Da[0],Aa=Da[1],tn=Object.keys(Aa);tn.push("modelchanged","update:modelValue");for(var mr=0,bs=Ea;mr<bs.length;mr++){var ep=bs[mr];tn.push("update:"+ep)}var tp=Fe({name:"ToolbarComponent",mixins:[_e],props:Qh,watch:Aa,emits:tn,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Ko({}),propKeys:Oa,models:Ea,hasChildDirective:!0,hasInjectedModules:!1,tagMapper:{"e-items":"e-item"},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("div",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},custom:function(){this.updated()},addItems:function(o,i){return this.ej2Instances.addItems(o,i)},destroy:function(){return this.ej2Instances.destroy()},disable:function(o){return this.ej2Instances.disable(o)},enableItems:function(o,i){return this.ej2Instances.enableItems(o,i)},hideItem:function(o,i){return this.ej2Instances.hideItem(o,i)},refreshOverflow:function(){return this.ej2Instances.refreshOverflow()},removeItems:function(o){return this.ej2Instances.removeItems(o)}}}),Ia=["isLazyUpdate","plugins","animationSettings","cssClass","enableHtmlSanitizer","enablePersistence","enableRtl","enableScrolling","fields","filter","hoverDelay","itemTemplate","items","locale","showItemOnClick","target","template","beforeClose","beforeItemRender","beforeOpen","created","onClose","onOpen","select"],xa=[],Ma=qe({props:Ia}),ip=Ma[0],La=Ma[1],rn=Object.keys(La);rn.push("modelchanged","update:modelValue");for(var yr=0,ws=xa;yr<ws.length;yr++){var rp=ws[yr];rn.push("update:"+rp)}var np=Fe({name:"ContextMenuComponent",mixins:[_e],props:ip,watch:La,emits:rn,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new vl({}),propKeys:Ia,models:xa,hasChildDirective:!1,hasInjectedModules:!1,tagMapper:{},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("ul",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},custom:function(){this.updated()},close:function(){return this.ej2Instances.close()},destroy:function(){return this.ej2Instances.destroy()},enableItems:function(o,i,e){return this.ej2Instances.enableItems(o,i,e)},getItemIndex:function(o,i){return this.ej2Instances.getItemIndex(o,i)},getMenuWidth:function(o,i,e){return this.ej2Instances.getMenuWidth(o,i,e)},hideItems:function(o,i){return this.ej2Instances.hideItems(o,i)},insertAfter:function(o,i,e){return this.ej2Instances.insertAfter(o,i,e)},insertBefore:function(o,i,e){return this.ej2Instances.insertBefore(o,i,e)},open:function(o,i,e){return this.ej2Instances.open(o,i,e)},removeItems:function(o,i){return this.ej2Instances.removeItems(o,i)},setItem:function(o,i,e){return this.ej2Instances.setItem(o,i,e)},showItems:function(o,i){return this.ej2Instances.showItems(o,i)}}}),Fa=["isLazyUpdate","plugins","colorMode","cssClass","enablePersistence","enableRtl","htmlAttributes","isSticky","locale","mode","position","created","destroyed"],ka=[],Ba=qe({props:Fa}),sp=Ba[0],Ra=Ba[1],nn=Object.keys(Ra);nn.push("modelchanged","update:modelValue");for(var br=0,Ss=ka;br<Ss.length;br++){var ap=Ss[br];nn.push("update:"+ap)}var op=Fe({name:"AppBarComponent",mixins:[_e],props:sp,watch:Ra,emits:nn,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Bl({}),propKeys:Fa,models:ka,hasChildDirective:!1,hasInjectedModules:!1,tagMapper:{},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("header",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},custom:function(){this.updated()},destroy:function(){return this.ej2Instances.destroy()}}}),Ha=["isLazyUpdate","plugins","allowEdit","cssClass","enableMask","enablePersistence","enableRtl","enabled","floatLabelType","format","fullScreenMode","htmlAttributes","keyConfigs","locale","maskPlaceholder","max","min","openOnFocus","placeholder","readonly","scrollTo","serverTimezoneOffset","showClearButton","step","strictMode","value","width","zIndex","blur","change","cleared","close","created","destroyed","focus","itemRender","open"],Pa=["value"],Va=qe({props:Ha}),lp=Va[0],Na=Va[1],sn=Object.keys(Na);sn.push("modelchanged","update:modelValue");for(var wr=0,Cs=Pa;wr<Cs.length;wr++){var hp=Cs[wr];sn.push("update:"+hp)}var pp=Fe({name:"TimePickerComponent",mixins:[_e],props:lp,watch:Na,emits:sn,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Jo({}),propKeys:Ha,models:Pa,hasChildDirective:!1,hasInjectedModules:!0,tagMapper:{},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("input",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},trigger:function(o,i,e){if(H||(this.models=this.models?this.models:this.ej2Instances.referModels),(o==="change"||o==="input")&&this.models&&this.models.length!==0){var t=this.models.toString().match(/checked|value/)||[],r=t[0];i&&t&&!ot(i[r])&&(H?(o==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r]),this.ej2Instances.vueInstance.$emit("update:modelValue",i[r])))}else if(o==="actionBegin"&&i.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var t=this.models.toString().match(/currentView|selectedDate/)||[],r=t[0];i&&t&&!ot(i[r])&&(H?(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(o,i,e)},custom:function(){this.updated()},destroy:function(){return this.ej2Instances.destroy()},focusIn:function(){return this.ej2Instances.focusIn()},focusOut:function(){return this.ej2Instances.focusOut()},hide:function(){return this.ej2Instances.hide()},requiredModules:function(){return this.ej2Instances.requiredModules()},show:function(o){return this.ej2Instances.show(o)}}}),ja=["isLazyUpdate","plugins","actionFailureTemplate","allowFiltering","allowObjectBinding","allowResize","cssClass","dataSource","enablePersistence","enableRtl","enableVirtualization","enabled","fields","filterBarPlaceholder","filterType","floatLabelType","footerTemplate","groupTemplate","headerTemplate","htmlAttributes","ignoreAccent","ignoreCase","index","isDeviceFullScreen","itemTemplate","locale","noRecordsTemplate","placeholder","popupHeight","popupWidth","query","readonly","showClearButton","sortOrder","text","value","valueTemplate","width","zIndex","actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","dataBound","destroyed","filtering","focus","open","resizeStart","resizeStop","resizing","select"],Wa=["value"],Ua=qe({props:ja}),cp=Ua[0],za=Ua[1],an=Object.keys(za);an.push("modelchanged","update:modelValue");for(var Sr=0,Ts=Wa;Sr<Ts.length;Sr++){var up=Ts[Sr];an.push("update:"+up)}var dp=Fe({name:"DropDownListComponent",mixins:[_e],props:cp,watch:za,emits:an,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Qo({}),propKeys:ja,models:Wa,hasChildDirective:!1,hasInjectedModules:!0,tagMapper:{},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("input",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},trigger:function(o,i,e){if(H||(this.models=this.models?this.models:this.ej2Instances.referModels),(o==="change"||o==="input")&&this.models&&this.models.length!==0){var t=this.models.toString().match(/checked|value/)||[],r=t[0];i&&t&&!ot(i[r])&&(H?(o==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r]),this.ej2Instances.vueInstance.$emit("update:modelValue",i[r])))}else if(o==="actionBegin"&&i.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var t=this.models.toString().match(/currentView|selectedDate/)||[],r=t[0];i&&t&&!ot(i[r])&&(H?(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(o,i,e)},custom:function(){this.updated()},addItem:function(o,i){return this.ej2Instances.addItem(o,i)},clear:function(){return this.ej2Instances.clear()},destroy:function(){return this.ej2Instances.destroy()},disableItem:function(o){return this.ej2Instances.disableItem(o)},filter:function(o,i,e){return this.ej2Instances.filter(o,i,e)},focusIn:function(o){return this.ej2Instances.focusIn(o)},focusOut:function(o){return this.ej2Instances.focusOut(o)},getDataByValue:function(o){return this.ej2Instances.getDataByValue(o)},getItems:function(){return this.ej2Instances.getItems()},hidePopup:function(o){return this.ej2Instances.hidePopup(o)},hideSpinner:function(){return this.ej2Instances.hideSpinner()},requiredModules:function(){return this.ej2Instances.requiredModules()},showPopup:function(o){return this.ej2Instances.showPopup(o)},showSpinner:function(){return this.ej2Instances.showSpinner()}}}),qa=["isLazyUpdate","plugins","actionFailureTemplate","addTagOnBlur","allowCustomValue","allowFiltering","allowObjectBinding","allowResize","changeOnBlur","closePopupOnSelect","cssClass","dataSource","delimiterChar","enableGroupCheckBox","enableHtmlSanitizer","enablePersistence","enableRtl","enableSelectionOrder","enableVirtualization","enabled","fields","filterBarPlaceholder","filterType","floatLabelType","footerTemplate","groupTemplate","headerTemplate","hideSelectedItem","htmlAttributes","ignoreAccent","ignoreCase","isDeviceFullScreen","itemTemplate","locale","maximumSelectionLength","mode","noRecordsTemplate","openOnClick","placeholder","popupHeight","popupWidth","query","readonly","selectAllText","showClearButton","showDropDownIcon","showSelectAll","sortOrder","text","unSelectAllText","value","valueTemplate","width","zIndex","actionBegin","actionComplete","actionFailure","beforeOpen","beforeSelectAll","blur","change","chipSelection","close","created","customValueSelection","dataBound","destroyed","filtering","focus","open","removed","removing","resizeStart","resizeStop","resizing","select","selectedAll","tagging"],_a=["value"],Ga=qe({props:qa}),fp=Ga[0],Ya=Ga[1],on=Object.keys(Ya);on.push("modelchanged","update:modelValue");for(var Cr=0,Os=_a;Cr<Os.length;Cr++){var vp=Os[Cr];on.push("update:"+vp)}var gp=Fe({name:"MultiSelectComponent",mixins:[_e],props:fp,watch:Ya,emits:on,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instance:new _s({}),propKeys:qa,models:_a,hasChildDirective:!1,hasInjectedModules:!0,tagMapper:{},tagNameMapper:{},isVue3:!H,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(o){var i=H?o:Ve,e=null;return d(this.$slots.default)||(e=H?this.$slots.default:this.$slots.default()),i("input",e)},methods:{clearTemplate:function(o){if(o||(o=Object.keys(this.templateCollection||{})),o.length&&this.templateCollection)for(var i=0,e=o;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var a=s[n];this.destroyPortals(a)}delete this.templateCollection[t]}}},setProperties:function(o,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(o,i),o&&this.models&&this.models.length&&Object.keys(o).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,o[t]):(e.$emit("update:"+t,o[t]),e.$emit("modelchanged",o[t])))})})},trigger:function(o,i,e){if(H||(this.models=this.models?this.models:this.ej2Instances.referModels),(o==="change"||o==="input")&&this.models&&this.models.length!==0){var t=this.models.toString().match(/checked|value/)||[],r=t[0];i&&t&&!ot(i[r])&&(H?(o==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r]),this.ej2Instances.vueInstance.$emit("update:modelValue",i[r])))}else if(o==="actionBegin"&&i.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var t=this.models.toString().match(/currentView|selectedDate/)||[],r=t[0];i&&t&&!ot(i[r])&&(H?(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(o,i,e)},custom:function(){this.updated()},addItem:function(o,i){return this.ej2Instances.addItem(o,i)},clear:function(){return this.ej2Instances.clear()},destroy:function(){return this.ej2Instances.destroy()},disableItem:function(o){return this.ej2Instances.disableItem(o)},filter:function(o,i,e){return this.ej2Instances.filter(o,i,e)},focusIn:function(){return this.ej2Instances.focusIn()},focusOut:function(){return this.ej2Instances.focusOut()},getDataByValue:function(o){return this.ej2Instances.getDataByValue(o)},getItems:function(){return this.ej2Instances.getItems()},hidePopup:function(o){return this.ej2Instances.hidePopup(o)},hideSpinner:function(){return this.ej2Instances.hideSpinner()},requiredModules:function(){return this.ej2Instances.requiredModules()},selectAll:function(o){return this.ej2Instances.selectAll(o)},showPopup:function(o){return this.ej2Instances.showPopup(o)},showSpinner:function(){return this.ej2Instances.showSpinner()}}});_s.Inject(Ul);ll();const mp={components:{"ejs-schedule":nl,"e-view":rl,"e-views":il,"e-resource":tl,"e-resources":el,"ejs-dropdownlist":dp,"ejs-appbar":op,"ejs-button":Wh,"ejs-uploader":Yh,"ejs-dropdownbutton":Zh,"ejs-toolbar":tp,"e-items":Kh,"e-item":Jh,"ejs-contextmenu":np,"ejs-timepicker":pp,"ejs-multiselect":gp,"ejs-checkbox":qh},props:{reservas:Array},data:function(){return{intl:new Xr,eventSettings:{dataSource:this.generateEvents()},currentView:"Week",group:{resources:["Calendars"]},resourceDataSource:[{CalendarText:"Calendario de Reservas",CalendarId:1,CalendarColor:"#000"}],resourceQuery:new ol().where("CalendarId","equal",1),allowMultiple:!0,liveTimeUpdate:new Date().toLocaleTimeString("en-US",{timeZone:"America/Bogota"}),showFileList:!1,multiple:!1,calendarFields:{text:"CalendarText",value:"CalendarId"},timeSlotCountValue:2,weekNumberValue:"Off",tooltipData:[{text:"Off",value:"Off"},{text:"On",value:"On"}],tooltipValue:"Off",checkboxMode:"CheckBox",calendarsValue:[1],fields:{text:"text",value:"value"},selectedTarget:null}},provide:{schedule:[Zs,Ks,Js,Ni,ea,ql,Yl,ra,ia,Zr,na,Vh,Ph,lh,oh]},beforeUnmount:function(){},methods:{onEventClick:function(o){this.$emit("event-click",o.event)},generateEvents:function(){const o=[];for(let n of this.reservas){const s=n.date,a=n.hour,h=`${s}T${a}`,l=new Date(h),p=new Date(h);p.setHours(p.getHours()+2),o.push({Id:n.id,Subject:n.service.title,StartTime:l,EndTime:p,Location:"Cartagena",Description:n.cliente_name,IsReadonly:!0,CalendarId:1})}/MSIE \d|Trident.*rv:/.test(navigator.userAgent)&&(Fn.prototype.offset=(n,s)=>moment.tz.zone(s).utcOffset(n.getTime()));const i=P([],o,null,!0),e=new Fn,t="UTC",r=e.getLocalTimezoneName();for(const n of i)n.StartTime=e.convert(n.StartTime,t,r),n.EndTime=e.convert(n.EndTime,t,r);return i}}},yp={class:"col-lg-12 control-section"},bp={class:"content-wrapper"},wp={class:"schedule-overview"},Sp={class:"overview-content"},Cp={class:"left-panel"},Tp={class:"overview-scheduler"};function Op(o,i,e,t,r,n){const s=Vt("e-view"),a=Vt("e-views"),h=Vt("e-resource"),l=Vt("e-resources"),p=Vt("ejs-schedule");return al(),sl("div",null,[St("div",yp,[St("div",bp,[St("div",wp,[St("div",Sp,[St("div",Cp,[St("div",Tp,[Ke(p,{showQuickInfo:!1,readonly:!0,id:"scheduler",eventClick:n.onEventClick,ref:"scheduleObj",height:"100%",cssClass:"schedule-overview",currentView:o.currentView,timezone:"UTC",group:o.group,eventSettings:o.eventSettings},{default:Zi(()=>[Ke(a,null,{default:Zi(()=>[Ke(s,{option:"Day"}),Ke(s,{option:"Week"}),Ke(s,{option:"Month"}),Ke(s,{option:"Year"})]),_:1}),Ke(l,null,{default:Zi(()=>[Ke(h,{field:"CalendarId",title:"Calendars",dataSource:o.resourceDataSource,query:o.resourceQuery,allowMultiple:o.allowMultiple,name:"Calendars",textField:"CalendarText",idField:"CalendarId",colorField:"CalendarColor"},null,8,["dataSource","query","allowMultiple"])]),_:1})]),_:1},8,["eventClick","currentView","group","eventSettings"])])])])])])])])}const Ap=hl(mp,[["render",Op]]);export{Ap as default};

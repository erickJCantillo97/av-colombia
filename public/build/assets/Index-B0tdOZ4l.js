import{d as v,p as T,A as U,f as r,o as i,a as t,k as A,b as n,w as j,F,j as B,h as P,n as y,t as o,g as x,U as D,E as k,T as I,i as m,I as R}from"./app-CO2pXAFK.js";import{_ as g}from"./Input-COCQYZLT.js";import{s as f}from"./searchStore-Bu_jIkzN.js";import{O as q,h as z}from"./radio-group-rqNbu2Jb.js";import"./index-DJH8kuw1.js";import"./index-BJilDPEX.js";import"./index-ZZTcrTT7.js";import"./index-D8lSORTz.js";import"./index-FCSJMYSN.js";import"./index-D7OYmBl0.js";import"./index-B0AQdf19.js";import"./index-NJaL8BOG.js";import"./index-CMx_JThN.js";import"./index-D9n0jIi1.js";import"./index-B2SJo8Sy.js";import"./index-RcVPvK9T.js";import"./index-CXBQC7LW.js";import"./index-bMkFRN2T.js";import"./index-BaxX5s92.js";import"./postcss-C8rlgTwZ.js";import"./postcss-BR_dbVUd.js";import"./index-DRYGQQRZ.js";import"./index-BOxmnxCv.js";import"./index-Cf8X3upF.js";import"./useCommonUtilities-BgDhORlD.js";import"./keyboard-Ba4YFoas.js";const L={class:"bg-gray-50 py-5 overflow-y-auto"},H={class:"m-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8"},$={class:"mt-4 border-t border-gray-200 pt-1"},M={class:"mt-4 grid grid-cols-1 gap-y-2 sm:grid-cols-2 sm:gap-x-4"},G={class:"mt-4 border-t border-gray-200 p-1"},W={class:"flex flex-1"},Z={class:"flex flex-col"},J={class:"mt-10 lg:mt-0 flex flex-col"},K={key:0,class:"mt-4 rounded-lg border border-gray-200 bg-white shadow-sm"},Q={class:"p-4"},X={key:0,class:"mt-2 text-md text-gray-600"},Y={key:1,class:"mt-2 text-md text-gray-600 gap-y-2"},ee={class:"flex justify-between gap-x-2 w-full"},te={class:"flex flex-col justify-center shadow-xl w-full p-2 rounded-md text-sm"},se={class:"flex justify-center gap-x-2 w-full"},le={src:"/exito.png",alt:"Bancolombia",class:"w-16 h-16 object-contain"},ae={src:"/western.png",alt:"Bancolombia",class:"w-16 h-16 object-contain rounded-full"},oe={key:1,class:"mt-4 flex-col items-start justify-start p-2 rounded-lg border border-gray-200 bg-white shadow-sm"},re={class:"w-full"},ie={class:"mt-4 rounded-lg border border-gray-200 bg-white shadow-sm"},ne={class:"flex gap-2 justify-center"},de={class:"text-center text-gray-500"},ue={class:"text-center text-gray-500"},me={key:0,class:"flex gap-2 justify-center"},pe={class:"text-center text-gray-500"},ce={class:"text-center text-gray-500"},ge={class:"flex justify-center gap-2"},fe={class:"text-center text-gray-500"},xe={class:"text-center text-gray-500"},ve={class:"text-center text-gray-500"},ye={class:"space-y-6 border-t border-gray-200 px-4 py-6 sm:px-6"},be={class:"flex items-center justify-between"},_e={class:"font-medium text-gray-900"},we={class:"flex items-center justify-between"},he={class:"font-medium text-gray-900"},Ve={class:"flex items-center justify-between border-t border-gray-200 pt-6"},Ce={class:"text-base font-medium text-gray-900"},je={class:"border-t border-gray-200 px-4 py-6 sm:px-6"},Pe=["disabled"],ke={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},et={__name:"Index",props:{service:Object},setup(_){const d=_,s=v({adults:f.guests.value.adults,children:f.guests.value.children,infants:f.guests.value.infants,price_service:0,service_name:d.service.title,service_id:d.service.id,total_real:0,payment_method:0,cliente_name:"",cliente_last_name:"",cliente_email:"",cliente_phone:"",extras:0,soporte:"",date:f.checkin.value});function N(){if(d.service.type=="EMBARCACION")s.value.price_service=d.service.adult_tarifa,s.value.total_real=d.service.adult_tarifa;else{var a=f.guests.value.adults*d.service.adult_tarifa,e=f.guests.value.children*d.service.boy_tarifa;s.value.price_service=a+e,s.value.total_real=a+e}}T(()=>{N()});const E=v(""),p=v(!1),w=U(()=>s.adults*s.price_service),h=[{id:2,title:"T.Debito, T. Credito, PSE",turnaround:"El Pago se refleja de inmediato"},{id:1,title:"Efectivo",turnaround:"Pagar en Oficinas"},{id:3,title:"Giros y Consignaciones",turnaround:"Validaremos su pago una vez recibido."}],u=v(h[0]),O=()=>{p.value=!0,s.total_real=w.value;const a=new FormData;Object.keys(s.value).forEach(e=>{(e==="soporte"&&s.value[e]instanceof File||e!=="soporte")&&a.append(e,s.value[e])}),a.append("payment_method",u.value.id),axios.post(route("booking.reservar.by.api"),a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{e.data.payment.data.payment?.payment_url?location.href=e.data.payment.data.payment.payment_url:(console.log(e.data),R.get(route("booking.success",e.data.bookingService.id)))}).catch(e=>{console.error("Error al generar el enlace de pago:",e),p.value=!1}).finally(()=>{response?.data?.payment?.data?.payment?.payment_url||(p.value=!1)})};function S(a){E.value=a.target.files[0],s.value.soporte=a.target.files[0],console.log(s.value)}const b=a=>{const e=Number(a)||0;return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)};return(a,e)=>{const V=I;return i(),r("div",L,[t("div",H,[e[29]||(e[29]=t("h2",{class:"sr-only"},"Checkout",-1)),t("form",{class:"lg:grid lg:grid-cols-2 lg:gap-x-12 xl:gap-x-4 overflow-y-auto",onSubmit:A(O,["prevent"])},[t("div",null,[e[8]||(e[8]=t("div",{class:"flex items-center justify-start gap-x-2"},[t("h2",{class:"text-lg font-medium text-gray-900"},"Informaci칩n del pasajero principal")],-1)),t("div",$,[t("div",M,[n(g,{label:"Nombres",modelValue:s.value.cliente_name,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.cliente_name=l),required:!0},null,8,["modelValue"]),n(g,{label:"Apellidos",modelValue:s.value.cliente_last_name,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.cliente_last_name=l),required:!0},null,8,["modelValue"]),n(g,{label:"Correo",modelValue:s.value.cliente_email,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.cliente_email=l),type:"email",class:"sm:col-span-2",required:!0},null,8,["modelValue"]),n(g,{label:"Hotel",modelValue:s.value.cliente_building,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.cliente_building=l),class:"sm:col-span-2",required:!0},null,8,["modelValue"]),n(g,{label:"Pais o Ciudad de Origen",modelValue:s.value.cliente_city,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.cliente_city=l),required:!0},null,8,["modelValue"]),n(g,{label:"Telefono",type:"number",modelValue:s.value.cliente_phone,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.cliente_phone=l),required:!0},null,8,["modelValue"])])]),t("div",G,[t("fieldset",null,[e[7]||(e[7]=t("legend",{class:"text-lg font-medium text-gray-900"},"Forma de Pago",-1)),n(P(z),{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=l=>u.value=l),class:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4"},{default:j(()=>[(i(),r(F,null,B(h,l=>n(P(q),{as:"template",key:l.id,value:l,"aria-label":l.title,"aria-description":`${l.turnaround} for ${l.price}`},{default:j(({active:c,checked:C})=>[t("div",{class:y([C?"border-transparent":"border-gray-300",c?"ring-2 ring-indigo-500 bg-indigo-500 text-white transition-colors duration-150":"bg-white","relative flex cursor-pointer rounded-lg border  p-4 shadow-sm focus:outline-none"])},[t("span",W,[t("span",Z,[t("span",{class:y(["block text-sm font-medium text-gray-900",{"text-white":c,"text-gray-900":!c}])},o(l.title),3),t("span",{class:y(["mt-1 flex items-center text-sm",{"text-white":c,"text-gray-500":!c}])},o(l.turnaround),3)])]),t("span",{class:y([c?"border":"border-2",C?"border-indigo-500 ":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"]),"aria-hidden":"true"},null,2)],2)]),_:2},1032,["value","aria-label","aria-description"])),64))]),_:1},8,["modelValue"])])])]),t("div",J,[u.value.id!=2?(i(),r("div",K,[t("div",Q,[e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-gray-900"},"Instrucciones de pago",-1)),u.value.id==1?(i(),r("div",X,[...e[9]||(e[9]=[t("p",null,"Realice su pago directamente en nuestras oficinas:",-1),t("p",{class:"text-gray-900 font-bold"},"Av. Santander Cra 1 #46-50, Marbella, Cartagena de Indias.",-1),t("p",null,"Una vez confirmado el pago, recibir치 un comprobante y los detalles de su reserva por correo electr칩nico.",-1)])])):u.value.id==3?(i(),r("div",Y,[e[12]||(e[12]=D('<div class="flex-col text-center items-center gap-x-2 w-full"><p>Las transacciones y giros se haran a nombre de:</p><div class="flex justify-between gap-x-2 w-full"><div class="w-full p-2 rounded-md flex justify-center items-center gap-x-2"><p class="font-medium border px-4 rounded-lg bg-gray-800 text-white"> Melissa Zurita</p><p class="font-medium border px-4 rounded-lg bg-gray-800 text-white">CC: 1047475135</p></div></div></div><p>Los canales disponibles son</p>',2)),t("div",ee,[e[11]||(e[11]=t("div",{class:"shadow-xl w-full p-2 rounded-md text-sm gap-y-2 flex flex-col"},[t("p",{class:"text-gray-900 font-medium"},"Bancolombia"),t("p",{class:"text-gray-700"},"Cuenta de Ahorros"),t("p",{class:"text-gray-900"},"Numero: 678 0000 8810")],-1)),t("div",te,[e[10]||(e[10]=t("p",{class:"text-center text-gray-900 font-medium"},"Para giros",-1)),t("div",se,[k(t("img",le,null,512),[[V,"Almacenes Exito"]]),k(t("img",ae,null,512),[[V,"Western Union"]])])])])])):x("",!0)])])):x("",!0),u.value.id==3?(i(),r("div",oe,[e[14]||(e[14]=t("h2",{class:"border-b border-gray-200 pb-2 mb-2 text-lg font-medium text-gray-900"},"Comprobante de Pago",-1)),t("label",re,[t("input",{onChange:S,type:"file",class:"text-sm text-grey-500 file:py-3 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-white file:bg-gray-800 hover:file:cursor-pointer hover:file:opacity-80"},null,32)])])):x("",!0),t("div",ie,[t("div",null,[e[23]||(e[23]=t("h2",{class:"text-lg text-gray-900 mx-4 mt-2 font-bold text-center"},"Resumen de reserva",-1)),t("span",ne,[e[16]||(e[16]=t("p",{class:"text-center text-gray-500"},"Fecha: ",-1)),t("p",de,[e[15]||(e[15]=m("Hora: ",-1)),t("strong",null,o(s.value.hour),1)])]),t("p",ue,[e[17]||(e[17]=m("Servicio: ",-1)),t("strong",null,o(s.value.service_name),1)]),_.service.type=="TRANSPORTE"?(i(),r("span",me,[t("p",pe,[e[18]||(e[18]=m("Origen: ",-1)),t("strong",null,o(s.value.origin),1)]),t("p",ce,[e[19]||(e[19]=m("Destino: ",-1)),t("strong",null,o(s.value.destination),1)])])):x("",!0),t("span",ge,[t("p",fe,[e[20]||(e[20]=m("Ni침os: ",-1)),t("strong",null,o(s.value.children),1)]),t("p",xe,[e[21]||(e[21]=m("Adultos: ",-1)),t("strong",null,o(s.value.adults),1)]),t("p",ve,[e[22]||(e[22]=m("Infantes: ",-1)),t("strong",null,o(s.value.infants),1)])])]),e[28]||(e[28]=t("h3",{class:"sr-only"},"Personas de la reserva",-1)),t("dl",ye,[t("div",be,[e[24]||(e[24]=t("dt",{class:""},"Subtotal",-1)),t("dd",_e,[t("span",null,o(b(s.value.price_service)),1)])]),t("div",we,[e[25]||(e[25]=t("dt",{class:""},"Extras",-1)),t("dd",he,[t("span",null,o(b(s.value.extras)),1)])]),t("div",Ve,[e[26]||(e[26]=t("dt",{class:"text-base font-medium"},"Total",-1)),t("dd",Ce,o(b(s.value.total_real)),1)])]),t("div",je,[t("button",{disabled:w.value==0||p.value,type:"submit",class:"w-full rounded-md border border-transparent bg-indigo-600 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[p.value?(i(),r("svg",ke,[...e[27]||(e[27]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),t("span",null,o(p.value?"Procesando...":"Confirmar el Pago y Reservar"),1)],8,Pe)])])])],32)])])}}};export{et as default};

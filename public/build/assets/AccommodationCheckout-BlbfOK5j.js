import{d as x,A as _,p as U,f as u,o as m,a as e,k as N,g as y,b as c,w as j,F as A,j as F,h as O,n as b,t as l,U as M,E as D,T,a0 as B,I as q}from"./app-CO2pXAFK.js";import{_ as f}from"./Input-COCQYZLT.js";import{O as z,h as L}from"./radio-group-rqNbu2Jb.js";import"./index-DJH8kuw1.js";import"./index-BJilDPEX.js";import"./index-ZZTcrTT7.js";import"./index-D8lSORTz.js";import"./index-FCSJMYSN.js";import"./index-D7OYmBl0.js";import"./index-B0AQdf19.js";import"./index-NJaL8BOG.js";import"./index-CMx_JThN.js";import"./index-D9n0jIi1.js";import"./index-B2SJo8Sy.js";import"./index-RcVPvK9T.js";import"./index-CXBQC7LW.js";import"./index-bMkFRN2T.js";import"./index-BaxX5s92.js";import"./postcss-C8rlgTwZ.js";import"./postcss-BR_dbVUd.js";import"./index-DRYGQQRZ.js";import"./index-BOxmnxCv.js";import"./index-Cf8X3upF.js";import"./useCommonUtilities-BgDhORlD.js";import"./keyboard-Ba4YFoas.js";const R={class:"bg-gray-50 py-5 overflow-y-auto min-h-screen"},H={class:"m-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8"},W={class:"mt-4 border-t border-gray-200 pt-1"},G={class:"mt-4 grid grid-cols-1 gap-y-2 sm:grid-cols-2 sm:gap-x-4"},Z={class:"mt-4 border-t border-gray-200 p-1"},$={class:"flex flex-1"},J={class:"flex flex-col"},K={key:0,class:"mt-4 rounded-lg border border-gray-200 bg-white shadow-sm"},Q={class:"p-4"},X={key:0,class:"mt-2 text-md text-gray-600"},Y={key:1,class:"mt-2 text-md text-gray-600 gap-y-2"},ee={class:"flex justify-between gap-x-2 w-full"},te={class:"flex flex-col justify-center shadow-xl w-full p-2 rounded-md text-sm"},se={class:"flex justify-center gap-x-2 w-full"},oe={src:"/exito.png",alt:"Exito",class:"w-16 h-16 object-contain"},ae={src:"/western.png",alt:"Western Union",class:"w-16 h-16 object-contain rounded-full"},re={key:1,class:"mt-4 flex-col items-start justify-start p-2 rounded-lg border border-gray-200 bg-white shadow-sm"},le={class:"w-full"},ne={class:"mt-10 lg:mt-0 flex flex-col"},ie={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},de={class:"px-4 py-2"},ue={class:"text-center text-gray-500 font-medium"},me={class:"text-center text-sm text-gray-500"},ce={class:"px-4 space-y-1"},pe={class:"flex justify-between text-sm"},ge={class:"text-gray-900"},fe={class:"flex justify-between text-sm"},xe={class:"text-gray-900"},ye={class:"flex justify-between text-sm"},be={class:"text-gray-900"},ve={class:"space-y-6 border-t border-gray-200 px-4 py-6 sm:px-6"},he={class:"flex items-center justify-between"},_e={class:""},we={class:"font-medium text-gray-900"},ke={class:"flex items-center justify-between border-t border-gray-200 pt-6"},Ce={class:"text-base font-medium text-gray-900"},Ve={class:"border-t border-gray-200 px-4 py-6 sm:px-6"},je=["disabled"],Oe={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ye={__name:"AccommodationCheckout",props:{accommodation:Object,room:Object,checkIn:String,checkOut:String,guests:[Number,String]},setup(i){const n=i,a=x({room_id:n.room.id,check_in_date:n.checkIn,check_out_date:n.checkOut,guests_adults:parseInt(n.guests)||2,guests_children:0,guest_name:"",guest_last_name:"",guest_email:"",guest_phone:"",guest_country:"",payment_method:2,soporte:null}),g=x(!1),E=x(null),w=[{id:2,title:"T.Débito, T. Crédito, PSE",description:"El pago se refleja de inmediato"},{id:1,title:"Efectivo",description:"Pagar en Oficinas"},{id:3,title:"Giros y Consignaciones",description:"Validaremos su pago una vez recibido"}],d=x(w[0]),v=_(()=>{if(!n.checkIn||!n.checkOut)return 0;const s=new Date(n.checkIn),t=new Date(n.checkOut),r=Math.ceil((t-s)/(1e3*60*60*24));return r>0?r:0}),k=_(()=>n.room.price_per_night*v.value),I=_(()=>k.value),C=s=>s?new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"}):"",h=s=>{const t=Number(s)||0;return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)};function P(s){E.value=s.target.files[0],a.value.soporte=s.target.files[0]}const S=async()=>{g.value=!0;try{const s=new FormData;Object.keys(a.value).forEach(r=>{(r==="soporte"&&a.value[r]instanceof File||r!=="soporte")&&s.append(r,a.value[r])}),s.append("payment_method",d.value.id);const t=await B.post(route("api.accommodations.booking"),s,{headers:{"Content-Type":"multipart/form-data"}});t.data.payment_url?window.location.href=t.data.payment_url:q.get(route("accommodations.booking.success",t.data.booking.id))}catch(s){console.error("Error al procesar la reserva:",s),alert(s.response?.data?.message||"Error al procesar la reserva. Por favor intente de nuevo."),g.value=!1}};return U(()=>{console.log("Checkout montado",n)}),(s,t)=>{const r=T;return m(),u("div",R,[e("div",H,[t[20]||(t[20]=e("h2",{class:"sr-only"},"Checkout Alojamiento",-1)),e("form",{class:"lg:grid lg:grid-cols-2 lg:gap-x-12 xl:gap-x-4 overflow-y-auto",onSubmit:N(S,["prevent"])},[e("div",null,[t[13]||(t[13]=e("div",{class:"flex items-center justify-start gap-x-2"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Información del huésped principal")],-1)),e("div",W,[e("div",G,[c(f,{label:"Nombres",modelValue:a.value.guest_name,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.guest_name=o),required:!0},null,8,["modelValue"]),c(f,{label:"Apellidos",modelValue:a.value.guest_last_name,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.guest_last_name=o),required:!0},null,8,["modelValue"]),c(f,{label:"Correo",modelValue:a.value.guest_email,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.guest_email=o),type:"email",class:"sm:col-span-2",required:!0},null,8,["modelValue"]),c(f,{label:"Teléfono",type:"tel",modelValue:a.value.guest_phone,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.guest_phone=o),required:!0},null,8,["modelValue"]),c(f,{label:"País de Origen",modelValue:a.value.guest_country,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.guest_country=o),required:!0},null,8,["modelValue"])])]),e("div",Z,[e("fieldset",null,[t[6]||(t[6]=e("legend",{class:"text-lg font-medium text-gray-900"},"Forma de Pago",-1)),c(O(L),{modelValue:d.value,"onUpdate:modelValue":t[5]||(t[5]=o=>d.value=o),class:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4"},{default:j(()=>[(m(),u(A,null,F(w,o=>c(O(z),{as:"template",key:o.id,value:o,"aria-label":o.title},{default:j(({active:p,checked:V})=>[e("div",{class:b([V?"border-transparent":"border-gray-300",p?"ring-2 ring-indigo-500 bg-indigo-500 text-white transition-colors duration-150":"bg-white","relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none"])},[e("span",$,[e("span",J,[e("span",{class:b(["block text-sm font-medium",{"text-white":p,"text-gray-900":!p}])},l(o.title),3),e("span",{class:b(["mt-1 flex items-center text-sm",{"text-white":p,"text-gray-500":!p}])},l(o.description),3)])]),e("span",{class:b([p?"border":"border-2",V?"border-indigo-500":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"]),"aria-hidden":"true"},null,2)],2)]),_:2},1032,["value","aria-label"])),64))]),_:1},8,["modelValue"])])]),d.value.id!=2?(m(),u("div",K,[e("div",Q,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900"},"Instrucciones de pago",-1)),d.value.id==1?(m(),u("div",X,[...t[7]||(t[7]=[e("p",null,"Realice su pago directamente en nuestras oficinas:",-1),e("p",{class:"text-gray-900 font-bold"},"Av. Santander Cra 1 #46-50, Marbella, Cartagena de Indias.",-1),e("p",null,"Una vez confirmado el pago, recibirá un comprobante y los detalles de su reserva por correo electrónico.",-1)])])):d.value.id==3?(m(),u("div",Y,[t[10]||(t[10]=M('<div class="flex-col text-center items-center gap-x-2 w-full"><p>Las transacciones y giros se harán a nombre de:</p><div class="flex justify-between gap-x-2 w-full"><div class="w-full p-2 rounded-md flex justify-center items-center gap-x-2"><p class="font-medium border px-4 rounded-lg bg-gray-800 text-white"> Melissa Zurita</p><p class="font-medium border px-4 rounded-lg bg-gray-800 text-white">CC: 1047475135</p></div></div></div><p>Los canales disponibles son</p>',2)),e("div",ee,[t[9]||(t[9]=e("div",{class:"shadow-xl w-full p-2 rounded-md text-sm gap-y-2 flex flex-col"},[e("p",{class:"text-gray-900 font-medium"},"Bancolombia"),e("p",{class:"text-gray-700"},"Cuenta de Ahorros"),e("p",{class:"text-gray-900"},"Numero: 678 0000 8810")],-1)),e("div",te,[t[8]||(t[8]=e("p",{class:"text-center text-gray-900 font-medium"},"Para giros",-1)),e("div",se,[D(e("img",oe,null,512),[[r,"Almacenes Exito"]]),D(e("img",ae,null,512),[[r,"Western Union"]])])])])])):y("",!0)])])):y("",!0),d.value.id==3?(m(),u("div",re,[t[12]||(t[12]=e("h2",{class:"border-b border-gray-200 pb-2 mb-2 text-lg font-medium text-gray-900"},"Comprobante de Pago",-1)),e("label",le,[e("input",{onChange:P,type:"file",class:"text-sm text-grey-500 file:py-3 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-white file:bg-gray-800 hover:file:cursor-pointer hover:file:opacity-80"},null,32)])])):y("",!0)]),e("div",ne,[e("div",ie,[e("div",null,[t[17]||(t[17]=e("h2",{class:"text-lg text-gray-900 mx-4 mt-2 font-bold text-center"},"Resumen de reserva",-1)),e("div",de,[e("p",ue,l(i.accommodation.name),1),e("p",me,l(i.room.name),1)]),e("div",ce,[e("div",pe,[t[14]||(t[14]=e("span",{class:"text-gray-500"},"Check-in:",-1)),e("strong",ge,l(C(i.checkIn)),1)]),e("div",fe,[t[15]||(t[15]=e("span",{class:"text-gray-500"},"Check-out:",-1)),e("strong",xe,l(C(i.checkOut)),1)]),e("div",ye,[t[16]||(t[16]=e("span",{class:"text-gray-500"},"Huéspedes:",-1)),e("strong",be,l(i.guests),1)])])]),e("dl",ve,[e("div",he,[e("dt",_e,l(h(i.room.price_per_night))+" x "+l(v.value)+" noche"+l(v.value>1?"s":""),1),e("dd",we,l(h(k.value)),1)]),e("div",ke,[t[18]||(t[18]=e("dt",{class:"text-base font-medium"},"Total",-1)),e("dd",Ce,l(h(I.value)),1)])]),e("div",Ve,[e("button",{disabled:g.value,type:"submit",class:"w-full rounded-md border border-transparent bg-indigo-600 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[g.value?(m(),u("svg",Oe,[...t[19]||(t[19]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):y("",!0),e("span",null,l(g.value?"Procesando...":"Confirmar Reserva y Pagar"),1)],8,je)])])])],32)])])}}};export{Ye as default};

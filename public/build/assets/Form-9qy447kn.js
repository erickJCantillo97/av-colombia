import{ap as N,d as w,B as h,aq as j,x as B,c as $,o as c,w as g,a as t,f as v,g as M,b as s,u as a,t as T,h as z,F,i as A,m as _,v as I,T as O}from"./app-CWXwRxr1.js";import{s as E}from"./index-BOsGK6Xj.js";import{s as H}from"./postcss-BKcnqM3i.js";import{_ as d}from"./Input-aPxp4XRY.js";import{_ as L}from"./Modal-aB9rhtlY.js";import{a as q}from"./toasts-CylCR3Jx.js";import{S as G}from"./Service-C6_FHgR5.js";import"./index-McsSsVvt.js";import"./index-CaefncPh.js";import"./index-Bmbuwo3i.js";import"./index-ZwRdiFij.js";import"./index-COXn9_Bj.js";import"./index-C6rSY-32.js";import"./index-33k5FjKa.js";import"./index-DuBfIY6M.js";import"./index-gICqkRPB.js";import"./index-BMigS7j3.js";import"./postcss-Bky3QL6W.js";import"./index-BXNmt_wk.js";import"./index-BnG237wQ.js";import"./index-CWmMyX7s.js";import"./index-Cx5qewMi.js";import"./index-BjR7IFI0.js";import"./useCommonUtilities-BgDhORlD.js";import"./index-CUmf1BYB.js";import"./index-Dbq8OfLI.js";import"./sweetalert2.all-BQHWfNcZ.js";import"./Toats-BircPIUV.js";import"./searchStore-JCqGCR6h.js";const Q={class:"flex gap-4"},R={class:"flex flex-col w-1/3 gap-y-4"},W={class:"flex flex-col"},J={class:"rounded-md border border-gray-100 bg-white p-4 shadow-md"},K={for:"upload",class:"flex flex-col items-center gap-2 cursor-pointer"},X={class:"text-gray-600 font-medium text-sm truncate w-full"},Y={class:"flex flex-wrap gap-4 w-full justify-between"},Z={class:"flex items-center gap-2"},ee={class:"flex items-center gap-2"},oe={key:0,class:"w-2/3 col-sapn-1 md:col-span-3 border rounded-lg"},le={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},te={class:"h-[50vh] overflow-y-auto"},ae={class:"justify-between w-full px-2 gap-x-2 grid grid-cols-8"},se=["onUpdate:modelValue"],ie={class:"flex gap-x-2"},ze={__name:"Form",props:N({proveedor:Object},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(f){const{toast:x}=q(),b=w([]),n=f,y=new G;h(async()=>{b.value=await y.getServices()});const i=w(n.proveedor?.type_penalidad_cost??"Dinero"),p=j(f,"modelValue",!1),l=B({id:n.proveedor?.id??"",nombre:n.proveedor?.nombre??"",direccion:"a.",nit:n.proveedor?.nit??"",telefono:n.proveedor?.telefono??"",type_penalidad_cost:n.proveedor?.type_penalidad_cost??"Dinero",penalidad_no_show:n.proveedor?.penalidad_no_show??0,penalidad_cancelacion:n.proveedor?.penalidad_cancelacion??0,services:n.proveedor?.services.map(r=>r.pivot)??[],cuenta:null,account_number:n.proveedor?.account_number??""}),C=()=>{l.services.push({service_id:"",concepto:"",value:""})},D=r=>{l.services.splice(r,1)},k=()=>{l.type_penalidad_cost=i.value,l.id?l.put(route("proveedors.update",l.id),{onSuccess:()=>{l.reset(),p.value=!1,x("success","Proveedor Actualizado")}}):l.post(route("proveedors.store"),{onSuccess:()=>{l.reset(),x("success","Proveedor Creado")}})},U=r=>{l.cuenta=r.target.files[0]};return(r,e)=>{const V=H,m=E,P=O;return c(),$(L,{visible:p.value,"onUpdate:visible":e[10]||(e[10]=o=>p.value=o),"close-on-escape":!0,title:"Añadir Proveedor",width:"80vw"},{footer:g(()=>[t("div",ie,[s(m,{severity:"success",label:"Guardar",onClick:k}),s(m,{severity:"danger",label:"Cancelar",onClick:e[9]||(e[9]=o=>p.value=!1)})])]),default:g(()=>[t("div",Q,[t("div",R,[e[15]||(e[15]=t("h1",{class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"}," Datos del Proveedor ",-1)),s(d,{label:"Nombre",class:"w-full",modelValue:a(l).nombre,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).nombre=o)},null,8,["modelValue"]),s(d,{label:"NIT",class:"w-full",modelValue:a(l).nit,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).nit=o)},null,8,["modelValue"]),s(d,{label:"Telefono",class:"w-full",modelValue:a(l).telefono,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).telefono=o)},null,8,["modelValue"]),s(d,{label:"Número de Cuenta Bancanria",class:"w-full",modelValue:a(l).account_number,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).account_number=o)},null,8,["modelValue"]),t("div",W,[t("div",J,[t("label",K,[e[11]||(e[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 fill-white stroke-indigo-500",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",X,T(a(l).cuenta?a(l).cuenta.name:"Seleccionar Camara de Comercio"),1)]),t("input",{id:"upload",accept:".pdf",onChange:U,type:"file",class:"hidden"},null,32)])]),t("div",Y,[e[14]||(e[14]=t("label",{for:""},"Politicas",-1)),t("div",Z,[s(V,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value=o),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),e[12]||(e[12]=t("label",{for:"Dinero"},"Dinero",-1))]),t("div",ee,[s(V,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value=o),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje",size:"Normal"},null,8,["modelValue"]),e[13]||(e[13]=t("label",{for:"Porcentaje",class:"text-sm"},"Porcentaje",-1))])]),s(d,{label:"Penalización por NO SHOW",type:"number",modelValue:a(l).penalidad_no_show,"onUpdate:modelValue":e[6]||(e[6]=o=>a(l).penalidad_no_show=o),mode:i.value=="Dinero"?"currency":"decimal",suffix:i.value=="Dinero"?"":"%",min:"0",max:i.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"]),s(d,{label:"Penalización por CANCELACIÓN",type:"number",modelValue:a(l).penalidad_cancelacion,"onUpdate:modelValue":e[7]||(e[7]=o=>a(l).penalidad_cancelacion=o),mode:i.value=="Dinero"?"currency":"decimal",suffix:i.value=="Dinero"?"":"%",min:"0",max:i.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"])]),r.$page.props.auth.user.rol=="admin"||r.$page.props.auth.user.rol=="superadmin"?(c(),v("div",oe,[t("h1",le,[e[16]||(e[16]=z(" Servicios ")),s(m,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:e[8]||(e[8]=o=>C())})]),e[17]||(e[17]=t("div",{class:"grid grid-cols-8 w-full font-bold px-2 text-left"},[t("div",{class:"col-span-3 w-full"},"Servicio"),t("div",{class:"col-span-2"},"Concepto"),t("div",{class:""},"Tarifa"),t("div",{class:""})],-1)),t("div",te,[(c(!0),v(F,null,A(a(l).services,(o,S)=>(c(),v("div",ae,[s(d,{type:"dropdown",class:"col-span-3",modelValue:o.service_id,"onUpdate:modelValue":u=>o.service_id=u,"option-label":"title","option-value":"id",options:b.value},null,8,["modelValue","onUpdate:modelValue","options"]),s(d,{class:"w-full col-span-2",modelValue:o.concept,"onUpdate:modelValue":u=>o.concept=u},null,8,["modelValue","onUpdate:modelValue"]),_(t("input",{type:"number",class:"w-full rounded-md h-10 col-span-2","onUpdate:modelValue":u=>o.value=u},null,8,se),[[I,o.value]]),_(s(m,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:u=>D(S)},null,8,["onClick"]),[[P,"Quitar"]])]))),256))])])):M("",!0)])]),_:1},8,["visible"])}}};export{ze as default};

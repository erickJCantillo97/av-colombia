var y=Object.defineProperty;var B=(t,r,i)=>r in t?y(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i;var n=(t,r,i)=>B(t,typeof r!="symbol"?r+"":r,i);import{s as w}from"./index-CVFYHFgR.js";import{s as h}from"./index-BzLLK3Pj.js";import{s as x}from"./index-BumSf7al.js";import{s as V}from"./index-B7k9U_TV.js";import{d as c,x as C,A as I,B as M,f as m,o as f,b as u,w as v,a as l,u as a,t as p,h as N,k as U}from"./app-CwcQ85Jd.js";import{S as $}from"./Service-DuDxVC4-.js";import{g as P}from"./Toats-RcJDUpcK.js";import"./index-Ct8fHLpw.js";import"./index-BEc09vBa.js";import"./index-Cj5PwXWO.js";import"./index-Fa591dBG.js";import"./index-CgE1wc3R.js";import"./index-DHE8b9Un.js";import"./index-Cv8G-VHE.js";import"./index-D8vty3Fd.js";import"./index-DKO2AjoE.js";import"./sweetalert2.esm.all-DV3w3JmD.js";class j{constructor(r){n(this,"proveedors",c([]));n(this,"loading",c(!1));n(this,"bookingService",c());n(this,"proveedorSelected",c());n(this,"proveedorsByBookingService",c([]));n(this,"form",C({p:null,booking_service_id:null,proveedor_id:null,cost:0,concept:""}));this.bookingService.value=r,this.getProveedorByBookingService()}async getProveedorByBookingService(){const{data:r}=await I.get(route("get.proveedor.by.booking.service",this.bookingService.value.id));this.proveedorsByBookingService.value=r.proveedors,console.log(this.proveedorsByBookingService.value)}calculateCost(){this.form.cost=this.form.p.pivot.value*this.bookingService.value.adults}async submit(){this.form.proveedor_id=this.form.p.id,this.form.booking_service_id=this.bookingService.value.id,this.form.concept=this.form.p.pivot.concept,this.form.p=null,this.form.post(route("BookingServiceProveedors.store"),{onSuccess:()=>{P("Proveedor agregado"),this.form.reset()}})}}const A={key:0},D={key:1},E={class:"flex gap-x-2"},ro={__name:"Form",props:{bookingService:Object},setup(t){const r=new $,i=t,g=c([]),s=new j(i.bookingService);return M(async()=>{var d;g.value=await r.getProveedorsByService((d=i.bookingService)==null?void 0:d.service_id)}),(d,e)=>{const S=V,b=x,k=h,_=w;return f(),m("form",{class:"w-full flex justify-between gap-x-4",onSubmit:e[3]||(e[3]=U((...o)=>a(s).submit&&a(s).submit(...o),["prevent"]))},[u(b,{class:"w-full"},{default:v(()=>[u(S,{options:g.value,inputId:"proveedor",onChange:e[0]||(e[0]=o=>a(s).calculateCost()),modelValue:a(s).form.p,"onUpdate:modelValue":e[1]||(e[1]=o=>a(s).form.p=o),variant:"filled",placeholder:"Selecciona un proveedor",class:"w-full","option-label":"nombre"},{value:v(o=>[o.value?(f(),m("span",A,p(o.value.nombre)+" - "+p(o.value.pivot.concept),1)):(f(),m("span",D,p(o.placeholder),1))]),option:v(o=>[l("div",E,[l("span",null,p(o.option.nombre)+" - ",1),l("span",null,p(o.option.pivot.concept)+" - ",1),l("span",null,p(o.option.pivot.value),1)])]),_:1},8,["options","modelValue"]),e[4]||(e[4]=l("label",{for:"proveedor"},"Proveedor - Concepto",-1))]),_:1}),u(b,{class:"w-full"},{default:v(()=>[u(k,{modelValue:a(s).form.cost,"onUpdate:modelValue":e[2]||(e[2]=o=>a(s).form.cost=o),inputId:"price_input",mode:"currency",currency:"USD",locale:"en-US",variant:"filled",class:"w-full"},null,8,["modelValue"]),e[5]||(e[5]=l("label",{for:"price_input"},"Costo",-1))]),_:1}),u(_,{type:"submit",severity:"success",class:"w-full"},{default:v(()=>e[6]||(e[6]=[l("i",{class:"fa-solid fa-plus"},null,-1),N(" Agregar ")])),_:1})],32)}}};export{ro as default};

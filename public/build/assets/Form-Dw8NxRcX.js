import{d as f,p as X,u as Y,c as y,o as i,w as u,a as t,b as a,t as v,g as S,i as I,h as o,f as n,H as A,F as U,j as $,E as F,T as Z,n as ee,I as le}from"./app-Cr-F_cDA.js";import{s as se,a as oe,b as te,c as ae,d as ie}from"./index-cw5_DwjF.js";import{s as re}from"./index-DWA78wxi.js";import{_ as c}from"./Input-Bk5mUvLh.js";import{_ as ne}from"./AppLayout-B_TNxcPm.js";import{s as T}from"./index-DqoPYEZG.js";import{a as de}from"./toasts-CAnEIL5D.js";import ue from"./Horarios-D4m84NeD.js";import ce from"./FileSelection-JShBmrv9.js";import"./index-Bs-P0Fz6.js";import"./index-Cz30p6Lx.js";import"./index-DCokI89a.js";import"./index-CI-88Dlx.js";import"./index-BXwg8W4a.js";import"./index-B2ccAZeo.js";import"./index-Cn4OZ8pt.js";import"./index-Dn_g2hcu.js";import"./index-B0rVAZr_.js";import"./index-Dqr_GsIY.js";import"./index-BKoomWvL.js";import"./index-C8PZH3uz.js";import"./index-pb_bI9Ol.js";import"./index-C8DRG_8g.js";import"./index-DUxTlucW.js";import"./index-Bx9UVo9g.js";import"./postcss-C8sxyszF.js";import"./postcss-CTYT77r_.js";import"./index-7Abg4yZf.js";import"./index-C5F2PozD.js";import"./index-BP7g0891.js";import"./useCommonUtilities-BgDhORlD.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-D24bYb4c.js";import"./index-C33iBDS0.js";import"./index-BI7Wpm23.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";import"./index-1k4IiPkO.js";import"./Modal-BZDH9Fwr.js";import"./index-DJYzOV7i.js";const pe={class:"p-4 space-y-4 h-full overflow-y-auto"},me={class:"text-xl font-extrabold"},fe={class:"gap-y-4 flex flex-col"},ve={class:"w-full gap-4 grid grid-cols-3"},ge={class:"w-full"},ye={class:"w-full"},be={class:"text-xs text-red-400"},we={class:"flex justify-between space-x-4 items-center"},xe={class:"w-full shadow-md p-2 rounded-md"},Ve={class:"flex space-x-2 overflow-y-auto w-full"},Ce={class:"py-1.5 px-3 flex justify-between my-2 text-nowrap text-sm font-bold text-emerald-700 rounded-lg border-b"},ke=["onClick"],_e={class:"w-full shadow-md p-2 bg-gray-200 rounded-md"},Se={class:"flex justify-between space-x-2"},Ie={class:"py-1.5 px-3 flex justify-between my-2 text-nowrap text-sm font-bold text-emerald-700 rounded-lg border-b border-white"},Ue=["onClick"],$e={class:"flex gap-x-4 mt-8 justify-between"},Ne={class:"m-0"},Te={class:"w-full bg-gray-200 rounded-md p-2 grid grid-cols-2 divide-y-2 md:flex space-x-2"},je=["onClick"],Ae={key:0,class:"mt-4"},Ee={class:"w-full shadow-md p-2 rounded-md"},Re={class:"flex space-x-2 overflow-y-auto w-full"},he={class:"py-1.5 px-3 flex justify-between my-2 text-nowrap text-sm font-bold text-emerald-700 rounded-lg border-b"},De=["onClick"],Oe={key:1,class:"mt-4"},Le={class:"w-full shadow-md p-2 rounded-md"},Fe={class:"flex space-x-2 overflow-y-auto w-full"},Me={class:"py-1.5 px-3 flex justify-between my-2 text-nowrap text-sm font-bold text-emerald-700 rounded-lg border-b"},Be=["onClick"],Je={class:"flex gap-x-4 mt-6 justify-between"},ze={class:"m-0"},Ke={class:"m-0 h-[70vh] overflow-y-auto"},Pe={class:"my-2"},Qe={class:"grid grid-cols-6 gap-4 my-4"},Ge={class:"flex gap-y-4"},He=["src"],qe={class:"-ml-5 -mt-4"},We=["onClick"],Xe={class:"flex gap-x-4 mt-6 justify-between"},Ol={__name:"Form",props:{features:Array,included:Array,availabilities:Array,service:Object},setup(m){const{toast:V}=de();f(),f(),f();const E=f(1),g=m;f({name:"",color:""}),X(()=>{g.service&&(assignMatchingKeys(g.service,l),l.includes=JSON.parse(g.service.includes),l.notIncludes=JSON.parse(g.service.notIncludes),l.puntos=JSON.parse(g.service.puntos)??[],l.recogidas=JSON.parse(g.service.recogidas)??[])}),f();const b=f(""),C=f(),k=f(),M=()=>{w.value&&(l.includes||(l.includes=[]),l.includes.includes(w.value)||l.includes.push(w.value.trim()),w.value="")},B=()=>{l.notIncludes||(l.notIncludes=[]),b.value&&(l.notIncludes.includes(b.value)||l.notIncludes.push(b.value.trim()),b.value="")},K=r=>{l.includes.splice(r,1)},P=r=>{l.notIncludes.splice(r,1)},J=()=>{C.value&&(l.recogidas.includes(C.value)||l.recogidas.push(C.value),C.value="")},Q=r=>{l.recogidas.splice(r,1)},z=()=>{k.value&&(l.puntos.includes(k.value)||l.puntos.push(k.value),k.value="")},G=r=>{l.puntos.splice(r,1)},l=Y({title:"",description:"",features:[],boys_price:0,adults_price:0,code:"",images:[],includes:[],notIncludes:[],type:"expericence",city:"Cartagena",portada:"",recogida:"recogida",duration_type:"",destinations:"",duration:0,duration_unit:"Dias",capacidad_min:1,capacidad_max:1,recogidas:[],puntos:[]}),R=f([]),h=()=>{let r=l.includes,e=l.notIncludes,x=l.puntos,D=l.recogidas;l.images=R.value,l.notIncludes=JSON.stringify(l.notIncludes),l.includes=JSON.stringify(l.includes),l.recogidas=JSON.stringify(l.recogidas),l.puntos=JSON.stringify(l.puntos),g.service?l.post(route("services.update",g.service.slug),{onSuccess:()=>{V("success","Servicio actualizado con exito")},onError:d=>{V("error","Error al actualizar el servicio: "+d)}}):l.post(route("services.store"),{onSuccess:d=>{V("success","Servicio creado con exito")},onError:d=>{console.log(d),V("error","Error al crear el servicio: "+Object.values(d))}}),l.includes=r,l.notIncludes=e,l.recogidas=D,l.puntos=x},w=f(""),_=f(g.included),j=r=>{r?_.value=g.included.filter(e=>e.toLowerCase().includes(w.value.toLowerCase())):_.value=g.included.filter(e=>e.toLowerCase().includes(b.value.toLowerCase()))},H=r=>{le.delete(route("delete.images",r),{onSuccess:()=>{V("success","Imagen eliminada con exito")},onError:e=>{V("error","Error al eliminar la imagen: "+e)}})};return(r,e)=>{const x=te,D=oe,d=re,N=ie,q=ae,W=se,O=Z;return i(),y(ne,null,{default:u(()=>[t("div",pe,[t("h1",me,v(m.service?`Editar Servicio ${m.service.title}`:"Crear nuevo servicio"),1),a(W,{value:"0"},{default:u(()=>[a(D,null,{default:u(()=>[a(x,{value:"0"},{default:u(()=>[...e[26]||(e[26]=[I("Datos del Servicio",-1)])]),_:1}),m.service&&o(l).type=="TRANSFER"?(i(),y(x,{key:0,value:"4"},{default:u(()=>[...e[27]||(e[27]=[I("Itinerario",-1)])]),_:1})):S("",!0),m.service&&o(l).type=="TOUR"?(i(),y(x,{key:1,value:"1"},{default:u(()=>[...e[28]||(e[28]=[I("Ecuentro/Recogida",-1)])]),_:1})):S("",!0),m.service?(i(),y(x,{key:2,value:"2"},{default:u(()=>[...e[29]||(e[29]=[I("Disponibilidad y precios",-1)])]),_:1})):S("",!0),m.service?(i(),y(x,{key:3,value:"3"},{default:u(()=>[...e[30]||(e[30]=[I("Fotos",-1)])]),_:1})):S("",!0)]),_:1}),a(q,null,{default:u(()=>[a(N,{value:"0"},{default:u(()=>[t("div",fe,[t("div",ve,[a(c,{label:"Tipo de Servicio",class:"w-full",modelValue:o(l).type,"onUpdate:modelValue":e[0]||(e[0]=s=>o(l).type=s),"error-message":o(l).errors.type,type:"dropdown",options:["TOUR","TRANSFER","EMBARCACION","ALQUILER"]},null,8,["modelValue","error-message"]),a(c,{label:"Titulo",class:"w-full",modelValue:o(l).title,"onUpdate:modelValue":e[1]||(e[1]=s=>o(l).title=s),"error-message":o(l).errors.title},null,8,["modelValue","error-message"]),a(c,{label:"Código de Referencia",class:"w-full",modelValue:o(l).code,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).code=s),"error-message":o(l).errors.code},null,8,["modelValue","error-message"]),a(c,{label:"Ubicación del servicio",class:"w-full",modelValue:o(l).city,"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).city=s),"error-message":o(l).errors.city,type:"dropdown",options:["Cartagena","Barranquilla","Cali","Santa Marta","Medellin"]},null,8,["modelValue","error-message"]),t("div",null,[e[31]||(e[31]=t("label",{for:"multiple-ac-2",class:"font-bold block"},"Lugares de Visita (Destino)",-1)),a(o(T),{modelValue:o(l).destinations,"onUpdate:modelValue":e[4]||(e[4]=s=>o(l).destinations=s),inputId:"multiple-ac-2",multiple:"",fluid:"",typeahead:!1},null,8,["modelValue"])]),a(c,{label:"Duración o Validez",class:"w-full",modelValue:o(l).duration_type,"onUpdate:modelValue":e[5]||(e[5]=s=>o(l).duration_type=s),"error-message":o(l).errors.duration_type,type:"dropdown",options:["Duración Fija","Valido en fecha de Reserva","Valido durante un periodo de tiempo a partir de la fecha reservada"]},null,8,["modelValue","error-message"]),o(l).duration_type!="Valido en fecha de Reserva"?(i(),y(c,{key:0,type:"number",label:"Valido por",modelValue:o(l).duration,"onUpdate:modelValue":e[6]||(e[6]=s=>o(l).duration=s)},null,8,["modelValue"])):S("",!0),o(l).duration_type!="Valido en fecha de Reserva"?(i(),y(c,{key:1,label:"Unidad de tiempo",class:"w-full",modelValue:o(l).duration_unit,"onUpdate:modelValue":e[7]||(e[7]=s=>o(l).duration_unit=s),"error-message":o(l).errors.duration_type,type:"dropdown",options:["Dias","Horas","Minutos"]},null,8,["modelValue","error-message"])):S("",!0),a(c,{type:"number",label:"Capacidad minima",modelValue:o(l).capacidad_min,"onUpdate:modelValue":e[8]||(e[8]=s=>o(l).capacidad_min=s)},null,8,["modelValue"]),a(c,{type:"number",label:"Capacidad maxima",modelValue:o(l).capacidad_max,"onUpdate:modelValue":e[9]||(e[9]=s=>o(l).capacidad_max=s),min:o(l).capacidad_min},null,8,["modelValue","min"]),a(c,{type:"number",label:"Tarifa de Adultos para Vendedores",modelValue:o(l).adults_price,"onUpdate:modelValue":e[10]||(e[10]=s=>o(l).adults_price=s),mode:"currency"},null,8,["modelValue"]),a(c,{type:"number",label:"Tarifa de Niños para Vendedores",modelValue:o(l).boys_price,"onUpdate:modelValue":e[11]||(e[11]=s=>o(l).boys_price=s),mode:"currency"},null,8,["modelValue"])]),t("div",ge,[a(c,{type:"textarea",label:"Descripción Breve","rows-textarea":3})]),t("div",ye,[e[32]||(e[32]=t("label",{for:"",class:"text-md font-bold"},"Descripción larga del Servicio",-1)),(i(),y(c,{type:"textarea",modelValue:o(l).description,"onUpdate:modelValue":e[12]||(e[12]=s=>o(l).description=s),key:r.editor,editorStyle:"height: 120px"},null,8,["modelValue"])),t("span",be,v(o(l).errors.description),1)]),t("div",we,[t("div",xe,[e[34]||(e[34]=t("label",{for:"",class:"text-lg font-bold text-center"},"Incluidos en El servicio",-1)),t("div",Ve,[a(o(T),{onComplete:e[13]||(e[13]=s=>j(!0)),emptyMessage:"Sin resultados",suggestions:_.value,dropdown:"",onKeyup:A(M,["enter"]),modelValue:w.value,"onUpdate:modelValue":e[14]||(e[14]=s=>w.value=s),class:"w-full","pt:root":"!w-full","pt:inputText":"!w-full"},null,8,["suggestions","modelValue"]),a(d,{title:"Añadir",onClick:M,severity:"primary",label:"Añadir",icon:"fa-solid fa-plus",class:"!h-11"})]),(i(!0),n(U,null,$(o(l).includes,(s,p)=>(i(),n("div",Ce,[t("p",null,v(p+1)+". "+v(s),1),F((i(),n("span",{onClick:L=>K(p),class:"cursor-pointer"},[...e[33]||(e[33]=[t("i",{class:"fa-solid fa-trash text-red-500"},null,-1)])],8,ke)),[[O,"Quitar"]])]))),256))]),t("div",_e,[e[36]||(e[36]=t("label",{for:"",class:"text-lg font-bold text-red-700"},"No Incluidos en El servicio",-1)),t("div",Se,[a(o(T),{dropdown:"",onComplete:e[15]||(e[15]=s=>j(!1)),emptySearchMessage:"Sin resultados",suggestions:_.value,onKeyup:A(B,["enter"]),modelValue:b.value,"onUpdate:modelValue":e[16]||(e[16]=s=>b.value=s),class:"w-full","pt:root":"!w-full","pt:inputText":"!w-full"},null,8,["suggestions","modelValue"]),a(d,{title:"Añadir",onClick:B,severity:"primary",label:"Añadir",icon:"fa-solid fa-plus",class:"!h-11"})]),(i(!0),n(U,null,$(o(l).notIncludes,(s,p)=>(i(),n("div",Ie,[t("p",null,v(p+1)+". "+v(s),1),t("span",{onClick:L=>P(p),class:"cursor-pointer"},[...e[35]||(e[35]=[t("i",{class:"fa-solid fa-trash text-red-500"},null,-1)])],8,Ue)]))),256))])])]),t("div",$e,[a(d,{onClick:e[17]||(e[17]=s=>r.visible=!1),title:"Cancel",severity:"danger",label:"Cancel",icon:"fa-solid fa-times",class:"!h-9 w-full"}),a(d,{onClick:h,title:"Save",severity:"success",loading:o(l).processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]),_:1}),a(N,{value:"1"},{default:u(()=>[t("div",Ne,[t("div",Te,[(i(!0),n(U,null,$(r.options,s=>(i(),n("div",{onClick:p=>E.value=s.value,class:ee(["w-full rounded-lg text-center py-2 text-sm md:text-md cursor-pointer",E.value==s.value?"bg-white":"hover:bg-white/30"])},v(s.name),11,je))),256))]),E.value==1?(i(),n("div",Ae,[t("div",Ee,[t("div",Re,[a(o(T),{onComplete:e[18]||(e[18]=s=>j(!0)),placeholder:"Describa el Lugar de Recogida",emptyMessage:"Sin resultados",suggestions:_.value,dropdown:"",onKeyup:A(J,["enter"]),modelValue:C.value,"onUpdate:modelValue":e[19]||(e[19]=s=>C.value=s),class:"w-full","pt:root":"!w-full","pt:inputText":"!w-full"},null,8,["suggestions","modelValue"]),a(d,{title:"Añadir",onClick:J,severity:"primary",label:"Añadir",icon:"fa-solid fa-plus",class:"!h-11"})]),(i(!0),n(U,null,$(o(l).recogidas,(s,p)=>(i(),n("div",he,[t("p",null,v(p+1)+". "+v(s),1),F((i(),n("span",{onClick:L=>Q(p),class:"cursor-pointer"},[...e[37]||(e[37]=[t("i",{class:"fa-solid fa-trash text-red-500"},null,-1)])],8,De)),[[O,"Quitar"]])]))),256))])])):(i(),n("div",Oe,[t("div",Le,[t("div",Fe,[a(o(T),{onComplete:e[20]||(e[20]=s=>j(!0)),placeholder:"Describa el punto de encuentro",emptyMessage:"Sin resultados",suggestions:_.value,dropdown:"",onKeyup:A(z,["enter"]),modelValue:k.value,"onUpdate:modelValue":e[21]||(e[21]=s=>k.value=s),class:"w-full","pt:root":"!w-full","pt:inputText":"!w-full"},null,8,["suggestions","modelValue"]),a(d,{title:"Añadir",onClick:z,severity:"primary",label:"Añadir",icon:"fa-solid fa-plus",class:"!h-11"})]),(i(!0),n(U,null,$(o(l).puntos,(s,p)=>(i(),n("div",Me,[t("p",null,v(p+1)+". "+v(s),1),F((i(),n("span",{onClick:L=>G(p),class:"cursor-pointer"},[...e[38]||(e[38]=[t("i",{class:"fa-solid fa-trash text-red-500"},null,-1)])],8,Be)),[[O,"Quitar"]])]))),256))])]))]),t("div",Je,[a(d,{onClick:e[22]||(e[22]=s=>r.visible=!1),title:"Cancel",severity:"danger",label:"Cancel",icon:"fa-solid fa-times",class:"!h-9 w-full"}),a(d,{onClick:h,title:"Save",severity:"success",loading:o(l).processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]),_:1}),a(N,{value:"2"},{default:u(()=>[t("div",ze,[a(ue,{service:m.service,availabilities:m.availabilities},null,8,["service","availabilities"])])]),_:1}),a(N,{value:"3"},{default:u(()=>[t("div",Ke,[t("div",null,[e[39]||(e[39]=t("label",{for:"",class:"text-md font-bold"},"Portada",-1)),a(c,{type:"file-basic",modelValue:o(l).portada,"onUpdate:modelValue":e[23]||(e[23]=s=>o(l).portada=s),acceptFile:"image/*"},null,8,["modelValue"])]),t("div",Pe,[e[40]||(e[40]=t("label",{for:"",class:"text-md font-bold"},"Fotos",-1)),t("div",Qe,[(i(!0),n(U,null,$(m.service.images,s=>(i(),n("div",Ge,[t("img",{src:s.filepath,alt:"hola",class:"h-28 shadow-md rounded-lg w-full"},null,8,He),t("div",qe,[t("button",{onClick:p=>H(s.id),class:"bg-red-500 fa-solid fa-xmark hover:scale-90 rounded-full flex justify-center items-center text-white shadow-md shadow-red-400 size-8"},null,8,We)])]))),256))]),I(" "+v(r.route("upload.images",m.service.id))+" dkjfsdklfjzdaksjdk ",1),a(ce,{modelValue:R.value,"onUpdate:modelValue":e[24]||(e[24]=s=>R.value=s),service:m.service},null,8,["modelValue","service"])]),t("div",Xe,[a(d,{onClick:e[25]||(e[25]=s=>r.visible=!1),title:"Cancel",severity:"danger",label:"Cancel",icon:"fa-solid fa-times",class:"!h-9 w-full"}),a(d,{onClick:h,title:"Save",severity:"success",loading:o(l).processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])])]),_:1}),a(N,{value:"4"},{default:u(()=>[...e[41]||(e[41]=[t("div",{class:"m-0 h-[70vh] overflow-y-auto"},null,-1)])]),_:1})]),_:1})]),_:1})])]),_:1})}}};export{Ol as default};

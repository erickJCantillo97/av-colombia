import{d,T as k,ax as O,O as f,ag as x,e as U,o as _,f as b,b as o,w as r,u as i,F as C,a as e,h as w,t as u,i as j,k as A,P as E}from"./app-DWP-8Wk5.js";import{s as Q}from"./index-CyKcV5Rt.js";import{_ as I}from"./AppLayout-BFq3CiqX.js";import{_ as R}from"./Datatable-D0wdCxcA.js";import{s as z}from"./index-C9ZFik0b.js";import{_ as S}from"./Modal-DnNo9x1n.js";import{_ as g}from"./Input-CwPjUEN0.js";import{a as M}from"./toasts-KsEkSVTM.js";import"./index-BOoBzq7F.js";import"./index-dBksCcU1.js";import"./index-Dxcxdett.js";import"./postcss-hhXaVCtO.js";const G={class:"h-[99vh]"},H=e("span",{class:"text-xl font-bold white-space-nowrap"}," Modificar Servicio",-1),J=e("i",{class:"fa-solid fa-plus"},null,-1),K={class:"text-2xl font-bold my-4"},W={class:"italic text-xs mt-1 mb-4"},X={class:"italic text-xs mt-1"},Y=e("span",{class:"text-xl font-bold white-space-nowrap"}," Bloqueos",-1),Z=e("i",{class:"fa-solid fa-lock"},null,-1),ee={class:"text-2xl text-center text-amber-600 font-bold my-4"},te={key:0,class:"text-center text-gray-500"},se={key:1,class:"flex flex-col gap-y-2"},ae=e("div",{class:"flex justify-between font-bold"},[e("p",null," Razón "),e("p",null," Fecha Inicio "),e("p",null," Fecha Fin "),e("p",null," Quitar ")],-1),oe={class:"flex justify-between border-b"},ie={class:"flex justify-between gap-x-2 my-2"},le={class:"w-full"},re={class:"w-full"},ne=e("label",{for:"",class:"font-bold"},"Seleccione el Rango de bloque o del servicio",-1),ke={__name:"Index",props:{services:Array},setup(V){const{toast:y}=M();d([]);const B={action:()=>{f.visit(route("services.create"))}},c=k({range:"",description:""}),p=d(!1),h=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),F=[{header:"Nombre",field:"title",filter:!0},{header:"Descripción",field:"description",type:"html",filter:!0},{header:"Precio Adultos",field:"adults_price",type:"currency",filter:!0},{header:"Tarifa Adultos",field:"adult_tarifa",type:"currency",filter:!0},{header:"Precio Niños",field:"boys_price",type:"currency",filter:!0},{header:"Bloqueado",field:"is_locked",type:"boolean",filter:!0},{header:"Tarifa Niños",field:"boy_tarifa",type:"currency",filter:!0}],q=O();d(!1);const n=k({service_id:"",adult_tarifa:0,boys_tarifa:0}),l=d({}),m=d(!1);d("");const D=[{action:a=>{f.visit(route("services.show",a.slug))},show:x().props.auth.user.rol=="admin",severity:"primary",icon:"fa-solid fa-eye text-sm",label:"Ver"},{action:a=>{p.value=!0,l.value=a},show:x().props.auth.user.rol=="admin",severity:"warn",icon:"fa-solid fa-lock",label:"Bloqueos"},{action:a=>{x().props.auth.user.rol=="admin"?f.visit(route("services.edit",a.slug)):(m.value=!0,l.value=a,n.service_id=a.id,n.adult_tarifa=a.adult_tarifa,n.boys_tarifa=a.boy_tarifa)},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:(a,t)=>{q.require({target:t.currentTarget,message:"Seguro de Eliminar el Servicio "+a.title+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{console.log(a),f.delete(route("services.destroy",a.id),{onSuccess:()=>{y("success","Servicio eliminado con exito")}})}})},show:x().props.auth.user.rol=="admin",severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],T=()=>{n.post(route("custom.product"),{onSuccess:()=>{y("success","Tarifa creada con exito"),m.value=!1}})},P=()=>{f.post(route("services.lock",l.value.slug),{start_date:c.range[0],description:c.description,end_date:c.range[1]},{onSuccess:()=>{y("success","Servicio Bloqueado con exito"),p.value=!1}})},N=a=>{f.post(route("services.unlock",a),{},{onSuccess:()=>{y("success","Bloque Quitado Exitosamente")}})};return(a,t)=>{const v=Q,$=U("VueDatePicker"),L=E;return _(),b(C,null,[o(I,{title:"Services"},{default:r(()=>[e("div",G,[o(R,{add:B,columnas:F,data:V.services,routecreate:"services.create",actions:D,title:"Servicios"},null,8,["data"])])]),_:1}),o(S,{visible:m.value,"onUpdate:visible":t[3]||(t[3]=s=>m.value=s)},{title:r(()=>[H]),icon:r(()=>[J]),footer:r(()=>[o(v,{onClick:T,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),o(v,{onClick:t[2]||(t[2]=s=>m.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:r(()=>[e("h3",K,[w(" Agregar Tarifa a "),e("strong",null,u(l.value.title),1)]),o(g,{label:"Tarifa para Adultos",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:i(n).adult_tarifa,"onUpdate:modelValue":t[0]||(t[0]=s=>i(n).adult_tarifa=s)},null,8,["modelValue"]),e("div",W," La tariafa Base es de "+u(i(h).format(l.value.adults_price)),1),o(g,{label:"Tarifa para niños",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:i(n).boys_tarifa,"onUpdate:modelValue":t[1]||(t[1]=s=>i(n).boys_tarifa=s)},null,8,["modelValue"]),e("span",X," La tariafa Base es de "+u(i(h).format(l.value.boys_price)),1)]),_:1},8,["visible"]),o(S,{visible:p.value,"onUpdate:visible":t[7]||(t[7]=s=>p.value=s)},{title:r(()=>[Y]),icon:r(()=>[Z]),footer:r(()=>[o(v,{onClick:P,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),o(v,{onClick:t[6]||(t[6]=s=>p.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:r(()=>[e("h3",ee,[w(" Bloqueos del Servicio "),e("strong",null,u(l.value.title),1)]),l.value.locks.length==0?(_(),b("div",te,"No hay bloqueos")):(_(),b("div",se,[ae,(_(!0),b(C,null,j(l.value.locks,s=>(_(),b("div",oe,[e("p",null,u(s.description),1),e("p",null,u(s.start_date),1),e("p",null,u(s.end_date),1),e("p",null,[A(o(v,{icon:"fa-solid fa-xmark-circle",onClick:ce=>N(s.id),text:"",severity:"danger"},null,8,["onClick"]),[[L,"Quitar Bloqueo"]])])]))),256))])),e("div",ie,[e("div",le,[o(g,{label:"Razón del Bloqueo",modelValue:i(c).description,"onUpdate:modelValue":t[4]||(t[4]=s=>i(c).description=s)},null,8,["modelValue"])]),e("div",re,[ne,o($,{modelValue:i(c).range,"onUpdate:modelValue":t[5]||(t[5]=s=>i(c).range=s),range:{},"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1},null,8,["modelValue"])])])]),_:1},8,["visible"]),o(i(z))],64)}}};export{ke as default};

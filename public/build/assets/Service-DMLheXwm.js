var p=Object.defineProperty;var m=(r,s,e)=>s in r?p(r,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[s]=e;var a=(r,s,e)=>m(r,typeof s!="symbol"?s+"":s,e);import{y as n,x as g,A as l}from"./app-PeJkGPqm.js";import{a as c,g as u}from"./Toats-RcJDUpcK.js";import{s as o}from"./searchStore-DifshFsX.js";class h{constructor(){a(this,"url",null)}assignMatchingKeys(s,e){Object.keys(s).forEach(t=>{t in e&&(e[t]=s[t])})}submit(s,e=null){return e?n.put(route(this.url+".update",e),s,{onSuccess:()=>{u("Actualizado Exitosamente")},onError:t=>{c(t.response.data.message||"Error al actualizar")}}):n.post(route(this.url+".store"),s,{onSuccess:()=>{u("Guardado Exitosamente")},onError:t=>{c(t.response.data.message||"Error al guardar")}})}delete(s){return n.delete(route(this.url+".destroy",s),{onSuccess:()=>{u("Eliminado Exitosamente")},onError:e=>{c(e.response.data.message||"Error al eliminar")}})}}class E extends h{constructor(e){super();a(this,"loading",!1);a(this,"service",[]);a(this,"portada",null);a(this,"form",g({title:"",description:"",features:[],boys_price:0,adults_price:0,code:"",includes:[],notIncludes:[],type:"TOUR",city:"Cartagena",problematic:0,duration_type:"",destinations:"",duration:0,duration_unit:"Dias",capacidad_min:1,capacidad_max:1}));this.service=e,this.url="services",e&&(this.assignMatchingKeys(e,this.form),this.form.includes=JSON.parse(e.includes),this.form.notIncludes=JSON.parse(e.notIncludes))}async getProveedorsByService(e){const{data:t}=await l.get(route("get.proveedors.by.service",e));return t.proveedors}async getServices(){const{data:e}=await l.get(route("get.all.services"));return e.services}async getServicePagination(e=1,t=10){const i={page:e,location:o.location.value,type:o.type.value.value,checkin:o.checkin.value,checkout:o.checkout.value,guests:o.guests.value,perPage:t},{data:d}=await l.get(route("services.get.paginated"),{params:i});return d}async submit(){var i;let e=this.form.includes,t=this.form.notIncludes;this.form.notIncludes=JSON.stringify(this.form.notIncludes),this.form.includes=JSON.stringify(this.form.includes),super.submit(this.form,((i=this.service)==null?void 0:i.id)??null),this.form.includes=e,this.form.notIncludes=t}async setPortada(){n.post(route("set.portada",this.service.slug),{portada:this.portada},{onSuccess:()=>{u("Portada actualizada exitosamente")},onError:e=>{c("Error al actualizar la portada")}})}}export{E as S};

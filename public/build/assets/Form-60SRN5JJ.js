import{b as P}from"./index-CWYNAvdz.js";import{aU as U,d as _,p as S,aV as N,u as F,c as M,o as p,w as b,a as e,f as c,g as T,b as d,h as s,t as f,i as n,F as $,j as z,E as A,G as B}from"./app-C5I5Ygl_.js";import{_ as u}from"./Input-uJqG2Wq0.js";import{M as E}from"./Modal-BALz2ajr.js";import{a as O}from"./toasts-CAnEIL5D.js";import{S as I}from"./Service-By3UaVUo.js";import"./index-pYSHISes.js";import"./index-UkGQbA5H.js";import"./index-1eW1M3vj.js";import"./index-D59IvZpX.js";import"./index-DRFgEt2J.js";import"./index-DBox_IbL.js";import"./index-BcvHALy3.js";import"./index-DUYU5Mbg.js";import"./index-BZuTmECJ.js";import"./index-Czm2e34l.js";import"./index-Dhb-lOP8.js";import"./index-CEYZLRCy.js";import"./index-DFj3LLT6.js";import"./index-CRG6gdIB.js";import"./index-h7pwG4l0.js";import"./index-DRkBtzcP.js";import"./index-C1kcwT3p.js";import"./index-tKFjSTOn.js";import"./useCommonUtilities-BgDhORlD.js";import"./postcss-DUMf-ps_.js";import"./postcss-cpTcR_Z8.js";import"./index-CSugZkYR.js";import"./index-BNilZtcq.js";import"./index-BPM9IplR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";import"./GeneralService-BR7aY-1z.js";import"./Toats-CRqRGqmn.js";import"./searchStore-CuaogzV0.js";const G={class:"flex items-center gap-3 px-6 py-4 border-b border-gray-200"},L={class:"text-lg font-bold text-gray-900"},H={class:"p-6"},R={class:"space-y-6"},W={class:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-xl p-6 border border-gray-200 shadow-sm"},q={class:"space-y-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"space-y-2"},X={class:"group relative"},Y={for:"upload",class:"flex flex-col items-center justify-center gap-3 p-6 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 bg-white"},Z={class:"text-center"},ee={class:"text-sm font-medium text-gray-900 truncate max-w-full px-2"},oe={class:"space-y-3 pt-4 border-t border-gray-200"},te={class:"flex gap-4"},le={class:"flex items-center gap-2 flex-1"},se={class:"flex items-center gap-2 flex-1"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ie={key:0},ae={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden h-full flex flex-col"},de={class:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex items-center justify-between"},ne={class:"flex items-center gap-3"},ue={class:"text-xs text-blue-100"},me={class:"flex-1 overflow-y-auto max-h-[calc(60vh-140px)]"},pe={key:0,class:"flex flex-col items-center justify-center py-12 px-6 text-center"},ce={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-4 p-4"},fe={class:"absolute -top-2 -left-2 w-7 h-7 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-full flex items-center justify-center shadow-lg"},ge={class:"text-white text-xs font-bold"},ve=["onClick"],be={class:"space-y-3"},xe={class:"relative group-tarifa"},ye=["onUpdate:modelValue"],we={class:"flex items-center justify-end gap-3"},to={__name:"Form",props:U({proveedor:Object},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(x){const{toast:y}=O(),w=_([]),i=x,C=new I;S(async()=>{w.value=await C.getServices()});const r=_(i.proveedor?.type_penalidad_cost??"Dinero"),g=N(x,"modelValue",!1),t=F({id:i.proveedor?.id??"",nombre:i.proveedor?.nombre??"",direccion:"a.",nit:i.proveedor?.nit??"",telefono:i.proveedor?.telefono??"",type_penalidad_cost:i.proveedor?.type_penalidad_cost??"Dinero",penalidad_no_show:i.proveedor?.penalidad_no_show??0,penalidad_cancelacion:i.proveedor?.penalidad_cancelacion??0,services:i.proveedor?.services.map(a=>a.pivot)??[],cuenta:null,account_number:i.proveedor?.account_number??""}),h=()=>{t.services.push({service_id:"",concepto:"",value:""})},D=a=>{t.services.splice(a,1)},j=()=>{t.type_penalidad_cost=r.value,t.transform(a=>({...a,_method:t.id?"PUT":"POST"})),t.id?t.post(route("proveedors.update",t.id),{forceFormData:!0,onSuccess:()=>{t.reset(),g.value=!1,y("success","Proveedor Actualizado")}}):t.post(route("proveedors.store"),{forceFormData:!0,onSuccess:()=>{t.reset(),y("success","Proveedor Creado")}})},k=a=>{t.cuenta=a.target.files[0]};return(a,o)=>{const V=P;return p(),M(E,{visible:g.value,"onUpdate:visible":o[11]||(o[11]=l=>g.value=l),"close-on-escape":!0,width:"90vw",maximizable:!0},{header:b(()=>[e("div",G,[o[13]||(o[13]=e("div",{class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center"},[e("i",{class:"fa-solid fa-truck-field text-white"})],-1)),e("div",null,[e("h3",L,f(s(t).id?"Editar Proveedor":"Nuevo Proveedor"),1),o[12]||(o[12]=e("p",{class:"text-xs text-gray-500"},"Complete la información del proveedor",-1))])])]),footer:b(()=>[e("div",we,[e("button",{onClick:o[10]||(o[10]=l=>g.value=!1),class:"px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors duration-200"},[...o[34]||(o[34]=[e("i",{class:"fa-solid fa-xmark mr-2"},null,-1),n(" Cancelar ",-1)])]),e("button",{onClick:j,class:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-200"},[o[35]||(o[35]=e("i",{class:"fa-solid fa-check mr-2"},null,-1)),n(" "+f(s(t).id?"Actualizar":"Guardar")+" Proveedor ",1)])])]),default:b(()=>[e("div",H,[e("div",R,[e("div",null,[e("div",W,[o[20]||(o[20]=e("div",{class:"flex items-center gap-2 mb-6"},[e("div",{class:"w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center"},[e("i",{class:"fa-solid fa-building text-white text-sm"})]),e("h2",{class:"text-lg font-bold text-gray-900"},"Datos del Proveedor")],-1)),e("div",q,[e("div",J,[d(u,{label:"Nombre",class:"w-full",modelValue:s(t).nombre,"onUpdate:modelValue":o[0]||(o[0]=l=>s(t).nombre=l)},null,8,["modelValue"]),d(u,{label:"NIT",class:"w-full",modelValue:s(t).nit,"onUpdate:modelValue":o[1]||(o[1]=l=>s(t).nit=l)},null,8,["modelValue"])]),e("div",K,[d(u,{label:"Teléfono",class:"w-full",modelValue:s(t).telefono,"onUpdate:modelValue":o[2]||(o[2]=l=>s(t).telefono=l)},null,8,["modelValue"]),d(u,{label:"Número de Cuenta Bancaria",class:"w-full",modelValue:s(t).account_number,"onUpdate:modelValue":o[3]||(o[3]=l=>s(t).account_number=l)},null,8,["modelValue"])]),e("div",Q,[o[16]||(o[16]=e("label",{class:"text-sm font-medium text-gray-700 block"},"Cámara de Comercio",-1)),e("div",X,[e("input",{id:"upload",accept:".pdf",onChange:k,type:"file",class:"hidden"},null,32),e("label",Y,[o[15]||(o[15]=e("div",{class:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center group-hover:bg-blue-200 transition-colors duration-200"},[e("i",{class:"fa-solid fa-file-pdf text-2xl text-blue-600"})],-1)),e("div",Z,[e("p",ee,f(s(t).cuenta?s(t).cuenta.name:"Click para seleccionar PDF"),1),o[14]||(o[14]=e("p",{class:"text-xs text-gray-500 mt-1"},"PDF máximo 10MB",-1))])])])]),e("div",oe,[o[19]||(o[19]=e("label",{class:"text-sm font-medium text-gray-700 flex items-center gap-2"},[e("i",{class:"fa-solid fa-shield-halved text-blue-600"}),n(" Tipo de Penalización ")],-1)),e("div",te,[e("div",le,[d(V,{modelValue:r.value,"onUpdate:modelValue":o[4]||(o[4]=l=>r.value=l),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),o[17]||(o[17]=e("label",{for:"Dinero",class:"text-sm font-medium text-gray-700 cursor-pointer"},"Dinero",-1))]),e("div",se,[d(V,{modelValue:r.value,"onUpdate:modelValue":o[5]||(o[5]=l=>r.value=l),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje"},null,8,["modelValue"]),o[18]||(o[18]=e("label",{for:"Porcentaje",class:"text-sm font-medium text-gray-700 cursor-pointer"},"Porcentaje",-1))])])]),e("div",re,[d(u,{label:"Penalización por NO SHOW",type:"number",modelValue:s(t).penalidad_no_show,"onUpdate:modelValue":o[6]||(o[6]=l=>s(t).penalidad_no_show=l),mode:r.value=="Dinero"?"currency":"decimal",suffix:r.value=="Dinero"?"":"%",min:"0",max:r.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"]),d(u,{label:"Penalización por CANCELACIÓN",type:"number",modelValue:s(t).penalidad_cancelacion,"onUpdate:modelValue":o[7]||(o[7]=l=>s(t).penalidad_cancelacion=l),mode:r.value=="Dinero"?"currency":"decimal",suffix:r.value=="Dinero"?"":"%",min:"0",max:r.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"])])])])]),a.$page.props.auth.user.rol=="admin"||a.$page.props.auth.user.rol=="superadmin"?(p(),c("div",ie,[e("div",ae,[e("div",de,[e("div",ne,[o[22]||(o[22]=e("div",{class:"w-8 h-8 rounded-lg bg-white/20 flex items-center justify-center"},[e("i",{class:"fa-solid fa-list-check text-white text-sm"})],-1)),e("div",null,[o[21]||(o[21]=e("h2",{class:"text-lg font-bold text-white"},"Servicios",-1)),e("p",ue,f(s(t).services.length)+" servicio(s) configurado(s)",1)])]),e("button",{onClick:o[8]||(o[8]=l=>h()),class:"px-4 py-2 bg-white hover:bg-blue-50 text-blue-600 rounded-lg font-medium text-sm flex items-center gap-2 transition-colors duration-200 shadow-md hover:shadow-lg"},[...o[23]||(o[23]=[e("i",{class:"fa-solid fa-plus"},null,-1),n(" Agregar Servicio ",-1)])])]),e("div",me,[s(t).services.length===0?(p(),c("div",pe,[o[25]||(o[25]=e("div",{class:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4"},[e("i",{class:"fa-solid fa-inbox text-3xl text-gray-400"})],-1)),o[26]||(o[26]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-1"},"No hay servicios",-1)),o[27]||(o[27]=e("p",{class:"text-sm text-gray-500 mb-4"},"Agrega servicios para este proveedor",-1)),e("button",{onClick:o[9]||(o[9]=l=>h()),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium text-sm flex items-center gap-2 tra nsition-colors duration-200"},[...o[24]||(o[24]=[e("i",{class:"fa-solid fa-plus"},null,-1),n(" Agregar Primer Servicio ",-1)])])])):(p(),c("div",ce,[(p(!0),c($,null,z(s(t).services,(l,v)=>(p(),c("div",{key:v,class:"relative bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-blue-300 hover:shadow-md transition-all duration-200 group"},[e("div",fe,[e("span",ge,f(v+1),1)]),e("button",{onClick:m=>D(v),class:"absolute -top-2 -right-2 w-7 h-7 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",title:"Eliminar servicio"},[...o[28]||(o[28]=[e("i",{class:"fa-solid fa-xmark text-white text-xs"},null,-1)])],8,ve),e("div",be,[e("div",null,[o[29]||(o[29]=e("label",{class:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5"},[e("i",{class:"fa-solid fa-tag text-blue-600"}),n(" Servicio ")],-1)),d(u,{type:"dropdown",class:"w-full",modelValue:l.service_id,"onUpdate:modelValue":m=>l.service_id=m,"option-label":"title","option-value":"id",options:w.value,placeholder:"Seleccionar..."},null,8,["modelValue","onUpdate:modelValue","options"])]),e("div",null,[o[30]||(o[30]=e("label",{class:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5"},[e("i",{class:"fa-solid fa-file-lines text-green-600"}),n(" Concepto ")],-1)),d(u,{class:"w-full",modelValue:l.concept,"onUpdate:modelValue":m=>l.concept=m,placeholder:"Ej: Transporte, Guía..."},null,8,["modelValue","onUpdate:modelValue"])]),e("div",null,[o[32]||(o[32]=e("label",{class:"flex items-center gap-1.5 text-xs font-semibold text-gray-700 mb-1.5"},[e("i",{class:"fa-solid fa-dollar-sign text-amber-600"}),n(" Tarifa (COP) ")],-1)),e("div",xe,[o[31]||(o[31]=e("div",{class:"absolute left-0 top-0 bottom-0 w-10 bg-gradient-to-r from-amber-100 to-amber-50 border-r border-amber-200 rounded-l-lg flex items-center justify-center"},[e("span",{class:"text-amber-700 font-bold text-xs"},"$")],-1)),A(e("input",{type:"number",class:"w-full pl-12 pr-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all duration-200 font-medium text-gray-900 text-sm","onUpdate:modelValue":m=>l.value=m,placeholder:"0.00",step:"0.01"},null,8,ye),[[B,l.value]])])])]),o[33]||(o[33]=e("div",{class:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200"},null,-1))]))),128))]))])])])):T("",!0)])])]),_:1},8,["visible"])}}};export{to as default};

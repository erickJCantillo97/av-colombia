import{d as h,u as I,A as M,p as H,c as b,o as r,w as q,a as l,f as n,g as _,k as w,b as i,h as a,V as C,E as A,Y as P,F as y,j as x,t as d,i as j,I as $}from"./app-DA49k7aa.js";import{_ as E}from"./AppLayout-BVKqwruK.js";import{_ as p}from"./Input-CNANi_D4.js";import{s as k,a as V}from"./index-DSZazqBx.js";import{s as L,a as T}from"./index-klrsLYTr.js";import{s as F}from"./index-Hud1mXB4.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-DTjQPZwK.js";/* empty css                                                             */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B3RgQQ2d.js";import"./index-C1D_ciRH.js";import"./index-CJ0hSStr.js";import"./index-DZSqzO9O.js";import"./index-BR18MbD9.js";import"./index-Bao5XXWc.js";import"./index-D1NAeFZn.js";import"./index-DfGwyjRf.js";import"./index-Ck8eQdmw.js";import"./index-DIUQ2SKR.js";import"./index-BUnQn-0D.js";import"./index-DtQNzBYi.js";import"./index-ZGotCUcA.js";import"./index-mVDPyz0s.js";import"./index-Bql1hNYi.js";import"./index-oVRh-dmO.js";import"./index-B2JQizyt.js";import"./index-CazGrU1F.js";import"./index-DzrArW-b.js";import"./useCommonUtilities-BgDhORlD.js";import"./postcss-CU2QTtWd.js";import"./postcss-CSgI4x2Q.js";const R={class:"h-[90vh] md:h-[99vh] overflow-y-auto"},Y={class:"max-w-7xl mx-auto p-6"},G={class:"bg-white rounded-lg shadow-lg p-6 mb-6"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},K={class:"grid grid-cols-2 gap-2"},Q={class:"border-t pt-4"},W={class:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},X={class:"mt-4"},Z={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},ee=["for"],te={class:"flex justify-center pt-4 border-t"},le={key:0},se={class:"flex justify-between items-center mb-6"},ae={class:"text-xl font-semibold"},oe={class:"text-sm text-gray-500"},ie={key:0,class:"text-center py-12"},re={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne=["onClick"],de={class:"h-48 bg-gray-200 relative"},ue=["src","alt"],me={key:1,class:"w-full h-full bg-gray-300 flex items-center justify-center"},ce={class:"p-4"},pe={class:"font-semibold text-lg mb-2 line-clamp-1"},ge={class:"flex items-center text-gray-500 text-sm mb-2"},fe={class:"text-gray-600 text-sm mb-3 line-clamp-2"},ve={key:0,class:"mb-3"},he={class:"flex flex-wrap gap-1"},be={class:"flex justify-between items-center"},_e={class:"text-xl font-bold text-green-600"},Xe={__name:"Search",props:{accommodations:{type:Array,default:()=>[]},searchParams:{type:Object,default:()=>({})},amenities:Array},setup(m){const g=m,c=h(!1),f=h(!1),v=h(!1),O=[{label:"Hotel",value:"hotel"},{label:"Apartamento",value:"apartamento"},{label:"Casa",value:"casa"},{label:"Hostal",value:"hostal"},{label:"Villa",value:"villa"}],s=I({city:"",country:"",type:"",check_in_date:null,check_out_date:null,guests_adults:2,guests_children:0,min_price:null,max_price:null,star_rating:null,amenities:[]}),U=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),z=o=>U.format(o),B=M(()=>{const o=[];if(s.check_in_date&&s.check_out_date){const e=new Date(s.check_in_date).toLocaleDateString("es-CO"),t=new Date(s.check_out_date).toLocaleDateString("es-CO");o.push(`${e} - ${t}`)}return o.push(`${s.guests_adults} adultos`),s.guests_children>0&&o.push(`${s.guests_children} niños`),o.join(", ")});H(()=>{g.searchParams&&(Object.keys(s.data()).forEach(o=>{g.searchParams[o]!==void 0&&(s[o]=g.searchParams[o])}),v.value=!0)});const D=()=>{if(!s.check_in_date||!s.check_out_date){alert("Por favor selecciona las fechas de entrada y salida");return}f.value=!0,v.value=!0,s.get(route("booking-accommodations.search"),{onFinish:()=>{f.value=!1}})},N=o=>{$.visit(route("accommodations.show",o.id))},S=o=>{if(!s.check_in_date||!s.check_out_date){alert("Por favor selecciona primero las fechas de tu estadía");return}$.visit(route("accommodations.show",o.id),{data:{check_in:s.check_in_date,check_out:s.check_out_date,adults:s.guests_adults,children:s.guests_children}})};return(o,e)=>(r(),b(E,{title:"Buscar Alojamientos"},{default:q(()=>[l("div",R,[l("div",Y,[l("div",G,[e[17]||(e[17]=l("h1",{class:"text-2xl font-bold mb-6"},"Buscar Alojamientos",-1)),l("form",{onSubmit:w(D,["prevent"]),class:"space-y-4"},[l("div",J,[i(p,{label:"Ciudad o País",modelValue:a(s).city,"onUpdate:modelValue":e[0]||(e[0]=t=>a(s).city=t),placeholder:"¿A dónde quieres ir?",icon:"fa-solid fa-map-marker-alt"},null,8,["modelValue"]),l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Check-in",-1)),i(a(C),{modelValue:a(s).check_in_date,"onUpdate:modelValue":e[1]||(e[1]=t=>a(s).check_in_date=t),"min-date":new Date,teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota",placeholder:"Fecha de entrada"},null,8,["modelValue","min-date"])]),l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Check-out",-1)),i(a(C),{modelValue:a(s).check_out_date,"onUpdate:modelValue":e[2]||(e[2]=t=>a(s).check_out_date=t),"min-date":a(s).check_in_date||new Date,teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota",placeholder:"Fecha de salida"},null,8,["modelValue","min-date"])]),l("div",null,[e[13]||(e[13]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Huéspedes",-1)),l("div",K,[i(p,{label:"Adultos",modelValue:a(s).guests_adults,"onUpdate:modelValue":e[3]||(e[3]=t=>a(s).guests_adults=t),type:"number",min:"1",size:"small"},null,8,["modelValue"]),i(p,{label:"Niños",modelValue:a(s).guests_children,"onUpdate:modelValue":e[4]||(e[4]=t=>a(s).guests_children=t),type:"number",min:"0",size:"small"},null,8,["modelValue"])])])]),l("div",Q,[i(a(k),{onClick:e[5]||(e[5]=t=>c.value=!c.value),icon:"fa-solid fa-filter",label:c.value?"Ocultar Filtros":"Filtros Avanzados",severity:"secondary",text:""},null,8,["label"]),A(l("div",W,[l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1)),i(a(L),{modelValue:a(s).type,"onUpdate:modelValue":e[6]||(e[6]=t=>a(s).type=t),options:O,"option-label":"label","option-value":"value",placeholder:"Cualquier tipo"},null,8,["modelValue"])]),l("div",null,[e[15]||(e[15]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rating Mínimo",-1)),i(a(F),{modelValue:a(s).star_rating,"onUpdate:modelValue":e[7]||(e[7]=t=>a(s).star_rating=t),stars:5,cancel:!0},null,8,["modelValue"])]),l("div",null,[i(p,{label:"Precio Mínimo",modelValue:a(s).min_price,"onUpdate:modelValue":e[8]||(e[8]=t=>a(s).min_price=t),type:"number",min:"0",currency:"COP"},null,8,["modelValue"])]),l("div",null,[i(p,{label:"Precio Máximo",modelValue:a(s).max_price,"onUpdate:modelValue":e[9]||(e[9]=t=>a(s).max_price=t),type:"number",min:"0",currency:"COP"},null,8,["modelValue"])])],512),[[P,c.value]]),A(l("div",X,[e[16]||(e[16]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amenidades",-1)),l("div",Z,[(r(!0),n(y,null,x(m.amenities,t=>(r(),n("div",{key:t.id,class:"flex items-center space-x-2"},[i(a(T),{inputId:"search-amenity-"+t.id,modelValue:a(s).amenities,"onUpdate:modelValue":e[10]||(e[10]=u=>a(s).amenities=u),value:t.id},null,8,["inputId","modelValue","value"]),l("label",{for:"search-amenity-"+t.id,class:"text-sm cursor-pointer"},d(t.name),9,ee)]))),128))])],512),[[P,c.value]])]),l("div",te,[i(a(k),{type:"submit",icon:"fa-solid fa-search",label:"Buscar Alojamientos",loading:f.value,size:"large"},null,8,["loading"])])],32)]),v.value?(r(),n("div",le,[l("div",se,[l("h2",ae,d(m.accommodations.length)+" alojamientos encontrados ",1),l("div",oe,d(B.value),1)]),m.accommodations.length===0?(r(),n("div",ie,[...e[18]||(e[18]=[l("div",{class:"text-gray-500 text-lg mb-4"},[l("i",{class:"fa-solid fa-search text-4xl mb-4 block"}),j(" No se encontraron alojamientos con estos criterios ")],-1),l("p",{class:"text-gray-400"},"Intenta modificar tus filtros de búsqueda",-1)])])):(r(),n("div",re,[(r(!0),n(y,null,x(m.accommodations,t=>(r(),n("div",{key:t.id,class:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow cursor-pointer",onClick:u=>N(t)},[l("div",de,[t.photos?.[0]?(r(),n("img",{key:0,src:t.photos[0].url,alt:t.name,class:"w-full h-full object-cover"},null,8,ue)):(r(),n("div",me,[...e[19]||(e[19]=[l("i",{class:"fa-solid fa-image text-gray-500 text-2xl"},null,-1)])])),i(a(V),{value:t.type,severity:"info",class:"absolute top-2 left-2"},null,8,["value"]),i(a(F),{"model-value":t.star_rating,readonly:"",cancel:!1,class:"absolute top-2 right-2 bg-white bg-opacity-75 p-1 rounded"},null,8,["model-value"])]),l("div",ce,[l("h3",pe,d(t.name),1),l("div",ge,[e[20]||(e[20]=l("i",{class:"fa-solid fa-map-marker-alt mr-1"},null,-1)),j(" "+d(t.city)+", "+d(t.country),1)]),l("p",fe,d(t.description),1),t.amenities?.length>0?(r(),n("div",ve,[l("div",he,[(r(!0),n(y,null,x(t.amenities.slice(0,3),u=>(r(),b(a(V),{key:u.id,value:u.name,severity:"secondary",size:"small"},null,8,["value"]))),128)),t.amenities.length>3?(r(),b(a(V),{key:0,value:`+${t.amenities.length-3} más`,severity:"secondary",size:"small"},null,8,["value"])):_("",!0)])])):_("",!0),l("div",be,[l("div",null,[l("div",_e,d(z(t.min_price)),1),e[21]||(e[21]=l("div",{class:"text-xs text-gray-500"},"por noche",-1))]),i(a(k),{onClick:w(u=>S(t),["stop"]),icon:"fa-solid fa-calendar-check",label:"Ver Habitaciones",severity:"success",size:"small"},null,8,["onClick"])])])],8,ne))),128))]))])):_("",!0)])])]),_:1}))}};export{Xe as default};

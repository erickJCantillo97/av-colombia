import{x as S,q as b,f as n,o as r,a as o,b as f,u as s,F as g,i as _,t as i,m as B,v as F,c as y,w as h,g as p,h as N,S as P}from"./app-LwfihDUH.js";import{e as T,C as $}from"./es--ssEbrae.js";import"./autoprefixer-DjjFyvWB.js";import{_ as j}from"./logo-DtdhEWXG.js";import{s as k}from"./index-BxfI8eN_.js";import"./postcss-2H-A--_c.js";import"./index-DMcjgI8t.js";import"./index-CrNDWYz4.js";import"./index-Df2Ek5J4.js";const A={class:"p-4 shadow-xl w-[25rem] rounded-lg fixed left-[calc(100%-26rem)] top-[calc(10%+5rem)] bg-white gap-y-2 overflow-y-auto"},E={class:"flex flex-col gap-y-2"},O={key:0,class:"flex flex-col gap-y-2"},R={class:"flex flex-col gap-y-1"},U={class:"flex flex-col text-md w-full"},q={class:"text-xs"},L={class:"text-xs italic"},z={class:"flex items-center w-full justify-end text-center"},H=["onClick"],I=["onUpdate:modelValue"],M=["onClick"],G={class:"grid grid-cols-3 gap-2"},J={key:0},K={key:1},Q={class:"text-2xl font-bold text-green-500 flex items-center gap-x-4"},W={class:"text-xl font-bold text-green-500"},X={key:1,class:"flex flex-col items-center justify-center gap-y-4"},ne={__name:"LargeBooking",props:["product","availabilities"],setup(w){const d=w,C={minDate:"today",mode:"single",locale:T.Spanish},m=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),a=S({date:"",persons:[],time:"",service_id:d.product.id,service_name:d.product.title,price_type:d.product.price_type}),V=b(()=>{var l=d.availabilities.find(t=>t.start_date<=a.date&&t.end_date>=a.date)??[],e=[];return l.horarios&&(e=l.horarios.filter(t=>t.day_number==new Date(a.date).getDay()+1).map(t=>({start:t.start,end:t.end,horario:t}))),D(),e}),D=()=>{var l=d.availabilities.find(e=>e.start_date<=a.date&&e.end_date>=a.date)?.precies??[];a.persons=l.map(e=>({id:e.id,min:e.min,max:e.max,value:e.value,cant:0}))},x=b(()=>{var l=0;return a.persons.forEach(e=>{l+=e.cant*e.value}),l}),v=(l,e)=>{var t=a.persons[l];e==-1&&t.cant>0?t.cant-=1:e==1&&t.cant<t.max&&(t.cant+=1)};return(l,e)=>(r(),n("div",A,[e[7]||(e[7]=o("p",{class:"font-extrabold text-center text-3xl capitalize text-green-700"}," Reservar ",-1)),o("div",E,[e[1]||(e[1]=o("label",{for:"date",class:"font-bold"},"Fecha",-1)),f(s($),{modelValue:s(a).date,"onUpdate:modelValue":e[0]||(e[0]=t=>s(a).date=t),config:C,class:"text-center rounded-lg shadow-lg border-2 border-black"},null,8,["modelValue"])]),e[8]||(e[8]=o("hr",null,null,-1)),s(a).date?(r(),n("div",O,[e[3]||(e[3]=o("div",null,[o("p",{class:"font-bold"},"¿Para cuantos?"),o("p",{class:"text-xs italic"},"Seleccione la cantidad de personas")],-1)),o("div",R,[(r(!0),n(g,null,_(s(a).persons,(t,c)=>(r(),n("div",{key:t.id,class:"p-3 flex items-center justify-between font-bold rounded-lg w-full border-b"},[o("div",U,[o("span",q,i(t.min??0)+" - "+i(t.max)+" Años",1),o("span",L,"Valor: "+i(s(m).format(t.value)),1)]),o("div",z,[o("button",{class:"text-red-500 border border-red-400 font-bold rounded-full px-2.5 py-1",onClick:u=>v(c,-1)}," - ",8,H),B(o("input",{type:"text","onUpdate:modelValue":u=>t.cant=u,disabled:"",min:"0",class:"w-full rounded-xl right-0 border-0 focus:ring-0 text-center"},null,8,I),[[F,t.cant]]),o("button",{class:"text-green-500 border border-green-500 font-bold rounded-full px-2.5 py-1",onClick:u=>v(c,1)}," + ",8,M)])]))),128))]),e[4]||(e[4]=o("p",{class:"font-bold"},"¿A que hora?",-1)),o("div",G,[(r(!0),n(g,null,_(V.value,t=>(r(),y(s(k),{outlined:s(a).time!=t.horario.id,key:t.horario.id,onClick:c=>s(a).time=t.horario.id},{default:h(()=>[o("span",null,i(t.start.slice(0,5)),1),t.end?(r(),n("span",J,"-")):p("",!0),t.end?(r(),n("span",K,i(t.end.slice(0,5)),1)):p("",!0)]),_:2},1032,["outlined","onClick"]))),128))]),e[5]||(e[5]=o("hr",null,null,-1)),o("div",Q,[e[2]||(e[2]=o("span",{class:"text-xl font-bold text-green-500"},[o("i",{class:"fa-solid fa-tag rotate-90"}),N(" Total a pagar: ")],-1)),o("span",W,i(s(m).format(x.value)),1)]),f(s(P),{href:l.route("check.out",s(a))},{default:h(()=>[x.value>0&&s(a).time!=""?(r(),y(s(k),{key:0,label:"Reservar",class:"w-full bg-green-500 text-white font-bold rounded-lg shadow-xl"})):p("",!0)]),_:1},8,["href"])])):(r(),n("div",X,[f(j),e[6]||(e[6]=o("h1",{class:"font-mono font-bold text-xl"},"Seleccione una fecha",-1))]))]))}};export{ne as default};

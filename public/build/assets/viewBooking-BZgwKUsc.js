import{ai as B,aj as D,o as l,c as F,w,a as e,t as o,k as f,b as v,f as d,g as a,u as p,i as L,F as A,W as y,T}from"./app-sa-915yO.js";import{s as N}from"./index-BJXn9gYZ.js";import{s as E}from"./index-BYythCUO.js";import{S as u,a as $}from"./toasts-CuGasqAw.js";const M={class:"flex items-center gap-2"},V={class:"font-bold text-lg"},z={class:"flex flex-col gap-y-1.5 text-sm"},I={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},P={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},H={key:0,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},R={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},W={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},U={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},G={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},q=["href"],J={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},K={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Q={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},X={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Y={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Z={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},_={key:1,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ee={key:2,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},te={key:3,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},se={class:"flex flex-col border py-1 bg-white/30 rounded-md px-2"},ie={key:4,class:"text-lg flex w-full justify-between mt-2"},oe={class:"rounded-full bg-black text-white px-2"},ne={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},le={class:"flex flex-col items-center gap-2"},re={class:"flex gap-x-2"},fe={__name:"viewBooking",props:B({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const{toast:m}=$(),b=s,C=D(s,"modelValue"),g=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),k=()=>{u.fire({title:"Cancelar Servicio",input:"date",inputLabel:"Fecha de Cancelaci贸n",showCancelButton:!0,confirmButtonText:"Cancelar Servicio",showLoaderOnConfirm:!0,preConfirm:async i=>{await y.post(route("set.states"),{service:b.service.id,state:"CANCELADA",date:i,terminated:!0})},allowOutsideClick:()=>!u.isLoading()}).then(i=>{i.isConfirmed&&m("success","Reserva Cancelada")})},x=(i,t)=>{u.fire({title:i,text:"Estas seguro de realizar esta acci贸n?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(r=>{r.isConfirmed&&(u.fire({title:i,text:"Esta reserva ha sido "+i+".",icon:"success"}),y.post(route("set.states"),{service:b.service.id,state:i,terminated:t},{onSuccess:()=>{info.value=!1,m("success","Reserva "+i)}}))})},S=()=>{u.fire({title:"Cambio de Fecha",input:"date",inputLabel:"Nueva Fecha",showCancelButton:!0,confirmButtonText:"Cambiar Fecha",showLoaderOnConfirm:!0,preConfirm:async i=>{await y.post(route("set.states"),{service:b.service.id,state:"CAMBIO DE FECHA",date:i,terminated:!1})},allowOutsideClick:()=>!u.isLoading()}).then(i=>{i.isConfirmed&&m("success","Fecha Cambiada")})},j=i=>{if(i==null||i==null)return"Sin definir";var t=new Date(new Date(i).getTime()+new Date(i).getTimezoneOffset()*6e4).toLocaleString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"});return t=="30/11/2"?"INDEFINIDO":t};return(i,t)=>{const r=E,O=N,c=T;return l(),F(O,{visible:C.value,"onUpdate:visible":t[5]||(t[5]=n=>C.value=n),"pt:root:class":"!bg-blue-100",header:"Detalles de la actividad",position:"right"},{header:w(()=>[e("div",M,[e("span",V,o(s.service.service.title),1)])]),footer:w(()=>[e("div",le,[e("div",re,[f(v(r,{onClick:t[0]||(t[0]=n=>x("COMPLETADA",!0)),icon:"fa-solid fa-circle-check",text:"",size:"large",class:"flex-auto",severity:"success"},null,512),[[c,"Completar Servicio",void 0,{top:!0}]]),f(v(r,{onClick:t[1]||(t[1]=n=>x("NO SHOW",!0)),icon:"fa-solid fa-eye-slash",text:"",size:"large",class:"flex-auto",severity:"warn"},null,512),[[c,"Servicio No show",void 0,{top:!0}]]),f(v(r,{onClick:t[2]||(t[2]=n=>S()),icon:"fa-solid fa-calendar-week",text:"",size:"large",class:"flex-auto",severity:"info"},null,512),[[c,"Cambio de Fecha",void 0,{top:!0}]]),f(v(r,{onClick:t[3]||(t[3]=n=>k()),icon:"fa-solid fa-xmark-circle",text:"",size:"large",class:"flex-auto",severity:"danger"},null,512),[[c,"Cancelar Servicio",void 0,{top:!0}]]),f(v(r,{onClick:t[4]||(t[4]=n=>x("PROBLEMATICA",!1)),icon:"fa-solid fa-person-dress-burst",text:"",size:"large",class:"flex-auto",severity:"danger"},null,512),[[c,"Servicio Problematico",void 0,{top:!0}]])])])]),default:w(()=>{var n;return[e("div",z,[e("div",I,[t[6]||(t[6]=e("strong",null,"Fecha del Servicio:",-1)),e("p",null,o(j(s.service.date)),1)]),e("div",P,[t[7]||(t[7]=e("strong",null,"Hora del Servicio:",-1)),e("p",null,o(s.service.hour),1)]),s.service.time_service?(l(),d("div",H,[t[8]||(t[8]=e("strong",null,"Duraci贸n del Servicio:",-1)),e("p",null,o(s.service.time_service),1)])):a("",!0),e("div",R,[t[9]||(t[9]=e("strong",null,"Canal de Venta:",-1)),e("p",null,o(s.service.channel.name),1)]),e("div",W,[t[10]||(t[10]=e("strong",null,"Cliente:",-1)),e("p",null,o(s.service.cliente_name),1)]),e("div",U,[t[11]||(t[11]=e("strong",null,"Ciudad:",-1)),e("p",null,o(s.service.cliente_city),1)]),e("div",G,[t[12]||(t[12]=e("strong",null,"Telelfono:",-1)),e("a",{target:"_blank",href:`https://wa.me/${s.service.cliente_phone}?text=Hola%20,%20mi%20nombre%20es%20*Sandra Gil*,%20Le%20escribo%20desde%20*AV%20COLOMBIA*`},o(s.service.cliente_phone),9,q)]),e("div",J,[t[13]||(t[13]=e("strong",null,"Edificio:",-1)),e("p",null,o(s.service.cliente_building),1)]),e("div",K,[t[14]||(t[14]=e("strong",null,"Adultos:",-1)),e("p",null,o(s.service.adults),1)]),e("div",Q,[t[15]||(t[15]=e("strong",null,"Ni帽os:",-1)),e("p",null,o(s.service.boys),1)]),e("div",X,[t[16]||(t[16]=e("strong",null,"Mascota:",-1)),e("p",null,o(s.service.mascota),1)]),e("div",Y,[t[17]||(t[17]=e("strong",null,"Total:",-1)),e("p",null,o(p(g).format(s.service.total)),1)]),e("div",Z,[t[18]||(t[18]=e("strong",null,"Total Real:",-1)),e("p",null,o(p(g).format(s.service.total_real)),1)]),s.service.user?(l(),d("div",_,[t[19]||(t[19]=e("strong",null,"Usuario:",-1)),e("p",null,o((n=s.service.user)==null?void 0:n.name),1)])):a("",!0),s.service.user?(l(),d("div",ee,[t[20]||(t[20]=e("strong",null,"Fecha de reserva:",-1)),e("p",null,o(new Date(s.service.created_at).toLocaleDateString("es-CO")),1)])):a("",!0),s.service.fecha_cancelacion?(l(),d("div",te,[t[21]||(t[21]=e("strong",null,"Fecha de Cancelaci贸n:",-1)),e("p",null,o(s.service.fecha_cancelacion),1)])):a("",!0),e("div",se,[t[22]||(t[22]=e("strong",null,"Observacion:",-1)),e("p",null,o(s.service.observations),1)]),i.$page.props.auth.user.rol=="admin"?(l(),d("div",ie,[t[23]||(t[23]=e("p",{class:"font-bold"},"Proveedores",-1)),e("p",oe,o(s.service.proveedors.length),1)])):a("",!0),i.$page.props.auth.user.rol=="admin"?(l(!0),d(A,{key:5},L(s.service.proveedors,h=>(l(),d("div",ne,[e("p",null,o(h.proveedor.nombre),1),e("p",null,o(p(g).format(h.cost)),1)]))),256)):a("",!0)])]}),_:1},8,["visible"])}}};export{fe as _};

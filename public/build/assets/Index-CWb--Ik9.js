import{s as pe}from"./index-DaANNUiK.js";import{_ as ge}from"./Datatable-CmH2Rb7a.js";import{l as Z,y as I,d as U,fr as ue,p as we,F as W,K as Ce,L as be,A as J,u as Ee,f as B,o as O,a as w,b as T,j as ie,n as se,t as H,w as Y,g as K,h as C,I as le}from"./app-Bkmq6IjL.js";import{s as ye}from"./index-BJhrkhJI.js";import{_ as Re}from"./Modal-GHdh7yTF.js";import{_ as D}from"./Input-DkWzKbaZ.js";import"./index-CcP_lYt9.js";import"./index-BLqmo2gT.js";import"./index-CfbMPObl.js";import"./index-s9JRI-aI.js";import"./index-DXGaN_yB.js";import"./index-BpetVVTO.js";import"./index-BDEkOoTf.js";import"./index-CgfV6IMP.js";import"./index-DXym8dc4.js";import"./index-nj7zxik0.js";import"./index-DUCg-gIe.js";import"./index-C7bdtJCW.js";import"./index-CB7E2Eg0.js";import"./postcss-C08joEDO.js";import"./postcss-DXcLJQ9m.js";import"./index-R9UnX9_e.js";import"./index-4OYothAa.js";import"./useCommonUtilities-BgDhORlD.js";import"./index-ClvRstXy.js";import"./index-CKTb4ZjY.js";import"./index-W7nZhAj4.js";import"./index-Nfd3bcJj.js";import"./index-Dhtgddix.js";import"./index-RsaUD5Xe.js";/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * © 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var z=function(){return z=Object.assign||function(h){for(var c,u=1,f=arguments.length;u<f;u++){c=arguments[u];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(h[g]=c[g])}return h},z.apply(this,arguments)};var V;(function(i){var h=(function(){function n(r,t,a,e){if(this.version=r,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],r<n.MIN_VERSION||r>n.MAX_VERSION)throw new RangeError("Version value out of range");if(e<-1||e>7)throw new RangeError("Mask value out of range");this.size=r*4+17;for(var s=[],l=0;l<this.size;l++)s.push(!1);for(var l=0;l<this.size;l++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();var v=this.addEccAndInterleave(a);if(this.drawCodewords(v),e==-1)for(var p=1e9,l=0;l<8;l++){this.applyMask(l),this.drawFormatBits(l);var S=this.getPenaltyScore();S<p&&(e=l,p=S),this.applyMask(l)}f(0<=e&&e<=7),this.mask=e,this.applyMask(e),this.drawFormatBits(e),this.isFunction=[]}return n.encodeText=function(r,t){var a=i.QrSegment.makeSegments(r);return n.encodeSegments(a,t)},n.encodeBinary=function(r,t){var a=i.QrSegment.makeBytes(r);return n.encodeSegments([a],t)},n.encodeSegments=function(r,t,a,e,s,l){if(a===void 0&&(a=1),e===void 0&&(e=40),s===void 0&&(s=-1),l===void 0&&(l=!0),!(n.MIN_VERSION<=a&&a<=e&&e<=n.MAX_VERSION)||s<-1||s>7)throw new RangeError("Invalid value");var v,p;for(v=a;;v++){var S=n.getNumDataCodewords(v,t)*8,R=g.getTotalBits(r,v);if(R<=S){p=R;break}if(v>=e)throw new RangeError("Data too long")}for(var y=0,N=[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH];y<N.length;y++){var E=N[y];l&&p<=n.getNumDataCodewords(v,E)*8&&(t=E)}for(var b=[],M=0,P=r;M<P.length;M++){var _=P[M];c(_.mode.modeBits,4,b),c(_.numChars,_.mode.numCharCountBits(v),b);for(var L=0,o=_.getData();L<o.length;L++){var d=o[L];b.push(d)}}f(b.length==p);var A=n.getNumDataCodewords(v,t)*8;f(b.length<=A),c(0,Math.min(4,A-b.length),b),c(0,(8-b.length%8)%8,b),f(b.length%8==0);for(var m=236;b.length<A;m^=253)c(m,8,b);for(var k=[];k.length*8<b.length;)k.push(0);return b.forEach(function(G,x){return k[x>>>3]|=G<<7-(x&7)}),new n(v,t,k,s)},n.prototype.getModule=function(r,t){return 0<=r&&r<this.size&&0<=t&&t<this.size&&this.modules[t][r]},n.prototype.getModules=function(){return this.modules},n.prototype.drawFunctionPatterns=function(){for(var r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2==0),this.setFunctionModule(r,6,r%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),a=t.length,r=0;r<a;r++)for(var e=0;e<a;e++)r==0&&e==0||r==0&&e==a-1||r==a-1&&e==0||this.drawAlignmentPattern(t[r],t[e]);this.drawFormatBits(0),this.drawVersion()},n.prototype.drawFormatBits=function(r){for(var t=this.errorCorrectionLevel.formatBits<<3|r,a=t,e=0;e<10;e++)a=a<<1^(a>>>9)*1335;var s=(t<<10|a)^21522;f(s>>>15==0);for(var e=0;e<=5;e++)this.setFunctionModule(8,e,u(s,e));this.setFunctionModule(8,7,u(s,6)),this.setFunctionModule(8,8,u(s,7)),this.setFunctionModule(7,8,u(s,8));for(var e=9;e<15;e++)this.setFunctionModule(14-e,8,u(s,e));for(var e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,u(s,e));for(var e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,u(s,e));this.setFunctionModule(8,this.size-8,!0)},n.prototype.drawVersion=function(){if(!(this.version<7)){for(var r=this.version,t=0;t<12;t++)r=r<<1^(r>>>11)*7973;var a=this.version<<12|r;f(a>>>18==0);for(var t=0;t<18;t++){var e=u(a,t),s=this.size-11+t%3,l=Math.floor(t/3);this.setFunctionModule(s,l,e),this.setFunctionModule(l,s,e)}}},n.prototype.drawFinderPattern=function(r,t){for(var a=-4;a<=4;a++)for(var e=-4;e<=4;e++){var s=Math.max(Math.abs(e),Math.abs(a)),l=r+e,v=t+a;0<=l&&l<this.size&&0<=v&&v<this.size&&this.setFunctionModule(l,v,s!=2&&s!=4)}},n.prototype.drawAlignmentPattern=function(r,t){for(var a=-2;a<=2;a++)for(var e=-2;e<=2;e++)this.setFunctionModule(r+e,t+a,Math.max(Math.abs(e),Math.abs(a))!=1)},n.prototype.setFunctionModule=function(r,t,a){this.modules[t][r]=a,this.isFunction[t][r]=!0},n.prototype.addEccAndInterleave=function(r){var t=this.version,a=this.errorCorrectionLevel;if(r.length!=n.getNumDataCodewords(t,a))throw new RangeError("Invalid argument");for(var e=n.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][t],s=n.ECC_CODEWORDS_PER_BLOCK[a.ordinal][t],l=Math.floor(n.getNumRawDataModules(t)/8),v=e-l%e,p=Math.floor(l/e),S=[],R=n.reedSolomonComputeDivisor(s),y=0,N=0;y<e;y++){var E=r.slice(N,N+p-s+(y<v?0:1));N+=E.length;var b=n.reedSolomonComputeRemainder(E,R);y<v&&E.push(0),S.push(E.concat(b))}for(var M=[],P=function(_){S.forEach(function(L,o){(_!=p-s||o>=v)&&M.push(L[_])})},y=0;y<S[0].length;y++)P(y);return f(M.length==l),M},n.prototype.drawCodewords=function(r){if(r.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var t=0,a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(var e=0;e<this.size;e++)for(var s=0;s<2;s++){var l=a-s,v=(a+1&2)==0,p=v?this.size-1-e:e;!this.isFunction[p][l]&&t<r.length*8&&(this.modules[p][l]=u(r[t>>>3],7-(t&7)),t++)}}f(t==r.length*8)},n.prototype.applyMask=function(r){if(r<0||r>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var a=0;a<this.size;a++){var e=void 0;switch(r){case 0:e=(a+t)%2==0;break;case 1:e=t%2==0;break;case 2:e=a%3==0;break;case 3:e=(a+t)%3==0;break;case 4:e=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:e=a*t%2+a*t%3==0;break;case 6:e=(a*t%2+a*t%3)%2==0;break;case 7:e=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&e&&(this.modules[t][a]=!this.modules[t][a])}},n.prototype.getPenaltyScore=function(){for(var r=0,t=0;t<this.size;t++){for(var a=!1,e=0,s=[0,0,0,0,0,0,0],l=0;l<this.size;l++)this.modules[t][l]==a?(e++,e==5?r+=n.PENALTY_N1:e>5&&r++):(this.finderPenaltyAddHistory(e,s),a||(r+=this.finderPenaltyCountPatterns(s)*n.PENALTY_N3),a=this.modules[t][l],e=1);r+=this.finderPenaltyTerminateAndCount(a,e,s)*n.PENALTY_N3}for(var l=0;l<this.size;l++){for(var a=!1,v=0,s=[0,0,0,0,0,0,0],t=0;t<this.size;t++)this.modules[t][l]==a?(v++,v==5?r+=n.PENALTY_N1:v>5&&r++):(this.finderPenaltyAddHistory(v,s),a||(r+=this.finderPenaltyCountPatterns(s)*n.PENALTY_N3),a=this.modules[t][l],v=1);r+=this.finderPenaltyTerminateAndCount(a,v,s)*n.PENALTY_N3}for(var t=0;t<this.size-1;t++)for(var l=0;l<this.size-1;l++){var p=this.modules[t][l];p==this.modules[t][l+1]&&p==this.modules[t+1][l]&&p==this.modules[t+1][l+1]&&(r+=n.PENALTY_N2)}for(var S=0,R=0,y=this.modules;R<y.length;R++){var N=y[R];S=N.reduce(function(M,P){return M+(P?1:0)},S)}var E=this.size*this.size,b=Math.ceil(Math.abs(S*20-E*10)/E)-1;return f(0<=b&&b<=9),r+=b*n.PENALTY_N4,f(0<=r&&r<=2568888),r},n.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var r=Math.floor(this.version/7)+2,t=Math.floor((this.version*8+r*3+5)/(r*4-4))*2,a=[6],e=this.size-7;a.length<r;e-=t)a.splice(1,0,e);return a},n.getNumRawDataModules=function(r){if(r<n.MIN_VERSION||r>n.MAX_VERSION)throw new RangeError("Version number out of range");var t=(16*r+128)*r+64;if(r>=2){var a=Math.floor(r/7)+2;t-=(25*a-10)*a-55,r>=7&&(t-=36)}return f(208<=t&&t<=29648),t},n.getNumDataCodewords=function(r,t){return Math.floor(n.getNumRawDataModules(r)/8)-n.ECC_CODEWORDS_PER_BLOCK[t.ordinal][r]*n.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][r]},n.reedSolomonComputeDivisor=function(r){if(r<1||r>255)throw new RangeError("Degree out of range");for(var t=[],a=0;a<r-1;a++)t.push(0);t.push(1);for(var e=1,a=0;a<r;a++){for(var s=0;s<t.length;s++)t[s]=n.reedSolomonMultiply(t[s],e),s+1<t.length&&(t[s]^=t[s+1]);e=n.reedSolomonMultiply(e,2)}return t},n.reedSolomonComputeRemainder=function(r,t){for(var a=t.map(function(p){return 0}),e=function(p){var S=p^a.shift();a.push(0),t.forEach(function(R,y){return a[y]^=n.reedSolomonMultiply(R,S)})},s=0,l=r;s<l.length;s++){var v=l[s];e(v)}return a},n.reedSolomonMultiply=function(r,t){if(r>>>8||t>>>8)throw new RangeError("Byte out of range");for(var a=0,e=7;e>=0;e--)a=a<<1^(a>>>7)*285,a^=(t>>>e&1)*r;return f(a>>>8==0),a},n.prototype.finderPenaltyCountPatterns=function(r){var t=r[1];f(t<=this.size*3);var a=t>0&&r[2]==t&&r[3]==t*3&&r[4]==t&&r[5]==t;return(a&&r[0]>=t*4&&r[6]>=t?1:0)+(a&&r[6]>=t*4&&r[0]>=t?1:0)},n.prototype.finderPenaltyTerminateAndCount=function(r,t,a){return r&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)},n.prototype.finderPenaltyAddHistory=function(r,t){t[0]==0&&(r+=this.size),t.pop(),t.unshift(r)},n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n})();i.QrCode=h;function c(n,r,t){if(r<0||r>31||n>>>r)throw new RangeError("Value out of range");for(var a=r-1;a>=0;a--)t.push(n>>>a&1)}function u(n,r){return(n>>>r&1)!=0}function f(n){if(!n)throw new Error("Assertion error")}var g=(function(){function n(r,t,a){if(this.mode=r,this.numChars=t,this.bitData=a,t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}return n.makeBytes=function(r){for(var t=[],a=0,e=r;a<e.length;a++){var s=e[a];c(s,8,t)}return new n(n.Mode.BYTE,r.length,t)},n.makeNumeric=function(r){if(!n.isNumeric(r))throw new RangeError("String contains non-numeric characters");for(var t=[],a=0;a<r.length;){var e=Math.min(r.length-a,3);c(parseInt(r.substring(a,a+e),10),e*3+1,t),a+=e}return new n(n.Mode.NUMERIC,r.length,t)},n.makeAlphanumeric=function(r){if(!n.isAlphanumeric(r))throw new RangeError("String contains unencodable characters in alphanumeric mode");var t=[],a;for(a=0;a+2<=r.length;a+=2){var e=n.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a))*45;e+=n.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a+1)),c(e,11,t)}return a<r.length&&c(n.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a)),6,t),new n(n.Mode.ALPHANUMERIC,r.length,t)},n.makeSegments=function(r){return r==""?[]:n.isNumeric(r)?[n.makeNumeric(r)]:n.isAlphanumeric(r)?[n.makeAlphanumeric(r)]:[n.makeBytes(n.toUtf8ByteArray(r))]},n.makeEci=function(r){var t=[];if(r<0)throw new RangeError("ECI assignment value out of range");if(r<128)c(r,8,t);else if(r<16384)c(2,2,t),c(r,14,t);else if(r<1e6)c(6,3,t),c(r,21,t);else throw new RangeError("ECI assignment value out of range");return new n(n.Mode.ECI,0,t)},n.isNumeric=function(r){return n.NUMERIC_REGEX.test(r)},n.isAlphanumeric=function(r){return n.ALPHANUMERIC_REGEX.test(r)},n.prototype.getData=function(){return this.bitData.slice()},n.getTotalBits=function(r,t){for(var a=0,e=0,s=r;e<s.length;e++){var l=s[e],v=l.mode.numCharCountBits(t);if(l.numChars>=1<<v)return 1/0;a+=4+v+l.bitData.length}return a},n.toUtf8ByteArray=function(r){r=encodeURI(r);for(var t=[],a=0;a<r.length;a++)r.charAt(a)!="%"?t.push(r.charCodeAt(a)):(t.push(parseInt(r.substring(a+1,a+3),16)),a+=2);return t},n.NUMERIC_REGEX=/^[0-9]*$/,n.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,n.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n})();i.QrSegment=g})(V||(V={}));(function(i){(function(h){var c=(function(){function u(f,g){this.ordinal=f,this.formatBits=g}return u.LOW=new u(0,1),u.MEDIUM=new u(1,0),u.QUARTILE=new u(2,3),u.HIGH=new u(3,2),u})();h.Ecc=c})(i.QrCode||(i.QrCode={}))})(V||(V={}));(function(i){(function(h){var c=(function(){function u(f,g){this.modeBits=f,this.numBitsCharCount=g}return u.prototype.numCharCountBits=function(f){return this.numBitsCharCount[Math.floor((f+7)/17)]},u.NUMERIC=new u(1,[10,12,14]),u.ALPHANUMERIC=new u(2,[9,11,13]),u.BYTE=new u(4,[8,16,16]),u.KANJI=new u(8,[8,10,12]),u.ECI=new u(7,[0,0,0]),u})();h.Mode=c})(i.QrSegment||(i.QrSegment={}))})(V||(V={}));var Q=V,ee="L",re={L:Q.QrCode.Ecc.LOW,M:Q.QrCode.Ecc.MEDIUM,Q:Q.QrCode.Ecc.QUARTILE,H:Q.QrCode.Ecc.HIGH},Me=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function te(i){return i in re}function de(i,h){h===void 0&&(h=0);var c=[];return i.forEach(function(u,f){var g=null;u.forEach(function(n,r){if(!n&&g!==null){c.push("M".concat(g+h," ").concat(f+h,"h").concat(r-g,"v1H").concat(g+h,"z")),g=null;return}if(r===u.length-1){if(!n)return;g===null?c.push("M".concat(r+h,",").concat(f+h," h1v1H").concat(r+h,"z")):c.push("M".concat(g+h,",").concat(f+h," h").concat(r+1-g,"v1H").concat(g+h,"z"));return}n&&g===null&&(g=r)})}),c.join("")}function ce(i,h,c,u){var f=u.width,g=u.height,n=u.x,r=u.y,t=i.length+c*2,a=Math.floor(h*.1),e=t/h,s=(f||a)*e,l=(g||a)*e,v=n==null?i.length/2-s/2:n*e,p=r==null?i.length/2-l/2:r*e,S=null;if(u.excavate){var R=Math.floor(v),y=Math.floor(p),N=Math.ceil(s+v-R),E=Math.ceil(l+p-y);S={x:R,y,w:N,h:E}}return{x:v,y:p,h:l,w:s,excavation:S}}function fe(i,h){return i.slice().map(function(c,u){return u<h.y||u>=h.y+h.h?c:c.map(function(f,g){return g<h.x||g>=h.x+h.w?f:!1})})}var ae={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:ee,validator:function(i){return te(i)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(i){return["linear","radial"].indexOf(i)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},Se=z(z({},ae),{renderAs:{type:String,required:!1,default:"canvas",validator:function(i){return["canvas","svg"].indexOf(i)>-1}}}),Ae=Z({name:"QRCodeSvg",props:ae,setup:function(i){var h=U(0),c=U(""),u,f=function(){var n=i.value,r=i.level,t=i.margin,a=t>>>0,e=te(r)?r:ee,s=Q.QrCode.encodeText(n,re[e]).getModules();if(h.value=s.length+a*2,i.imageSettings.src){var l=ce(s,i.size,a,i.imageSettings);u={x:l.x+a,y:l.y+a,width:l.w,height:l.h},l.excavation&&(s=fe(s,l.excavation))}c.value=de(s,a)},g=function(){if(!i.gradient)return null;var n=i.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return I(i.gradientType==="linear"?"linearGradient":"radialGradient",z({id:"qr-gradient"},n),[I("stop",{offset:"0%",style:{stopColor:i.gradientStartColor}}),I("stop",{offset:"100%",style:{stopColor:i.gradientEndColor}})])};return f(),ue(f),function(){return I("svg",{width:i.size,height:i.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h.value," ").concat(h.value)},[I("defs",{},[g()]),I("rect",{width:"100%",height:"100%",fill:i.background}),I("path",{fill:i.gradient?"url(#qr-gradient)":i.foreground,d:c.value}),i.imageSettings.src&&I("image",z({href:i.imageSettings.src},u))])}}}),Ne=Z({name:"QRCodeCanvas",props:ae,setup:function(i,h){var c=U(null),u=U(null),f=function(){var n=i.value,r=i.level,t=i.size,a=i.margin,e=i.background,s=i.foreground,l=i.gradient,v=i.gradientType,p=i.gradientStartColor,S=i.gradientEndColor,R=a>>>0,y=te(r)?r:ee,N=c.value;if(N){var E=N.getContext("2d");if(E){var b=Q.QrCode.encodeText(n,re[y]).getModules(),M=b.length+R*2,P=u.value,_={x:0,y:0,width:0,height:0},L=i.imageSettings.src&&P!=null&&P.naturalWidth!==0&&P.naturalHeight!==0;if(L){var o=ce(b,i.size,R,i.imageSettings);_={x:o.x+R,y:o.y+R,width:o.w,height:o.h},o.excavation&&(b=fe(b,o.excavation))}var d=window.devicePixelRatio||1,A=t/M*d;if(N.height=N.width=t*d,E.scale(A,A),E.fillStyle=e,E.fillRect(0,0,M,M),l){var m=void 0;v==="linear"?m=E.createLinearGradient(0,0,M,M):m=E.createRadialGradient(M/2,M/2,0,M/2,M/2,M/2),m.addColorStop(0,p),m.addColorStop(1,S),E.fillStyle=m}else E.fillStyle=s;Me?E.fill(new Path2D(de(b,R))):b.forEach(function(k,G){k.forEach(function(x,j){x&&E.fillRect(j+R,G+R,1,1)})}),L&&E.drawImage(P,_.x,_.y,_.width,_.height)}}};we(f),ue(f);var g=h.attrs.style;return function(){return I(W,[I("canvas",z(z({},h.attrs),{ref:c,style:z(z({},g),{width:"".concat(i.size,"px"),height:"".concat(i.size,"px")})})),i.imageSettings.src&&I("img",{ref:u,src:i.imageSettings.src,style:{display:"none"},onLoad:f})])}}}),_e=Z({name:"Qrcode",render:function(){var i=this.$props,h=i.renderAs,c=i.value,u=i.size,f=i.margin,g=i.level,n=i.background,r=i.foreground,t=i.imageSettings,a=i.gradient,e=i.gradientType,s=i.gradientStartColor,l=i.gradientEndColor;return I(h==="svg"?Ae:Ne,{value:c,size:u,margin:f,level:g,background:n,foreground:r,imageSettings:t,gradient:a,gradientType:e,gradientStartColor:s,gradientEndColor:l})},props:Se});const Pe={class:"h-[99vh]"},ke={class:"flex justify-center w-full gap-x-3 py-2"},Te=["onClick"],Ie={class:"flex gap-x-3 py-2"},Le={class:"grid grid-cols-2 w-full shadow-2xl border rounded-md gap-2 p-4"},Ue={key:0,class:"w-full flex flex-col justify-center items-center col-span-2 my-4"},ze=["href"],Be={key:1,class:"flex flex-col"},Oe={class:"rounded-md border border-gray-100 bg-white p-4 shadow-md"},xe={for:"upload",class:"flex flex-col items-center gap-2 cursor-pointer"},De={class:"text-gray-600 font-medium text-sm truncate w-full"},Ve={key:2,class:"flex flex-col"},Qe={class:"rounded-md border border-gray-100 bg-white p-4 shadow-md"},Fe={for:"uploadRut",class:"flex flex-col items-center gap-2 cursor-pointer"},He={class:"text-gray-600 font-medium text-sm truncate w-full text-center"},Ge={key:3,class:"flex flex-col"},$e={class:"rounded-md border border-gray-100 bg-white p-4 shadow-md"},qe={for:"uploadCuenta",class:"flex flex-col items-center gap-2 cursor-pointer"},Ye={class:"text-gray-600 font-medium text-sm truncate w-full text-center"},Ke={class:"w-full shadow-2xl border rounded-md gap-2 p-4"},We={class:"grid grid-cols-3 gap-2"},je=["onClick"],Nr={__name:"Index",props:{users:Array,permisos:Array},setup(i){const h=[{label:"Usuarios AV Colombia",value:"av",color:"green"},{label:"Vendedores",value:"vendedor",color:"blue"},{label:"Proveedores",value:"proveedor",color:"yellow"},{label:"Hoteles",value:"Hotel",color:"orange"},{label:"Agencias",value:"agencia",color:"gray"}],c=U("vendedor"),u=U([{header:"Nombre",field:"name",filter:!0},{header:"Tipo de Usuario",field:"rol",filter:!0},{header:"Correo",field:"email",filter:!0},{header:"Telefono",field:"phone",filter:!0},{header:"Cuenta Bancaria",field:"cuenta",filter:!0,type:"html-custom",renderer:o=>o.cuenta=="/laravel/public/"?"No tiene Certificado":`<a href="${o.cuenta}" class="text-sky-600 underline" target="_blank">Ver</a>`},{header:"RUT",field:"rut",filter:!0,type:"html-custom",renderer:o=>o.rut=="/laravel/public/"?"No tiene RUT":`<a href="${o.rut}" class="text-sky-600 underline" target="_blank">Ver</a>`},{header:"camara de comercio",field:"camara_comercio",filter:!0,type:"html-custom",renderer:o=>o.camara_comercio=="/laravel/public/"?"No tiene camara comercio":`<a href="${o.camara_comercio}" class="text-sky-600 underline" target="_blank">Ver</a>`},{header:"URL Portafolio",field:"url"}]),f=Ce(),g=be(),n=U(!1),r=U(),t=U(),a=J(()=>p.permisos.filter(o=>!r.value||o.name.includes(r.value))),e=Ee({id:null,name:"",phone:"",email:"",password:"",url:"",rol:"",password_confirmation:"",permissions:[],camara:null,rut:null,cuenta:null}),s=U(!1),l={action:()=>{e.reset(),n.value=!1,s.value=!0}},v=[{action:o=>{e.reset(),s.value=!0,n.value=!0,e.name=o.name,e.email=o.email,e.rol=o.rol,e.id=o.id,e.url=o.url,e.permissions=o.permissions.map(d=>d.name),e.phone=o.phone},severity:"secondary",icon:"fa-solid fa-pencil text-sm"},{action:(o,d)=>{g.require({target:d.currentTarget,message:"Seguro de Eliminar el Usuario "+o.name+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{le.delete(route("users.destroy",o.id),{onSuccess:()=>{f.add({severity:"error",icon:"fa-solid fa-trash-can",summary:"¡Accion realizada!",detail:"Usuario eliminado con exito",group:"customTooltipDataTable",life:5e3})}})}})},severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],p=i,S=()=>{let o=new FormData;o.append("name",e.name),o.append("email",e.email),o.append("password",e.password),o.append("password_confirmation",e.password_confirmation),o.append("phone",e.phone),o.append("rol",e.rol),o.append("permissions",e.permissions),o.append("camara",e.camara),o.append("rut",e.rut),o.append("cuenta",e.cuenta),n.value?le.post(route("users.update",e.id),o,{onSuccess:()=>{s.value=!1}}):e.post(route("users.store"),{onSuccess:()=>{s.value=!1}})},R=[{label:"Super Administrador",value:"superadmin"},{label:"Administrador",value:"admin"},{label:"Cordinador",value:"cordinador"},{label:"Vendedor",value:"vendedor"},{label:"Proveedor",value:"proveedor"},{label:"Hotel",value:"Hotel"},{label:"Agencia",value:"agencia"}];function y(){e.rol=="superadmin"?e.permissions=p.permisos.map(o=>o.name):e.rol=="admin"?e.permissions=p.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")))).map(o=>o.name):e.rol=="cordinador"?e.permissions=p.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name):e.rol=="vendedor"?e.permissions=p.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name):e.rol=="proveedor"?e.permissions=p.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name):e.rol=="hotel"?e.permissions=p.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name):e.rol=="agencia"&&(e.permissions=p.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name))}function N(o){e.permissions.includes(o)?e.permissions=e.permissions.filter(d=>d!=o):e.permissions.push(o)}const E=J(()=>c.value=="av"?p.users.filter(o=>o.rol=="superadmin"||o.rol=="admin"||o.rol=="cordinador"):p.users.filter(o=>o.rol==c.value)),b=J(()=>c.value=="av"?u.value.filter(o=>o.field!="camara_comercio"&&o.field!="rut"&&o.field!="cuenta"&&o.field!="url"):u.value),M=o=>{e.camara=o.target.files[0]},P=o=>{e.rut=o.target.files[0]},_=o=>{e.cuenta=o.target.files[0]},L=()=>{if(!e.url){f.add({severity:"warn",icon:"fa-solid fa-exclamation-triangle",summary:"Advertencia",detail:"No hay código QR para descargar",group:"customTooltipDataTable",life:3e3});return}try{const o=document.getElementById("qrCode");if(!o)throw new Error("No se encontró el elemento QR");const d=document.createElement("canvas"),A=d.getContext("2d"),m=o.getBoundingClientRect(),k=2;d.width=m.width*k,d.height=m.height*k,A.scale(k,k),(()=>{const x=o.querySelector("svg");if(!x)throw new Error("No se encontró el SVG dentro del elemento");const j=new XMLSerializer().serializeToString(x),me=new Blob([j],{type:"image/svg+xml;charset=utf-8"}),X=URL.createObjectURL(me),$=new Image;$.onload=()=>{A.fillStyle="white",A.fillRect(0,0,m.width,m.height);const q=200,he=(m.width-q)/2,oe=10;A.drawImage($,he,oe,q,q),A.fillStyle="#6b7280",A.font="12px monospace",A.textAlign="center",A.fillText("Scanear QR",m.width/2,oe+q+20),d.toBlob(ve=>{const ne=URL.createObjectURL(ve),F=document.createElement("a");F.href=ne,F.download=`qr-portafolio-${e.name||"usuario"}.png`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(ne),URL.revokeObjectURL(X),f.add({severity:"success",icon:"fa-solid fa-download",summary:"Descarga exitosa",detail:"Código QR descargado correctamente",group:"customTooltipDataTable",life:3e3})},"image/png")},$.onerror=()=>{throw URL.revokeObjectURL(X),new Error("Error al cargar la imagen SVG")},$.src=X})()}catch(o){console.error("Error al descargar QR:",o),f.add({severity:"error",icon:"fa-solid fa-exclamation-circle",summary:"Error",detail:"Error al descargar el código QR: "+o.message,group:"customTooltipDataTable",life:3e3})}};return(o,d)=>{const A=pe;return O(),B(W,null,[w("div",Pe,[w("div",ke,[(O(),B(W,null,ie(h,m=>w("span",{class:se(["bg-black p-1 rounded-md cursor-pointer text-center uppercase hover:text-black font-bold",[`bg-${m.color}-200 p-2 rounded-lg`,c.value==m.value?"border-2 border-gray-500 scale-105":"border-2 border-transparent scale-95"]]),onClick:k=>c.value=m.value},H(m.label),11,Te)),64))]),T(ge,{columnas:b.value,add:l,data:E.value,routecreate:"services.create",actions:v},null,8,["columnas","data"])]),T(Re,{visible:s.value,"onUpdate:visible":d[8]||(d[8]=m=>s.value=m),width:"90vw","close-on-escape":""},{title:Y(()=>[...d[9]||(d[9]=[w("span",{class:"text-xl font-bold white-space-nowrap"}," Agregar Usuario",-1)])]),icon:Y(()=>[...d[10]||(d[10]=[w("i",{class:"fa-solid fa-plus"},null,-1)])]),footer:Y(()=>[T(A,{onClick:S,title:"Guardar",severity:"success",label:"Guardar",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),T(A,{onClick:d[7]||(d[7]=m=>s.value=!1),title:"Cancel",severity:"danger",label:"Cancelar",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:Y(()=>[w("div",Ie,[w("div",Le,[T(D,{label:"Tipo de Usuario",modelValue:C(e).rol,"onUpdate:modelValue":d[0]||(d[0]=m=>C(e).rol=m),onValueChange:y,type:"dropdown","option-value":"value","option-label":"label",options:R},null,8,["modelValue"]),T(D,{label:"Nombre",modelValue:C(e).name,"onUpdate:modelValue":d[1]||(d[1]=m=>C(e).name=m),"error-message":C(e).errors.name},null,8,["modelValue","error-message"]),T(D,{label:"Email",modelValue:C(e).email,"onUpdate:modelValue":d[2]||(d[2]=m=>C(e).email=m)},null,8,["modelValue"]),T(D,{label:"Contraseña",type:"password",modelValue:C(e).password,"onUpdate:modelValue":d[3]||(d[3]=m=>C(e).password=m)},null,8,["modelValue"]),T(D,{label:"Confirmar contraseña",type:"password",modelValue:C(e).password_confirmation,"onUpdate:modelValue":d[4]||(d[4]=m=>C(e).password_confirmation=m)},null,8,["modelValue"]),T(D,{label:"Telefono",modelValue:C(e).phone,"onUpdate:modelValue":d[5]||(d[5]=m=>C(e).phone=m)},null,8,["modelValue"]),C(e).rol=="superadmin"||C(e).rol=="admin"||C(e).rol=="cordinador"?K("",!0):(O(),B("div",Ue,[w("div",{class:"text-lg font-bold font-mono flex justify-between items-center gap-x-16"},[d[11]||(d[11]=w("p",null," Ver Portafolio ",-1)),w("i",{onClick:L,class:"fa-solid fa-download cursor-pointer text-gray-800 text-xs"})]),w("a",{target:"_blank",id:"qrCode",href:C(e).url,class:"rounded-md border flex flex-col gap-y-2 p-1 items-center shadow-lg shadow-[rgba(6,74,89,0.5)] hover:scale-105 transition-all duration-300 ease-in-out"},[T(_e,{ref_key:"qrCodeRef",ref:t,value:C(e).url,size:200,level:"L","render-as":"svg",foreground:"#064a59",class:"rounded-md","image-settings":{src:"/images/logo.webp",width:30,height:30,excavate:!0}},null,8,["value"]),d[12]||(d[12]=w("span",{class:"text-xs italic text-gray-600 text-center font-mono"},"Scanear QR ",-1))],8,ze)])),C(e).rol=="vendedor"?(O(),B("div",Be,[w("div",Oe,[w("label",xe,[d[13]||(d[13]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 fill-white stroke-indigo-500",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),w("span",De,H(C(e).camara?C(e).camara.name:"Seleccionar Camara de Comercio"),1)]),w("input",{id:"upload",accept:".pdf",onChange:M,type:"file",class:"hidden"},null,32)])])):K("",!0),C(e).rol=="vendedor"?(O(),B("div",Ve,[w("div",Qe,[w("label",Fe,[d[14]||(d[14]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 fill-white stroke-indigo-500",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),w("span",He,H(C(e).rut?C(e).rut.name:"Seleccionar Rut"),1)]),w("input",{id:"uploadRut",accept:".pdf",onChange:P,type:"file",class:"hidden"},null,32)])])):K("",!0),C(e).rol=="vendedor"?(O(),B("div",Ge,[w("div",$e,[w("label",qe,[d[15]||(d[15]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 fill-white stroke-indigo-500",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),w("span",Ye,H(C(e).cuenta?C(e).cuenta.name:"Seleccionar Certificado de Cuenta Bancari"),1)]),w("input",{id:"uploadCuenta",accept:".pdf",onChange:_,type:"file",class:"hidden"},null,32)])])):K("",!0)]),w("div",Ke,[d[16]||(d[16]=w("h3",{class:"text-center font-semibold text-lg"},"Permisos",-1)),T(D,{class:"my-1",modelValue:r.value,"onUpdate:modelValue":d[6]||(d[6]=m=>r.value=m)},null,8,["modelValue"]),w("div",We,[(O(!0),B(W,null,ie(a.value,m=>(O(),B("span",{onClick:k=>N(m.name),class:se([{"bg-black text-white":C(e).permissions.includes(m.name),"bg-gray-100":!C(e).permissions.includes(m.name)},"p-1 rounded-md cursor-pointer border border-black text-center uppercase hover:bg-black hover:text-white"])},H(m.name),11,je))),256))])])])]),_:1},8,["visible"]),T(C(ye))],64)}}};export{Nr as default};

import{d as c,C as w,fe as A,W as f,B as g,e as L,f as b,b as l,w as n,u as i,F as S,o as x,a as t,h as B,t as d,i as O,k as z,T as E}from"./app-DCT7PjCj.js";import{s as I}from"./index-CxAEgKvG.js";import{_ as Q,u as R}from"./AppLayout-D_ojVNTa.js";import{_ as M}from"./Datatable-9eNw6w5P.js";import{s as W}from"./index-wJGsse49.js";import{a as T,_ as C}from"./Modal-IOgrtXky.js";import{a as G}from"./toasts-CuGasqAw.js";import"./index-Bn5bls4_.js";import"./index-CFoTDMpq.js";import"./index-DPzheSCw.js";import"./index-sqOJjto3.js";import"./index-BiEnpwDe.js";import"./index-PL5PSCSG.js";import"./index-D-UPpaQu.js";import"./index-JFFMLF90.js";import"./index-DFlAad_0.js";import"./index-DVoAJOa_.js";import"./index-BG5XA4v5.js";import"./index-95mkTvk_.js";import"./index-BAvHYI2h.js";import"./index-BXYIbdhP.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./filepond-plugin-image-preview.min-BG10xqQy.js";import"./postcss-Db72g3c_.js";import"./index-C3Fk7qMc.js";import"./index-CrfNypDn.js";import"./index-DLwP7GYl.js";const H={class:"h-[90vh] md:h-[99vh] overflow-y-auto"},J={class:"text-2xl font-bold my-4"},K={class:"flex justify-between w-full my-4 text-lg px-8"},X={class:"text-gray-500 text-center"},Y={class:"italic text-xs mt-1 mb-4"},Z={class:"italic text-xs mt-1"},ee={class:"text-2xl text-center text-amber-600 font-bold my-4"},te={key:0,class:"text-center text-gray-500"},se={key:1,class:"flex flex-col gap-y-2"},ae={class:"flex justify-between border-b"},ie={class:"flex justify-between gap-x-2 my-2"},oe={class:"w-full"},le={class:"w-full"},re={class:"flex items-center gap-x-2"},ne={class:"text-xs text-red-500"},Le={__name:"Index",props:{services:Array},setup(h){const{hasPermissionTo:k}=R(),{toast:y}=G();c([]);const F={action:()=>{f.visit(route("services.create"))}},a=w({start_date:"",end_date:"",description:""}),m=c(!1),_=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),q=[{header:"Nombre",field:"title",filter:!0},{header:"Tarifa Neta",field:"adult_tarifa",type:"currency"},{header:"Tipo de Servicio",field:"type",filter:!0},{header:"Ciudad",field:"city",filter:!0},{header:"Descripción",field:"description",type:"html",filter:!0}],D=A();c(!1);const u=w({service_id:"",adult_tarifa:0,boys_tarifa:0}),r=c({}),p=c(!1);c("");const P=[{action:o=>{f.visit(route("services.show",o.slug))},severity:"primary",icon:"fa-solid fa-eye text-sm",label:"Ver"},{action:o=>{m.value=!0,a.reset(),r.value=o},show:g().props.auth.user.rol=="admin",severity:"warn",icon:"fa-solid fa-lock",label:"Bloqueos"},{action:o=>{g().props.auth.user.rol=="admin"||g().props.auth.user.rol=="superadmin"?f.visit(route("services.edit",o.slug)):(p.value=!0,r.value=o,u.service_id=o.id,u.adult_tarifa=o.adult_tarifa,u.boys_tarifa=o.boy_tarifa)},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:(o,e)=>{D.require({target:e.currentTarget,message:"Seguro de Eliminar el Servicio "+o.title+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{console.log(o),f.delete(route("services.destroy",o.id),{onSuccess:()=>{y("success","Servicio eliminado con exito")}})}})},show:k("eliminar experiencas"),severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],N=()=>{u.post(route("custom.product"),{onSuccess:()=>{y("success","Tarifa creada con exito"),p.value=!1}})},$=()=>{if(a.description==""){a.errors.description="Ingrese una descripción";return}if(a.start_date==""||a.end_date==""){a.errors.start_date="Seleccione un rango de fechas";return}f.post(route("services.lock",r.value.slug),{start_date:a.start_date,description:a.description,end_date:a.end_date},{onSuccess:()=>{y("success","Servicio Bloqueado con exito"),m.value=!1,a.reset()}})},U=o=>{f.post(route("services.unlock",o),{},{onSuccess:()=>{y("success","Bloque Quitado Exitosamente")}})};return(o,e)=>{const v=I,V=L("VueDatePicker"),j=E;return x(),b(S,null,[l(Q,{title:"Services"},{default:n(()=>[t("div",H,[l(M,{add:i(k)("crear experiencas")?F:null,columnas:q,data:h.services,routecreate:"services.create",actions:P,title:"Servicios"},null,8,["add","data"])])]),_:1}),l(T,{visible:p.value,"onUpdate:visible":e[3]||(e[3]=s=>p.value=s)},{title:n(()=>e[9]||(e[9]=[t("span",{class:"text-xl font-bold white-space-nowrap"}," Modificar Servicio",-1)])),icon:n(()=>e[10]||(e[10]=[t("i",{class:"fa-solid fa-plus"},null,-1)])),footer:n(()=>[l(v,{onClick:N,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(v,{onClick:e[2]||(e[2]=s=>p.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:n(()=>[t("h3",J,[e[11]||(e[11]=B(" Agregar Tarifa a ")),t("strong",null,d(r.value.title),1)]),t("div",K,[t("div",null,[e[12]||(e[12]=t("label",{for:"",class:"font-bold"},"Tarifa Neta a Pagar AV",-1)),t("div",X,d(i(_).format(r.value.adults_price)),1)]),e[13]||(e[13]=t("div",null,[t("label",{for:"",class:"font-bold"},"Tarifa Maxima a Cobrar"),t("div",{class:"text-gray-500 text-center"},"-")],-1))]),l(C,{label:"Tarifa para Adultos",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:i(u).adult_tarifa,"onUpdate:modelValue":e[0]||(e[0]=s=>i(u).adult_tarifa=s)},null,8,["modelValue"]),t("div",Y," La tariafa Base es de "+d(i(_).format(r.value.adults_price)),1),l(C,{label:"Tarifa para niños",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:i(u).boys_tarifa,"onUpdate:modelValue":e[1]||(e[1]=s=>i(u).boys_tarifa=s)},null,8,["modelValue"]),t("span",Z," La tariafa Base es de "+d(i(_).format(r.value.boys_price)),1)]),_:1},8,["visible"]),l(T,{visible:m.value,"onUpdate:visible":e[8]||(e[8]=s=>m.value=s)},{title:n(()=>e[14]||(e[14]=[t("span",{class:"text-xl font-bold white-space-nowrap"}," Bloqueos",-1)])),icon:n(()=>e[15]||(e[15]=[t("i",{class:"fa-solid fa-lock"},null,-1)])),footer:n(()=>[l(v,{onClick:$,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(v,{onClick:e[7]||(e[7]=s=>m.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:n(()=>[t("h3",ee,[e[16]||(e[16]=B(" Bloqueos del Servicio ")),t("strong",null,d(r.value.title),1)]),r.value.locks.length==0?(x(),b("div",te," No hay bloqueos ")):(x(),b("div",se,[e[17]||(e[17]=t("div",{class:"flex justify-between font-bold"},[t("p",null,"Razón"),t("p",null,"Fecha Inicio"),t("p",null,"Fecha Fin"),t("p",null,"Quitar")],-1)),(x(!0),b(S,null,O(r.value.locks,s=>(x(),b("div",ae,[t("p",null,d(s.description),1),t("p",null,d(s.start_date),1),t("p",null,d(s.end_date),1),t("p",null,[z(l(v,{icon:"fa-solid fa-xmark-circle",onClick:de=>U(s.id),text:"",severity:"danger"},null,8,["onClick"]),[[j,"Quitar Bloqueo"]])])]))),256))])),t("div",ie,[t("div",oe,[l(C,{label:"Razón del Bloqueo",modelValue:i(a).description,"onUpdate:modelValue":e[4]||(e[4]=s=>i(a).description=s),"error-message":i(a).errors.description},null,8,["modelValue","error-message"])]),t("div",le,[e[19]||(e[19]=t("label",{for:"",class:"font-bold"},"Seleccione el Rango de bloque o del servicio",-1)),t("div",re,[l(V,{modelValue:i(a).start_date,"onUpdate:modelValue":e[5]||(e[5]=s=>i(a).start_date=s),"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota"},null,8,["modelValue"]),e[18]||(e[18]=t("i",{class:"fa-solid fa-minus"},null,-1)),l(V,{modelValue:i(a).end_date,"onUpdate:modelValue":e[6]||(e[6]=s=>i(a).end_date=s),"min-date":i(a).start_date,"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota"},null,8,["modelValue","min-date"])]),t("span",ne,d(i(a).errors.start_date),1)])])]),_:1},8,["visible"]),l(i(W))],64)}}};export{Le as default};

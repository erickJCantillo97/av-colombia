const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/leaflet-src-D9EMR8rn.js","assets/app-R214L-RJ.js","assets/app-s1AMDqHb.css"])))=>i.map(i=>d[i]);
import{f as x,o as v,a as s,b as m,g as O,n as z,h,t as V,k as Ae,l as ee,d as j,m as te,p as X,_ as F,q as ue,s as q,v as _,x as Te,y as oe,z as Ze,A as de,B as he,C as Le,D as vt,E as Ie,G as gt,H as yt,F as M,j as Y,c as H,w as L,T as _e,i as Z,I as Ee,J as bt,K as we,e as Ne,L as Ve,r as $e,M as re,N as Fe,O as ht,u as xt}from"./app-R214L-RJ.js";import{_ as Ct}from"./AppLayout-C4vOrvW2.js";import{s as kt,a as wt,b as ye,c as $t,d as be}from"./index-9tn3HbA4.js";import{_ as B}from"./Input-Dkv0P_Xr.js";import{s as We}from"./index-CzozGodf.js";import{s as De,a as jt}from"./index--8Pa2qQv.js";import{s as St}from"./index-CItRh_r_.js";import{s as P}from"./index-DsbT2PPc.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as Re}from"./index-DOwY1KUc.js";import{s as At}from"./index-BCgCynxU.js";import{s as Lt}from"./index-DdXty1WP.js";import Ot from"./FileSelection-qMclbp3Z.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-SrtjyH7W.js";import"./index-2vctUbrf.js";import"./index-LKwKBZb9.js";import"./index-BtmjuX20.js";import"./index-C1LrUdpI.js";import"./index-CnYZaZL0.js";import"./index-Dhnzua7A.js";import"./index-BBDUCuEq.js";import"./index-h97sdG3t.js";import"./index-CmNz82AO.js";import"./index-BmQqljWl.js";import"./index-rZxR1Dfz.js";import"./index-De5LTwP2.js";import"./index-xNjEl96J.js";import"./index-CQ3yiUfD.js";import"./index-DhKjbAVd.js";import"./index-D-09kjL4.js";import"./useCommonUtilities-BgDhORlD.js";import"./postcss-f1G_7b4Q.js";import"./postcss-CbKQFKvK.js";import"./index-5BbuIgUg.js";import"./index-BSgXBdUW.js";const Vt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},It={class:"md:col-span-2"},Et={class:"md:col-span-2"},Tt={key:0,class:"text-red-500 text-xs"},Rt={key:0,class:"text-red-500 text-xs"},Pt={key:0,class:"text-red-500 text-xs"},Bt={class:"md:col-span-2"},Ut={key:0,class:"text-red-500 text-xs"},zt={class:"flex gap-x-4 mt-8 justify-between"},Nt={__name:"BasicInformation",props:{form:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:o}){const a=[{label:"Hotel",value:"hotel"},{label:"Apartamento",value:"apartamento"},{label:"Casa",value:"casa"},{label:"Hostal",value:"hostal"},{label:"Villa",value:"villa"}],t=[{label:"Borrador",value:"borrador"},{label:"Publicado",value:"publicado"},{label:"Inactivo",value:"inactivo"}];return(i,l)=>(v(),x("form",{onSubmit:l[7]||(l[7]=Ae(n=>i.$emit("submit"),["prevent"])),class:"space-y-6"},[s("div",Vt,[s("div",It,[m(B,{label:"Nombre del Alojamiento",modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=n=>e.form.name=n),"error-message":e.form.errors.name,required:""},null,8,["modelValue","error-message"])]),s("div",Et,[l[8]||(l[8]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descripción ",-1)),m(h(We),{modelValue:e.form.description,"onUpdate:modelValue":l[1]||(l[1]=n=>e.form.description=n),rows:"4",placeholder:"Describe tu alojamiento...",class:z(["w-full border border-gray-300 rounded-md p-2",{"border-red-500":e.form.errors.description}])},null,8,["modelValue","class"]),e.form.errors.description?(v(),x("span",Tt,V(e.form.errors.description),1)):O("",!0)]),s("div",null,[l[9]||(l[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tipo de Alojamiento ",-1)),m(h(De),{modelValue:e.form.type,"onUpdate:modelValue":l[2]||(l[2]=n=>e.form.type=n),options:a,"option-label":"label",class:z(["w-full",{"border-red-500":e.form.errors.type}]),"option-value":"value",placeholder:"Selecciona el tipo"},null,8,["modelValue","class"]),e.form.errors.type?(v(),x("span",Rt,V(e.form.errors.type),1)):O("",!0)]),s("div",null,[l[10]||(l[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Rating de Estrellas ",-1)),m(h(St),{modelValue:e.form.star_rating,"onUpdate:modelValue":l[3]||(l[3]=n=>e.form.star_rating=n),stars:5,cancel:!1,class:z({"border-red-500":e.form.errors.star_rating})},null,8,["modelValue","class"]),e.form.errors.star_rating?(v(),x("span",Pt,V(e.form.errors.star_rating),1)):O("",!0)]),s("div",Bt,[l[11]||(l[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Estado de Publicación ",-1)),m(h(De),{modelValue:e.form.status,"onUpdate:modelValue":l[4]||(l[4]=n=>e.form.status=n),options:t,"option-label":"label","option-value":"value",placeholder:"Selecciona el estado",class:z({"border-red-500":e.form.errors.status})},null,8,["modelValue","class"]),e.form.errors.status?(v(),x("span",Ut,V(e.form.errors.status),1)):O("",!0)])]),s("div",zt,[m(h(P),{onClick:l[5]||(l[5]=n=>i.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),m(h(P),{onClick:l[6]||(l[6]=n=>i.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])],32))}},qe=(e,o)=>{for(const a of Object.keys(o))e.on(a,o[a])},Je=e=>{for(const o of Object.keys(e)){const a=e[o];a&&Q(a.cancel)&&a.cancel()}},Ft=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),Q=e=>typeof e=="function",ae=(e,o,a)=>{for(const t in a){const i="set"+Ft(t);e[i]?he(()=>a[t],(l,n)=>{e[i](l,n)}):o[i]&&he(()=>a[t],l=>{o[i](l)})}},le=(e,o,a={})=>{const t={...a};for(const i in e){const l=o[i],n=e[i];l&&(l&&l.custom===!0||n!==void 0&&(t[i]=n))}return t},ce=e=>{const o={},a={};for(const t in e)if(t.startsWith("on")&&!t.startsWith("onUpdate")&&t!=="onReady"){const i=t.slice(2).toLocaleLowerCase();o[i]=e[t]}else a[t]=e[t];return{listeners:o,attrs:a}},Dt=async e=>{const o=await Promise.all([F(()=>import("./marker-icon-2x-1TirABJh.js"),[]),F(()=>import("./marker-icon-B6h-nX3D.js"),[]),F(()=>import("./marker-shadow-B9CpECYs.js"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},je=e=>{const o=j((...t)=>console.warn(`Method ${e} has been invoked without being replaced`)),a=(...t)=>o.value(...t);return a.wrapped=o,_(e,a),a},Se=(e,o)=>e.wrapped.value=o,W=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,D=e=>{const o=te(e);if(o===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return o},se=Symbol("useGlobalLeaflet"),xe=Symbol("addLayer"),Qe=Symbol("removeLayer"),Xe=Symbol("registerControl"),qt=Symbol("registerLayerControl"),Ye=Symbol("canSetParentHtml"),et=Symbol("setParentHtml"),tt=Symbol("setIcon"),ot=Symbol("bindPopup"),Mt=Symbol("bindTooltip"),at=Symbol("unbindPopup"),Ht=Symbol("unbindTooltip"),Ce={options:{type:Object,default:()=>({}),custom:!0}},ke=e=>({options:e.options,methods:{}}),me={...Ce,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},lt=(e,o,a)=>{const t=D(xe),i=D(Qe),{options:l,methods:n}=ke(e),c=le(e,me,l),d=()=>t({leafletObject:o.value}),C=()=>i({leafletObject:o.value}),y={...n,setAttribution(r){C(),o.value.options.attribution=r,e.visible&&d()},setName(){C(),e.visible&&d()},setLayerType(){C(),e.visible&&d()},setVisible(r){o.value&&(r?d():C())},bindPopup(r){if(!o.value||!Q(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(r)},bindTooltip(r){if(!o.value||!Q(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(r)},unbindTooltip(){o.value&&(Q(o.value.closeTooltip)&&o.value.closeTooltip(),Q(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&(Q(o.value.closePopup)&&o.value.closePopup(),Q(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(r){a.emit("update:visible",r)}};return _(ot,y.bindPopup),_(Mt,y.bindTooltip),_(at,y.unbindPopup),_(Ht,y.unbindTooltip),Le(()=>{y.unbindPopup(),y.unbindTooltip(),C()}),{options:c,methods:y}},Gt=(e,o)=>{if(e&&o.default)return oe("div",{style:{display:"none"}},o.default())},Zt={...me,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},st={...Zt,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},_t={...st,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({..._t});const fe={...Ce,position:{type:String}},Wt=(e,o)=>{const{options:a,methods:t}=ke(e),i=le(e,fe,a),l={...t,setPosition(n){o.value&&o.value.setPosition(n)}};return Le(()=>{o.value&&o.value.remove()}),{options:i,methods:l}},Kt=e=>e.default?oe("div",{ref:"root"},e.default()):null;ee({name:"LControl",props:{...fe,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,o){const a=j(),t=j(),i=te(se),l=D(Xe),{options:n,methods:c}=Wt(e,a);return X(async()=>{const{Control:d,DomEvent:C}=i?W.L:await F(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]),y=d.extend({onAdd(){return t.value}});a.value=ue(new y(n)),ae(c,a.value,e),l({leafletObject:a.value}),e.disableClickPropagation&&t.value&&C.disableClickPropagation(t.value),e.disableScrollPropagation&&t.value&&C.disableScrollPropagation(t.value),q(()=>o.emit("ready",a.value))}),{root:t,leafletObject:a}},render(){return Kt(this.$slots)}});({...fe});({...fe});({...fe});({...fe});const it={...me};({...it});({...it});const Pe={...me,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},nt=(e,o,a)=>{const{options:t,methods:i}=lt(e,o,a),l=le(e,Pe,t),n={...i,setTileComponent(){var c;(c=o.value)==null||c.redraw()}};return Le(()=>{o.value.off()}),{options:l,methods:n}},Jt=(e,o,a,t)=>e.extend({initialize(i){this.tileComponents={},this.on("tileunload",this._unloadTile),a.setOptions(this,i)},createTile(i){const l=this._tileCoordsToKey(i);this.tileComponents[l]=o.create("div");const n=oe({setup:t,props:["coords"]},{coords:i});return vt(n,this.tileComponents[l]),this.tileComponents[l]},_unloadTile(i){const l=this._tileCoordsToKey(i.coords);this.tileComponents[l]&&(this.tileComponents[l].innerHTML="",this.tileComponents[l]=void 0)}});ee({props:{...Pe,childRender:{type:Function,required:!0}},setup(e,o){const a=j(),t=j(null),i=j(!1),l=te(se),n=D(xe),{options:c,methods:d}=nt(e,a,o);return X(async()=>{const{GridLayer:C,DomUtil:y,Util:r}=l?W.L:await F(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]),g=Jt(C,y,r,e.childRender);a.value=ue(new g(c));const{listeners:p}=ce(o.attrs);a.value.on(p),ae(d,a.value,e),n({...e,...d,leafletObject:a.value}),i.value=!0,q(()=>o.emit("ready",a.value))}),{root:t,ready:i,leafletObject:a}},render(){return this.ready?oe("div",{style:{display:"none"},ref:"root"}):null}});const Me={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},Qt=ee({name:"LIcon",props:{...Me,...Ce},setup(e,o){const a=j(),t=te(se),i=D(Ye),l=D(et),n=D(tt);let c,d,C,y,r;const g=(b,u,w)=>{const E=b&&b.innerHTML;if(!u){w&&r&&i()&&l(E);return}const{listeners:K}=ce(o.attrs);r&&d(r,K);const{options:pe}=ke(e),N=le(e,Me,pe);E&&(N.html=E),r=N.html?C(N):y(N),c(r,K),n(r)},p=()=>{q(()=>g(a.value,!0,!1))},I=()=>{q(()=>g(a.value,!1,!0))},k={setIconUrl:p,setIconRetinaUrl:p,setIconSize:p,setIconAnchor:p,setPopupAnchor:p,setTooltipAnchor:p,setShadowUrl:p,setShadowRetinaUrl:p,setShadowAnchor:p,setBgPos:p,setClassName:p,setHtml:p};return X(async()=>{const{DomEvent:b,divIcon:u,icon:w}=t?W.L:await F(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);c=b.on,d=b.off,C=u,y=w,ae(k,{},e),new MutationObserver(I).observe(a.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),p()}),{root:a}},render(){const e=this.$slots.default?this.$slots.default():void 0;return oe("div",{ref:"root"},e)}});({...me});function rt(e,o,a){var t,i,l;o===void 0&&(o=50),a===void 0&&(a={});var n=(t=a.isImmediate)!=null&&t,c=(i=a.callback)!=null&&i,d=a.maxWait,C=Date.now(),y=[];function r(){if(d!==void 0){var p=Date.now()-C;if(p+o>=d)return d-p}return o}var g=function(){var p=[].slice.call(arguments),I=this;return new Promise(function(k,b){var u=n&&l===void 0;if(l!==void 0&&clearTimeout(l),l=setTimeout(function(){if(l=void 0,C=Date.now(),!n){var E=e.apply(I,p);c&&c(E),y.forEach(function(K){return(0,K.resolve)(E)}),y=[]}},r()),u){var w=e.apply(I,p);return c&&c(w),k(w)}y.push({resolve:k,reject:b})})};return g.cancel=function(p){l!==void 0&&clearTimeout(l),y.forEach(function(I){return(0,I.reject)(p)}),y=[]},g}const He={...Ce,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Xt=ee({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:He,setup(e,o){const a=j(),t=Ze({ready:!1,layersToAdd:[],layersInControl:[]}),{options:i}=ke(e),l=le(e,He,i),{listeners:n,attrs:c}=ce(o.attrs),d=je(xe),C=je(Qe),y=je(Xe),r=je(qt);_(se,e.useGlobalLeaflet);const g=de(()=>{const u={};return e.noBlockingAnimations&&(u.animate=!1),u}),p=de(()=>{const u=g.value;return e.padding&&(u.padding=e.padding),e.paddingTopLeft&&(u.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(u.paddingBottomRight=e.paddingBottomRight),u}),I={moveend:rt(u=>{t.leafletRef&&(o.emit("update:zoom",t.leafletRef.getZoom()),o.emit("update:center",t.leafletRef.getCenter()),o.emit("update:bounds",t.leafletRef.getBounds()))}),overlayadd(u){const w=t.layersInControl.find(E=>E.name===u.name);w&&w.updateVisibleProp(!0)},overlayremove(u){const w=t.layersInControl.find(E=>E.name===u.name);w&&w.updateVisibleProp(!1)}};X(async()=>{e.useGlobalLeaflet&&(W.L=W.L||await F(()=>import("./leaflet-src-D9EMR8rn.js").then(S=>S.l),__vite__mapDeps([0,1,2])));const{map:u,CRS:w,Icon:E,latLngBounds:K,latLng:pe,stamp:N}=e.useGlobalLeaflet?W.L:await F(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);try{l.beforeMapMount&&await l.beforeMapMount()}catch(S){console.error(`The following error occurred running the provided beforeMapMount hook ${S.message}`)}await Dt(E);const Oe=typeof l.crs=="string"?w[l.crs]:l.crs;l.crs=Oe||w.EPSG3857;const G={addLayer(S){S.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd.push(S):t.layersInControl.find(T=>N(T.leafletObject)===N(S.leafletObject))||(t.layerControl.addLayer(S),t.layersInControl.push(S))),S.visible!==!1&&t.leafletRef.addLayer(S.leafletObject)},removeLayer(S){S.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd=t.layersToAdd.filter(T=>T.name!==S.name):(t.layerControl.removeLayer(S.leafletObject),t.layersInControl=t.layersInControl.filter(T=>N(T.leafletObject)!==N(S.leafletObject)))),t.leafletRef.removeLayer(S.leafletObject)},registerLayerControl(S){t.layerControl=S,t.layersToAdd.forEach(T=>{t.layerControl.addLayer(T)}),t.layersToAdd=[],y(S)},registerControl(S){t.leafletRef.addControl(S.leafletObject)},setZoom(S){const T=t.leafletRef.getZoom();S!==T&&t.leafletRef.setZoom(S,g.value)},setCrs(S){const T=t.leafletRef.getBounds();t.leafletRef.options.crs=S,t.leafletRef.fitBounds(T,{animate:!1,padding:[0,0]})},fitBounds(S){t.leafletRef.fitBounds(S,p.value)},setBounds(S){if(!S)return;const T=K(S);T.isValid()&&!(t.lastSetBounds||t.leafletRef.getBounds()).equals(T,0)&&(t.lastSetBounds=T,t.leafletRef.fitBounds(T))},setCenter(S){if(S==null)return;const T=pe(S),ve=t.lastSetCenter||t.leafletRef.getCenter();(ve.lat!==T.lat||ve.lng!==T.lng)&&(t.lastSetCenter=T,t.leafletRef.panTo(T,g.value))}};Se(d,G.addLayer),Se(C,G.removeLayer),Se(y,G.registerControl),Se(r,G.registerLayerControl),t.leafletRef=ue(u(a.value,l)),ae(G,t.leafletRef,e),qe(t.leafletRef,I),qe(t.leafletRef,n),t.ready=!0,q(()=>o.emit("ready",t.leafletRef))}),Te(()=>{Je(I),t.leafletRef&&(t.leafletRef.off(),t.leafletRef.remove())});const k=de(()=>t.leafletRef),b=de(()=>t.ready);return{root:a,ready:b,leafletObject:k,attrs:c}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),oe("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Yt=["Symbol(Comment)","Symbol(Text)"],eo=["LTooltip","LPopup"],dt={...me,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},to=(e,o,a)=>{const{options:t,methods:i}=lt(e,o,a),l=le(e,dt,t),n={...i,setDraggable(c){o.value.dragging&&(c?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(c){a.emit("update:latLng",c.latlng),a.emit("update:lat-lng",c.latlng)},setLatLng(c){if(c!=null&&o.value){const d=o.value.getLatLng();(!d||!d.equals(c))&&o.value.setLatLng(c)}}};return{options:l,methods:n}},oo=(e,o)=>{const a=o.slots.default&&o.slots.default();return a&&a.length&&a.some(ao)};function ao(e){return!(Yt.includes(e.type.toString())||eo.includes(e.type.name))}const lo=ee({name:"LMarker",props:dt,setup(e,o){const a=j(),t=j(!1),i=te(se),l=D(xe);_(Ye,()=>{var C;return!!((C=a.value)!=null&&C.getElement())}),_(et,C=>{var y,r;const g=Q((y=a.value)==null?void 0:y.getElement)&&((r=a.value)==null?void 0:r.getElement());g&&(g.innerHTML=C)}),_(tt,C=>{var y;return((y=a.value)==null?void 0:y.setIcon)&&a.value.setIcon(C)});const{options:n,methods:c}=to(e,a,o),d={moveHandler:rt(c.latLngSync)};return X(async()=>{const{marker:C,divIcon:y}=i?W.L:await F(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);oo(n,o)&&(n.icon=y({className:""})),a.value=ue(C(e.latLng,n));const{listeners:r}=ce(o.attrs);a.value.on(r),a.value.on("move",d.moveHandler),ae(c,a.value,e),l({...e,...c,leafletObject:a.value}),t.value=!0,q(()=>o.emit("ready",a.value))}),Te(()=>Je(d)),{ready:t,leafletObject:a}},render(){return Gt(this.ready,this.$slots)}}),so={...st,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Ge={...so},ut={...Ce,content:{type:String,default:null}},io=(e,o)=>{const{options:a,methods:t}=ke(e),i={...t,setContent(l){o.value&&l!==null&&l!==void 0&&o.value.setContent(l)}};return{options:a,methods:i}},no=e=>e.default?oe("div",{ref:"root"},e.default()):null,ro={...ut,latLng:{type:[Object,Array],default:()=>[]}},uo=(e,o)=>{const{options:a,methods:t}=io(e,o);return{options:a,methods:t}},co=ee({name:"LPopup",props:ro,setup(e,o){const a=j(),t=j(null),i=te(se),l=D(ot),n=D(at),{options:c,methods:d}=uo(e,a);return X(async()=>{const{popup:C}=i?W.L:await F(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);a.value=ue(C(c)),e.latLng!==void 0&&a.value.setLatLng(e.latLng),ae(d,a.value,e);const{listeners:y}=ce(o.attrs);a.value.on(y),a.value.setContent(e.content||t.value||""),l(a.value),q(()=>o.emit("ready",a.value))}),Te(()=>{n()}),{root:t,leafletObject:a}},render(){return no(this.$slots)}});({...Ge,latLngs:{...Ge.latLngs}});const Be={...Pe,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},mo=(e,o,a)=>{const{options:t,methods:i}=nt(e,o,a),l=le(e,Be,t),n={...i};return{options:l,methods:n}},fo=ee({props:Be,setup(e,o){const a=j(),t=te(se),i=D(xe),{options:l,methods:n}=mo(e,a,o);return X(async()=>{const{tileLayer:c}=t?W.L:await F(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);a.value=ue(c(e.url,l));const{listeners:d}=ce(o.attrs);a.value.on(d),ae(n,a.value,e),i({...e,...n,leafletObject:a.value}),q(()=>o.emit("ready",a.value))}),{leafletObject:a}},render(){return null}});({...ut});({...Be});const po={class:"space-y-4"},vo={class:"flex items-center justify-between"},go={class:"relative search-container"},yo={class:"relative"},bo=["onKeydown","disabled"],ho={class:"absolute inset-y-0 right-0 flex items-center pr-3"},xo={key:0,class:"fa-solid fa-spinner fa-spin text-gray-400"},Co={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},ko=["onClick"],wo={class:"flex items-start space-x-2"},$o={class:"flex-1 min-w-0"},jo={class:"text-sm font-medium text-gray-900 truncate"},So={class:"text-xs text-gray-500 truncate"},Ao={class:"relative"},Lo={class:"text-sm"},Oo={key:1,class:"absolute inset-0 bg-gray-100 flex items-center justify-center"},Vo={key:0,class:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200"},Io={class:"flex items-center justify-between mb-2"},Eo={class:"text-sm"},To={class:"text-blue-600 ml-2"},Ro={key:0,class:"text-xs text-blue-600 space-y-1"},Po={key:0,class:"flex items-center"},Bo={key:0},Uo={key:1},zo={key:2},No={key:3,class:"pt-1 border-t border-blue-200 mt-2"},Fo={class:"text-xs"},Do={__name:"MapSelector",props:{latitude:{type:[Number,String],default:null},longitude:{type:[Number,String],default:null},address:{type:String,default:""}},emits:["update:latitude","update:longitude","update:address","update:city","update:state","update:country"],setup(e,{emit:o}){const a=e,t=o,i=j(!0),l=j(!1),n=j(13),c=j([10.391,-75.4794]),d=j(null),C=j(null),y=j(!1),r=j(null),g=j(""),p=j(!1),I=j([]),k=j(!1),b=j(null),u=j({city:"",state:"",country:"",fullAddress:""}),w=j(!1),E=j("Ubicación seleccionada");X(async()=>{if(await q(),document.addEventListener("click",Ue),pt(),a.latitude&&a.longitude){const $=parseFloat(a.latitude),f=parseFloat(a.longitude);!isNaN($)&&!isNaN(f)&&(c.value=[$,f],d.value=[$,f],E.value=a.address||"Ubicación del alojamiento")}setTimeout(()=>{i.value=!1,y.value=!0,setTimeout(()=>{ze()},100)},100)}),Le(()=>{document.removeEventListener("click",Ue),b.value&&clearTimeout(b.value)});const K=async $=>{const{lat:f,lng:A}=$.latlng;d.value=[f,A],E.value="Obteniendo dirección...",t("update:latitude",f.toFixed(6)),t("update:longitude",A.toFixed(6)),await G(f,A)},pe=$=>{setTimeout(()=>{$.invalidateSize()},50),setTimeout(()=>{$.invalidateSize(),$.eachLayer(f=>{f._url&&f.redraw()})},200),setTimeout(()=>{$.invalidateSize(),window.dispatchEvent&&window.dispatchEvent(new Event("resize"))},500)},N=async $=>{const{lat:f,lng:A}=$.target.getLatLng();d.value=[f,A],E.value="Obteniendo dirección...",t("update:latitude",f.toFixed(6)),t("update:longitude",A.toFixed(6)),await G(f,A)},Oe=()=>{if(b.value&&clearTimeout(b.value),!g.value.trim()){I.value=[],k.value=!1;return}b.value=setTimeout(()=>{S()},300)},G=async($,f)=>{w.value=!0;try{const A=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${$}&lon=${f}&addressdetails=1&accept-language=es`);if(A.ok){const R=await A.json();if(R&&R.address){const U=R.address,J=U.city||U.town||U.village||U.municipality||"",ie=U.state||U.province||U.region||"",ne=U.country||"",ge=R.display_name||"";return u.value={city:J,state:ie,country:ne,fullAddress:ge},t("update:address",ge),t("update:city",J),t("update:state",ie),t("update:country",ne),E.value=ge?`${ge}`:"Ubicación seleccionada",{city:J,state:ie,country:ne,fullAddress:ge}}}}catch(A){console.error("Error en geocodificación inversa:",A)}finally{w.value=!1}return null},S=async()=>{if(!(!g.value.trim()||g.value.length<3)){p.value=!0;try{const $=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(g.value)}&limit=5&countrycodes=co&addressdetails=1`);if($.ok){const f=await $.json();I.value=f,k.value=!0}}catch($){console.error("Error en la búsqueda:",$)}finally{p.value=!1}}},T=async()=>{if(g.value.trim()){p.value=!0,k.value=!1;try{const $=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(g.value)}&limit=1&countrycodes=co&addressdetails=1`);if($.ok){const f=await $.json();f.length>0?ve(f[0]):alert("No se encontraron resultados para la búsqueda.")}}catch($){console.error("Error en la búsqueda:",$),alert("Error al buscar la ubicación. Inténtalo de nuevo.")}finally{p.value=!1}}},ve=$=>{const f=parseFloat($.lat),A=parseFloat($.lon);if(c.value=[f,A],d.value=[f,A],$.address){const R=$.address,U=R.city||R.town||R.village||R.municipality||"",J=R.state||R.province||R.region||"",ie=R.country||"",ne=$.display_name||"";u.value={city:U,state:J,country:ie,fullAddress:ne},t("update:address",ne),t("update:city",U),t("update:state",J),t("update:country",ie),E.value=U?`${U}, ${J}`:$.display_name.split(",")[0]}else E.value=$.display_name.split(",")[0];t("update:latitude",f.toFixed(6)),t("update:longitude",A.toFixed(6)),g.value=$.display_name.split(",")[0],k.value=!1,n.value=16},mt=()=>{if(!navigator.geolocation){alert("La geolocalización no está soportada por este navegador.");return}l.value=!0,navigator.geolocation.getCurrentPosition(async $=>{const f=$.coords.latitude,A=$.coords.longitude;c.value=[f,A],d.value=[f,A],E.value="Obteniendo dirección...",t("update:latitude",f.toFixed(6)),t("update:longitude",A.toFixed(6)),await G(f,A),l.value=!1},$=>{console.error("Error obteniendo la ubicación:",$),alert("No se pudo obtener tu ubicación. Por favor, selecciona manualmente en el mapa."),l.value=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},ft=()=>{d.value=null,u.value={city:"",state:"",country:"",fullAddress:""},t("update:latitude",null),t("update:longitude",null),t("update:address",null),t("update:city",null),t("update:state",null),t("update:country",null)},Ue=$=>{$.target.closest(".search-container")||(k.value=!1)},ze=()=>{r.value&&r.value.leafletObject&&(setTimeout(()=>{r.value.leafletObject.invalidateSize()},50),setTimeout(()=>{r.value.leafletObject.invalidateSize()},200),setTimeout(()=>{r.value.leafletObject.invalidateSize(),window.dispatchEvent&&window.dispatchEvent(new Event("resize"))},500))},pt=()=>{C.value&&new IntersectionObserver(f=>{f.forEach(A=>{A.isIntersecting&&ze()})}).observe(C.value)};return he([()=>a.latitude,()=>a.longitude],([$,f])=>{if($&&f){const A=parseFloat($),R=parseFloat(f);!isNaN(A)&&!isNaN(R)&&(c.value=[A,R],d.value=[A,R])}}),($,f)=>{const A=_e;return v(),x("div",po,[s("div",vo,[f[2]||(f[2]=s("label",{class:"block text-sm font-medium text-gray-700"}," Seleccionar Ubicación en el Mapa ",-1)),m(h(P),{onClick:mt,icon:"fa-solid fa-location-crosshairs",label:"Mi Ubicación",size:"small",severity:"info",outlined:"",loading:l.value},null,8,["loading"])]),s("div",go,[s("div",yo,[Ie(s("input",{"onUpdate:modelValue":f[0]||(f[0]=R=>g.value=R),onInput:Oe,onKeydown:yt(Ae(T,["prevent"]),["enter"]),onFocus:f[1]||(f[1]=R=>k.value=!0),type:"text",placeholder:"Buscar dirección o lugar...",class:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",disabled:p.value},null,40,bo),[[gt,g.value]]),s("div",ho,[p.value?(v(),x("i",xo)):(v(),x("i",{key:1,class:"fa-solid fa-magnifying-glass text-gray-400 cursor-pointer hover:text-gray-600",onClick:T}))])]),k.value&&I.value.length>0?(v(),x("div",Co,[(v(!0),x(M,null,Y(I.value,(R,U)=>(v(),x("div",{key:U,onClick:J=>ve(R),class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"},[s("div",wo,[f[3]||(f[3]=s("i",{class:"fa-solid fa-location-dot text-gray-400 mt-1 text-sm"},null,-1)),s("div",$o,[s("p",jo,V(R.display_name.split(",")[0]),1),s("p",So,V(R.display_name),1)])])],8,ko))),128))])):O("",!0)]),s("div",Ao,[s("div",{ref_key:"mapContainer",ref:C,class:z(["h-96 w-full rounded-lg border border-gray-300 overflow-hidden",{"opacity-50":i.value}])},[i.value?O("",!0):(v(),H(h(Xt),{key:0,ref_key:"map",ref:r,zoom:n.value,center:c.value,"use-global-leaflet":!1,onClick:K,onReady:pe,style:{height:"384px",width:"100%","z-index":"1"},class:"leaflet-map",options:{zoomControl:!0,attributionControl:!0,scrollWheelZoom:!0,doubleClickZoom:!0,boxZoom:!0,keyboard:!0,dragging:!0,trackResize:!0}},{default:L(()=>[m(h(fo),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",options:{maxZoom:19,minZoom:1,opacity:1,zIndex:1}}),d.value?(v(),H(h(lo),{key:0,"lat-lng":d.value,draggable:!0,onDragend:N},{default:L(()=>[m(h(Qt),{"icon-size":[25,41],"icon-anchor":[12,41],"popup-anchor":[1,-34],"shadow-size":[41,41],"icon-url":"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png","shadow-url":"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"}),m(h(co),null,{default:L(()=>[s("div",Lo,[s("strong",null,V(E.value),1),f[4]||(f[4]=s("br",null,null,-1))])]),_:1})]),_:1},8,["lat-lng"])):O("",!0)]),_:1},8,["zoom","center"])),i.value?(v(),x("div",Oo,[...f[5]||(f[5]=[s("div",{class:"text-center"},[s("i",{class:"fa-solid fa-spinner fa-spin text-2xl text-gray-500 mb-2"}),s("p",{class:"text-gray-500"},"Cargando mapa...")],-1)])])):O("",!0)],2),d.value?(v(),x("div",Vo,[s("div",Io,[s("div",Eo,[f[6]||(f[6]=s("span",{class:"font-medium text-blue-800"},"Ubicación seleccionada:",-1)),s("span",To,V(d.value[0].toFixed(6))+", "+V(d.value[1].toFixed(6)),1)]),Ie(m(h(P),{onClick:ft,icon:"fa-solid fa-times",size:"small",severity:"danger",text:""},null,512),[[A,"Limpiar ubicación"]])]),u.value.city||u.value.fullAddress?(v(),x("div",Ro,[w.value?(v(),x("div",Po,[...f[7]||(f[7]=[s("i",{class:"fa-solid fa-spinner fa-spin mr-2"},null,-1),s("span",null,"Obteniendo información de dirección...",-1)])])):(v(),x(M,{key:1},[u.value.city?(v(),x("div",Bo,[f[8]||(f[8]=s("strong",null,"Ciudad:",-1)),Z(" "+V(u.value.city),1)])):O("",!0),u.value.state?(v(),x("div",Uo,[f[9]||(f[9]=s("strong",null,"Departamento/Estado:",-1)),Z(" "+V(u.value.state),1)])):O("",!0),u.value.country?(v(),x("div",zo,[f[10]||(f[10]=s("strong",null,"País:",-1)),Z(" "+V(u.value.country),1)])):O("",!0),u.value.fullAddress?(v(),x("div",No,[f[11]||(f[11]=s("strong",null,"Dirección completa:",-1)),f[12]||(f[12]=s("br",null,null,-1)),s("span",Fo,V(u.value.fullAddress),1)])):O("",!0)],64))])):O("",!0)])):O("",!0)]),f[13]||(f[13]=s("div",{class:"text-xs text-gray-500 space-y-1"},[s("p",null,"• Busca direcciones o lugares en el campo de búsqueda"),s("p",null,"• Haz clic en el mapa para colocar un marcador"),s("p",null,"• Arrastra el marcador para ajustar la posición"),s("p",null,'• Usa "Mi Ubicación" para obtener tu ubicación actual')],-1))])}}},qo=Ke(Do,[["__scopeId","data-v-b5d936d1"]]),Mo={class:"space-y-6"},Ho={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Go={class:"md:col-span-2"},Zo={class:"flex gap-x-4 mt-8 justify-between"},_o={__name:"LocationForm",props:{form:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:o}){return(a,t)=>(v(),x("div",Mo,[t[16]||(t[16]=s("h3",{class:"text-lg font-semibold mb-4"},"Ubicación",-1)),s("div",Ho,[m(B,{label:"Dirección",modelValue:e.form.address_line_1,"onUpdate:modelValue":t[0]||(t[0]=i=>e.form.address_line_1=i),"error-message":e.form.errors.address_line_1,required:""},null,8,["modelValue","error-message"]),m(B,{label:"Ciudad",modelValue:e.form.city,"onUpdate:modelValue":t[1]||(t[1]=i=>e.form.city=i),"error-message":e.form.errors.city,required:""},null,8,["modelValue","error-message"]),m(B,{label:"Departamento/Estado",modelValue:e.form.state,"onUpdate:modelValue":t[2]||(t[2]=i=>e.form.state=i),"error-message":e.form.errors.state,required:""},null,8,["modelValue","error-message"]),m(B,{label:"País",modelValue:e.form.country,"onUpdate:modelValue":t[3]||(t[3]=i=>e.form.country=i),"error-message":e.form.errors.country,required:""},null,8,["modelValue","error-message"]),m(B,{label:"Código Postal",modelValue:e.form.postal_code,"onUpdate:modelValue":t[4]||(t[4]=i=>e.form.postal_code=i),"error-message":e.form.errors.postal_code,required:""},null,8,["modelValue","error-message"]),t[15]||(t[15]=s("div",null,null,-1)),m(B,{label:"Latitud (Opcional)",modelValue:e.form.latitude,"onUpdate:modelValue":t[5]||(t[5]=i=>e.form.latitude=i),type:"text",step:"any","error-message":e.form.errors.latitude},null,8,["modelValue","error-message"]),m(B,{label:"Longitud (Opcional)",modelValue:e.form.longitude,"onUpdate:modelValue":t[6]||(t[6]=i=>e.form.longitude=i),type:"text",step:"any","error-message":e.form.errors.longitude},null,8,["modelValue","error-message"]),s("div",Go,[m(qo,{latitude:e.form.latitude,"onUpdate:latitude":t[7]||(t[7]=i=>e.form.latitude=i),longitude:e.form.longitude,"onUpdate:longitude":t[8]||(t[8]=i=>e.form.longitude=i),address:e.form.address_line_1,"onUpdate:address":t[9]||(t[9]=i=>e.form.address_line_1=i),city:e.form.city,"onUpdate:city":t[10]||(t[10]=i=>e.form.city=i),state:e.form.state,"onUpdate:state":t[11]||(t[11]=i=>e.form.state=i),country:e.form.country,"onUpdate:country":t[12]||(t[12]=i=>e.form.country=i)},null,8,["latitude","longitude","address","city","state","country"])])]),s("div",Zo,[m(h(P),{onClick:t[13]||(t[13]=i=>a.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),m(h(P),{onClick:t[14]||(t[14]=i=>a.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]))}},Wo={class:"space-y-6"},Ko={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Jo={class:"flex justify-between items-center mb-4"},Qo={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},Xo=["for"],Yo={class:"flex items-center space-x-4 mb-4"},ea={class:"flex-1"},ta={key:0,class:"flex items-center space-x-2 text-blue-600"},oa={class:"text-sm"},aa={class:"border rounded-lg p-4 max-h-60 overflow-y-auto"},la={class:"grid grid-cols-8 gap-2"},sa=["onClick","title"],ia={key:0,class:"text-red-500 text-xs"},na={class:"flex gap-x-4 justify-end pt-4"},ra={class:"flex gap-x-4 mt-8 justify-between"},da={__name:"ContactAmenities",props:{form:{type:Object,required:!0},amenities:{type:Array,required:!0}},emits:["submit","cancel","amenityAdded"],setup(e,{emit:o}){const a=e,t=o,i=j(!1),l=j(!1),n=j({name:"",icon:""}),c=j({name:"",icon:""}),d=j(""),C=["fa-solid fa-wifi","fa-solid fa-swimming-pool","fa-solid fa-car","fa-solid fa-utensils","fa-solid fa-dumbbell","fa-solid fa-hot-tub","fa-solid fa-snowflake","fa-solid fa-fire","fa-solid fa-tv","fa-solid fa-bed","fa-solid fa-bath","fa-solid fa-shower","fa-solid fa-coffee","fa-solid fa-wine-glass","fa-solid fa-cocktail","fa-solid fa-bicycle","fa-solid fa-dog","fa-solid fa-baby","fa-solid fa-wheelchair","fa-solid fa-smoking-ban","fa-solid fa-wind","fa-solid fa-sun","fa-solid fa-moon","fa-solid fa-mountain","fa-solid fa-water","fa-solid fa-tree","fa-solid fa-leaf","fa-solid fa-spa","fa-solid fa-massage","fa-solid fa-gamepad","fa-solid fa-music","fa-solid fa-book","fa-solid fa-camera","fa-solid fa-phone","fa-solid fa-envelope","fa-solid fa-globe","fa-solid fa-map-marker-alt","fa-solid fa-clock","fa-solid fa-calendar","fa-solid fa-credit-card","fa-solid fa-lock","fa-solid fa-key","fa-solid fa-bell","fa-solid fa-gift","fa-solid fa-heart","fa-solid fa-star","fa-solid fa-thumb-up","fa-solid fa-check","fa-solid fa-plus","fa-solid fa-home","fa-solid fa-building","fa-solid fa-warehouse","fa-solid fa-store","fa-solid fa-hospital","fa-solid fa-school","fa-solid fa-university","fa-solid fa-church","fa-solid fa-mosque","fa-solid fa-synagogue","fa-solid fa-plane","fa-solid fa-train","fa-solid fa-bus","fa-solid fa-taxi","fa-solid fa-ship","fa-solid fa-anchor"],y=de(()=>d.value?C.filter(b=>b.toLowerCase().includes(d.value.toLowerCase())):C),r=b=>{n.value.icon=b,c.value.icon=""},g=()=>{},p=()=>{c.value={name:"",icon:""};let b=!0;return n.value.name.trim()||(c.value.name="El nombre es requerido",b=!1),n.value.icon||(c.value.icon="Debes seleccionar un icono",b=!1),b},I=()=>{p()&&(l.value=!0,Ee.post(route("amenities.store"),{name:n.value.name.trim(),icon:n.value.icon},{preserveState:!0,preserveScroll:!0,onSuccess:b=>{const u={id:Date.now(),name:n.value.name.trim(),icon:n.value.icon,slug:n.value.name.trim().toLowerCase().replace(/\s+/g,"-")};a.amenities.push(u),a.form.amenities.includes(u.id)||a.form.amenities.push(u.id),k(),t("amenityAdded",u)},onError:b=>{c.value=b},onFinish:()=>{l.value=!1}}))},k=()=>{i.value=!1,n.value={name:"",icon:""},c.value={name:"",icon:""},d.value=""};return(b,u)=>(v(),x("div",Wo,[s("div",null,[u[9]||(u[9]=s("h3",{class:"text-lg font-semibold mb-4"},"Información de Contacto",-1)),s("div",Ko,[m(B,{label:"Email de Contacto",modelValue:e.form.contact_email,"onUpdate:modelValue":u[0]||(u[0]=w=>e.form.contact_email=w),type:"email","error-message":e.form.errors.contact_email,required:""},null,8,["modelValue","error-message"]),m(B,{label:"Teléfono de Contacto",modelValue:e.form.contact_phone,"onUpdate:modelValue":u[1]||(u[1]=w=>e.form.contact_phone=w),"error-message":e.form.errors.contact_phone,required:""},null,8,["modelValue","error-message"])])]),s("div",null,[s("div",Jo,[u[10]||(u[10]=s("h3",{class:"text-lg font-semibold"},"Servicios y Amenidades",-1)),m(h(P),{onClick:u[2]||(u[2]=w=>i.value=!0),icon:"fa-solid fa-plus",label:"Agregar Amenidad",severity:"success",outlined:"",size:"small"})]),s("div",Qo,[(v(!0),x(M,null,Y(e.amenities,w=>(v(),x("div",{key:w.id,class:"flex items-center space-x-2"},[m(h(jt),{inputId:"amenity-"+w.id,modelValue:e.form.amenities,"onUpdate:modelValue":u[3]||(u[3]=E=>e.form.amenities=E),value:w.id},null,8,["inputId","modelValue","value"]),s("label",{for:"amenity-"+w.id,class:"text-sm cursor-pointer flex items-center space-x-2"},[w.icon?(v(),x("i",{key:0,class:z([w.icon,"text-blue-600"])},null,2)):O("",!0),s("span",null,V(w.name),1)],8,Xo)]))),128))])]),m(h(Re),{visible:i.value,"onUpdate:visible":u[6]||(u[6]=w=>i.value=w),modal:"",header:"Agregar Nueva Amenidad",style:{width:"500px"},class:"p-fluid"},{default:L(()=>[s("form",{onSubmit:Ae(I,["prevent"]),class:"space-y-4"},[s("div",null,[m(B,{label:"Nombre de la Amenidad",modelValue:n.value.name,"onUpdate:modelValue":u[4]||(u[4]=w=>n.value.name=w),"error-message":c.value.name,required:"",placeholder:"Ej: WiFi Gratis, Piscina, Parking..."},null,8,["modelValue","error-message"])]),s("div",null,[u[11]||(u[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Icono de la Amenidad ",-1)),s("div",Yo,[s("div",ea,[m(B,{label:"Buscar Icono",modelValue:d.value,"onUpdate:modelValue":u[5]||(u[5]=w=>d.value=w),placeholder:"Buscar icono...",onInput:g},null,8,["modelValue"])]),n.value.icon?(v(),x("div",ta,[s("i",{class:z([n.value.icon,"text-2xl"])},null,2),s("span",oa,V(n.value.icon),1)])):O("",!0)]),s("div",aa,[s("div",la,[(v(!0),x(M,null,Y(y.value,w=>(v(),x("button",{key:w,type:"button",onClick:E=>r(w),class:z(["p-3 border rounded-lg hover:bg-blue-50 transition-colors flex items-center justify-center",n.value.icon===w?"border-blue-500 bg-blue-50":"border-gray-200"]),title:w},[s("i",{class:z([w,"text-xl"])},null,2)],10,sa))),128))])]),c.value.icon?(v(),x("span",ia,V(c.value.icon),1)):O("",!0)]),s("div",na,[m(h(P),{onClick:k,type:"button",severity:"secondary",label:"Cancelar",outlined:""}),m(h(P),{type:"submit",severity:"success",label:"Guardar Amenidad",loading:l.value,icon:"fa-solid fa-save"},null,8,["loading"])])],32)]),_:1},8,["visible"]),s("div",ra,[m(h(P),{onClick:u[7]||(u[7]=w=>b.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),m(h(P),{onClick:u[8]||(u[8]=w=>b.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]))}};var ua=`
    .p-confirmdialog .p-dialog-content {
        display: flex;
        align-items: center;
        gap: dt('confirmdialog.content.gap');
    }

    .p-confirmdialog-icon {
        color: dt('confirmdialog.icon.color');
        font-size: dt('confirmdialog.icon.size');
        width: dt('confirmdialog.icon.size');
        height: dt('confirmdialog.icon.size');
    }
`,ca={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},ma=bt.extend({name:"confirmdialog",style:ua,classes:ca}),fa={name:"BaseConfirmDialog",extends:At,props:{group:String,breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0}},style:ma,provide:function(){return{$pcConfirmDialog:this,$parentInstance:this}}},ct={name:"ConfirmDialog",extends:fa,confirmListener:null,closeListener:null,data:function(){return{visible:!1,confirmation:null}},mounted:function(){var o=this;this.confirmListener=function(a){a&&a.group===o.group&&(o.confirmation=a,o.confirmation.onShow&&o.confirmation.onShow(),o.visible=!0)},this.closeListener=function(){o.visible=!1,o.confirmation=null},we.on("confirm",this.confirmListener),we.on("close",this.closeListener)},beforeUnmount:function(){we.off("confirm",this.confirmListener),we.off("close",this.closeListener)},methods:{accept:function(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject:function(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onHide:function(){this.confirmation.onHide&&this.confirmation.onHide(),this.visible=!1}},computed:{appendTo:function(){return this.confirmation?this.confirmation.appendTo:"body"},target:function(){return this.confirmation?this.confirmation.target:null},modal:function(){return this.confirmation?this.confirmation.modal==null?!0:this.confirmation.modal:!0},header:function(){return this.confirmation?this.confirmation.header:null},message:function(){return this.confirmation?this.confirmation.message:null},blockScroll:function(){return this.confirmation?this.confirmation.blockScroll:!0},position:function(){return this.confirmation?this.confirmation.position:null},acceptLabel:function(){if(this.confirmation){var o,a=this.confirmation;return a.acceptLabel||((o=a.acceptProps)===null||o===void 0?void 0:o.label)||this.$primevue.config.locale.accept}return this.$primevue.config.locale.accept},rejectLabel:function(){if(this.confirmation){var o,a=this.confirmation;return a.rejectLabel||((o=a.rejectProps)===null||o===void 0?void 0:o.label)||this.$primevue.config.locale.reject}return this.$primevue.config.locale.reject},acceptIcon:function(){var o;return this.confirmation?this.confirmation.acceptIcon:(o=this.confirmation)!==null&&o!==void 0&&o.acceptProps?this.confirmation.acceptProps.icon:null},rejectIcon:function(){var o;return this.confirmation?this.confirmation.rejectIcon:(o=this.confirmation)!==null&&o!==void 0&&o.rejectProps?this.confirmation.rejectProps.icon:null},autoFocusAccept:function(){return this.confirmation.defaultFocus===void 0||this.confirmation.defaultFocus==="accept"},autoFocusReject:function(){return this.confirmation.defaultFocus==="reject"},closeOnEscape:function(){return this.confirmation?this.confirmation.closeOnEscape:!0}},components:{Dialog:Re,Button:P}};function pa(e,o,a,t,i,l){var n=Ne("Button"),c=Ne("Dialog");return v(),H(c,{visible:i.visible,"onUpdate:visible":[o[2]||(o[2]=function(d){return i.visible=d}),l.onHide],role:"alertdialog",class:z(e.cx("root")),modal:l.modal,header:l.header,blockScroll:l.blockScroll,appendTo:l.appendTo,position:l.position,breakpoints:e.breakpoints,closeOnEscape:l.closeOnEscape,draggable:e.draggable,pt:e.pt,unstyled:e.unstyled},Ve({default:L(function(){return[e.$slots.container?O("",!0):(v(),x(M,{key:0},[e.$slots.message?(v(),H(Fe(e.$slots.message),{key:1,message:i.confirmation},null,8,["message"])):(v(),x(M,{key:0},[$e(e.$slots,"icon",{},function(){return[e.$slots.icon?(v(),H(Fe(e.$slots.icon),{key:0,class:z(e.cx("icon"))},null,8,["class"])):i.confirmation.icon?(v(),x("span",re({key:1,class:[i.confirmation.icon,e.cx("icon")]},e.ptm("icon")),null,16)):O("",!0)]}),s("span",re({class:e.cx("message")},e.ptm("message")),V(l.message),17)],64))],64))]}),_:2},[e.$slots.container?{name:"container",fn:L(function(d){return[$e(e.$slots,"container",{message:i.confirmation,closeCallback:d.onclose,acceptCallback:l.accept,rejectCallback:l.reject})]}),key:"0"}:void 0,e.$slots.container?void 0:{name:"footer",fn:L(function(){var d;return[m(n,re({class:[e.cx("pcRejectButton"),i.confirmation.rejectClass],autofocus:l.autoFocusReject,unstyled:e.unstyled,text:((d=i.confirmation.rejectProps)===null||d===void 0?void 0:d.text)||!1,onClick:o[0]||(o[0]=function(C){return l.reject()})},i.confirmation.rejectProps,{label:l.rejectLabel,pt:e.ptm("pcRejectButton")}),Ve({_:2},[l.rejectIcon||e.$slots.rejecticon?{name:"icon",fn:L(function(C){return[$e(e.$slots,"rejecticon",{},function(){return[s("span",re({class:[l.rejectIcon,C.class]},e.ptm("pcRejectButton").icon,{"data-pc-section":"rejectbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["class","autofocus","unstyled","text","label","pt"]),m(n,re({label:l.acceptLabel,class:[e.cx("pcAcceptButton"),i.confirmation.acceptClass],autofocus:l.autoFocusAccept,unstyled:e.unstyled,onClick:o[1]||(o[1]=function(C){return l.accept()})},i.confirmation.acceptProps,{pt:e.ptm("pcAcceptButton")}),Ve({_:2},[l.acceptIcon||e.$slots.accepticon?{name:"icon",fn:L(function(C){return[$e(e.$slots,"accepticon",{},function(){return[s("span",re({class:[l.acceptIcon,C.class]},e.ptm("pcAcceptButton").icon,{"data-pc-section":"acceptbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["label","class","autofocus","unstyled","pt"])]}),key:"1"}]),1032,["visible","class","modal","header","blockScroll","appendTo","position","breakpoints","closeOnEscape","draggable","onUpdate:visible","pt","unstyled"])}ct.render=pa;const va={class:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200"},ga={class:"relative h-48 bg-gray-100 rounded-t-lg overflow-hidden"},ya=["src","alt"],ba={key:1,class:"w-full h-full flex items-center justify-center bg-gray-200"},ha={key:2,class:"absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded"},xa={class:"p-4"},Ca={class:"flex justify-between items-start mb-2"},ka={class:"text-lg font-semibold text-gray-900 truncate"},wa={class:"text-right ml-2"},$a={class:"text-lg font-bold text-green-600"},ja={class:"flex items-center gap-4 mb-3 text-sm text-gray-600"},Sa={class:"flex items-center gap-1"},Aa={key:0,class:"flex items-center gap-1"},La={key:0,class:"text-sm text-gray-600 mb-4 line-clamp-2"},Oa={class:"flex gap-2"},Va={__name:"RoomCard",props:{room:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["edit","delete"],setup(e,{emit:o}){const a=e,t=o,i=ht(),l=c=>new Intl.NumberFormat("es-CO").format(c),n=()=>{i.require({message:`¿Estás seguro de que deseas eliminar la habitación "${a.room.name}"?`,header:"Confirmar Eliminación",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Cancelar",acceptLabel:"Eliminar",acceptClass:"p-button-danger",accept:()=>{t("delete",a.index)}})};return(c,d)=>{const C=_e;return v(),x(M,null,[s("div",va,[s("div",ga,[e.room.images&&e.room.images.length>0?(v(),x("img",{key:0,src:e.room.images[0].filepath,alt:e.room.name,class:"w-full h-full object-cover"},null,8,ya)):(v(),x("div",ba,[...d[1]||(d[1]=[s("i",{class:"pi pi-image text-4xl text-gray-400"},null,-1)])])),e.room.images&&e.room.images.length>1?(v(),x("div",ha,[d[2]||(d[2]=s("i",{class:"pi pi-images mr-1"},null,-1)),Z(" "+V(e.room.images.length),1)])):O("",!0)]),s("div",xa,[s("div",Ca,[s("h4",ka,V(e.room.name),1),s("div",wa,[s("p",$a," $"+V(l(e.room.price_per_night)),1),d[3]||(d[3]=s("p",{class:"text-xs text-gray-500"},"por noche",-1))])]),s("div",ja,[s("div",Sa,[d[4]||(d[4]=s("i",{class:"pi pi-users"},null,-1)),s("span",null,V(e.room.capacity_adults)+" adultos",1)]),e.room.capacity_children>0?(v(),x("div",Aa,[d[5]||(d[5]=s("i",{class:"fa-solid fa-child"},null,-1)),s("span",null,V(e.room.capacity_children)+" niños",1)])):O("",!0)]),e.room.description?(v(),x("p",La,V(e.room.description),1)):O("",!0),s("div",Oa,[m(h(P),{onClick:d[0]||(d[0]=y=>c.$emit("edit",e.room,e.index)),label:"Editar",icon:"fa-solid fa-edit",severity:"info",size:"small",outlined:"",class:"flex-1"}),Ie(m(h(P),{onClick:n,icon:"fa-solid fa-trash",severity:"danger",size:"small",outlined:""},null,512),[[C,"Eliminar habitación"]])])])]),m(h(ct))],64)}}},Ia=Ke(Va,[["__scopeId","data-v-522b4efb"]]),Ea={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ta={class:"md:col-span-2"},Ra={key:0,class:"text-red-500 text-xs"},Pa={class:"border-t pt-4"},Ba={key:0,class:"mb-4"},Ua={class:"grid grid-cols-6 gap-4"},za=["src"],Na=["onClick"],Fa={class:"flex flex-wrap justify-between items-center flex-1 gap-4"},Da={class:"flex gap-2"},qa={key:0,class:"flex flex-wrap gap-4 pt-4"},Ma=["src","alt"],Ha=["onClick"],Ga={class:"text-xs text-center mt-1 truncate w-20"},Za={class:"flex gap-2 justify-end"},_a={__name:"RoomModal",props:{visible:{type:Boolean,default:!1},room:{type:Object,default:null},isEditing:{type:Boolean,default:!1},errors:{type:Object,default:()=>({})},processing:{type:Boolean,default:!1}},emits:["update:visible","submit","removeImage","imagesSelect"],setup(e,{emit:o}){const a=e,t=o,i=j(),l=Ze({name:"",price_per_night:"",capacity_adults:1,capacity_children:0,description:"",images:[]});he(()=>a.room,r=>{r&&Object.assign(l,{name:r.name||"",price_per_night:r.price_per_night||"",capacity_adults:r.capacity_adults||1,capacity_children:r.capacity_children||0,description:r.description||"",images:r.images?[...r.images]:[]})},{immediate:!0,deep:!0}),he(()=>a.visible,r=>{r||q(()=>{n()})});const n=()=>{Object.assign(l,{name:"",price_per_night:"",capacity_adults:1,capacity_children:0,description:"",images:[]}),i.value&&i.value.clear()},c=()=>{t("update:visible",!1)},d=()=>{const r={name:l.name,price_per_night:l.price_per_night,capacity_adults:l.capacity_adults,capacity_children:l.capacity_children,description:l.description,images:l.images};i.value&&i.value.files&&i.value.files.length>0&&(r.room_images=i.value.files),t("submit",r)},C=r=>{t("removeImage",r),l.images=l.images.filter(g=>g.id!==r)},y=r=>{t("imagesSelect",r)};return(r,g)=>(v(),H(h(Re),{visible:e.visible,"onUpdate:visible":g[5]||(g[5]=p=>r.$emit("update:visible",p)),modal:"",header:e.isEditing?"Editar Habitación":"Agregar Habitación",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"},onHide:n},{footer:L(()=>[s("div",Za,[m(h(P),{label:"Cancelar",icon:"fa-solid fa-times",severity:"secondary",onClick:c}),m(h(P),{label:e.isEditing?"Actualizar":"Agregar",icon:e.isEditing?"fa-solid fa-edit":"fa-solid fa-plus",severity:"success",onClick:d,loading:e.processing},null,8,["label","icon","loading"])])]),default:L(()=>[s("form",{onSubmit:Ae(d,["prevent"]),class:"space-y-4"},[s("div",Ea,[m(B,{label:"Nombre de la Habitación",modelValue:l.name,"onUpdate:modelValue":g[0]||(g[0]=p=>l.name=p),"error-message":e.errors.name,required:""},null,8,["modelValue","error-message"]),m(B,{label:"Precio por Noche",modelValue:l.price_per_night,"onUpdate:modelValue":g[1]||(g[1]=p=>l.price_per_night=p),type:"number",min:"0",step:"0.01",currency:"COP","error-message":e.errors.price_per_night,required:""},null,8,["modelValue","error-message"]),m(B,{label:"Capacidad Adultos",modelValue:l.capacity_adults,"onUpdate:modelValue":g[2]||(g[2]=p=>l.capacity_adults=p),type:"number",min:"1","error-message":e.errors.capacity_adults,required:""},null,8,["modelValue","error-message"]),m(B,{label:"Capacidad Niños",modelValue:l.capacity_children,"onUpdate:modelValue":g[3]||(g[3]=p=>l.capacity_children=p),type:"number",min:"0","error-message":e.errors.capacity_children,required:""},null,8,["modelValue","error-message"]),s("div",Ta,[g[6]||(g[6]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descripción de la Habitación ",-1)),m(h(We),{modelValue:l.description,"onUpdate:modelValue":g[4]||(g[4]=p=>l.description=p),rows:"3",placeholder:"Describe esta habitación...",class:z({"border-red-500":e.errors.description})},null,8,["modelValue","class"]),e.errors.description?(v(),x("span",Ra,V(e.errors.description),1)):O("",!0)])]),s("div",Pa,[g[11]||(g[11]=s("h5",{class:"font-medium mb-2"},"Fotos de la Habitación",-1)),e.isEditing&&l.images&&l.images.length>0?(v(),x("div",Ba,[s("div",Ua,[(v(!0),x(M,null,Y(l.images,p=>(v(),x("div",{key:p.id,class:"relative"},[s("img",{src:p.filepath,alt:"Foto habitación",class:"h-28 shadow-md rounded-lg w-full object-cover"},null,8,za),s("button",{type:"button",onClick:I=>C(p.id),class:"absolute -top-2 -right-2 bg-red-500 hover:scale-90 rounded-full flex justify-center items-center text-white shadow-md shadow-red-400 size-6"},[...g[7]||(g[7]=[s("i",{class:"fa-solid fa-xmark text-xs"},null,-1)])],8,Na)]))),128))])])):O("",!0),m(h(Lt),{ref_key:"fileUpload",ref:i,name:"room-images",multiple:!0,accept:"image/*",maxFileSize:1e6,onSelect:y,customUpload:""},{header:L(({chooseCallback:p,clearCallback:I,files:k})=>[s("div",Fa,[s("div",Da,[m(h(P),{type:"button",onClick:b=>p(),icon:"pi pi-images",size:"small",severity:"primary",label:"Seleccionar"},null,8,["onClick"]),m(h(P),{type:"button",label:"Limpiar",onClick:b=>I(),icon:"pi pi-times",size:"small",severity:"danger",disabled:!k||k.length===0},null,8,["onClick","disabled"])]),g[8]||(g[8]=s("span",{class:"text-sm font-medium"},"Fotos de la Habitación",-1))])]),content:L(({files:p,removeFileCallback:I})=>[p.length>0?(v(),x("div",qa,[(v(!0),x(M,null,Y(p,(k,b)=>(v(),x("div",{key:k.name+k.type+k.size,class:"relative"},[s("img",{src:k.objectURL,alt:k.name,class:"h-20 w-20 object-cover rounded border"},null,8,Ma),s("button",{type:"button",onClick:u=>I(b),class:"absolute -top-2 -right-2 bg-red-500 hover:scale-90 rounded-full flex justify-center items-center text-white shadow-md size-5"},[...g[9]||(g[9]=[s("i",{class:"fa-solid fa-xmark text-xs"},null,-1)])],8,Ha),s("div",Ga,V(k.name),1)]))),128))])):O("",!0)]),empty:L(()=>[...g[10]||(g[10]=[s("div",{class:"flex items-center justify-center flex-col py-4"},[s("i",{class:"pi pi-cloud-upload text-2xl text-gray-400"}),s("p",{class:"mt-2 text-sm text-gray-500"}," Arrastra fotos aquí o haz clic para seleccionar ")],-1)])]),_:1},512)])],32)]),_:1},8,["visible","header"]))}},Wa={class:"space-y-6"},Ka={class:"flex justify-between items-center mb-4"},Ja={key:0,class:"text-center text-gray-500 py-8"},Qa={class:"flex flex-col items-center"},Xa={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ya={class:"flex gap-x-4 mt-8 justify-between"},el={__name:"RoomsForm",props:{form:{type:Object,required:!0},accommodation:{type:Object,default:null}},emits:["submit","cancel","addRoom","removeRoom","removeImage","roomImagesSelect"],setup(e,{emit:o}){const a=e,t=o,i=j(!1),l=j(!1),n=j(null),c=j(null),d=de(()=>{if(!l.value||c.value===null)return{};const k={},b=`rooms.${c.value}.`;return Object.keys(a.form.errors).forEach(u=>{if(u.startsWith(b)){const w=u.replace(b,"");k[w]=a.form.errors[u]}}),k}),C=()=>{n.value=null,c.value=null,l.value=!1,i.value=!0},y=(k,b)=>{n.value={...k},c.value=b,l.value=!0,i.value=!0},r=k=>{l.value&&c.value!==null?(Object.assign(a.form.rooms[c.value],k),k.room_images&&k.room_images.length>0&&t("roomImagesSelect",{files:k.room_images},c.value)):(t("addRoom"),q(()=>{const b=a.form.rooms.length-1;Object.assign(a.form.rooms[b],k),k.room_images&&k.room_images.length>0&&t("roomImagesSelect",{files:k.room_images},b)})),i.value=!1},g=k=>{t("removeRoom",k)},p=k=>{l.value&&c.value!==null&&t("removeImage",k,!0,c.value)},I=k=>{l.value&&c.value!==null?t("roomImagesSelect",k,c.value):t("roomImagesSelect",k,-1)};return(k,b)=>(v(),x("div",Wa,[s("div",Ka,[b[3]||(b[3]=s("h3",{class:"text-lg font-semibold"},"Habitaciones",-1)),m(h(P),{onClick:C,icon:"fa-solid fa-plus",label:"Agregar Habitación",severity:"success",outlined:""})]),e.form.rooms.length===0?(v(),x("div",Ja,[s("div",Qa,[b[4]||(b[4]=s("i",{class:"pi pi-home text-4xl mb-4 text-gray-300"},null,-1)),b[5]||(b[5]=s("p",{class:"text-lg font-medium mb-2"},"No hay habitaciones agregadas",-1)),b[6]||(b[6]=s("p",{class:"text-sm"},"Agrega al menos una habitación para continuar",-1)),m(h(P),{onClick:C,icon:"fa-solid fa-plus",label:"Agregar Primera Habitación",severity:"success",class:"mt-4"})])])):(v(),x("div",Xa,[(v(!0),x(M,null,Y(e.form.rooms,(u,w)=>(v(),H(Ia,{key:"room-"+w,room:u,index:w,onEdit:y,onDelete:g},null,8,["room","index"]))),128))])),m(_a,{visible:i.value,"onUpdate:visible":b[0]||(b[0]=u=>i.value=u),room:n.value,"is-editing":l.value,errors:d.value,processing:e.form.processing,onSubmit:r,onRemoveImage:p,onImagesSelect:I},null,8,["visible","room","is-editing","errors","processing"]),s("div",Ya,[m(h(P),{onClick:b[1]||(b[1]=u=>k.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),m(h(P),{onClick:b[2]||(b[2]=u=>k.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]))}},tl={class:"space-y-6"},ol={key:0},al={class:"grid grid-cols-6 gap-4 mb-4"},ll=["src","alt"],sl=["onClick"],il={class:"flex gap-x-4 mt-8 justify-between"},nl={__name:"AccommodationPhotos",props:{form:{type:Object,required:!0},accommodation:{type:Object,required:!0}},emits:["submit","cancel","removeImage","accommodationImagesSelect"],setup(e,{emit:o}){return(a,t)=>(v(),x("div",tl,[t[7]||(t[7]=s("h3",{class:"text-lg font-semibold mb-4"},"Fotos del Alojamiento",-1)),s("div",null,[t[3]||(t[3]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Imagen de Portada",-1)),m(B,{type:"file-basic",modelValue:e.form.portada,"onUpdate:modelValue":t[0]||(t[0]=i=>e.form.portada=i),acceptFile:"image/*"},null,8,["modelValue"])]),e.accommodation.photos&&e.accommodation.photos.length>0?(v(),x("div",ol,[t[5]||(t[5]=s("h4",{class:"font-medium mb-2"},"Fotos Actuales",-1)),s("div",al,[(v(!0),x(M,null,Y(e.accommodation.photos,i=>(v(),x("div",{key:i.id,class:"relative"},[s("img",{src:i.filepath,alt:e.accommodation.name,class:"h-28 shadow-md rounded-lg w-full object-cover"},null,8,ll),s("button",{onClick:l=>a.$emit("removeImage",i.id),class:"absolute -top-2 -right-2 bg-red-500 hover:scale-90 rounded-full flex justify-center items-center text-white shadow-md shadow-red-400 size-6"},[...t[4]||(t[4]=[s("i",{class:"fa-solid fa-xmark text-xs"},null,-1)])],8,sl)]))),128))])])):O("",!0),s("div",null,[t[6]||(t[6]=s("h4",{class:"font-medium mb-2"},"Agregar Nuevas Fotos",-1)),m(Ot,{route:a.route("accommodations.photos.upload",e.accommodation.id)},null,8,["route"])]),s("div",il,[m(h(P),{onClick:t[1]||(t[1]=i=>a.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),m(h(P),{onClick:t[2]||(t[2]=i=>a.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]))}},rl={class:"p-4 space-y-4 h-full overflow-y-auto"},dl={class:"text-xl font-extrabold"},Zl={__name:"Form",props:{accommodation:{type:Object,default:null},amenities:{type:Array,default:()=>[]}},setup(e){const o=e,a=xt({name:o.accommodation?.name||"",description:o.accommodation?.description||"",type:o.accommodation?.type||"",star_rating:o.accommodation?.star_rating||0,status:o.accommodation?.status||"draft",address_line_1:o.accommodation?.address_line_1||"",city:o.accommodation?.city||"",state:o.accommodation?.state||"",country:o.accommodation?.country||"",postal_code:o.accommodation?.postal_code||"",latitude:o.accommodation?.latitude||"",longitude:o.accommodation?.longitude||"",contact_email:o.accommodation?.contact_email||"",contact_phone:o.accommodation?.contact_phone||"",amenities:o.accommodation?.amenities?.map(y=>y.id)||[],portada:null,rooms:o.accommodation?.rooms||[],accommodation_images:[]}),t=()=>{o.accommodation?a.post(route("accommodations.update",o.accommodation.id),{forceFormData:!0,_method:"PUT"}):a.post(route("accommodation.store"),{forceFormData:!0})},i=()=>{Ee.visit(route("accommodation.index"))},l=()=>{a.rooms.push({name:"",description:"",price_per_night:0,capacity_adults:1,capacity_children:0,room_images:[]})},n=y=>{a.rooms.splice(y,1)},c=(y,r=!1,g=null)=>{if(r&&g!==null){const p=a.rooms[g];p.images&&(p.images=p.images.filter(I=>I.id!==y))}else o.accommodation&&o.accommodation.images&&(o.accommodation.images=o.accommodation.images.filter(p=>p.id!==y));Ee.delete(route("accommodations.images.destroy",y),{preserveState:!0,preserveScroll:!0})},d=(y,r)=>{if(r===-1){l();const g=a.rooms.length-1;a.rooms[g].room_images||(a.rooms[g].room_images=[]),a.rooms[g].room_images=y.files}else a.rooms[r].room_images||(a.rooms[r].room_images=[]),a.rooms[r].room_images=y.files},C=y=>{a.accommodation_images=y.files};return(y,r)=>(v(),H(Ct,{title:e.accommodation?"Editar Alojamiento":"Crear Alojamiento"},{default:L(()=>[s("div",rl,[s("h1",dl,V(e.accommodation?`Editar Alojamiento ${e.accommodation.name}`:"Crear nuevo alojamiento"),1),m(h(kt),{value:"0"},{default:L(()=>[m(h(wt),null,{default:L(()=>[m(h(ye),{value:"0"},{default:L(()=>[...r[0]||(r[0]=[Z("Información Básica",-1)])]),_:1}),m(h(ye),{value:"1"},{default:L(()=>[...r[1]||(r[1]=[Z("Ubicación",-1)])]),_:1}),m(h(ye),{value:"2"},{default:L(()=>[...r[2]||(r[2]=[Z("Contacto y Amenidades",-1)])]),_:1}),m(h(ye),{value:"3"},{default:L(()=>[...r[3]||(r[3]=[Z("Habitaciones",-1)])]),_:1}),e.accommodation?(v(),H(h(ye),{key:0,value:"4"},{default:L(()=>[...r[4]||(r[4]=[Z("Fotos del Alojamiento",-1)])]),_:1})):O("",!0)]),_:1}),m(h($t),null,{default:L(()=>[m(h(be),{value:"0"},{default:L(()=>[m(Nt,{form:h(a),onSubmit:t,onCancel:i},null,8,["form"])]),_:1}),m(h(be),{value:"1"},{default:L(()=>[m(_o,{form:h(a),onSubmit:t,onCancel:i},null,8,["form"])]),_:1}),m(h(be),{value:"2"},{default:L(()=>[m(da,{form:h(a),amenities:e.amenities,onSubmit:t,onCancel:i},null,8,["form","amenities"])]),_:1}),m(h(be),{value:"3"},{default:L(()=>[m(el,{form:h(a),accommodation:e.accommodation,onSubmit:t,onCancel:i,onAddRoom:l,onRemoveRoom:n,onRemoveImage:c,onRoomImagesSelect:d},null,8,["form","accommodation"])]),_:1}),e.accommodation?(v(),H(h(be),{key:0,value:"4"},{default:L(()=>[m(nl,{form:h(a),accommodation:e.accommodation,onSubmit:t,onCancel:i,onRemoveImage:c,onAccommodationImagesSelect:C},null,8,["form","accommodation"])]),_:1})):O("",!0)]),_:1})]),_:1})])]),_:1},8,["title"]))}};export{Zl as default};

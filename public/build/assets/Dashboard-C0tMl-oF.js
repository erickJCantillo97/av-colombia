import{s as P}from"./index-BSd0Wduo.js";import{J as F,e as H,f as y,o as u,r as J,b as n,M as U,aS as Q,aT as W,d,u as q,c as _,w as b,a as e,i as h,t as g,g as k,h as f,F as N,j,E as z,T as K,a0 as X}from"./app-DO_Av447.js";import{_ as Y,s as Z}from"./Datatable-D825K6HK.js";import{s as ee}from"./index-Uf4rfLcl.js";import{a as M,s as R}from"./index-D1qBPg09.js";import{_ as te}from"./AppLayout-D0OguMeA.js";import"./Scheduler-COdkKvZ6.js";import{_ as oe,a as se}from"./Notas-z5kmCzw2.js";import{_ as le}from"./Modal-CTT2NR2U.js";import{_ as w}from"./Input-d8s6hSvX.js";import"./index-BWs3-D5N.js";import"./index-JpzFJU-F.js";import"./index-BTek8Kqb.js";import"./index-BHv8LVIP.js";import"./index-CZYpc4Md.js";import"./index-ChXk84Xb.js";import"./index-BHFBYZaY.js";import"./index-D3Rl6rMp.js";import"./index-BUYEdiQR.js";import"./index-D_V0xIjO.js";import"./index-D0xDsyMX.js";import"./index-BUObkz7c.js";import"./postcss-D05MRQFQ.js";import"./postcss-CKnVwxEo.js";import"./index-DiLsABNj.js";import"./index-BJplfN6r.js";import"./useCommonUtilities-BgDhORlD.js";import"./index-BJtT3ame.js";import"./index-1tiAkLG-.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-DSC4kSNv.js";import"./index-B3ysjsr5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";import"./toasts-CAnEIL5D.js";import"./Service-CLDc3q4_.js";import"./Toats-CRqRGqmn.js";import"./searchStore-BVYRGY-z.js";import"./logo-BvUF_eNm.js";import"./Loading-oBDwvFz2.js";import"./index-x6apuKZe.js";import"./index-Btfz5ZPz.js";import"./index-DYbehHAW.js";import"./index-CWaCv6WD.js";import"./index-DQeKtI10.js";var ae=F.extend({name:"columngroup"}),re={name:"BaseColumnGroup",extends:P,props:{type:{type:String,default:null}},style:ae,provide:function(){return{$pcColumnGroup:this,$parentInstance:this}}},ne={name:"ColumnGroup",extends:re,inheritAttrs:!1,inject:["$columnGroups"],mounted:function(){var a;(a=this.$columnGroups)===null||a===void 0||a.add(this.$)},unmounted:function(){var a;(a=this.$columnGroups)===null||a===void 0||a.delete(this.$)},render:function(){return null}},ie=`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,de={root:"p-overlaybadge"},ue=F.extend({name:"overlaybadge",style:ie,classes:de}),ce={name:"OverlayBadge",extends:M,style:ue,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},I={name:"OverlayBadge",extends:ce,inheritAttrs:!1,components:{Badge:M}};function me(l,a,x,$,v,r){var m=H("Badge");return u(),y("div",U({class:l.cx("root")},l.ptmi("root")),[J(l.$slots,"default"),n(m,U(l.$props,{pt:l.ptm("pcBadge")}),null,16,["pt"])],16)}I.render=me;var pe={name:"Row",extends:P,inject:["$rows"],mounted:function(){var a;(a=this.$rows)===null||a===void 0||a.add(this.$)},unmounted:function(){var a;(a=this.$rows)===null||a===void 0||a.delete(this.$)},render:function(){return null}};const ve={class:"text-lg"},fe={class:"font-bold uppercase"},ye={class:"font-bold uppercase"},ge={class:"mt-4"},be={key:0},xe={class:"flex w-full justify-between gap-x-4"},$e={class:"flex flex-col gap-y-1"},_e={class:"flex justify-between"},he={for:"",class:"w-full font-bold"},Ve={class:"flex flex-col gap-y-2"},Ce={class:"w-full"},we={key:1,class:"flex flex-col gap-y-2 my-4"},ke={class:"grid grid-cols-4 font-semibold gap-x-6 border-b-4"},Ae={class:"flex justify-end gap-x-4"},Se={__name:"Completar",props:Q({service:Object},{modelValue:!0,modelModifiers:{}}),emits:["update:modelValue"],setup(l){const a=l,x=W(l,"modelValue",!0),$=d("COMPLETADA"),v=d([]),r=q({saldoPagado:"AV COLOMBIA",status:"COMPLETADA",service_id:a.service.id,conductor:"",placa:"",value:"",saldos:[],extras:[]}),m=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0});function V(){r.extras=a.service.extras.map(p=>({id:p.id,cantidad:p.cantidad,description:p.description,unit_cost:p.unit_cost}))}V();const C=()=>{r.saldos=v.value,r.status=$.value,r.post(route("completar.reserva"),{onSuccess:()=>{r.reset(),x.value=!1}})};function A(){v.value=a.service.proveedors.map(p=>({id:p.id,name:p.proveedor.proveedor.nombre,amount:0}))}return A(),(p,t)=>{const S=R,B=K;return u(),_(le,{modelValue:x.value,"onUpdate:modelValue":t[3]||(t[3]=o=>x.value=o),title:"Completar Servicio","close-on-escape":""},{footer:b(()=>[e("div",Ae,[n(S,{label:"Completar Servicio",severity:"success",onClick:C,icon:"fa-solid fa-save"}),n(S,{label:"Cancelar",severity:"danger",icon:"fa-solid fa-xmark"})])]),default:b(()=>[e("h2",ve,[t[4]||(t[4]=h(" Completar servicio de ",-1)),e("span",fe,g(l.service.cliente_name),1),t[5]||(t[5]=h(" para ",-1)),e("span",ye,g(l.service.service)+" Sin novedad",1),t[6]||(t[6]=h(". ",-1))]),e("div",ge,[l.service.service_type=="TRANSFER"||l.service.proveedors.find(o=>o.proveedor_id==="9e602dc8-08e0-42f4-bbb2-1eed02652372")?(u(),y("div",be,[e("div",xe,[n(w,{label:"Nombre del Conductor",modelValue:f(r).conductor,"onUpdate:modelValue":t[0]||(t[0]=o=>f(r).conductor=o),type:"text",placeholder:"Nombre del conductor",class:"w-full"},null,8,["modelValue"]),n(w,{label:"Placa del Vehiculo",modelValue:f(r).placa,"onUpdate:modelValue":t[1]||(t[1]=o=>f(r).placa=o),type:"text",placeholder:"Placa del Vehiculo",class:"w-full"},null,8,["modelValue"]),n(w,{label:"Valor del Servicio",modelValue:f(r).value,"onUpdate:modelValue":t[2]||(t[2]=o=>f(r).value=o),type:"text",placeholder:"Valor del Servicio",class:"w-full"},null,8,["modelValue"])])])):k("",!0),e("div",$e,[e("div",_e,[e("label",he,"Saldo ("+g(f(m).format(l.service.saldo-v.value.reduce((o,s)=>o+s.amount,0)))+")",1)]),e("div",Ve,[(u(!0),y(N,null,j(v.value,o=>(u(),y("div",{key:o.id,class:"flex justify-between w-full items-center gap-x-4"},[e("p",Ce,g(o.name),1),n(w,{class:"w-1/2",type:"number",mode:"currency",modelValue:o.amount,"onUpdate:modelValue":s=>o.amount=s},null,8,["modelValue","onUpdate:modelValue"])]))),128))])]),l.service.extras.length>0?(u(),y("div",we,[t[11]||(t[11]=e("h1",{class:"text-lg font-bold text-center"},"Servicio Extras",-1)),e("div",ke,[t[8]||(t[8]=e("p",null,"Cantidad",-1)),t[9]||(t[9]=e("p",null,"Nombre",-1)),z((u(),y("p",null,[...t[7]||(t[7]=[h("Costo Unitario",-1)])])),[[B,"Cuanto pagaste",void 0,{top:!0}]]),t[10]||(t[10]=e("p",null,"Total",-1))]),(u(!0),y(N,null,j(f(r).extras,o=>(u(),y("div",{key:o.id,class:"grid grid-cols-4 border-b justify-center items-center gap-x-6"},[e("p",null,g(o.cantidad),1),e("p",null,g(o.description),1),n(w,{type:"number",modelValue:o.unit_cost,"onUpdate:modelValue":s=>o.unit_cost=s,mode:"currency"},null,8,["modelValue","onUpdate:modelValue"]),e("span",null,g(f(m).format(o.cantidad*o.unit_cost)),1)]))),128))])):k("",!0)])]),_:1},8,["modelValue"])}}},Be={class:"py-4"},Oe={class:"w-full mx-auto sm:px-1 lg:px-4 space-y-2"},Ee={class:"bg-white overflow-hidden sm:rounded-lg flex justify-between items-center px-1"},Ne={class:"uppercase"},De=["href"],Ue={class:"flex w-full justify-between font-bold text-xl items-center"},je={class:"shadow-xl rounded-lg p-1 h-[85vh]"},At={__name:"Dashboard",setup(l){d([]);const a=d([]),x=d("");d(0);const $=d([]);d();const v=d(!1),r=d(!1),m=d({}),V=d(!1),C=d([new Date,new Date]);d([]);const A=async()=>{const{data:s}=await X.get(route("get.all.booking.services.dates",{dates:C.value}));$.value=s.bookingServices},p=s=>{m.value=$.value.find(i=>i.id==s.id),V.value=!0};A();const t=[{label:"Compeltar Servicio",action:s=>{m.value=s,r.value=!0},icon:"fa-solid fa-circle-check text-sm",severity:"success"},{label:"Notas",severity:"secondary",action:s=>{m.value=s,v.value=!0},badge:s=>s.notes,icon:"fa-solid fa-note-sticky text-sm"}],S=[{field:"cliente_name",header:"Nombre del pasajero",filter:!0,sortable:!0},{field:"adults",header:"Pasajeros",filter:!0,sortable:!0,type:"html-custom",renderer:s=>`
      <div class="flex flex-col text-right text-sm items-center">
        <span class="text-center font-bold">Adultos: ${s.adults}</span>
        <span class="text-center">Ni√±os: ${s.boys}</span>
        </div>
      `},{field:"service",header:"Actividad",filter:!0,sortable:!0},{field:"proveedors_names",header:"proveedores",class:"text-center font-semibold text-sm",filter:!0},{field:"cliente_building",header:"Edificio",filter:!0,sortable:!0},{field:"cliente_phone",header:"Telefono",filter:!0,sortable:!0,type:"html-custom",renderer:s=>`<a target="_blank" href="https://wa.me/${s.cliente_phone}?text=Hola  mucho gusto yo soy Sandra la coordinadora de su actividad 
              Hello, nice to talk to you  I'm Sandra the coordinator for  your activity">${s.cliente_phone}</a>`},{field:"hour",header:"Hora",filter:!0,sortable:!0},{field:"status",header:"Estado",filter:!0,sortable:!0,type:"tag",filtertype:"EQUALS",class:"text-center uppercase",severitys:[{text:"RESERVADO",severity:"info",class:""},{text:"CAMBIO DE FECHA",class:"bg-gray-200 font-bold"},{text:"COMPLETADA",class:""},{text:"NO SHOW",severity:"warn",class:""},{text:"REUBICADO",severity:"warn",class:""},{text:"CANCELADA",severity:"danger",class:"animate-pulse"},{text:"PROBLEMATICA",severity:"danger",class:"animate-pulse"},{text:"SIN CONFIRMAR",severity:"danger"}]}],B=d([]),o=s=>{B.value=s};return(s,i)=>{const O=R,T=ee,D=Z,G=pe,L=ne;return u(),y(N,null,[n(te,{title:"Dashboard"},{default:b(()=>[e("div",Be,[e("div",Oe,[e("div",Ee,[e("h1",null,[i[4]||(i[4]=h(" Hola ",-1)),e("strong",Ne,g(s.$page.props.auth.user.name),1),i[5]||(i[5]=h(", Bienvenido a tu panel de control ",-1))]),e("a",{target:"_blank",href:`https://vendedores-site.netlify.app/${s.$page.props.auth.user.id}`},[n(O,{label:"Ver Portafolio"})],8,De)]),e("div",Ue,[i[6]||(i[6]=e("p",null,"Actividades",-1)),n(T,{modelValue:C.value,"onUpdate:modelValue":i[0]||(i[0]=c=>C.value=c),selectionMode:"range",dateFormat:"dd/mm/yy",manualInput:!1,onValueChange:A},null,8,["modelValue"])]),e("div",je,[n(Y,{columnas:S,rowClass:!0,data:$.value,actions:t,onFilterApply:o},{actions:b(({data:c})=>[c.extras.length==0?(u(),_(O,{key:0,onClick:E=>p(c),severity:"info",text:"",class:"p-button-sm",icon:"fa-solid fa-circle-info text-sm"},null,8,["onClick"])):(u(),_(f(I),{key:1,severity:"danger"},{default:b(()=>[n(O,{onClick:E=>p(c),severity:"info",text:"",class:"p-button-sm",icon:"fa-solid fa-circle-info text-sm"},null,8,["onClick"])]),_:2},1024))]),groupRows:b(()=>[n(L,{type:"footer"},{default:b(()=>[n(G,null,{default:b(()=>[n(D,{footer:"Pasajeros:",colspan:0,footerStyle:"text-align:right"}),n(D,{footer:B.value.reduce((c,E)=>c+E.adults,0)},null,8,["footer"])]),_:1})]),_:1})]),_:1},8,["data"])])])])]),_:1}),m.value?(u(),_(oe,{key:0,modelValue:V.value,"onUpdate:modelValue":i[1]||(i[1]=c=>V.value=c),service:m.value},null,8,["modelValue","service"])):k("",!0),v.value?(u(),_(se,{key:1,modelValue:v.value,"onUpdate:modelValue":i[2]||(i[2]=c=>v.value=c),notes:a.value,note:x.value,service:m.value},null,8,["modelValue","notes","note","service"])):k("",!0),r.value?(u(),_(Se,{key:2,modelValue:r.value,"onUpdate:modelValue":i[3]||(i[3]=c=>r.value=c),service:m.value},null,8,["modelValue","service"])):k("",!0)],64)}}};export{At as default};

import{ai as L,aj as T,o as l,c as N,w,a as e,t as i,u as f,f as d,k as m,b,g as a,i as C,F as S,n as A,h as F,W as j,T as V}from"./app-Bs70vyxs.js";import{s as $}from"./index-irYQpVgW.js";import{s as z}from"./index-wBSGR2Mb.js";import{S as g,a as E}from"./toasts-CuGasqAw.js";const M={class:"flex items-center gap-2"},P={class:"font-bold text-lg"},I={class:"flex flex-col gap-y-1.5 text-sm"},R={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},H={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},W={key:0,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},U={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},G={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},q={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},J={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},K=["href"],Q={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},X={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Y={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Z={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},_={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ee={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},te={key:1,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},se={key:2,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ie={key:3,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},oe={class:"flex flex-col border py-1 bg-white/30 rounded-md px-2"},ne={key:4,class:"text-lg flex w-full justify-between mt-2"},le={class:"rounded-full bg-black text-white px-2"},re={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},de={class:"flex flex-col gap-y-2 mt-2"},ae={class:"flex justify-between"},ue={class:"bg-blue-600 text-white p-1 rounded-lg"},ce={class:"flex items-center text-xs justify-between border shadow-xl rounded-md p-1 bg-white"},fe={class:"uppercase font-bold"},ve={class:"flex flex-col items-center gap-2"},me={class:"font-bold text-center"},be={key:0,class:"flex gap-x-2"},pe={__name:"viewBooking",props:L({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const{toast:y}=E(),p=s,h=T(s,"modelValue"),u=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),k=()=>{g.fire({title:"Cancelar Servicio",input:"date",inputLabel:"Fecha de Cancelaci贸n",showCancelButton:!0,confirmButtonText:"Cancelar Servicio",showLoaderOnConfirm:!0,preConfirm:async o=>{await j.post(route("set.states"),{service:p.service.id,state:"CANCELADA",date:o,terminated:!0})},allowOutsideClick:()=>!g.isLoading()}).then(o=>{o.isConfirmed&&y("success","Reserva Cancelada")})},x=(o,t)=>{g.fire({title:o,text:"Estas seguro de realizar esta acci贸n?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(c=>{c.isConfirmed&&(g.fire({title:o,text:"Esta reserva ha sido "+o+".",icon:"success"}),j.post(route("set.states"),{service:p.service.id,state:o,terminated:t},{onSuccess:()=>{info.value=!1,y("success","Reserva "+o)}}))})},D=o=>{if(o==null||o==null)return"Sin definir";var t=new Date(new Date(o).getTime()+new Date(o).getTimezoneOffset()*6e4).toLocaleString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"});return t=="30/11/2"?"INDEFINIDO":t};return(o,t)=>{const c=z,O=$,v=V;return l(),N(O,{visible:h.value,"onUpdate:visible":t[4]||(t[4]=r=>h.value=r),"pt:root:class":"!bg-blue-100",header:"Detalles de la actividad",position:"right"},{header:w(()=>[e("div",M,[e("span",P,i(s.service.service.title),1)])]),footer:w(()=>[e("div",ve,[e("h1",me," Saldo: "+i(f(u).format(s.service.total_price-s.service.payments.reduce((r,n)=>r+n.amount,0))),1),o.$page.props.auth.user.rol=="admin"?(l(),d("div",be,[m(b(c,{onClick:t[0]||(t[0]=r=>x("COMPLETADA",!0)),icon:"fa-solid fa-circle-check",text:"",size:"large",class:"flex-auto",severity:"success"},null,512),[[v,"Completar Servicio",void 0,{top:!0}]]),m(b(c,{onClick:t[1]||(t[1]=r=>x("NO SHOW",!0)),icon:"fa-solid fa-eye-slash",text:"",size:"large",class:"flex-auto",severity:"warn"},null,512),[[v,"Servicio No show",void 0,{top:!0}]]),m(b(c,{onClick:t[2]||(t[2]=r=>k()),icon:"fa-solid fa-xmark-circle",text:"",size:"large",class:"flex-auto",severity:"danger"},null,512),[[v,"Cancelar Servicio",void 0,{top:!0}]]),m(b(c,{onClick:t[3]||(t[3]=r=>x("PROBLEMATICA",!1)),icon:"fa-solid fa-person-dress-burst",text:"",size:"large",class:"flex-auto",severity:"danger"},null,512),[[v,"Servicio Problematico",void 0,{top:!0}]])])):a("",!0)])]),default:w(()=>{var r;return[e("div",I,[e("div",R,[t[5]||(t[5]=e("strong",null,"Fecha del Servicio:",-1)),e("p",null,i(D(s.service.date)),1)]),e("div",H,[t[6]||(t[6]=e("strong",null,"Hora del Servicio:",-1)),e("p",null,i(s.service.hour),1)]),s.service.time_service?(l(),d("div",W,[t[7]||(t[7]=e("strong",null,"Duraci贸n del Servicio:",-1)),e("p",null,i(s.service.time_service),1)])):a("",!0),e("div",U,[t[8]||(t[8]=e("strong",null,"Canal de Venta:",-1)),e("p",null,i(s.service.channel.name),1)]),e("div",G,[t[9]||(t[9]=e("strong",null,"Cliente:",-1)),e("p",null,i(s.service.cliente_name),1)]),e("div",q,[t[10]||(t[10]=e("strong",null,"Ciudad:",-1)),e("p",null,i(s.service.cliente_city),1)]),e("div",J,[t[11]||(t[11]=e("strong",null,"Telelfono:",-1)),e("a",{target:"_blank",href:`https://wa.me/${s.service.cliente_phone}?text=Hola%20,%20mi%20nombre%20es%20*Sandra Gil*,%20Le%20escribo%20desde%20*AV%20COLOMBIA*`},i(s.service.cliente_phone),9,K)]),e("div",Q,[t[12]||(t[12]=e("strong",null,"Edificio:",-1)),e("p",null,i(s.service.cliente_building),1)]),e("div",X,[t[13]||(t[13]=e("strong",null,"Adultos:",-1)),e("p",null,i(s.service.adults),1)]),e("div",Y,[t[14]||(t[14]=e("strong",null,"Ni帽os:",-1)),e("p",null,i(s.service.boys),1)]),e("div",Z,[t[15]||(t[15]=e("strong",null,"Mascota:",-1)),e("p",null,i(s.service.mascota),1)]),e("div",_,[t[16]||(t[16]=e("strong",null,"Total:",-1)),e("p",null,i(f(u).format(s.service.total)),1)]),e("div",ee,[t[17]||(t[17]=e("strong",null,"Total Real:",-1)),e("p",null,i(f(u).format(s.service.total_real)),1)]),s.service.user?(l(),d("div",te,[t[18]||(t[18]=e("strong",null,"Usuario:",-1)),e("p",null,i((r=s.service.user)==null?void 0:r.name),1)])):a("",!0),s.service.user?(l(),d("div",se,[t[19]||(t[19]=e("strong",null,"Fecha de reserva:",-1)),e("p",null,i(new Date(s.service.created_at).toLocaleDateString("es-CO")),1)])):a("",!0),s.service.fecha_cancelacion?(l(),d("div",ie,[t[20]||(t[20]=e("strong",null,"Fecha de Cancelaci贸n:",-1)),e("p",null,i(s.service.fecha_cancelacion),1)])):a("",!0),e("div",oe,[t[21]||(t[21]=e("strong",null,"Observacion:",-1)),e("p",null,i(s.service.observations),1)]),o.$page.props.auth.user.rol=="admin"?(l(),d("div",ne,[t[22]||(t[22]=e("p",{class:"font-bold"},"Proveedores",-1)),e("p",le,i(s.service.proveedors.length),1)])):a("",!0),o.$page.props.auth.user.rol=="admin"?(l(!0),d(S,{key:5},C(s.service.proveedors,n=>(l(),d("div",re,[e("p",null,i(n.proveedor.nombre),1),e("p",null,i(f(u).format(n.cost)),1)]))),256)):a("",!0),e("div",de,[e("div",ae,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold"},"Pagos Realizados",-1)),e("div",ue,i(f(u).format(s.service.payments.reduce((n,B)=>n+B.amount,0))),1)]),(l(!0),d(S,null,C(s.service.payments,n=>(l(),d("div",ce,[e("div",null,[e("div",fe,i(n.type)+" "+i(f(u).format(n.amount)),1),e("div",null,i(new Date(n.created_at).toLocaleDateString("es-CO"))+" "+i(n.metohd_payment.name),1)]),e("div",{class:A(["uppercase",n.status=="pendiente"?"bg-red-500 p-1 text-white rounded-lg shadow-md shadow-red-500":""])},[F(i(n.status)+" ",1),t[24]||(t[24]=e("div",null,null,-1))],2)]))),256))])])]}),_:1},8,["visible"])}}};export{pe as _};

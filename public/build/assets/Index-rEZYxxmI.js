import{d as v,C as T,f as m,b as i,w as x,F as g,o as p,a as s,u as n,h as $,i as B,k as V,v as I,g as j,T as A}from"./app-CVoClgp2.js";import{s as h}from"./index-BAjSng_Z.js";import{a as E}from"./index-TQ1XnRYy.js";import{_ as z}from"./Datatable-Bjq-nK-Z.js";import{a as F,_ as r}from"./Modal-iYoTegyI.js";import{_ as R}from"./AppLayout-CknTXiVX.js";import{S as O,a as L}from"./toasts-CuGasqAw.js";import"./index-S3wMbIKn.js";import"./index-S0dC_EdT.js";import"./index-DA2cPpKO.js";import"./index-Cn2rJCT0.js";import"./index-D1cIKt4i.js";import"./index-BEjaQyAv.js";import"./index-Dwt86Gyw.js";import"./postcss-NpiAlmoL.js";import"./index-D0p7Kf-b.js";import"./index-x07pjQ5T.js";import"./index-6AZkCY4K.js";import"./index-B9uxPMIC.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./index-nyYrkNEB.js";import"./index-BNpt19ok.js";import"./index-dFji7RjC.js";import"./index-CHek6viD.js";const M={class:"flex gap-4"},G={class:"flex flex-col w-1/3 gap-y-4"},H={class:"flex flex-wrap gap-4 w-full justify-between"},Q={class:"flex items-center gap-2"},W={class:"flex items-center gap-2"},q={key:0,class:"w-2/3 col-sapn-1 md:col-span-3 border rounded-lg"},J={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},K={class:"h-[50vh] overflow-y-auto"},X={class:"justify-between w-full px-2 gap-x-2 grid grid-cols-8"},Y=["onUpdate:modelValue"],Z={class:"flex gap-x-2"},Se={__name:"Index",props:{proveedores:Array},setup(w){const{toast:f}=L(),d=v(!1),y={action:()=>{d.value=!0,o.reset()}},a=v("Dinero"),C=[{action:t=>{d.value=!0,o.services=t.services.map(e=>e.pivot),o.id=t.id,o.nit=t.nit,o.nombre=t.nombre,o.penalidad_no_show=t.penalidad_no_show,o.penalidad_cancelacion=t.penalidad_cancelacion,a.value=t.type_penalidad_cost,o.direccion=t.direccion,o.telefono=t.telefono},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:t=>{O.fire({title:"Eliminar Proveedor",text:"Estas seguro de eliminar este proveedor?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(e=>{e.isConfirmed&&o.delete(route("proveedors.destroy",t.id),{onSuccess:()=>{f("error","Proveedor Eliminado")}})})},severity:"danger",icon:"fa-solid fa-trash text-sm"}],D=[{field:"nombre",header:"Nombre",filter:!0},{field:"nit",header:"NIT",filter:!0},{field:"telefono",header:"Telefono",filter:!0}],b=v([]);(()=>{axios.get(route("get.services")).then(t=>{b.value=t.data.services})})();const o=T({id:null,nombre:"",direccion:"a.",nit:"",telefono:"",type_penalidad_cost:"",penalidad_no_show:"",penalidad_cancelacion:"",services:[]}),P=()=>{o.services.push({service_id:"",concepto:"",value:""})},S=t=>{o.services.splice(t,1)},U=()=>{o.type_penalidad_cost=a.value,o.id?o.put(route("proveedors.update",o.id),{onSuccess:()=>{o.reset(),d.value=!1,f("success","Proveedor Actualizado")}}):o.post(route("proveedors.store"),{onSuccess:()=>{o.reset(),f("success","Proveedor Creado")}})};return(t,e)=>{const _=E,c=h,N=A;return p(),m(g,null,[i(R,null,{default:x(()=>[i(z,{data:w.proveedores,actions:C,columnas:D,add:y,title:"proveedores"},null,8,["data"])]),_:1}),i(F,{visible:d.value,"onUpdate:visible":e[9]||(e[9]=l=>d.value=l),"close-on-escape":"true",title:"Añadir Proveedor",width:"80vw"},{footer:x(()=>[s("div",Z,[i(c,{severity:"success",label:"Guardar",onClick:U}),i(c,{severity:"danger",label:"Cancelar",onClick:e[8]||(e[8]=l=>d.value=!1)})])]),default:x(()=>[s("div",M,[s("div",G,[e[13]||(e[13]=s("h1",{class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"}," Datos del Proveedor ",-1)),i(r,{label:"Nombre",class:"w-full",modelValue:n(o).nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>n(o).nombre=l)},null,8,["modelValue"]),i(r,{label:"NIT",class:"w-full",modelValue:n(o).nit,"onUpdate:modelValue":e[1]||(e[1]=l=>n(o).nit=l)},null,8,["modelValue"]),i(r,{label:"Telefono",class:"w-full",modelValue:n(o).telefono,"onUpdate:modelValue":e[2]||(e[2]=l=>n(o).telefono=l)},null,8,["modelValue"]),s("div",H,[e[12]||(e[12]=s("label",{for:""},"Politicas",-1)),s("div",Q,[i(_,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value=l),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),e[10]||(e[10]=s("label",{for:"Dinero"},"Dinero",-1))]),s("div",W,[i(_,{modelValue:a.value,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value=l),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje",size:"Normal"},null,8,["modelValue"]),e[11]||(e[11]=s("label",{for:"Porcentaje",class:"text-sm"},"Porcentaje",-1))])]),i(r,{label:"Penalización por NO SHOW",type:"number",modelValue:n(o).penalidad_no_show,"onUpdate:modelValue":e[5]||(e[5]=l=>n(o).penalidad_no_show=l),mode:a.value=="Dinero"?"currency":"decimal",suffix:a.value=="Dinero"?"":"%",min:"0",max:a.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"]),i(r,{label:"Penalización por CANCELACIÓN",type:"number",modelValue:n(o).penalidad_cancelacion,"onUpdate:modelValue":e[6]||(e[6]=l=>n(o).penalidad_cancelacion=l),mode:a.value=="Dinero"?"currency":"decimal",suffix:a.value=="Dinero"?"":"%",min:"0",max:a.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"])]),t.$page.props.auth.user.rol=="admin"||t.$page.props.auth.user.rol=="SUPER ADMINISTRADOR"?(p(),m("div",q,[s("h1",J,[e[14]||(e[14]=$(" Servicios ")),i(c,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:e[7]||(e[7]=l=>P())})]),e[15]||(e[15]=s("div",{class:"grid grid-cols-8 w-full font-bold px-2 text-left"},[s("div",{class:"col-span-3 w-full"},"Servicio"),s("div",{class:"col-span-2"},"Concepto"),s("div",{class:""},"Tarifa"),s("div",{class:""})],-1)),s("div",K,[(p(!0),m(g,null,B(n(o).services,(l,k)=>(p(),m("div",X,[i(r,{type:"dropdown",class:"col-span-3",modelValue:l.service_id,"onUpdate:modelValue":u=>l.service_id=u,"option-label":"title","option-value":"id",options:b.value},null,8,["modelValue","onUpdate:modelValue","options"]),i(r,{class:"w-full col-span-2",modelValue:l.concept,"onUpdate:modelValue":u=>l.concept=u},null,8,["modelValue","onUpdate:modelValue"]),V(s("input",{type:"number",class:"w-full rounded-md h-10 col-span-2","onUpdate:modelValue":u=>l.value=u},null,8,Y),[[I,l.value]]),V(i(c,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:u=>S(k)},null,8,["onClick"]),[[N,"Quitar"]])]))),256))])])):j("",!0)])]),_:1},8,["visible"])],64)}}};export{Se as default};

import{d as v,T as k,ax as U,Q as u,ag as x,e as j,o as _,f as b,b as o,w as r,u as l,F as C,a as e,h as S,t as d,i as A,k as O,J as Q}from"./app-qsU8nq1M.js";import{s as E}from"./index-8_W5WTQl.js";import{_ as I}from"./AppLayout-Cs4jPY1A.js";import{_ as R}from"./Datatable-DWMtM8Dw.js";import{s as z}from"./index-17m6aBcH.js";import{_ as w}from"./Modal-Bbuhj8t5.js";import{_ as g}from"./Input-BUr7DpP-.js";import{a as J}from"./toasts-KsEkSVTM.js";import"./index-D88UEbpO.js";import"./index-CWAUscuP.js";import"./index-BI9z6amO.js";import"./postcss-bv_1MzzM.js";const M={class:"h-[99vh]"},G=e("span",{class:"text-xl font-bold white-space-nowrap"}," Modificar Servicio",-1),H=e("i",{class:"fa-solid fa-plus"},null,-1),K={class:"text-2xl font-bold my-4"},W={class:"italic text-xs mt-1 mb-4"},X={class:"italic text-xs mt-1"},Y=e("span",{class:"text-xl font-bold white-space-nowrap"}," Bloqueos",-1),Z=e("i",{class:"fa-solid fa-lock"},null,-1),ee={class:"text-2xl text-center text-amber-600 font-bold my-4"},te={key:0,class:"text-center text-gray-500"},se={key:1,class:"flex flex-col gap-y-2"},ae=e("div",{class:"flex justify-between font-bold"},[e("p",null," Razón "),e("p",null," Fecha Inicio "),e("p",null," Fecha Fin "),e("p",null," Quitar ")],-1),oe={class:"flex justify-between border-b"},le=e("p",null," Cierre del Servicio ",-1),ie={class:"flex justify-between gap-x-2 my-2"},re={class:"w-full"},ne={class:"w-full"},ce=e("label",{for:"",class:"font-bold"},"Seleccione el Rango de bloque o del servicio",-1),Ce={__name:"Index",props:{services:Array},setup(V){const{toast:y}=J();v([]);const B={action:()=>{u.visit(route("services.create"))}},c=k({range:""}),f=v(!1),h=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),F=[{header:"Nombre",field:"title",filter:!0},{header:"Descripción",field:"description",type:"html",filter:!0},{header:"Precio Adultos",field:"adults_price",type:"currency",filter:!0},{header:"Tarifa Adultos",field:"adult_tarifa",type:"currency",filter:!0},{header:"Precio Niños",field:"boys_price",type:"currency",filter:!0},{header:"Bloqueado",field:"is_locked",type:"boolean",filter:!0},{header:"Tarifa Niños",field:"boy_tarifa",type:"currency",filter:!0}],q=U();v(!1);const n=k({service_id:"",adult_tarifa:0,boys_tarifa:0}),i=v({}),m=v(!1),D=[{action:a=>{u.visit(route("services.show",a.slug))},show:x().props.auth.user.rol=="admin",severity:"primary",icon:"fa-solid fa-eye text-sm",label:"Ver"},{action:a=>{f.value=!0,i.value=a},show:x().props.auth.user.rol=="admin",severity:"warn",icon:"fa-solid fa-lock",label:"Bloqueos"},{action:a=>{x().props.auth.user.rol=="admin"?u.visit(route("services.edit",a.slug)):(m.value=!0,i.value=a,n.service_id=a.id,n.adult_tarifa=a.adult_tarifa,n.boys_tarifa=a.boy_tarifa)},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:(a,t)=>{q.require({target:t.currentTarget,message:"Seguro de Eliminar el Servicio "+a.title+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{console.log(a),u.delete(route("services.destroy",a.id),{onSuccess:()=>{y("success","Servicio eliminado con exito")}})}})},show:x().props.auth.user.rol=="admin",severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],T=()=>{n.post(route("custom.product"),{onSuccess:()=>{y("success","Tarifa creada con exito"),m.value=!1}})},N=()=>{u.post(route("services.lock",i.value.slug),{start_date:c.range[0],end_date:c.range[1]},{onSuccess:()=>{y("success","Servicio Bloqueado con exito"),f.value=!1}})},P=a=>{u.post(route("services.unlock",a),{},{onSuccess:()=>{y("success","Bloque Quitado Exitosamente")}})};return(a,t)=>{const p=E,$=j("VueDatePicker"),L=Q;return _(),b(C,null,[o(I,{title:"Services"},{default:r(()=>[e("div",M,[o(R,{add:B,columnas:F,data:V.services,routecreate:"services.create",actions:D,title:"Servicios"},null,8,["data"])])]),_:1}),o(w,{visible:m.value,"onUpdate:visible":t[3]||(t[3]=s=>m.value=s)},{title:r(()=>[G]),icon:r(()=>[H]),footer:r(()=>[o(p,{onClick:T,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),o(p,{onClick:t[2]||(t[2]=s=>m.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:r(()=>[e("h3",K,[S(" Agregar Tarifa a "),e("strong",null,d(i.value.title),1)]),o(g,{label:"Tarifa para Adultos",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:l(n).adult_tarifa,"onUpdate:modelValue":t[0]||(t[0]=s=>l(n).adult_tarifa=s)},null,8,["modelValue"]),e("div",W," La tariafa Base es de "+d(l(h).format(i.value.adults_price)),1),o(g,{label:"Tarifa para niños",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:l(n).boys_tarifa,"onUpdate:modelValue":t[1]||(t[1]=s=>l(n).boys_tarifa=s)},null,8,["modelValue"]),e("span",X," La tariafa Base es de "+d(l(h).format(i.value.boys_price)),1)]),_:1},8,["visible"]),o(w,{visible:f.value,"onUpdate:visible":t[7]||(t[7]=s=>f.value=s)},{title:r(()=>[Y]),icon:r(()=>[Z]),footer:r(()=>[o(p,{onClick:N,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),o(p,{onClick:t[6]||(t[6]=s=>f.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:r(()=>[e("h3",ee,[S(" Bloqueos del Servicio "),e("strong",null,d(i.value.title),1)]),i.value.locks.length==0?(_(),b("div",te,"No hay bloqueos")):(_(),b("div",se,[ae,(_(!0),b(C,null,A(i.value.locks,s=>(_(),b("div",oe,[le,e("p",null,d(s.start_date),1),e("p",null,d(s.end_date),1),e("p",null,[O(o(p,{icon:"fa-solid fa-xmark-circle",onClick:ue=>P(s.id),text:"",severity:"danger"},null,8,["onClick"]),[[L,"Quitar Bloqueo"]])])]))),256))])),e("div",ie,[e("div",re,[o(g,{label:"Razón del Bloqueo",modelValue:l(c).reason,"onUpdate:modelValue":t[4]||(t[4]=s=>l(c).reason=s)},null,8,["modelValue"])]),e("div",ne,[ce,o($,{modelValue:l(c).range,"onUpdate:modelValue":t[5]||(t[5]=s=>l(c).range=s),range:{},"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1},null,8,["modelValue"])])])]),_:1},8,["visible"]),o(l(z))],64)}}};export{Ce as default};

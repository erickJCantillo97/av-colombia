import{ai as E,d as O,aj as T,C as I,o as u,f as c,b as r,w as m,a as t,t as l,k as b,g as C,u as d,F as B,i as U,W as k,T as P}from"./app-CVuIAcf5.js";import{s as M}from"./index-DIQMHo1s.js";import{s as H}from"./index-CO-uMOzT.js";import{s as W}from"./index-B9_0hAyC.js";import{S as p,a as z}from"./toasts-CuGasqAw.js";import{a as h,_ as G}from"./Modal-C8PK3OXL.js";const q={class:"flex items-center gap-2"},J={class:"font-bold text-lg"},K={class:"flex flex-col gap-y-1.5 text-sm"},Q={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},X={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Y={key:0,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Z={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},_={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ee={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},te={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},oe=["href"],se={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},le={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ie={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ne={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},re={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},de={key:1,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ae={key:2,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ue={key:3,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ce={class:"flex flex-col border py-1 bg-white/30 rounded-md px-2"},ve={class:"text-lg flex w-full justify-between items-center mt-2"},fe={class:"rounded-full bg-green-800 text-white px-1.5 py-0.5 text-xs fles items-center justify-center"},me={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},be={class:"flex flex-col items-center"},pe={class:"grid grid-cols-3 md:grid-cols-6 gap-2"},ge={class:"flex flex-col gap-y-2"},xe={class:"flex flex-col gap-y-1"},we={key:0,class:"flex items-center gap-x-2"},ye={key:1},Ce={class:"flex items-center gap-2"},Se={class:"flex justify-end gap-2"},De={__name:"viewBooking",props:E({service:Object,proveedors:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const{toast:g}=z(),y=o,v=O(null),V=T(o,"modelValue"),x=O(!1),n=I({service:y.service.id,current_id:"",new_id:"",state:"",note:"",terminated:!0,value:""}),w=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),D=()=>{p.fire({title:"Cancelar Servicio",input:"date",inputLabel:"Fecha de Cancelaci贸n",showCancelButton:!0,confirmButtonText:"Cancelar Servicio",showLoaderOnConfirm:!0,preConfirm:async i=>{await k.post(route("set.states"),{service:y.service.id,state:"CANCELADA",date:i,terminated:!0})},allowOutsideClick:()=>!p.isLoading()}).then(i=>{i.isConfirmed&&g("success","Reserva Cancelada")})},S=(i,e)=>{p.fire({title:i,text:"Estas seguro de realizar esta acci贸n?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(a=>{a.isConfirmed&&(p.fire({title:i,text:"Esta reserva ha sido "+i+".",icon:"success"}),k.post(route("set.states"),{service:y.service.id,state:i,terminated:e},{onSuccess:()=>{g("success","Reserva "+i)}}))})},A=()=>{p.fire({title:"Cambio de Fecha",input:"date",inputLabel:"Nueva Fecha",showCancelButton:!0,confirmButtonText:"Cambiar Fecha",showLoaderOnConfirm:!0,preConfirm:async i=>{await k.post(route("set.states"),{service:y.service.id,state:"CAMBIO DE FECHA",date:i,terminated:!1})},allowOutsideClick:()=>!p.isLoading()}).then(i=>{i.isConfirmed&&g("success","Fecha Cambiada")})},F=i=>{if(i==null||i==null)return"Sin definir";var e=new Date(new Date(i).getTime()+new Date(i).getTimezoneOffset()*6e4).toLocaleString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"});return e=="30/11/2"?"INDEFINIDO":e},L=()=>{if(!v.value||!n.new_id||!n.value)return g("error","Rellene todos los Campos"),0;n.current_id=v.value.proveedor_id,n.state="REUBICADO",n.terminated=!0,n.post(route("set.states"),{onSuccess:()=>{x.value=!1,n.reset(),g("success","Servicio REUBICADO")}}),console.log(n.current_id)},N=()=>{n.reset(),x.value=!0};return(i,e)=>{const a=W,$=H,R=M,f=P;return u(),c(B,null,[r($,{visible:V.value,"onUpdate:visible":e[6]||(e[6]=s=>V.value=s),"pt:root:class":"!bg-blue-100",header:"Detalles de la actividad",position:"right"},{header:m(()=>[t("div",q,[t("span",J,l(o.service.service),1)])]),footer:m(()=>[t("div",be,[t("div",pe,[b(r(a,{onClick:e[0]||(e[0]=s=>S("reservado",!0)),icon:"fa-solid fa-circle-check",severity:"info"},null,512),[[f,"Reservada",void 0,{top:!0}]]),b(r(a,{onClick:e[1]||(e[1]=s=>S("NO SHOW",!0)),icon:"fa-solid fa-eye-slash",class:"!text-white !bg-yellow-600"},null,512),[[f,"Servicio No show",void 0,{top:!0}]]),b(r(a,{onClick:e[2]||(e[2]=s=>A()),icon:"fa-solid fa-calendar-week",class:"!bg-gray-600 !text-white"},null,512),[[f,"Cambio de Fecha",void 0,{top:!0}]]),b(r(a,{onClick:e[3]||(e[3]=s=>N()),icon:"fa-solid fa-people-arrows",severity:"warn"},null,512),[[f,"Reubicar Servicio",void 0,{top:!0}]]),b(r(a,{onClick:e[4]||(e[4]=s=>D()),icon:"fa-solid fa-xmark-circle",severity:"danger"},null,512),[[f,"Cancelar Servicio",void 0,{top:!0}]]),b(r(a,{onClick:e[5]||(e[5]=s=>S("PROBLEMATICA",!1)),icon:"fa-solid fa-person-dress-burst",class:"flex-auto",severity:"danger"},null,512),[[f,"Servicio Problematico",void 0,{top:!0}]])])])]),default:m(()=>{var s;return[t("div",K,[t("div",Q,[e[14]||(e[14]=t("strong",null,"Fecha del Servicio:",-1)),t("p",null,l(F(o.service.date)),1)]),t("div",X,[e[15]||(e[15]=t("strong",null,"Hora del Servicio:",-1)),t("p",null,l(o.service.hour),1)]),o.service.time_service?(u(),c("div",Y,[e[16]||(e[16]=t("strong",null,"Duraci贸n del Servicio:",-1)),t("p",null,l(o.service.time_service),1)])):C("",!0),t("div",Z,[e[17]||(e[17]=t("strong",null,"Canal de Venta:",-1)),t("p",null,l(o.service.channel.name),1)]),t("div",_,[e[18]||(e[18]=t("strong",null,"Cliente:",-1)),t("p",null,l(o.service.cliente_name),1)]),t("div",ee,[e[19]||(e[19]=t("strong",null,"Ciudad:",-1)),t("p",null,l(o.service.cliente_city),1)]),t("div",te,[e[20]||(e[20]=t("strong",null,"Telelfono:",-1)),t("a",{target:"_blank",href:`https://wa.me/${o.service.cliente_phone}?text=Hola%20,%20mi%20nombre%20es%20*Sandra Gil*,%20Le%20escribo%20desde%20*AV%20COLOMBIA*`},l(o.service.cliente_phone),9,oe)]),t("div",se,[e[21]||(e[21]=t("strong",null,"Edificio:",-1)),t("p",null,l(o.service.cliente_building),1)]),t("div",le,[e[22]||(e[22]=t("strong",null,"Adultos:",-1)),t("p",null,l(o.service.adults),1)]),t("div",ie,[e[23]||(e[23]=t("strong",null,"Ni帽os:",-1)),t("p",null,l(o.service.boys),1)]),t("div",ne,[e[24]||(e[24]=t("strong",null,"Total:",-1)),t("p",null,l(d(w).format(o.service.total)),1)]),t("div",re,[e[25]||(e[25]=t("strong",null,"Total Real:",-1)),t("p",null,l(d(w).format(o.service.total_real)),1)]),o.service.user?(u(),c("div",de,[e[26]||(e[26]=t("strong",null,"Usuario:",-1)),t("p",null,l((s=o.service.user)==null?void 0:s.name),1)])):C("",!0),o.service.user?(u(),c("div",ae,[e[27]||(e[27]=t("strong",null,"Fecha de reserva:",-1)),t("p",null,l(new Date(o.service.created_at).toLocaleDateString("es-CO")),1)])):C("",!0),o.service.fecha_cancelacion?(u(),c("div",ue,[e[28]||(e[28]=t("strong",null,"Fecha de Cancelaci贸n:",-1)),t("p",null,l(o.service.fecha_cancelacion),1)])):C("",!0),t("div",ce,[e[29]||(e[29]=t("strong",null,"Observacion:",-1)),t("p",null,l(o.service.observations),1)]),t("div",ve,[e[30]||(e[30]=t("p",{class:"font-bold"},"Proveedores",-1)),t("p",fe,l(o.service.proveedors.length),1)]),(u(!0),c(B,null,U(o.service.proveedors,j=>(u(),c("div",me,[t("p",null,l(j.proveedor),1),t("p",null,l(d(w).format(j.cost)),1)]))),256))])]}),_:1},8,["visible"]),r(G,{modelValue:x.value,"onUpdate:modelValue":e[13]||(e[13]=s=>x.value=s),title:"Reubicar Servicio","close-on-escape":""},{default:m(()=>[t("div",ge,[t("span",xe,[e[33]||(e[33]=t("label",{for:"",class:"font-bold"}," Proveedor Actual",-1)),r(R,{placeholder:"Proveedor Actual",options:o.service.proveedors,label:"Proveedor Actual",modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=s=>v.value=s),"option-label":"proveedor"},{value:m(s=>[s.value?(u(),c("div",we,[t("div",null,l(v.value.proveedor),1),e[31]||(e[31]=t("span",null,"-",-1)),t("div",null,l(d(w).format(v.value.cost)),1)])):(u(),c("span",ye,l(s.placeholder),1))]),option:m(({option:s})=>[t("div",Ce,[t("span",null,l(s.proveedor),1),e[32]||(e[32]=t("span",null,"-",-1)),t("span",null,l(d(w).format(s.cost)),1)])]),_:1},8,["options","modelValue"])]),r(h,{"option-label":"nombre","option-value":"id",type:"dropdown",label:"Nuevo Proveedor",modelValue:d(n).new_id,"onUpdate:modelValue":e[8]||(e[8]=s=>d(n).new_id=s),options:o.proveedors},null,8,["modelValue","options"]),r(h,{label:"Valor",modelValue:d(n).value,"onUpdate:modelValue":e[9]||(e[9]=s=>d(n).value=s),type:"number",mode:"currency"},null,8,["modelValue"]),r(h,{label:"Nota",modelValue:d(n).note,"onUpdate:modelValue":e[10]||(e[10]=s=>d(n).note=s),type:"textarea",mode:"currency"},null,8,["modelValue"]),t("div",Se,[r(a,{onClick:e[11]||(e[11]=s=>x.value=!1),label:"Cancelar",severity:"danger",icon:"fa-solid fa-xmark"}),r(a,{onClick:e[12]||(e[12]=s=>L()),label:"Guardar",severity:"success",icon:"fa-solid fa-save"})])])]),_:1},8,["modelValue"])],64)}}};export{De as _};

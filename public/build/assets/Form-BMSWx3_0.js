var _=Object.defineProperty;var w=(s,r,l)=>r in s?_(s,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[r]=l;var a=(s,r,l)=>w(s,typeof r!="symbol"?r+"":r,l);import{s as B}from"./index-DBk3iS34.js";import{s as V}from"./index-Dh7N-gBl.js";import{s as x}from"./index-Cdyh62Kz.js";import{s as h}from"./index-3H76O5HN.js";import{d,x as U,A as C,B as I,f,o as g,b as p,w as u,a as n,u as i,t as c,h as D,k as M}from"./app-CotVKWk0.js";import{S as N}from"./Service-CQKC97Bh.js";import{g as $}from"./Toats-RcJDUpcK.js";import"./index-BF37pvTL.js";import"./index-YXukCeeU.js";import"./index-UEClM6eP.js";import"./index-BWYTVWxu.js";import"./index-DHSGFjLr.js";import"./index-CfY4crLb.js";import"./index-BKqmO3cu.js";import"./index-GubL2Bdu.js";import"./index-B8KAZGAJ.js";import"./index-CMUy-fQU.js";import"./sweetalert2.esm.all-DV3w3JmD.js";class P{constructor(r){a(this,"proveedors",d([]));a(this,"loading",d(!1));a(this,"bookingService",d());a(this,"proveedorSelected",d());a(this,"proveedorsByBookingService",d([]));a(this,"form",U({p:null,booking_service_id:null,proveedor_id:null,cost:0,concept:"",discount:0}));this.bookingService.value=r,this.getProveedorByBookingService()}async getProveedorByBookingService(){const{data:r}=await C.get(route("get.proveedor.by.booking.service",this.bookingService.value.id));this.proveedorsByBookingService.value=r.proveedors}calculateCost(){this.form.cost=this.form.p.pivot.value*this.bookingService.value.adults}async submit(){this.form.proveedor_id=this.form.p.id,this.form.booking_service_id=this.bookingService.value.id,this.form.concept=this.form.p.pivot.concept,this.form.p=null,this.form.post(route("BookingServiceProveedors.store"),{onSuccess:()=>{$("Proveedor agregado"),this.form.reset()}})}}const j={key:0},A={key:1},E={class:"flex gap-x-2"},to={__name:"Form",props:{bookingService:Object},setup(s){const r=new N,l=s,b=d([]),t=new P(l.bookingService);return I(async()=>{var m;b.value=await r.getProveedorsByService((m=l.bookingService)==null?void 0:m.service_id)}),(m,o)=>{const k=h,v=x,S=V,y=B;return g(),f("form",{class:"w-full flex justify-between gap-x-4",onSubmit:o[4]||(o[4]=M((...e)=>i(t).submit&&i(t).submit(...e),["prevent"]))},[p(v,{class:"w-full"},{default:u(()=>[p(k,{options:b.value,inputId:"proveedor",onChange:o[0]||(o[0]=e=>i(t).calculateCost()),modelValue:i(t).form.p,"onUpdate:modelValue":o[1]||(o[1]=e=>i(t).form.p=e),variant:"filled",placeholder:"Selecciona un proveedor",class:"w-full","option-label":"nombre"},{value:u(e=>[e.value?(g(),f("span",j,c(e.value.nombre)+" - "+c(e.value.pivot.concept),1)):(g(),f("span",A,c(e.placeholder),1))]),option:u(e=>[n("div",E,[n("span",null,c(e.option.nombre)+" - ",1),n("span",null,c(e.option.pivot.concept)+" - ",1),n("span",null,c(e.option.pivot.value),1)])]),_:1},8,["options","modelValue"]),o[5]||(o[5]=n("label",{for:"proveedor"},"Proveedor - Concepto",-1))]),_:1}),p(v,{class:"w-full"},{default:u(()=>[p(S,{modelValue:i(t).form.cost,"onUpdate:modelValue":o[2]||(o[2]=e=>i(t).form.cost=e),inputId:"price_input",mode:"currency",currency:"USD",locale:"en-US",variant:"filled",class:"w-full"},null,8,["modelValue"]),o[6]||(o[6]=n("label",{for:"price_input"},"Costo",-1))]),_:1}),p(v,{class:"w-full"},{default:u(()=>[p(S,{modelValue:i(t).form.discount,"onUpdate:modelValue":o[3]||(o[3]=e=>i(t).form.discount=e),inputId:"price_input",mode:"currency",currency:"USD",locale:"en-US",variant:"filled",class:"w-full"},null,8,["modelValue"]),o[7]||(o[7]=n("label",{for:"price_input"},"Descuento",-1))]),_:1}),p(y,{type:"submit",severity:"success",class:"w-full"},{default:u(()=>o[8]||(o[8]=[n("i",{class:"fa-solid fa-plus"},null,-1),D(" Agregar ")])),_:1})],32)}}};export{to as default};

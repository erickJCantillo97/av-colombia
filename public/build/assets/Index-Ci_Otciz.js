import{d as u,T as C,aA as U,x as f,Q as x,e as L,o as v,f as b,b as l,w as n,u as i,F as V,a as e,h as S,t as d,i as j,k as z,z as O}from"./app-Cwk18h0O.js";import{s as E}from"./index-CuBZiOhK.js";import{_ as I}from"./AppLayout-CdOjhrqx.js";import{_ as Q}from"./Datatable-DkP0M0Cg.js";import{s as R}from"./index-CPQF7RF4.js";import{_ as w}from"./Modal-DYwHLeqg.js";import{_ as h}from"./Input-BLkfb8OP.js";import{a as M}from"./toasts-CTe7CkCp.js";import"./index-CzVTYdSB.js";import"./index-BDp1lyBj.js";import"./index-CYHM27kX.js";import"./index-BciacDg5.js";import"./index-DLDK9VCd.js";import"./index--ZS-o7QG.js";import"./index-CuqMR3nV.js";import"./index-B4bMz8we.js";import"./useCommonUtilities-NbiuDOAU.js";import"./postcss-hZAURg84.js";import"./sweetalert2.esm.all-DOYwHpwi.js";const G={class:"h-[99vh]"},H=e("span",{class:"text-xl font-bold white-space-nowrap"}," Modificar Servicio",-1),J=e("i",{class:"fa-solid fa-plus"},null,-1),K={class:"text-2xl font-bold my-4"},W={class:"italic text-xs mt-1 mb-4"},X={class:"italic text-xs mt-1"},Y=e("span",{class:"text-xl font-bold white-space-nowrap"}," Bloqueos",-1),Z=e("i",{class:"fa-solid fa-lock"},null,-1),ee={class:"text-2xl text-center text-amber-600 font-bold my-4"},te={key:0,class:"text-center text-gray-500"},se={key:1,class:"flex flex-col gap-y-2"},ae=e("div",{class:"flex justify-between font-bold"},[e("p",null," Razón "),e("p",null," Fecha Inicio "),e("p",null," Fecha Fin "),e("p",null," Quitar ")],-1),oe={class:"flex justify-between border-b"},ie={class:"flex justify-between gap-x-2 my-2"},le={class:"w-full"},re={class:"w-full"},ne=e("label",{for:"",class:"font-bold"},"Seleccione el Rango de bloque o del servicio",-1),ce={class:"flex items-center gap-x-2"},de=e("i",{class:"fa-solid fa-minus"},null,-1),ue={class:"text-xs text-red-500"},Ae={__name:"Index",props:{services:Array},setup(B){const{toast:y}=M();u([]);const F={action:()=>{f.visit(route("services.create"))}},a=C({start_date:"",end_date:"",description:""}),m=u(!1),g=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),q=[{header:"Nombre",field:"title",filter:!0},{header:"Descripción",field:"description",type:"html",filter:!0},{header:"Precio Adultos",field:"adults_price",type:"currency",filter:!0},{header:"Tarifa Adultos",field:"adult_tarifa",type:"currency",filter:!0},{header:"Precio Niños",field:"boys_price",type:"currency",filter:!0},{header:"Tarifa Niños",field:"boy_tarifa",type:"currency",filter:!0}],D=U();u(!1);const c=C({service_id:"",adult_tarifa:0,boys_tarifa:0}),r=u({}),p=u(!1);u("");const T=[{action:o=>{f.visit(route("services.show",o.slug))},show:x().props.auth.user.rol=="admin",severity:"primary",icon:"fa-solid fa-eye text-sm",label:"Ver"},{action:o=>{m.value=!0,a.reset(),r.value=o},show:x().props.auth.user.rol=="admin",severity:"warn",icon:"fa-solid fa-lock",label:"Bloqueos"},{action:o=>{x().props.auth.user.rol=="admin"?f.visit(route("services.edit",o.slug)):(p.value=!0,r.value=o,c.service_id=o.id,c.adult_tarifa=o.adult_tarifa,c.boys_tarifa=o.boy_tarifa)},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:(o,t)=>{D.require({target:t.currentTarget,message:"Seguro de Eliminar el Servicio "+o.title+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{console.log(o),f.delete(route("services.destroy",o.id),{onSuccess:()=>{y("success","Servicio eliminado con exito")}})}})},show:x().props.auth.user.rol=="admin",severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],A=()=>{c.post(route("custom.product"),{onSuccess:()=>{y("success","Tarifa creada con exito"),p.value=!1}})},N=()=>{if(a.description==""){a.errors.description="Ingrese una descripción";return}if(a.start_date==""||a.end_date==""){a.errors.start_date="Seleccione un rango de fechas";return}f.post(route("services.lock",r.value.slug),{start_date:a.start_date,description:a.description,end_date:a.end_date},{onSuccess:()=>{y("success","Servicio Bloqueado con exito"),m.value=!1,a.reset()}})},P=o=>{f.post(route("services.unlock",o),{},{onSuccess:()=>{y("success","Bloque Quitado Exitosamente")}})};return(o,t)=>{const _=E,k=L("VueDatePicker"),$=O;return v(),b(V,null,[l(I,{title:"Services"},{default:n(()=>[e("div",G,[l(Q,{add:F,columnas:q,data:B.services,routecreate:"services.create",actions:T,title:"Servicios"},null,8,["data"])])]),_:1}),l(w,{visible:p.value,"onUpdate:visible":t[3]||(t[3]=s=>p.value=s)},{title:n(()=>[H]),icon:n(()=>[J]),footer:n(()=>[l(_,{onClick:A,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(_,{onClick:t[2]||(t[2]=s=>p.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:n(()=>[e("h3",K,[S(" Agregar Tarifa a "),e("strong",null,d(r.value.title),1)]),l(h,{label:"Tarifa para Adultos",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:i(c).adult_tarifa,"onUpdate:modelValue":t[0]||(t[0]=s=>i(c).adult_tarifa=s)},null,8,["modelValue"]),e("div",W," La tariafa Base es de "+d(i(g).format(r.value.adults_price)),1),l(h,{label:"Tarifa para niños",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:i(c).boys_tarifa,"onUpdate:modelValue":t[1]||(t[1]=s=>i(c).boys_tarifa=s)},null,8,["modelValue"]),e("span",X," La tariafa Base es de "+d(i(g).format(r.value.boys_price)),1)]),_:1},8,["visible"]),l(w,{visible:m.value,"onUpdate:visible":t[8]||(t[8]=s=>m.value=s)},{title:n(()=>[Y]),icon:n(()=>[Z]),footer:n(()=>[l(_,{onClick:N,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(_,{onClick:t[7]||(t[7]=s=>m.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:n(()=>[e("h3",ee,[S(" Bloqueos del Servicio "),e("strong",null,d(r.value.title),1)]),r.value.locks.length==0?(v(),b("div",te,"No hay bloqueos")):(v(),b("div",se,[ae,(v(!0),b(V,null,j(r.value.locks,s=>(v(),b("div",oe,[e("p",null,d(s.description),1),e("p",null,d(s.start_date),1),e("p",null,d(s.end_date),1),e("p",null,[z(l(_,{icon:"fa-solid fa-xmark-circle",onClick:fe=>P(s.id),text:"",severity:"danger"},null,8,["onClick"]),[[$,"Quitar Bloqueo"]])])]))),256))])),e("div",ie,[e("div",le,[l(h,{label:"Razón del Bloqueo",modelValue:i(a).description,"onUpdate:modelValue":t[4]||(t[4]=s=>i(a).description=s),"error-message":i(a).errors.description},null,8,["modelValue","error-message"])]),e("div",re,[ne,e("div",ce,[l(k,{modelValue:i(a).start_date,"onUpdate:modelValue":t[5]||(t[5]=s=>i(a).start_date=s),"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota"},null,8,["modelValue"]),de,l(k,{modelValue:i(a).end_date,"onUpdate:modelValue":t[6]||(t[6]=s=>i(a).end_date=s),"min-date":i(a).start_date,"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota"},null,8,["modelValue","min-date"])]),e("span",ue,d(i(a).errors.start_date),1)])])]),_:1},8,["visible"]),l(i(R))],64)}}};export{Ae as default};

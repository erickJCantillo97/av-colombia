import{d as k,x as F,q as h,B as N,dL as R,f as r,o as n,g as c,b as f,a as o,h as w,w as v,u as l,F as C,i as V,t as d,m as T,v as L,c as B,S as O,dW as U}from"./app-RmTUfo0g.js";import{C as j,e as z}from"./es-DKME635b.js";import{_ as A}from"./logo-Nkjt-xP7.js";/* empty css                                                                    */import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as P}from"./index-Ch_1BvdC.js";import"./index-D1MMzij-.js";import"./index-B1APa7r2.js";import"./index-BRpAlZIW.js";const I={class:"flex flex-col gap-y-2"},M={key:0,class:"flex flex-col gap-y-2"},H={class:"flex flex-col gap-y-1"},W={class:"flex flex-col text-md w-full"},G={class:"text-xs"},J={class:"text-xs italic"},K={class:"flex items-center w-full justify-end text-center"},Q=["onClick"],X=["onUpdate:modelValue"],Y=["onClick"],Z={class:"grid grid-cols-3 gap-2"},ee={key:0},te={key:1},oe={class:"text-2xl font-bold text-green-500 flex items-center gap-x-4"},se={class:"text-xl font-bold text-green-500"},ae={key:1,class:"flex flex-col items-center justify-center gap-y-4"},le={__name:"miniBooking",props:["product","availabilities"],setup(D){const u=D,i=k(!1),p=k(null),S={minDate:"today",mode:"single",locale:z.Spanish},b=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),s=F({date:"",persons:[],time:"",service_id:u.product.id,service_name:u.product.title,price_type:u.product.price_type}),$=h(()=>{var a=u.availabilities.find(t=>t.start_date<=s.date&&t.end_date>=s.date)??[],e=[];return a.horarios&&(e=a.horarios.filter(t=>t.day_number==new Date(s.date).getDay()+1).map(t=>({start:t.start,end:t.end,horario:t}))),E(),e}),E=()=>{var a=u.availabilities.find(e=>e.start_date<=s.date&&e.end_date>=s.date)?.precies??[];s.persons=a.map(e=>({id:e.id,min:e.min,max:e.max,value:e.value,cant:0}))},g=h(()=>{var a=0;return s.persons.forEach(e=>{a+=e.cant*e.value}),a}),y=(a,e)=>{var t=s.persons[a];e==-1&&t.cant>0?t.cant-=1:e==1&&t.cant<t.max&&(t.cant+=1)},_=a=>{if(i.value&&p.value&&!p.value.contains(a.target)){const e=a.target.closest("button");(!e||!e.textContent.includes("Reservar"))&&(i.value=!1)}};return N(()=>{document.addEventListener("click",_)}),R(()=>{document.removeEventListener("click",_)}),(a,e)=>(n(),r("div",null,[i.value?c("",!0):(n(),r("button",{key:0,class:"md:hidden fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-900 hover:bg-gray-700 text-white px-8 py-3 rounded-full shadow-lg z-50 font-bold transition-colors",onClick:e[0]||(e[0]=t=>i.value=!0)},e[3]||(e[3]=[o("i",{class:"fa-solid fa-calendar-plus mr-2"},null,-1),w(" Reservar ")]))),f(U,{name:"slide-up"},{default:v(()=>[i.value?(n(),r("div",{key:0,ref_key:"bookingPanel",ref:p,class:"p-4 shadow-xl w-full rounded-lg fixed bottom-4 bg-white gap-y-2 overflow-y-auto z-50"},[o("button",{class:"absolute top-2 right-2 text-gray-500 hover:text-red-500 text-2xl transition-colors",onClick:e[1]||(e[1]=t=>i.value=!1)}," × "),e[10]||(e[10]=o("p",{class:"font-extrabold text-center text-3xl capitalize text-green-700"}," Reservar ",-1)),o("div",I,[e[4]||(e[4]=o("label",{for:"date",class:"font-bold"},"Fecha",-1)),f(l(j),{modelValue:l(s).date,"onUpdate:modelValue":e[2]||(e[2]=t=>l(s).date=t),config:S,class:"text-center rounded-lg shadow-lg border-2 border-black"},null,8,["modelValue"])]),e[11]||(e[11]=o("hr",null,null,-1)),l(s).date?(n(),r("div",M,[e[6]||(e[6]=o("div",null,[o("p",{class:"font-bold"},"¿Para cuantos?"),o("p",{class:"text-xs italic"},"Seleccione la cantidad de personas")],-1)),o("div",H,[(n(!0),r(C,null,V(l(s).persons,(t,m)=>(n(),r("div",{key:t.id,class:"p-3 flex items-center justify-between font-bold rounded-lg w-full border-b"},[o("div",W,[o("span",G,d(t.min??0)+" - "+d(t.max)+" Años",1),o("span",J,"Valor: "+d(l(b).format(t.value)),1)]),o("div",K,[o("button",{class:"text-red-500 border border-red-400 font-bold rounded-full px-2.5 py-1",onClick:x=>y(m,-1)}," - ",8,Q),T(o("input",{type:"text","onUpdate:modelValue":x=>t.cant=x,disabled:"",min:"0",class:"w-full rounded-xl right-0 border-0 focus:ring-0 text-center"},null,8,X),[[L,t.cant]]),o("button",{class:"text-green-500 border border-green-500 font-bold rounded-full px-2.5 py-1",onClick:x=>y(m,1)}," + ",8,Y)])]))),128))]),e[7]||(e[7]=o("p",{class:"font-bold"},"¿A que hora?",-1)),o("div",Z,[(n(!0),r(C,null,V($.value,t=>(n(),B(l(P),{outlined:l(s).time!=t.horario.id,key:t.horario.id,onClick:m=>l(s).time=t.horario.id},{default:v(()=>[o("span",null,d(t.start.slice(0,5)),1),t.end?(n(),r("span",ee,"-")):c("",!0),t.end?(n(),r("span",te,d(t.end.slice(0,5)),1)):c("",!0)]),_:2},1032,["outlined","onClick"]))),128))]),e[8]||(e[8]=o("hr",null,null,-1)),o("div",oe,[e[5]||(e[5]=o("span",{class:"text-xl font-bold text-green-500"},[o("i",{class:"fa-solid fa-tag rotate-90"}),w(" Total a pagar: ")],-1)),o("span",se,d(l(b).format(g.value)),1)]),f(l(O),{href:a.route("check.out",l(s))},{default:v(()=>[g.value>0&&l(s).time!=""?(n(),B(l(P),{key:0,label:"Reservar",class:"w-full bg-green-500 text-white font-bold rounded-lg shadow-xl"})):c("",!0)]),_:1},8,["href"])])):(n(),r("div",ae,[f(A),e[9]||(e[9]=o("h1",{class:"font-mono font-bold text-xl"},"Seleccione una fecha",-1))]))],512)):c("",!0)]),_:1})]))}},xe=q(le,[["__scopeId","data-v-80930600"]]);export{xe as default};

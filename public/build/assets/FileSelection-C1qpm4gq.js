import{s as U}from"./index-BV4TzN7J.js";import{a as E,s as P}from"./index-C8Nh8EeO.js";import{P as j,Q as M,d as g,f as m,o as p,b as r,w as x,a as o,g as N,F as A,j as T,t as h,I as V}from"./app-BiCF3IzH.js";import"./index-DPRclsah.js";import"./index-BC3nQaCs.js";import"./index-C-LyeXV0.js";import"./index-DFgbQRVa.js";import"./index-jrtRsRMf.js";import"./index-Cz5bFCyd.js";const L={class:"card"},Q={class:"flex flex-wrap justify-between items-center flex-1 gap-4"},R={class:"flex gap-2"},D={class:"flex flex-col gap-8 pt-4"},G={key:0},K={class:"flex flex-wrap gap-4"},O=["alt","src"],q={class:"font-semibold text-ellipsis max-w-60 whitespace-nowrap overflow-hidden"},ae={__name:"FileSelection",props:{accommodation:{type:Object},roomIndex:{type:Number,default:null}},setup(k){const d=k,S=j(),u=M(),v=g(0),z=g(0),b=g([]),w=(t,e,a)=>{e(a),v.value-=parseInt(f(t.size)),z.value=v.value/10},C=t=>{b.value=t.files,b.value.forEach(e=>{v.value+=parseInt(f(e.size))})},F=t=>{t()},$=()=>{u.add({severity:"info",summary:"Success",detail:"Archivo subido",life:3e3})},f=t=>{const i=S.config.locale?.fileSizeTypes||["B","KB","MB","GB"];if(t===0)return`0 ${i[0]}`;const c=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,c)).toFixed(3))} ${i[c]}`},B=t=>{let e=t.files,a="accommodations.images.upload",i={accommodation:d.accommodation.id};d.roomIndex!==null&&(a="accommodations.rooms.images.upload",i.room=d.accommodation.rooms[d.roomIndex].id),V.post(route(a,i),{images:e},{onSuccess:()=>{u.add({severity:"success",summary:"Éxito",detail:"Imágenes subidas exitosamente",life:3e3})},onError:c=>{u.add({severity:"error",summary:"Error",detail:"Error al subir imágenes",life:3e3})}})};return(t,e)=>{const a=P,i=E,c=U;return p(),m("div",L,[r(c,{name:"demo[]",customUpload:"",onUpload:e[0]||(e[0]=l=>$()),multiple:!0,accept:"image/*",maxFileSize:1e6,onUploader:B,onSelect:C},{header:x(({chooseCallback:l,uploadCallback:y,clearCallback:_,files:n})=>[o("div",Q,[o("div",R,[r(a,{onClick:s=>l(),icon:"pi pi-images",size:"small",severity:"primary",label:"Seleccionar"},null,8,["onClick"]),r(a,{label:"Subir",onClick:s=>F(y),icon:"pi pi-cloud-upload",size:"small",severity:"success",disabled:!n||n.length===0},null,8,["onClick","disabled"]),r(a,{label:"Limpiar",onClick:s=>_(),icon:"pi pi-times",size:"small",severity:"danger",disabled:!n||n.length===0},null,8,["onClick","disabled"])]),e[1]||(e[1]=o("h1",{class:"text-lg font-bold"},"Subir Imágenes",-1))])]),content:x(({files:l,uploadedFiles:y,removeUploadedFileCallback:_,removeFileCallback:n})=>[o("div",D,[l.length>0?(p(),m("div",G,[e[2]||(e[2]=o("h5",null,"Pendientes",-1)),o("div",K,[(p(!0),m(A,null,T(l,(s,I)=>(p(),m("div",{key:s.name+s.type+s.size,class:"p-8 rounded-border flex flex-col border border-surface items-center gap-4"},[o("div",null,[o("img",{role:"presentation",alt:s.name,src:s.objectURL,width:"100",height:"50"},null,8,O)]),o("span",q,h(s.name),1),o("div",null,h(f(s.size)),1),r(i,{value:"Pendiente",severity:"warn"}),r(a,{icon:"pi pi-times",onClick:H=>w(s,n,I),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])])):N("",!0)])]),empty:x(()=>[...e[3]||(e[3]=[o("div",{class:"flex items-center justify-center flex-col"},[o("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-xl !text-muted-color"}),o("p",{class:"mt-6 mb-0"},"Arrastrar y soltar imágenes AQUÍ.")],-1)])]),_:1})])}}};export{ae as default};

import{s as ge}from"./index-BN0FKXnc.js";import{_ as be}from"./Datatable-D7x9dvkT.js";import{l as ee,y as I,d as z,fl as ue,p as we,F as j,Q as Ce,O as Ee,A as Z,u as ye,f as O,o as F,a as c,b as T,j as le,n as q,i as Q,t as V,w as G,g as se,h as C,I as de}from"./app-Dn5KsD2c.js";import{s as Re}from"./index-C7qO4omB.js";import{M as Me}from"./Modal-BHVYaxOG.js";import{_ as B}from"./Input-ghybvxy-.js";import"./index-MkQHpa6a.js";import"./index-CT6YQiMJ.js";import"./index-DDLb-JzL.js";import"./index-BAQvh4r0.js";import"./index-Chzc5Pzv.js";import"./index-C2J1GnwE.js";import"./index-DELeNmm2.js";import"./index-iXiE1s_o.js";import"./index-BsLlquhF.js";import"./index-CdvsRzs8.js";import"./index-CMpHijLN.js";import"./index-B9zJXf3V.js";import"./index-EzgByuxJ.js";import"./index-De445YOk.js";import"./index-DR6pQG3P.js";import"./index-CQT-Vu7v.js";import"./useCommonUtilities-BgDhORlD.js";import"./postcss-DzalkE6p.js";import"./postcss-680hWGfA.js";import"./index-DJwtKn6P.js";import"./index-CH91v-_P.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DNTWODPJ.js";import"./index-EoFuTiQD.js";import"./index-DIGlDJNG.js";import"./index-qRuK0Bcv.js";/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * © 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var L=function(){return L=Object.assign||function(v){for(var f,u=1,h=arguments.length;u<h;u++){f=arguments[u];for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&(v[b]=f[b])}return v},L.apply(this,arguments)};var D;(function(i){var v=(function(){function n(r,t,a,e){if(this.version=r,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],r<n.MIN_VERSION||r>n.MAX_VERSION)throw new RangeError("Version value out of range");if(e<-1||e>7)throw new RangeError("Mask value out of range");this.size=r*4+17;for(var l=[],s=0;s<this.size;s++)l.push(!1);for(var s=0;s<this.size;s++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();var p=this.addEccAndInterleave(a);if(this.drawCodewords(p),e==-1)for(var g=1e9,s=0;s<8;s++){this.applyMask(s),this.drawFormatBits(s);var S=this.getPenaltyScore();S<g&&(e=s,g=S),this.applyMask(s)}h(0<=e&&e<=7),this.mask=e,this.applyMask(e),this.drawFormatBits(e),this.isFunction=[]}return n.encodeText=function(r,t){var a=i.QrSegment.makeSegments(r);return n.encodeSegments(a,t)},n.encodeBinary=function(r,t){var a=i.QrSegment.makeBytes(r);return n.encodeSegments([a],t)},n.encodeSegments=function(r,t,a,e,l,s){if(a===void 0&&(a=1),e===void 0&&(e=40),l===void 0&&(l=-1),s===void 0&&(s=!0),!(n.MIN_VERSION<=a&&a<=e&&e<=n.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");var p,g;for(p=a;;p++){var S=n.getNumDataCodewords(p,t)*8,R=b.getTotalBits(r,p);if(R<=S){g=R;break}if(p>=e)throw new RangeError("Data too long")}for(var y=0,A=[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH];y<A.length;y++){var E=A[y];s&&g<=n.getNumDataCodewords(p,E)*8&&(t=E)}for(var w=[],M=0,_=r;M<_.length;M++){var P=_[M];f(P.mode.modeBits,4,w),f(P.numChars,P.mode.numCharCountBits(p),w);for(var U=0,o=P.getData();U<o.length;U++){var d=o[U];w.push(d)}}h(w.length==g);var N=n.getNumDataCodewords(p,t)*8;h(w.length<=N),f(0,Math.min(4,N-w.length),w),f(0,(8-w.length%8)%8,w),h(w.length%8==0);for(var m=236;w.length<N;m^=253)f(m,8,w);for(var x=[];x.length*8<w.length;)x.push(0);return w.forEach(function(Y,k){return x[k>>>3]|=Y<<7-(k&7)}),new n(p,t,x,l)},n.prototype.getModule=function(r,t){return 0<=r&&r<this.size&&0<=t&&t<this.size&&this.modules[t][r]},n.prototype.getModules=function(){return this.modules},n.prototype.drawFunctionPatterns=function(){for(var r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2==0),this.setFunctionModule(r,6,r%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),a=t.length,r=0;r<a;r++)for(var e=0;e<a;e++)r==0&&e==0||r==0&&e==a-1||r==a-1&&e==0||this.drawAlignmentPattern(t[r],t[e]);this.drawFormatBits(0),this.drawVersion()},n.prototype.drawFormatBits=function(r){for(var t=this.errorCorrectionLevel.formatBits<<3|r,a=t,e=0;e<10;e++)a=a<<1^(a>>>9)*1335;var l=(t<<10|a)^21522;h(l>>>15==0);for(var e=0;e<=5;e++)this.setFunctionModule(8,e,u(l,e));this.setFunctionModule(8,7,u(l,6)),this.setFunctionModule(8,8,u(l,7)),this.setFunctionModule(7,8,u(l,8));for(var e=9;e<15;e++)this.setFunctionModule(14-e,8,u(l,e));for(var e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,u(l,e));for(var e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,u(l,e));this.setFunctionModule(8,this.size-8,!0)},n.prototype.drawVersion=function(){if(!(this.version<7)){for(var r=this.version,t=0;t<12;t++)r=r<<1^(r>>>11)*7973;var a=this.version<<12|r;h(a>>>18==0);for(var t=0;t<18;t++){var e=u(a,t),l=this.size-11+t%3,s=Math.floor(t/3);this.setFunctionModule(l,s,e),this.setFunctionModule(s,l,e)}}},n.prototype.drawFinderPattern=function(r,t){for(var a=-4;a<=4;a++)for(var e=-4;e<=4;e++){var l=Math.max(Math.abs(e),Math.abs(a)),s=r+e,p=t+a;0<=s&&s<this.size&&0<=p&&p<this.size&&this.setFunctionModule(s,p,l!=2&&l!=4)}},n.prototype.drawAlignmentPattern=function(r,t){for(var a=-2;a<=2;a++)for(var e=-2;e<=2;e++)this.setFunctionModule(r+e,t+a,Math.max(Math.abs(e),Math.abs(a))!=1)},n.prototype.setFunctionModule=function(r,t,a){this.modules[t][r]=a,this.isFunction[t][r]=!0},n.prototype.addEccAndInterleave=function(r){var t=this.version,a=this.errorCorrectionLevel;if(r.length!=n.getNumDataCodewords(t,a))throw new RangeError("Invalid argument");for(var e=n.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][t],l=n.ECC_CODEWORDS_PER_BLOCK[a.ordinal][t],s=Math.floor(n.getNumRawDataModules(t)/8),p=e-s%e,g=Math.floor(s/e),S=[],R=n.reedSolomonComputeDivisor(l),y=0,A=0;y<e;y++){var E=r.slice(A,A+g-l+(y<p?0:1));A+=E.length;var w=n.reedSolomonComputeRemainder(E,R);y<p&&E.push(0),S.push(E.concat(w))}for(var M=[],_=function(P){S.forEach(function(U,o){(P!=g-l||o>=p)&&M.push(U[P])})},y=0;y<S[0].length;y++)_(y);return h(M.length==s),M},n.prototype.drawCodewords=function(r){if(r.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var t=0,a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(var e=0;e<this.size;e++)for(var l=0;l<2;l++){var s=a-l,p=(a+1&2)==0,g=p?this.size-1-e:e;!this.isFunction[g][s]&&t<r.length*8&&(this.modules[g][s]=u(r[t>>>3],7-(t&7)),t++)}}h(t==r.length*8)},n.prototype.applyMask=function(r){if(r<0||r>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var a=0;a<this.size;a++){var e=void 0;switch(r){case 0:e=(a+t)%2==0;break;case 1:e=t%2==0;break;case 2:e=a%3==0;break;case 3:e=(a+t)%3==0;break;case 4:e=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:e=a*t%2+a*t%3==0;break;case 6:e=(a*t%2+a*t%3)%2==0;break;case 7:e=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&e&&(this.modules[t][a]=!this.modules[t][a])}},n.prototype.getPenaltyScore=function(){for(var r=0,t=0;t<this.size;t++){for(var a=!1,e=0,l=[0,0,0,0,0,0,0],s=0;s<this.size;s++)this.modules[t][s]==a?(e++,e==5?r+=n.PENALTY_N1:e>5&&r++):(this.finderPenaltyAddHistory(e,l),a||(r+=this.finderPenaltyCountPatterns(l)*n.PENALTY_N3),a=this.modules[t][s],e=1);r+=this.finderPenaltyTerminateAndCount(a,e,l)*n.PENALTY_N3}for(var s=0;s<this.size;s++){for(var a=!1,p=0,l=[0,0,0,0,0,0,0],t=0;t<this.size;t++)this.modules[t][s]==a?(p++,p==5?r+=n.PENALTY_N1:p>5&&r++):(this.finderPenaltyAddHistory(p,l),a||(r+=this.finderPenaltyCountPatterns(l)*n.PENALTY_N3),a=this.modules[t][s],p=1);r+=this.finderPenaltyTerminateAndCount(a,p,l)*n.PENALTY_N3}for(var t=0;t<this.size-1;t++)for(var s=0;s<this.size-1;s++){var g=this.modules[t][s];g==this.modules[t][s+1]&&g==this.modules[t+1][s]&&g==this.modules[t+1][s+1]&&(r+=n.PENALTY_N2)}for(var S=0,R=0,y=this.modules;R<y.length;R++){var A=y[R];S=A.reduce(function(M,_){return M+(_?1:0)},S)}var E=this.size*this.size,w=Math.ceil(Math.abs(S*20-E*10)/E)-1;return h(0<=w&&w<=9),r+=w*n.PENALTY_N4,h(0<=r&&r<=2568888),r},n.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var r=Math.floor(this.version/7)+2,t=Math.floor((this.version*8+r*3+5)/(r*4-4))*2,a=[6],e=this.size-7;a.length<r;e-=t)a.splice(1,0,e);return a},n.getNumRawDataModules=function(r){if(r<n.MIN_VERSION||r>n.MAX_VERSION)throw new RangeError("Version number out of range");var t=(16*r+128)*r+64;if(r>=2){var a=Math.floor(r/7)+2;t-=(25*a-10)*a-55,r>=7&&(t-=36)}return h(208<=t&&t<=29648),t},n.getNumDataCodewords=function(r,t){return Math.floor(n.getNumRawDataModules(r)/8)-n.ECC_CODEWORDS_PER_BLOCK[t.ordinal][r]*n.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][r]},n.reedSolomonComputeDivisor=function(r){if(r<1||r>255)throw new RangeError("Degree out of range");for(var t=[],a=0;a<r-1;a++)t.push(0);t.push(1);for(var e=1,a=0;a<r;a++){for(var l=0;l<t.length;l++)t[l]=n.reedSolomonMultiply(t[l],e),l+1<t.length&&(t[l]^=t[l+1]);e=n.reedSolomonMultiply(e,2)}return t},n.reedSolomonComputeRemainder=function(r,t){for(var a=t.map(function(g){return 0}),e=function(g){var S=g^a.shift();a.push(0),t.forEach(function(R,y){return a[y]^=n.reedSolomonMultiply(R,S)})},l=0,s=r;l<s.length;l++){var p=s[l];e(p)}return a},n.reedSolomonMultiply=function(r,t){if(r>>>8||t>>>8)throw new RangeError("Byte out of range");for(var a=0,e=7;e>=0;e--)a=a<<1^(a>>>7)*285,a^=(t>>>e&1)*r;return h(a>>>8==0),a},n.prototype.finderPenaltyCountPatterns=function(r){var t=r[1];h(t<=this.size*3);var a=t>0&&r[2]==t&&r[3]==t*3&&r[4]==t&&r[5]==t;return(a&&r[0]>=t*4&&r[6]>=t?1:0)+(a&&r[6]>=t*4&&r[0]>=t?1:0)},n.prototype.finderPenaltyTerminateAndCount=function(r,t,a){return r&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)},n.prototype.finderPenaltyAddHistory=function(r,t){t[0]==0&&(r+=this.size),t.pop(),t.unshift(r)},n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n})();i.QrCode=v;function f(n,r,t){if(r<0||r>31||n>>>r)throw new RangeError("Value out of range");for(var a=r-1;a>=0;a--)t.push(n>>>a&1)}function u(n,r){return(n>>>r&1)!=0}function h(n){if(!n)throw new Error("Assertion error")}var b=(function(){function n(r,t,a){if(this.mode=r,this.numChars=t,this.bitData=a,t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}return n.makeBytes=function(r){for(var t=[],a=0,e=r;a<e.length;a++){var l=e[a];f(l,8,t)}return new n(n.Mode.BYTE,r.length,t)},n.makeNumeric=function(r){if(!n.isNumeric(r))throw new RangeError("String contains non-numeric characters");for(var t=[],a=0;a<r.length;){var e=Math.min(r.length-a,3);f(parseInt(r.substring(a,a+e),10),e*3+1,t),a+=e}return new n(n.Mode.NUMERIC,r.length,t)},n.makeAlphanumeric=function(r){if(!n.isAlphanumeric(r))throw new RangeError("String contains unencodable characters in alphanumeric mode");var t=[],a;for(a=0;a+2<=r.length;a+=2){var e=n.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a))*45;e+=n.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a+1)),f(e,11,t)}return a<r.length&&f(n.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a)),6,t),new n(n.Mode.ALPHANUMERIC,r.length,t)},n.makeSegments=function(r){return r==""?[]:n.isNumeric(r)?[n.makeNumeric(r)]:n.isAlphanumeric(r)?[n.makeAlphanumeric(r)]:[n.makeBytes(n.toUtf8ByteArray(r))]},n.makeEci=function(r){var t=[];if(r<0)throw new RangeError("ECI assignment value out of range");if(r<128)f(r,8,t);else if(r<16384)f(2,2,t),f(r,14,t);else if(r<1e6)f(6,3,t),f(r,21,t);else throw new RangeError("ECI assignment value out of range");return new n(n.Mode.ECI,0,t)},n.isNumeric=function(r){return n.NUMERIC_REGEX.test(r)},n.isAlphanumeric=function(r){return n.ALPHANUMERIC_REGEX.test(r)},n.prototype.getData=function(){return this.bitData.slice()},n.getTotalBits=function(r,t){for(var a=0,e=0,l=r;e<l.length;e++){var s=l[e],p=s.mode.numCharCountBits(t);if(s.numChars>=1<<p)return 1/0;a+=4+p+s.bitData.length}return a},n.toUtf8ByteArray=function(r){r=encodeURI(r);for(var t=[],a=0;a<r.length;a++)r.charAt(a)!="%"?t.push(r.charCodeAt(a)):(t.push(parseInt(r.substring(a+1,a+3),16)),a+=2);return t},n.NUMERIC_REGEX=/^[0-9]*$/,n.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,n.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n})();i.QrSegment=b})(D||(D={}));(function(i){(function(v){var f=(function(){function u(h,b){this.ordinal=h,this.formatBits=b}return u.LOW=new u(0,1),u.MEDIUM=new u(1,0),u.QUARTILE=new u(2,3),u.HIGH=new u(3,2),u})();v.Ecc=f})(i.QrCode||(i.QrCode={}))})(D||(D={}));(function(i){(function(v){var f=(function(){function u(h,b){this.modeBits=h,this.numBitsCharCount=b}return u.prototype.numCharCountBits=function(h){return this.numBitsCharCount[Math.floor((h+7)/17)]},u.NUMERIC=new u(1,[10,12,14]),u.ALPHANUMERIC=new u(2,[9,11,13]),u.BYTE=new u(4,[8,16,16]),u.KANJI=new u(8,[8,10,12]),u.ECI=new u(7,[0,0,0]),u})();v.Mode=f})(i.QrSegment||(i.QrSegment={}))})(D||(D={}));var H=D,re="L",te={L:H.QrCode.Ecc.LOW,M:H.QrCode.Ecc.MEDIUM,Q:H.QrCode.Ecc.QUARTILE,H:H.QrCode.Ecc.HIGH},Se=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function ae(i){return i in te}function ce(i,v){v===void 0&&(v=0);var f=[];return i.forEach(function(u,h){var b=null;u.forEach(function(n,r){if(!n&&b!==null){f.push("M".concat(b+v," ").concat(h+v,"h").concat(r-b,"v1H").concat(b+v,"z")),b=null;return}if(r===u.length-1){if(!n)return;b===null?f.push("M".concat(r+v,",").concat(h+v," h1v1H").concat(r+v,"z")):f.push("M".concat(b+v,",").concat(h+v," h").concat(r+1-b,"v1H").concat(b+v,"z"));return}n&&b===null&&(b=r)})}),f.join("")}function fe(i,v,f,u){var h=u.width,b=u.height,n=u.x,r=u.y,t=i.length+f*2,a=Math.floor(v*.1),e=t/v,l=(h||a)*e,s=(b||a)*e,p=n==null?i.length/2-l/2:n*e,g=r==null?i.length/2-s/2:r*e,S=null;if(u.excavate){var R=Math.floor(p),y=Math.floor(g),A=Math.ceil(l+p-R),E=Math.ceil(s+g-y);S={x:R,y,w:A,h:E}}return{x:p,y:g,h:s,w:l,excavation:S}}function me(i,v){return i.slice().map(function(f,u){return u<v.y||u>=v.y+v.h?f:f.map(function(h,b){return b<v.x||b>=v.x+v.w?h:!1})})}var oe={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:re,validator:function(i){return ae(i)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(i){return["linear","radial"].indexOf(i)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},Ne=L(L({},oe),{renderAs:{type:String,required:!1,default:"canvas",validator:function(i){return["canvas","svg"].indexOf(i)>-1}}}),Ae=ee({name:"QRCodeSvg",props:oe,setup:function(i){var v=z(0),f=z(""),u,h=function(){var n=i.value,r=i.level,t=i.margin,a=t>>>0,e=ae(r)?r:re,l=H.QrCode.encodeText(n,te[e]).getModules();if(v.value=l.length+a*2,i.imageSettings.src){var s=fe(l,i.size,a,i.imageSettings);u={x:s.x+a,y:s.y+a,width:s.w,height:s.h},s.excavation&&(l=me(l,s.excavation))}f.value=ce(l,a)},b=function(){if(!i.gradient)return null;var n=i.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return I(i.gradientType==="linear"?"linearGradient":"radialGradient",L({id:"qr-gradient"},n),[I("stop",{offset:"0%",style:{stopColor:i.gradientStartColor}}),I("stop",{offset:"100%",style:{stopColor:i.gradientEndColor}})])};return h(),ue(h),function(){return I("svg",{width:i.size,height:i.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v.value," ").concat(v.value)},[I("defs",{},[b()]),I("rect",{width:"100%",height:"100%",fill:i.background}),I("path",{fill:i.gradient?"url(#qr-gradient)":i.foreground,d:f.value}),i.imageSettings.src&&I("image",L({href:i.imageSettings.src},u))])}}}),Pe=ee({name:"QRCodeCanvas",props:oe,setup:function(i,v){var f=z(null),u=z(null),h=function(){var n=i.value,r=i.level,t=i.size,a=i.margin,e=i.background,l=i.foreground,s=i.gradient,p=i.gradientType,g=i.gradientStartColor,S=i.gradientEndColor,R=a>>>0,y=ae(r)?r:re,A=f.value;if(A){var E=A.getContext("2d");if(E){var w=H.QrCode.encodeText(n,te[y]).getModules(),M=w.length+R*2,_=u.value,P={x:0,y:0,width:0,height:0},U=i.imageSettings.src&&_!=null&&_.naturalWidth!==0&&_.naturalHeight!==0;if(U){var o=fe(w,i.size,R,i.imageSettings);P={x:o.x+R,y:o.y+R,width:o.w,height:o.h},o.excavation&&(w=me(w,o.excavation))}var d=window.devicePixelRatio||1,N=t/M*d;if(A.height=A.width=t*d,E.scale(N,N),E.fillStyle=e,E.fillRect(0,0,M,M),s){var m=void 0;p==="linear"?m=E.createLinearGradient(0,0,M,M):m=E.createRadialGradient(M/2,M/2,0,M/2,M/2,M/2),m.addColorStop(0,g),m.addColorStop(1,S),E.fillStyle=m}else E.fillStyle=l;Se?E.fill(new Path2D(ce(w,R))):w.forEach(function(x,Y){x.forEach(function(k,X){k&&E.fillRect(X+R,Y+R,1,1)})}),U&&E.drawImage(_,P.x,P.y,P.width,P.height)}}};we(h),ue(h);var b=v.attrs.style;return function(){return I(j,[I("canvas",L(L({},v.attrs),{ref:f,style:L(L({},b),{width:"".concat(i.size,"px"),height:"".concat(i.size,"px")})})),i.imageSettings.src&&I("img",{ref:u,src:i.imageSettings.src,style:{display:"none"},onLoad:h})])}}}),_e=ee({name:"Qrcode",render:function(){var i=this.$props,v=i.renderAs,f=i.value,u=i.size,h=i.margin,b=i.level,n=i.background,r=i.foreground,t=i.imageSettings,a=i.gradient,e=i.gradientType,l=i.gradientStartColor,s=i.gradientEndColor;return I(v==="svg"?Ae:Pe,{value:f,size:u,margin:h,level:b,background:n,foreground:r,imageSettings:t,gradient:a,gradientType:e,gradientStartColor:l,gradientEndColor:s})},props:Ne});const xe={class:"mb-6"},Te={class:"flex flex-wrap gap-2"},Ie=["onClick"],Ue={class:"bg-white rounded-xl overflow-hidden"},ze={class:"text-xl font-bold"},Le={class:"flex flex-col lg:flex-row gap-4 py-2"},ke={class:"lg:w-2/3 space-y-4"},Be={class:"bg-gray-50 border border-gray-200 rounded-xl p-6"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Oe={key:0,class:"bg-gradient-to-br from-teal-50 to-cyan-50 border-2 border-teal-200 rounded-xl p-6"},Fe=["href"],Qe={key:1,class:"bg-gray-50 border border-gray-200 rounded-xl p-6"},Ve={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},He={class:"bg-white rounded-lg border-2 border-dashed border-gray-300 hover:border-rose-500 transition-colors p-4"},$e={for:"upload",class:"flex flex-col items-center gap-3 cursor-pointer"},qe={class:"text-sm font-medium text-gray-700 text-center"},Ge={class:"bg-white rounded-lg border-2 border-dashed border-gray-300 hover:border-blue-500 transition-colors p-4"},Ye={for:"uploadRut",class:"flex flex-col items-center gap-3 cursor-pointer"},Ke={class:"text-sm font-medium text-gray-700 text-center"},We={class:"bg-white rounded-lg border-2 border-dashed border-gray-300 hover:border-green-500 transition-colors p-4"},je={for:"uploadCuenta",class:"flex flex-col items-center gap-3 cursor-pointer"},Xe={class:"text-sm font-medium text-gray-700 text-center"},Je={class:"lg:w-1/3"},Ze={class:"bg-gray-50 border border-gray-200 rounded-xl p-6 sticky top-4"},er={class:"max-h-96 overflow-y-auto space-y-2 pr-2"},rr=["onClick"],zr={__name:"Index",props:{users:Array,permisos:Array},setup(i){const v=[{label:"Usuarios AV Colombia",value:"av",color:"green",icon:"fa-solid fa-user-shield"},{label:"Vendedores",value:"vendedor",color:"blue",icon:"fa-solid fa-user-tie"},{label:"Proveedores",value:"proveedor",color:"yellow",icon:"fa-solid fa-truck"},{label:"Hoteles",value:"Hotel",color:"orange",icon:"fa-solid fa-hotel"},{label:"Agencias",value:"agencia",color:"gray",icon:"fa-solid fa-building"}],f=z("vendedor"),u=z([{header:"Nombre",field:"name",filter:!0},{header:"Tipo de Usuario",field:"rol",filter:!0},{header:"Correo",field:"email",filter:!0},{header:"Telefono",field:"phone",filter:!0},{header:"Cuenta Bancaria",field:"cuenta",filter:!0,type:"html-custom",renderer:o=>o.cuenta=="/laravel/public/"?"No tiene Certificado":`<a href="${o.cuenta}" class="text-sky-600 underline" target="_blank">Ver</a>`},{header:"RUT",field:"rut",filter:!0,type:"html-custom",renderer:o=>o.rut=="/laravel/public/"?"No tiene RUT":`<a href="${o.rut}" class="text-sky-600 underline" target="_blank">Ver</a>`},{header:"camara de comercio",field:"camara_comercio",filter:!0,type:"html-custom",renderer:o=>o.camara_comercio=="/laravel/public/"?"No tiene camara comercio":`<a href="${o.camara_comercio}" class="text-sky-600 underline" target="_blank">Ver</a>`},{header:"URL Portafolio",field:"url"}]),h=Ce(),b=Ee(),n=z(!1),r=z(),t=z(),a=Z(()=>g.permisos.filter(o=>!r.value||o.name.includes(r.value))),e=ye({id:null,name:"",phone:"",email:"",password:"",url:"",rol:"",password_confirmation:"",permissions:[],camara:null,rut:null,cuenta:null}),l=z(!1),s={action:()=>{e.reset(),n.value=!1,l.value=!0}},p=[{action:o=>{e.reset(),l.value=!0,n.value=!0,e.name=o.name,e.email=o.email,e.rol=o.rol,e.id=o.id,e.url=o.url,e.permissions=o.permissions.map(d=>d.name),e.phone=o.phone},severity:"secondary",icon:"fa-solid fa-pencil text-sm"},{action:(o,d)=>{b.require({target:d.currentTarget,message:"Seguro de Eliminar el Usuario "+o.name+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{de.delete(route("users.destroy",o.id),{onSuccess:()=>{h.add({severity:"error",icon:"fa-solid fa-trash-can",summary:"¡Accion realizada!",detail:"Usuario eliminado con exito",group:"customTooltipDataTable",life:5e3})}})}})},severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],g=i,S=()=>{let o=new FormData;o.append("name",e.name),o.append("email",e.email),o.append("password",e.password),o.append("password_confirmation",e.password_confirmation),o.append("phone",e.phone),o.append("rol",e.rol),o.append("permissions",e.permissions),o.append("camara",e.camara),o.append("rut",e.rut),o.append("cuenta",e.cuenta),n.value?de.post(route("users.update",e.id),o,{onSuccess:()=>{l.value=!1}}):e.post(route("users.store"),{onSuccess:()=>{l.value=!1}})},R=[{label:"Super Administrador",value:"superadmin"},{label:"Administrador",value:"admin"},{label:"Cordinador",value:"cordinador"},{label:"Vendedor",value:"vendedor"},{label:"Proveedor",value:"proveedor"},{label:"Hotel",value:"Hotel"},{label:"Agencia",value:"agencia"}];function y(){e.rol=="superadmin"?e.permissions=g.permisos.map(o=>o.name):e.rol=="admin"?e.permissions=g.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")))).map(o=>o.name):e.rol=="cordinador"?e.permissions=g.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name):e.rol=="vendedor"?e.permissions=g.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name):e.rol=="proveedor"?e.permissions=g.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name):e.rol=="hotel"?e.permissions=g.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name):e.rol=="agencia"&&(e.permissions=g.permisos.filter(o=>(o=o.name,!(o.includes("usuarios")||o.includes("pagos")||o.includes("entradas")||o.includes("eliminar"))&&o!="crear experiencas")).map(o=>o.name))}function A(o){e.permissions.includes(o)?e.permissions=e.permissions.filter(d=>d!=o):e.permissions.push(o)}const E=Z(()=>f.value=="av"?g.users.filter(o=>o.rol=="superadmin"||o.rol=="admin"||o.rol=="cordinador"):g.users.filter(o=>o.rol==f.value)),w=Z(()=>f.value=="av"?u.value.filter(o=>o.field!="camara_comercio"&&o.field!="rut"&&o.field!="cuenta"&&o.field!="url"):u.value),M=o=>{e.camara=o.target.files[0]},_=o=>{e.rut=o.target.files[0]},P=o=>{e.cuenta=o.target.files[0]},U=()=>{if(!e.url){h.add({severity:"warn",icon:"fa-solid fa-exclamation-triangle",summary:"Advertencia",detail:"No hay código QR para descargar",group:"customTooltipDataTable",life:3e3});return}try{const o=document.getElementById("qrCode");if(!o)throw new Error("No se encontró el elemento QR");const d=document.createElement("canvas"),N=d.getContext("2d"),m=o.getBoundingClientRect(),x=2;d.width=m.width*x,d.height=m.height*x,N.scale(x,x),(()=>{const k=o.querySelector("svg");if(!k)throw new Error("No se encontró el SVG dentro del elemento");const X=new XMLSerializer().serializeToString(k),he=new Blob([X],{type:"image/svg+xml;charset=utf-8"}),J=URL.createObjectURL(he),K=new Image;K.onload=()=>{N.fillStyle="white",N.fillRect(0,0,m.width,m.height);const W=200,ve=(m.width-W)/2,ne=10;N.drawImage(K,ve,ne,W,W),N.fillStyle="#6b7280",N.font="12px monospace",N.textAlign="center",N.fillText("Scanear QR",m.width/2,ne+W+20),d.toBlob(pe=>{const ie=URL.createObjectURL(pe),$=document.createElement("a");$.href=ie,$.download=`qr-portafolio-${e.name||"usuario"}.png`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(ie),URL.revokeObjectURL(J),h.add({severity:"success",icon:"fa-solid fa-download",summary:"Descarga exitosa",detail:"Código QR descargado correctamente",group:"customTooltipDataTable",life:3e3})},"image/png")},K.onerror=()=>{throw URL.revokeObjectURL(J),new Error("Error al cargar la imagen SVG")},K.src=J})()}catch(o){console.error("Error al descargar QR:",o),h.add({severity:"error",icon:"fa-solid fa-exclamation-circle",summary:"Error",detail:"Error al descargar el código QR: "+o.message,group:"customTooltipDataTable",life:3e3})}};return(o,d)=>{const N=ge;return F(),O(j,null,[c("div",null,[c("div",xe,[c("div",Te,[(F(),O(j,null,le(v,m=>c("button",{key:m.value,onClick:x=>f.value=m.value,class:q(["px-4 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 border-2",f.value==m.value?`bg-${m.color}-100 border-${m.color}-500 text-${m.color}-700 shadow-md scale-105`:"bg-white border-gray-200 text-gray-600 hover:border-gray-300 hover:shadow-sm"])},[c("i",{class:q([m.icon,"mr-2"])},null,2),Q(" "+V(m.label),1)],10,Ie)),64))])]),c("div",Ue,[T(be,{columnas:w.value,add:s,data:E.value,routecreate:"services.create",actions:p},null,8,["columnas","data"])])]),T(Me,{visible:l.value,"onUpdate:visible":d[8]||(d[8]=m=>l.value=m),width:"90vw","close-on-escape":""},{title:G(()=>[c("span",ze,V(n.value?"Editar":"Agregar")+" Usuario",1)]),icon:G(()=>[c("i",{class:q(n.value?"fa-solid fa-pencil":"fa-solid fa-plus")},null,2)]),footer:G(()=>[T(N,{onClick:S,title:"Guardar",severity:"success",label:"Guardar",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),T(N,{onClick:d[7]||(d[7]=m=>l.value=!1),title:"Cancel",severity:"danger",label:"Cancelar",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:G(()=>[c("div",Le,[c("div",ke,[c("div",Be,[d[9]||(d[9]=c("h3",{class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},[c("i",{class:"fa-solid fa-user-circle text-rose-500"}),Q(" Información del Usuario ")],-1)),c("div",De,[T(B,{label:"Tipo de Usuario",modelValue:C(e).rol,"onUpdate:modelValue":d[0]||(d[0]=m=>C(e).rol=m),onValueChange:y,type:"dropdown","option-value":"value","option-label":"label",options:R},null,8,["modelValue"]),T(B,{label:"Nombre Completo",modelValue:C(e).name,"onUpdate:modelValue":d[1]||(d[1]=m=>C(e).name=m),"error-message":C(e).errors.name,placeholder:"Ej: Juan Pérez"},null,8,["modelValue","error-message"]),T(B,{label:"Correo Electrónico",modelValue:C(e).email,"onUpdate:modelValue":d[2]||(d[2]=m=>C(e).email=m),type:"email",placeholder:"correo@ejemplo.com"},null,8,["modelValue"]),T(B,{label:"Teléfono",modelValue:C(e).phone,"onUpdate:modelValue":d[3]||(d[3]=m=>C(e).phone=m),placeholder:"+57 300 123 4567"},null,8,["modelValue"]),T(B,{label:"Contraseña",type:"password",modelValue:C(e).password,"onUpdate:modelValue":d[4]||(d[4]=m=>C(e).password=m),placeholder:"Mínimo 8 caracteres"},null,8,["modelValue"]),T(B,{label:"Confirmar Contraseña",type:"password",modelValue:C(e).password_confirmation,"onUpdate:modelValue":d[5]||(d[5]=m=>C(e).password_confirmation=m),placeholder:"Repite la contraseña"},null,8,["modelValue"])])]),C(e).rol=="superadmin"||C(e).rol=="admin"||C(e).rol=="cordinador"?se("",!0):(F(),O("div",Oe,[c("div",{class:"flex items-center justify-between mb-4"},[d[11]||(d[11]=c("h3",{class:"text-lg font-bold text-gray-900 flex items-center gap-2"},[c("i",{class:"fa-solid fa-qrcode text-teal-600"}),Q(" Portafolio Digital ")],-1)),c("button",{onClick:U,class:"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2"},[...d[10]||(d[10]=[c("i",{class:"fa-solid fa-download"},null,-1),c("span",null,"Descargar",-1)])])]),c("a",{target:"_blank",id:"qrCode",href:C(e).url,class:"flex flex-col items-center gap-3 bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105"},[T(_e,{ref_key:"qrCodeRef",ref:t,value:C(e).url,size:200,level:"L","render-as":"svg",foreground:"#064a59",class:"rounded-lg"},null,8,["value"]),d[12]||(d[12]=c("span",{class:"text-sm font-medium text-gray-600"},"Escanea para ver el portafolio",-1))],8,Fe)])),C(e).rol=="vendedor"?(F(),O("div",Qe,[d[19]||(d[19]=c("h3",{class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},[c("i",{class:"fa-solid fa-file-pdf text-rose-500"}),Q(" Documentos Requeridos ")],-1)),c("div",Ve,[c("div",He,[c("label",$e,[d[13]||(d[13]=c("div",{class:"w-12 h-12 bg-rose-100 rounded-full flex items-center justify-center"},[c("i",{class:"fa-solid fa-building text-rose-600 text-xl"})],-1)),c("span",qe,V(C(e).camara?C(e).camara.name:"Cámara de Comercio"),1),d[14]||(d[14]=c("span",{class:"text-xs text-gray-500"},"Haz clic para subir (PDF)",-1))]),c("input",{id:"upload",accept:".pdf",onChange:M,type:"file",class:"hidden"},null,32)]),c("div",Ge,[c("label",Ye,[d[15]||(d[15]=c("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[c("i",{class:"fa-solid fa-file-lines text-blue-600 text-xl"})],-1)),c("span",Ke,V(C(e).rut?C(e).rut.name:"RUT"),1),d[16]||(d[16]=c("span",{class:"text-xs text-gray-500"},"Haz clic para subir (PDF)",-1))]),c("input",{id:"uploadRut",accept:".pdf",onChange:_,type:"file",class:"hidden"},null,32)]),c("div",We,[c("label",je,[d[17]||(d[17]=c("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},[c("i",{class:"fa-solid fa-money-check text-green-600 text-xl"})],-1)),c("span",Xe,V(C(e).cuenta?C(e).cuenta.name:"Certificado Bancario"),1),d[18]||(d[18]=c("span",{class:"text-xs text-gray-500"},"Haz clic para subir (PDF)",-1))]),c("input",{id:"uploadCuenta",accept:".pdf",onChange:P,type:"file",class:"hidden"},null,32)])])])):se("",!0)]),c("div",Je,[c("div",Ze,[d[21]||(d[21]=c("h3",{class:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},[c("i",{class:"fa-solid fa-shield-halved text-purple-600"}),Q(" Permisos ")],-1)),T(B,{class:"mb-4",modelValue:r.value,"onUpdate:modelValue":d[6]||(d[6]=m=>r.value=m),placeholder:"Buscar permisos..."},{prefix:G(()=>[...d[20]||(d[20]=[c("i",{class:"fa-solid fa-magnifying-glass text-gray-400"},null,-1)])]),_:1},8,["modelValue"]),c("div",er,[(F(!0),O(j,null,le(a.value,m=>(F(),O("button",{key:m.name,onClick:x=>A(m.name),class:q(["w-full px-3 py-2.5 rounded-lg text-xs font-medium text-left transition-all duration-200 border-2",C(e).permissions.includes(m.name)?"bg-purple-100 border-purple-500 text-purple-700 shadow-sm":"bg-white border-gray-200 text-gray-700 hover:border-purple-300 hover:bg-purple-50"])},[c("i",{class:q([C(e).permissions.includes(m.name)?"fa-solid fa-check-circle":"fa-regular fa-circle","mr-2"])},null,2),Q(" "+V(m.name),1)],10,rr))),128))])])])])]),_:1},8,["visible"]),T(C(Re))],64)}}};export{zr as default};

import{d as x,A as w,p as U,f as u,o as m,a as e,k as B,g as y,b as c,w as j,F as M,j as N,h as O,n as b,t as l,U as A,E,T as F,a0 as T,I as q}from"./app-Dn5KsD2c.js";import{_ as f}from"./Input-ghybvxy-.js";import{S as z}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{O as L,h as R}from"./radio-group-Ddf5e8K_.js";import"./index-BN0FKXnc.js";import"./index-MkQHpa6a.js";import"./index-CT6YQiMJ.js";import"./index-DDLb-JzL.js";import"./index-DNTWODPJ.js";import"./index-DR6pQG3P.js";import"./index-DELeNmm2.js";import"./index-EoFuTiQD.js";import"./index-BAQvh4r0.js";import"./index-Chzc5Pzv.js";import"./index-C2J1GnwE.js";import"./index-iXiE1s_o.js";import"./index-BsLlquhF.js";import"./index-CdvsRzs8.js";import"./index-CMpHijLN.js";import"./index-De445YOk.js";import"./index-DIGlDJNG.js";import"./index-qRuK0Bcv.js";import"./index-B9zJXf3V.js";import"./useCommonUtilities-BgDhORlD.js";import"./postcss-DzalkE6p.js";import"./postcss-680hWGfA.js";import"./keyboard-B_p7INZg.js";const H={class:"bg-gray-50 py-5 overflow-y-auto min-h-screen"},W={class:"m-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8"},G={class:"mt-4 border-t border-gray-200 pt-1"},Z={class:"mt-4 grid grid-cols-1 gap-y-2 sm:grid-cols-2 sm:gap-x-4"},$={class:"mt-4 border-t border-gray-200 p-1"},J={class:"flex flex-1"},K={class:"flex flex-col"},Q={key:0,class:"mt-4 rounded-lg border border-gray-200 bg-white shadow-sm"},X={class:"p-4"},Y={key:0,class:"mt-2 text-md text-gray-600"},ee={key:1,class:"mt-2 text-md text-gray-600 gap-y-2"},te={class:"flex justify-between gap-x-2 w-full"},se={class:"flex flex-col justify-center shadow-xl w-full p-2 rounded-md text-sm"},oe={class:"flex justify-center gap-x-2 w-full"},re={src:"/exito.png",alt:"Exito",class:"w-16 h-16 object-contain"},ae={src:"/western.png",alt:"Western Union",class:"w-16 h-16 object-contain rounded-full"},le={key:1,class:"mt-4 flex-col items-start justify-start p-2 rounded-lg border border-gray-200 bg-white shadow-sm"},ne={class:"w-full"},ie={class:"mt-10 lg:mt-0 flex flex-col"},de={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},ue={class:"px-4 py-2"},me={class:"text-center text-gray-500 font-medium"},ce={class:"text-center text-sm text-gray-500"},pe={class:"px-4 space-y-1"},ge={class:"flex justify-between text-sm"},fe={class:"text-gray-900"},xe={class:"flex justify-between text-sm"},ye={class:"text-gray-900"},be={class:"flex justify-between text-sm"},ve={class:"text-gray-900"},he={class:"space-y-6 border-t border-gray-200 px-4 py-6 sm:px-6"},we={class:"flex items-center justify-between"},_e={class:""},ke={class:"font-medium text-gray-900"},Ce={class:"flex items-center justify-between border-t border-gray-200 pt-6"},Ve={class:"text-base font-medium text-gray-900"},je={class:"border-t border-gray-200 px-4 py-6 sm:px-6"},Oe=["disabled"],Ee={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Se=["href"],ot={__name:"AccommodationCheckout",props:{accommodation:Object,room:Object,checkIn:String,checkOut:String,guests:[Number,String]},setup(i){const n=i,r=x({room_id:n.room.id,check_in_date:n.checkIn,check_out_date:n.checkOut,guests_adults:parseInt(n.guests)||2,guests_children:0,guest_name:"",guest_last_name:"",guest_email:"",guest_phone:"",guest_country:"",payment_method:2,soporte:null}),g=x(!1),S=x(null),_=[{id:2,title:"T.Débito, T. Crédito, PSE",description:"El pago se refleja de inmediato"},{id:1,title:"Efectivo",description:"Pagar en Oficinas"},{id:3,title:"Giros y Consignaciones",description:"Validaremos su pago una vez recibido"}],d=x(_[0]),v=w(()=>{if(!n.checkIn||!n.checkOut)return 0;const s=new Date(n.checkIn),t=new Date(n.checkOut),a=Math.ceil((t-s)/(1e3*60*60*24));return a>0?a:0}),k=w(()=>n.room.price_per_night*v.value),D=w(()=>k.value),C=s=>s?new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"}):"",h=s=>{const t=Number(s)||0;return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)};function I(s){S.value=s.target.files[0],r.value.soporte=s.target.files[0]}const P=async()=>{g.value=!0;try{const s=new FormData;Object.keys(r.value).forEach(a=>{(a==="soporte"&&r.value[a]instanceof File||a!=="soporte")&&s.append(a,r.value[a])}),s.append("payment_method",d.value.id);const t=await T.post(route("api.accommodations.booking"),s,{headers:{"Content-Type":"multipart/form-data"}});t.data.payment_url?window.location.href=t.data.payment_url:q.get(route("accommodations.booking.success",t.data.booking.id))}catch(s){console.error("Error al procesar la reserva:",s),z.fire({title:"Error en la Reserva",text:s.response?.data?.message||"Error al procesar la reserva. Por favor intente de nuevo.",icon:"error",confirmButtonColor:"#d33",confirmButtonText:"Cerrar"}),g.value=!1}};return U(()=>{console.log("Checkout montado",n)}),(s,t)=>{const a=F;return m(),u("div",H,[e("div",W,[t[21]||(t[21]=e("h2",{class:"sr-only"},"Checkout Alojamiento",-1)),e("form",{class:"lg:grid lg:grid-cols-2 lg:gap-x-12 xl:gap-x-4 overflow-y-auto",onSubmit:B(P,["prevent"])},[e("div",null,[t[13]||(t[13]=e("div",{class:"flex items-center justify-start gap-x-2"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Información del huésped principal")],-1)),e("div",G,[e("div",Z,[c(f,{label:"Nombres",modelValue:r.value.guest_name,"onUpdate:modelValue":t[0]||(t[0]=o=>r.value.guest_name=o),required:!0},null,8,["modelValue"]),c(f,{label:"Apellidos",modelValue:r.value.guest_last_name,"onUpdate:modelValue":t[1]||(t[1]=o=>r.value.guest_last_name=o),required:!0},null,8,["modelValue"]),c(f,{label:"Correo",modelValue:r.value.guest_email,"onUpdate:modelValue":t[2]||(t[2]=o=>r.value.guest_email=o),type:"email",class:"sm:col-span-2",required:!0},null,8,["modelValue"]),c(f,{label:"Teléfono",type:"tel",modelValue:r.value.guest_phone,"onUpdate:modelValue":t[3]||(t[3]=o=>r.value.guest_phone=o),required:!0},null,8,["modelValue"]),c(f,{label:"País de Origen",modelValue:r.value.guest_country,"onUpdate:modelValue":t[4]||(t[4]=o=>r.value.guest_country=o),required:!0},null,8,["modelValue"])])]),e("div",$,[e("fieldset",null,[t[6]||(t[6]=e("legend",{class:"text-lg font-medium text-gray-900"},"Forma de Pago",-1)),c(O(R),{modelValue:d.value,"onUpdate:modelValue":t[5]||(t[5]=o=>d.value=o),class:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4"},{default:j(()=>[(m(),u(M,null,N(_,o=>c(O(L),{as:"template",key:o.id,value:o,"aria-label":o.title},{default:j(({active:p,checked:V})=>[e("div",{class:b([V?"border-transparent":"border-gray-300",p?"ring-2 ring-indigo-500 bg-indigo-500 text-white transition-colors duration-150":"bg-white","relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none"])},[e("span",J,[e("span",K,[e("span",{class:b(["block text-sm font-medium",{"text-white":p,"text-gray-900":!p}])},l(o.title),3),e("span",{class:b(["mt-1 flex items-center text-sm",{"text-white":p,"text-gray-500":!p}])},l(o.description),3)])]),e("span",{class:b([p?"border":"border-2",V?"border-indigo-500":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"]),"aria-hidden":"true"},null,2)],2)]),_:2},1032,["value","aria-label"])),64))]),_:1},8,["modelValue"])])]),d.value.id!=2?(m(),u("div",Q,[e("div",X,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900"},"Instrucciones de pago",-1)),d.value.id==1?(m(),u("div",Y,[...t[7]||(t[7]=[e("p",null,"Realice su pago directamente en nuestras oficinas:",-1),e("p",{class:"text-gray-900 font-bold"},"Av. Santander Cra 1 #46-50, Marbella, Cartagena de Indias.",-1),e("p",null,"Una vez confirmado el pago, recibirá un comprobante y los detalles de su reserva por correo electrónico.",-1)])])):d.value.id==3?(m(),u("div",ee,[t[10]||(t[10]=A('<div class="flex-col text-center items-center gap-x-2 w-full"><p>Las transacciones y giros se harán a nombre de:</p><div class="flex justify-between gap-x-2 w-full"><div class="w-full p-2 rounded-md flex justify-center items-center gap-x-2"><p class="font-medium border px-4 rounded-lg bg-gray-800 text-white"> Melissa Zurita</p><p class="font-medium border px-4 rounded-lg bg-gray-800 text-white">CC: 1047475135</p></div></div></div><p>Los canales disponibles son</p>',2)),e("div",te,[t[9]||(t[9]=e("div",{class:"shadow-xl w-full p-2 rounded-md text-sm gap-y-2 flex flex-col"},[e("p",{class:"text-gray-900 font-medium"},"Bancolombia"),e("p",{class:"text-gray-700"},"Cuenta de Ahorros"),e("p",{class:"text-gray-900"},"Numero: 678 0000 8810")],-1)),e("div",se,[t[8]||(t[8]=e("p",{class:"text-center text-gray-900 font-medium"},"Para giros",-1)),e("div",oe,[E(e("img",re,null,512),[[a,"Almacenes Exito"]]),E(e("img",ae,null,512),[[a,"Western Union"]])])])])])):y("",!0)])])):y("",!0),d.value.id==3?(m(),u("div",le,[t[12]||(t[12]=e("h2",{class:"border-b border-gray-200 pb-2 mb-2 text-lg font-medium text-gray-900"},"Comprobante de Pago",-1)),e("label",ne,[e("input",{onChange:I,type:"file",class:"text-sm text-grey-500 file:py-3 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-white file:bg-gray-800 hover:file:cursor-pointer hover:file:opacity-80"},null,32)])])):y("",!0)]),e("div",ie,[e("div",de,[e("div",null,[t[17]||(t[17]=e("h2",{class:"text-lg text-gray-900 mx-4 mt-2 font-bold text-center"},"Resumen de reserva",-1)),e("div",ue,[e("p",me,l(i.accommodation.name),1),e("p",ce,l(i.room.name),1)]),e("div",pe,[e("div",ge,[t[14]||(t[14]=e("span",{class:"text-gray-500"},"Check-in:",-1)),e("strong",fe,l(C(i.checkIn)),1)]),e("div",xe,[t[15]||(t[15]=e("span",{class:"text-gray-500"},"Check-out:",-1)),e("strong",ye,l(C(i.checkOut)),1)]),e("div",be,[t[16]||(t[16]=e("span",{class:"text-gray-500"},"Huéspedes:",-1)),e("strong",ve,l(i.guests),1)])])]),e("dl",he,[e("div",we,[e("dt",_e,l(h(i.room.price_per_night))+" x "+l(v.value)+" noche"+l(v.value>1?"s":""),1),e("dd",ke,l(h(k.value)),1)]),e("div",Ce,[t[18]||(t[18]=e("dt",{class:"text-base font-medium"},"Total",-1)),e("dd",Ve,l(h(D.value)),1)])]),e("div",je,[e("button",{disabled:g.value,type:"submit",class:"w-full rounded-md border border-transparent bg-indigo-600 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[g.value?(m(),u("svg",Ee,[...t[19]||(t[19]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):y("",!0),e("span",null,l(g.value?"Procesando...":"Confirmar Reserva y Pagar"),1)],8,Oe),e("a",{href:s.route("services.home"),class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center justify-center gap-2"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),e("span",null,"Volver a Comprar",-1)])],8,Se)])])])],32)])])}}};export{ot as default};

import{ap as I,d as N,B as O,aq as E,x as H,c as L,o as c,w as h,a as t,f as v,g as q,b as s,u as a,t as G,h as Q,F as R,i as W,m as j,v as J,T as K}from"./app-Dgn1WH-d.js";import{s as X}from"./index-BwmNT25h.js";import{s as Y}from"./filepond-plugin-image-preview.min-CNoOhgIy.js";import{_ as d}from"./Input-Coh7tCQw.js";import{_ as Z}from"./Modal-CTChaBjJ.js";import{a as ee}from"./toasts-Bf1FAz7R.js";import{S as oe}from"./Service-C6EfigSE.js";import"./index-DQO60pJI.js";import"./index-BdJR5ShC.js";import"./index-C_R9FXb0.js";import"./index-COtZ2nPY.js";import"./index-BTdNgpGm.js";import"./index-6qmIKPmj.js";import"./index-N7lvGe1I.js";import"./index-xPakfMG2.js";import"./index-BElclPDt.js";import"./index-C35WUTmj.js";import"./index-D5d34pas.js";import"./index-B5qnzWam.js";import"./index-DyZl4zkQ.js";import"./index-_zwMLLIH.js";import"./index-C3-QJVLL.js";import"./index-CTucpq9s.js";import"./useCommonUtilities-Ca8fwx5n.js";import"./postcss-CR5ZTcCQ.js";import"./index-BjA0SZAR.js";import"./index-DziH76ey.js";import"./sweetalert2.esm.all-DV3w3JmD.js";import"./Toats-RcJDUpcK.js";const le={class:"flex gap-4"},te={class:"flex flex-col w-1/3 gap-y-4"},ae={class:"flex flex-col"},se={class:"rounded-md border border-gray-100 bg-white p-4 shadow-md"},ie={for:"upload",class:"flex flex-col items-center gap-2 cursor-pointer"},ne={class:"text-gray-600 font-medium text-sm truncate w-full"},re={class:"flex flex-wrap gap-4 w-full justify-between"},de={class:"flex items-center gap-2"},ue={class:"flex items-center gap-2"},pe={key:0,class:"w-2/3 col-sapn-1 md:col-span-3 border rounded-lg"},me={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},ce={class:"h-[50vh] overflow-y-auto"},ve={class:"justify-between w-full px-2 gap-x-2 grid grid-cols-8"},fe=["onUpdate:modelValue"],xe={class:"flex gap-x-2"},Qe={__name:"Form",props:I({proveedor:Object},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(f){var V,w,g,_,y,C,D,k,U,P;const{toast:x}=ee(),b=N([]),n=f,B=new oe;O(async()=>{b.value=await B.getServices()});const i=N(((V=n.proveedor)==null?void 0:V.type_penalidad_cost)??"Dinero"),p=E(f,"modelValue",!1),l=H({id:((w=n.proveedor)==null?void 0:w.id)??"",nombre:((g=n.proveedor)==null?void 0:g.nombre)??"",direccion:"a.",nit:((_=n.proveedor)==null?void 0:_.nit)??"",telefono:((y=n.proveedor)==null?void 0:y.telefono)??"",type_penalidad_cost:((C=n.proveedor)==null?void 0:C.type_penalidad_cost)??"Dinero",penalidad_no_show:((D=n.proveedor)==null?void 0:D.penalidad_no_show)??0,penalidad_cancelacion:((k=n.proveedor)==null?void 0:k.penalidad_cancelacion)??0,services:((U=n.proveedor)==null?void 0:U.services.map(r=>r.pivot))??[],cuenta:null,account_number:((P=n.proveedor)==null?void 0:P.account_number)??""}),$=()=>{l.services.push({service_id:"",concepto:"",value:""})},M=r=>{l.services.splice(r,1)},T=()=>{l.type_penalidad_cost=i.value,l.id?l.put(route("proveedors.update",l.id),{onSuccess:()=>{l.reset(),p.value=!1,x("success","Proveedor Actualizado")}}):l.post(route("proveedors.store"),{onSuccess:()=>{l.reset(),x("success","Proveedor Creado")}})},z=r=>{l.cuenta=r.target.files[0]};return(r,e)=>{const S=Y,m=X,F=K;return c(),L(Z,{visible:p.value,"onUpdate:visible":e[10]||(e[10]=o=>p.value=o),"close-on-escape":!0,title:"Añadir Proveedor",width:"80vw"},{footer:h(()=>[t("div",xe,[s(m,{severity:"success",label:"Guardar",onClick:T}),s(m,{severity:"danger",label:"Cancelar",onClick:e[9]||(e[9]=o=>p.value=!1)})])]),default:h(()=>[t("div",le,[t("div",te,[e[15]||(e[15]=t("h1",{class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"}," Datos del Proveedor ",-1)),s(d,{label:"Nombre",class:"w-full",modelValue:a(l).nombre,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).nombre=o)},null,8,["modelValue"]),s(d,{label:"NIT",class:"w-full",modelValue:a(l).nit,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).nit=o)},null,8,["modelValue"]),s(d,{label:"Telefono",class:"w-full",modelValue:a(l).telefono,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).telefono=o)},null,8,["modelValue"]),s(d,{label:"Número de Cuenta Bancanria",class:"w-full",modelValue:a(l).account_number,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).account_number=o)},null,8,["modelValue"]),t("div",ae,[t("div",se,[t("label",ie,[e[11]||(e[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 fill-white stroke-indigo-500",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",ne,G(a(l).cuenta?a(l).cuenta.name:"Seleccionar Camara de Comercio"),1)]),t("input",{id:"upload",accept:".pdf",onChange:z,type:"file",class:"hidden"},null,32)])]),t("div",re,[e[14]||(e[14]=t("label",{for:""},"Politicas",-1)),t("div",de,[s(S,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value=o),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),e[12]||(e[12]=t("label",{for:"Dinero"},"Dinero",-1))]),t("div",ue,[s(S,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value=o),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje",size:"Normal"},null,8,["modelValue"]),e[13]||(e[13]=t("label",{for:"Porcentaje",class:"text-sm"},"Porcentaje",-1))])]),s(d,{label:"Penalización por NO SHOW",type:"number",modelValue:a(l).penalidad_no_show,"onUpdate:modelValue":e[6]||(e[6]=o=>a(l).penalidad_no_show=o),mode:i.value=="Dinero"?"currency":"decimal",suffix:i.value=="Dinero"?"":"%",min:"0",max:i.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"]),s(d,{label:"Penalización por CANCELACIÓN",type:"number",modelValue:a(l).penalidad_cancelacion,"onUpdate:modelValue":e[7]||(e[7]=o=>a(l).penalidad_cancelacion=o),mode:i.value=="Dinero"?"currency":"decimal",suffix:i.value=="Dinero"?"":"%",min:"0",max:i.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"])]),r.$page.props.auth.user.rol=="admin"||r.$page.props.auth.user.rol=="superadmin"?(c(),v("div",pe,[t("h1",me,[e[16]||(e[16]=Q(" Servicios ")),s(m,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:e[8]||(e[8]=o=>$())})]),e[17]||(e[17]=t("div",{class:"grid grid-cols-8 w-full font-bold px-2 text-left"},[t("div",{class:"col-span-3 w-full"},"Servicio"),t("div",{class:"col-span-2"},"Concepto"),t("div",{class:""},"Tarifa"),t("div",{class:""})],-1)),t("div",ce,[(c(!0),v(R,null,W(a(l).services,(o,A)=>(c(),v("div",ve,[s(d,{type:"dropdown",class:"col-span-3",modelValue:o.service_id,"onUpdate:modelValue":u=>o.service_id=u,"option-label":"title","option-value":"id",options:b.value},null,8,["modelValue","onUpdate:modelValue","options"]),s(d,{class:"w-full col-span-2",modelValue:o.concept,"onUpdate:modelValue":u=>o.concept=u},null,8,["modelValue","onUpdate:modelValue"]),j(t("input",{type:"number",class:"w-full rounded-md h-10 col-span-2","onUpdate:modelValue":u=>o.value=u},null,8,fe),[[J,o.value]]),j(s(m,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:u=>M(A)},null,8,["onClick"]),[[F,"Quitar"]])]))),256))])])):q("",!0)])]),_:1},8,["visible"])}}};export{Qe as default};

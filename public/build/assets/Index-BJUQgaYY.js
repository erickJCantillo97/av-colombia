import{d as v,z as $,C as B,f as c,b as s,w as x,F as V,o as p,a as t,u as n,h as j,i as z,k as w,v as I,g as h,T as A}from"./app-Zg0QXPRX.js";import{s as E}from"./index-CbxR0hcf.js";import{s as F}from"./index-Bxlgpk0U.js";import{_ as M}from"./Datatable-BlsuzwzN.js";import{_ as r}from"./Input-BrSXYm2j.js";import{_ as L}from"./Modal-KNaB6xsd.js";import{_ as O}from"./AppLayout-DAZDJeIR.js";import{a as G}from"./toasts-DoW0LeUK.js";import{S as H}from"./sweetalert2.esm.all-BkU8I-GU.js";import{S as Q}from"./Service-_CQI7CAS.js";import"./index-BNV4NBTB.js";import"./index-CJFPlEPy.js";import"./index-MxSamq5J.js";import"./index-t-WThdff.js";import"./index-CVlOU12E.js";import"./index-CUlhAHjx.js";import"./index-DJN4i4Fo.js";import"./index-CL5VNTYA.js";import"./index-BG5RBYL2.js";import"./index-Id5ZUn2J.js";import"./index-BPsYVJbc.js";import"./index-BbnmfWXZ.js";import"./index-D3xsdrpy.js";import"./index-iZ2kBKLV.js";import"./useCommonUtilities-hipAPSUL.js";import"./filepond-plugin-image-preview.min-BG10xqQy.js";import"./postcss-YzgOiR6c.js";import"./index-6SusQF3I.js";import"./index-Buvf0zCq.js";import"./index-Cnhb0vPe.js";import"./index-BEjZmk1Z.js";const R={class:"flex gap-4"},W={class:"flex flex-col w-1/3 gap-y-4"},q={class:"flex flex-wrap gap-4 w-full justify-between"},J={class:"flex items-center gap-2"},K={class:"flex items-center gap-2"},X={key:0,class:"w-2/3 col-sapn-1 md:col-span-3 border rounded-lg"},Y={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},Z={class:"h-[50vh] overflow-y-auto"},ee={class:"justify-between w-full px-2 gap-x-2 grid grid-cols-8"},oe=["onUpdate:modelValue"],le={class:"flex gap-x-2"},ze={__name:"Index",props:{proveedores:Array},setup(g){const{toast:f}=G(),b=v([]),y=new Q;$(async()=>{b.value=await y.getServices()});const d=v(!1),C={action:()=>{d.value=!0,o.reset()}},a=v("Dinero"),D=[{action:i=>{d.value=!0,o.services=i.services.map(e=>e.pivot),o.id=i.id,o.nit=i.nit,o.nombre=i.nombre,o.penalidad_no_show=i.penalidad_no_show,o.penalidad_cancelacion=i.penalidad_cancelacion,a.value=i.type_penalidad_cost,o.direccion=i.direccion,o.telefono=i.telefono},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:i=>{H.fire({title:"Eliminar Proveedor",text:"Estas seguro de eliminar este proveedor?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(e=>{e.isConfirmed&&o.delete(route("proveedors.destroy",i.id),{onSuccess:()=>{f("error","Proveedor Eliminado")}})})},severity:"danger",icon:"fa-solid fa-trash text-sm"}],P=[{field:"nombre",header:"Nombre",filter:!0},{field:"nit",header:"NIT",filter:!0},{field:"telefono",header:"Telefono",filter:!0}],o=B({id:null,nombre:"",direccion:"a.",nit:"",telefono:"",type_penalidad_cost:"",penalidad_no_show:"",penalidad_cancelacion:"",services:[]}),S=()=>{o.services.push({service_id:"",concepto:"",value:""})},U=i=>{o.services.splice(i,1)},k=()=>{o.type_penalidad_cost=a.value,o.id?o.put(route("proveedors.update",o.id),{onSuccess:()=>{o.reset(),d.value=!1,f("success","Proveedor Actualizado")}}):o.post(route("proveedors.store"),{onSuccess:()=>{o.reset(),f("success","Proveedor Creado")}})};return(i,e)=>{const _=F,m=E,N=A;return p(),c(V,null,[s(O,null,{default:x(()=>[s(M,{data:g.proveedores,actions:D,columnas:P,add:C,title:"proveedores"},null,8,["data"])]),_:1}),s(L,{visible:d.value,"onUpdate:visible":e[9]||(e[9]=l=>d.value=l),"close-on-escape":"true",title:"Añadir Proveedor",width:"80vw"},{footer:x(()=>[t("div",le,[s(m,{severity:"success",label:"Guardar",onClick:k}),s(m,{severity:"danger",label:"Cancelar",onClick:e[8]||(e[8]=l=>d.value=!1)})])]),default:x(()=>[t("div",R,[t("div",W,[e[13]||(e[13]=t("h1",{class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"}," Datos del Proveedor ",-1)),s(r,{label:"Nombre",class:"w-full",modelValue:n(o).nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>n(o).nombre=l)},null,8,["modelValue"]),s(r,{label:"NIT",class:"w-full",modelValue:n(o).nit,"onUpdate:modelValue":e[1]||(e[1]=l=>n(o).nit=l)},null,8,["modelValue"]),s(r,{label:"Telefono",class:"w-full",modelValue:n(o).telefono,"onUpdate:modelValue":e[2]||(e[2]=l=>n(o).telefono=l)},null,8,["modelValue"]),t("div",q,[e[12]||(e[12]=t("label",{for:""},"Politicas",-1)),t("div",J,[s(_,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value=l),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),e[10]||(e[10]=t("label",{for:"Dinero"},"Dinero",-1))]),t("div",K,[s(_,{modelValue:a.value,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value=l),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje",size:"Normal"},null,8,["modelValue"]),e[11]||(e[11]=t("label",{for:"Porcentaje",class:"text-sm"},"Porcentaje",-1))])]),s(r,{label:"Penalización por NO SHOW",type:"number",modelValue:n(o).penalidad_no_show,"onUpdate:modelValue":e[5]||(e[5]=l=>n(o).penalidad_no_show=l),mode:a.value=="Dinero"?"currency":"decimal",suffix:a.value=="Dinero"?"":"%",min:"0",max:a.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"]),s(r,{label:"Penalización por CANCELACIÓN",type:"number",modelValue:n(o).penalidad_cancelacion,"onUpdate:modelValue":e[6]||(e[6]=l=>n(o).penalidad_cancelacion=l),mode:a.value=="Dinero"?"currency":"decimal",suffix:a.value=="Dinero"?"":"%",min:"0",max:a.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["modelValue","mode","suffix","max"])]),i.$page.props.auth.user.rol=="admin"||i.$page.props.auth.user.rol=="superadmin"?(p(),c("div",X,[t("h1",Y,[e[14]||(e[14]=j(" Servicios ")),s(m,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:e[7]||(e[7]=l=>S())})]),e[15]||(e[15]=t("div",{class:"grid grid-cols-8 w-full font-bold px-2 text-left"},[t("div",{class:"col-span-3 w-full"},"Servicio"),t("div",{class:"col-span-2"},"Concepto"),t("div",{class:""},"Tarifa"),t("div",{class:""})],-1)),t("div",Z,[(p(!0),c(V,null,z(n(o).services,(l,T)=>(p(),c("div",ee,[s(r,{type:"dropdown",class:"col-span-3",modelValue:l.service_id,"onUpdate:modelValue":u=>l.service_id=u,"option-label":"title","option-value":"id",options:b.value},null,8,["modelValue","onUpdate:modelValue","options"]),s(r,{class:"w-full col-span-2",modelValue:l.concept,"onUpdate:modelValue":u=>l.concept=u},null,8,["modelValue","onUpdate:modelValue"]),w(t("input",{type:"number",class:"w-full rounded-md h-10 col-span-2","onUpdate:modelValue":u=>l.value=u},null,8,oe),[[I,l.value]]),w(s(m,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:u=>U(T)},null,8,["onClick"]),[[N,"Quitar"]])]))),256))])])):h("",!0)])]),_:1},8,["visible"])],64)}}};export{ze as default};

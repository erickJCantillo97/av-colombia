import{C as b,r as _}from"./chart-bBXEBIVA.js";import{d as $,p as k,B as D,f as I,o as P,a as z}from"./app-Dn5KsD2c.js";const B={class:"w-full h-96 shadow-xl rounded-lg p-4 bg-white"},E={__name:"PieChart",props:{data:{type:Array,default:()=>[]},title:{type:String,default:""}},setup(m){b.register(..._);const e=m,l=$(null);let d=null;const c=o=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),g=()=>{if(!l.value||!e.data.length)return;d&&d.destroy();const o=l.value.getContext("2d"),f=e.data.map(a=>a.x),h=e.data.map(a=>a.y),i=e.data.map(a=>a.porcentaje),y=e.data.map(a=>a.recaudado),x=e.data.map(a=>a.pagado);d=new b(o,{type:"pie",data:{labels:f,datasets:[{data:h,backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(239, 68, 68, 0.8)","rgba(251, 191, 36, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(239, 68, 68)","rgb(251, 191, 36)"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom",labels:{padding:15,font:{size:12}}},title:{display:!0,text:e.title,font:{size:16,weight:"bold"},padding:{bottom:20}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(a){const t=a.label||"",r=a.parsed,p=i[a.dataIndex],u=y[a.dataIndex],s=x[a.dataIndex],n=u-s;return[`${t}: ${r} reservas`,`Porcentaje: ${p}%`,`Recaudado: ${c(u)}`,`Pagado: ${c(s)}`,`Utilidad: ${c(n)}`]}}},datalabels:{color:"#fff",font:{weight:"bold",size:16},formatter:(a,t)=>`${i[t.dataIndex]}%`}}},plugins:[{id:"customDataLabels",afterDatasetsDraw:a=>{const t=a.ctx;a.data.datasets.forEach((r,p)=>{a.getDatasetMeta(p).data.forEach((s,n)=>{r.data[n];const C=i[n],{x:v,y:w}=s.tooltipPosition();t.fillStyle="#fff",t.font="bold 16px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(`${C}%`,v,w)})})}}]})};return k(()=>{g()}),D(()=>e.data,()=>{g()},{deep:!0}),(o,f)=>(P(),I("div",B,[z("canvas",{ref_key:"chartCanvas",ref:l},null,512)]))}};export{E as default};

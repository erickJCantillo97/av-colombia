import{s as k}from"./index-CB_GW8FO.js";import{eb as S,fd as $,d as p,q as A,C as B,f as c,a as l,b as t,w as u,u as r,F as g,W as E,o as f,i as L,t as N}from"./app-Bo28TQEx.js";import{_ as T}from"./Datatable-Dgd-M70C.js";import{s as D}from"./index-CLmt1KCO.js";import{a as P,_ as n}from"./Modal-DdJsG76n.js";import"./index-B5S_spGh.js";import"./index-BaNaa6s6.js";import"./index-De23883Q.js";import"./index-DzJls83l.js";import"./index-C237rIMf.js";import"./index-dXw3NvKp.js";import"./index-B0ELMWJI.js";import"./index-m1NPBrBF.js";import"./postcss-De5V8vMj.js";import"./index-BAiYLsPf.js";import"./index-L6BwVXUT.js";import"./index-O6EVvsGQ.js";import"./index-DEYdrqP7.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./index-CRzh1zLP.js";import"./index-DDMJ-Zb-.js";import"./index-nIpRcqjM.js";const j={class:"h-[99vh]"},q={class:"flex gap-x-3 py-2"},F={class:"space-y-3 w-full shadow-lg p-2 rounded-md"},G={class:"w-full shadow-md rounded-md p-2"},W={class:"grid grid-cols-3 gap-2"},z={class:"p-1 rounded-md cursor-pointer border border-black bg-gray-100 text-center uppercase hover:bg-black hover:text-white"},pe={__name:"Index",props:{users:Array,permisos:Array},setup(v){const w=[{header:"Nombre",field:"name",filter:!0},{header:"Correo",field:"email",filter:!0},{header:"Creación",field:"created_at",type:"datetime",filter:!0},{header:"URL Portafolio",field:"url"}],y=S(),x=$(),m=p(!1),d=p(),V=A(()=>_.permisos.filter(a=>!d.value||a.name.includes(d.value))),s=B({id:null,name:"",email:"",password:"",rol:"",password_confirmation:""}),i=p(!1),C={action:()=>{s.reset(),m.value=!1,i.value=!0}},U=[{action:a=>{s.reset(),i.value=!0,m.value=!0,s.name=a.name,s.email=a.email,console.log(a.rol),s.rol=a.rol,s.id=a.id},severity:"secondary",icon:"fa-solid fa-pencil text-sm"},{action:(a,e)=>{x.require({target:e.currentTarget,message:"Seguro de Eliminar el Usuario "+a.name+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{E.delete(route("users.destroy",a.id),{onSuccess:()=>{y.add({severity:"error",icon:"fa-solid fa-trash-can",summary:"¡Accion realizada!",detail:"Usuario eliminado con exito",group:"customTooltipDataTable",life:5e3})}})}})},severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],_=v,h=()=>{m.value?s.put(route("users.update",s.id),{onSuccess:()=>{i.value=!1}}):s.post(route("users.store"),{onSuccess:()=>{i.value=!1}})};return(a,e)=>{const b=k;return f(),c(g,null,[l("div",j,[t(T,{columnas:w,add:C,data:v.users,routecreate:"services.create",actions:U},null,8,["data"])]),t(P,{visible:i.value,"onUpdate:visible":e[6]||(e[6]=o=>i.value=o),width:"90vw"},{title:u(()=>e[7]||(e[7]=[l("span",{class:"text-xl font-bold white-space-nowrap"}," Agregar Usuario",-1)])),icon:u(()=>e[8]||(e[8]=[l("i",{class:"fa-solid fa-plus"},null,-1)])),footer:u(()=>[t(b,{onClick:h,title:"Guardar",severity:"success",label:"Guardar",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),t(b,{onClick:e[5]||(e[5]=o=>i.value=!1),title:"Cancel",severity:"danger",label:"Cancelar",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:u(()=>[l("div",q,[l("div",F,[e[9]||(e[9]=l("h3",{class:"text-center font-semibold text-lg"},"Datos del usuario",-1)),t(n,{label:"Nombre",modelValue:r(s).name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(s).name=o),"error-message":r(s).errors.name},null,8,["modelValue","error-message"]),t(n,{label:"Email",modelValue:r(s).email,"onUpdate:modelValue":e[1]||(e[1]=o=>r(s).email=o)},null,8,["modelValue"]),t(n,{label:"Contraseña",type:"password",modelValue:r(s).password,"onUpdate:modelValue":e[2]||(e[2]=o=>r(s).password=o)},null,8,["modelValue"]),t(n,{label:"Confirmar contraseña",type:"password",modelValue:r(s).password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=o=>r(s).password_confirmation=o)},null,8,["modelValue"])]),l("div",G,[e[10]||(e[10]=l("h3",{class:"text-center font-semibold text-lg"},"Permisos",-1)),t(n,{class:"my-1",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o)},null,8,["modelValue"]),l("div",W,[(f(!0),c(g,null,L(V.value,o=>(f(),c("span",z,N(o.name),1))),256))])])])]),_:1},8,["visible"]),t(r(D))],64)}}};export{pe as default};

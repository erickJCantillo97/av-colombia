import{_ as b}from"./Datatable-C3njT3bP.js";import{_ as y}from"./Modal-CTChaBjJ.js";import C from"./Form-DT4pPiCw.js";import{_ as O}from"./AppLayout-DhE5SdLj.js";import{d as a,x as w,c as E,o as I,w as c,a as V,b as s,A as S}from"./app-Dgn1WH-d.js";import"./sweetalert2.esm.all-DV3w3JmD.js";import"./toasts-Bf1FAz7R.js";import"./index-BwmNT25h.js";import"./index-DQO60pJI.js";import"./index-BdJR5ShC.js";import"./index-C_R9FXb0.js";import"./index-N7lvGe1I.js";import"./index-COtZ2nPY.js";import"./index-xPakfMG2.js";import"./index-BElclPDt.js";import"./index-BTdNgpGm.js";import"./index-6qmIKPmj.js";import"./index-C35WUTmj.js";import"./index-D5d34pas.js";import"./index-CTucpq9s.js";import"./index-Bq_U6rY4.js";import"./filepond-plugin-image-preview.min-CNoOhgIy.js";import"./index-DyZl4zkQ.js";import"./index-BjA0SZAR.js";import"./useCommonUtilities-Ca8fwx5n.js";import"./postcss-CR5ZTcCQ.js";import"./index-DziH76ey.js";import"./index-XG1DguBz.js";import"./index-BImK-sXV.js";import"./index-DnJCTsfb.js";import"./Input-Coh7tCQw.js";import"./index-B5qnzWam.js";import"./index-_zwMLLIH.js";import"./index-C3-QJVLL.js";import"./DetailsTypeReserva-BSLRNX9u.js";import"./ItemDetailTypeReserva-BYjehpJS.js";import"./index-gayrUlDm.js";const R={class:"h-[99vh]"},fe={__name:"Index",props:{payments:Array},setup(v){const o=a(!1);a(1);const m=t=>{if(t==null||t==null)return"Sin definir";var e=new Date(new Date(t).getTime()+new Date(t).getTimezoneOffset()*6e4);return e};a(!1);const n=w({date:new Date,startDate:new Date,endDate:new Date,amount:0,proveedor_id:"",file:"",description:""}),f=a([]),i=a([new Date,new Date]),r=a(),D=a([]),p=a(),d=a(null),_={action:()=>{d.value=null,i.value=[new Date,new Date],n.reset(),u(),o.value=!0}},g=[{name:"Ver",icon:"fa-solid fa-pencil",severity:"info",action:t=>{o.value=!0,d.value=t.id,n.date=t.date,i.value=[m(t.startDate),m(t.endDate)],n.amount=t.amount,p.value=t.proveedor_id,u()}}],A=[{header:"Proveedor",field:"proveedor.nombre",filter:!0},{header:"Fecha de Pago",field:"date",type:"date",filter:!0},{header:"Valor",field:"amount",type:"currency"},{header:"Fecha Inicio",field:"startDate",type:"date",filter:!0},{header:"Fecha Fin",field:"endDate",type:"date",filter:!0},{header:"Comprobante",field:"comprobante",type:"html-custom",renderer:t=>`<a href="${t.comprobante}" class="text-sky-600 underline" target="_blank">Ver Comprobante</a>`}],u=()=>{S.get(route("get.booking.time.range"),{params:{start_date:new Date(i.value[0]).toISOString().split("T")[0],end_date:new Date(i.value[1]).toISOString().split("T")[0]}}).then(t=>{f.value=t.data.proveedores,r.value=t.data.bookingTimeRange.filter(e=>{let l=p.value;return e.proveedors.map(h=>h.proveedor_id).includes(l)}),D.value=[{name:"RESERVADO",value:r.value.filter(e=>e.status=="RESERVADO"),color:"bg-blue-200"},{name:"COMPLETADA",value:r.value.filter(e=>e.status=="COMPLETADA"),color:"bg-green-200"},{name:"CANCELADA",value:r.value.filter(e=>e.status=="CANCELADA"),color:"bg-red-200"},{name:"NO SHOW",value:r.value.filter(e=>e.status=="NO SHOW"),color:"bg-yellow-200"},{name:"CAMBIO DE FECHA",value:r.value.filter(e=>e.status=="CAMBIO DE FECHA"),color:"bg-gray-200"},{name:"REUBICADO",value:r.value.filter(e=>e.status=="REUBICADO"),color:"bg-yellow-200"}]})};return a(),a([]),a([]),(t,e)=>(I(),E(O,{title:"Pagos"},{default:c(()=>[V("div",R,[s(b,{add:_,columnas:A,data:v.payments,actions:g,title:"Pagos"},null,8,["data"])]),s(y,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),title:"AÃ±adir Pagos",width:"80vw"},{default:c(()=>[s(C)]),_:1},8,["modelValue"])]),_:1}))}};export{fe as default};

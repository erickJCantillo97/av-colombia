import{s as j}from"./index-DXQcKr9t.js";import{D as R,C as H,e as q,f as y,o as u,r as Q,b as n,E as U,ao as W,ap as z,d,x as J,c as _,w as b,a as e,h,t as g,g as A,u as f,F as D,i as P,m as K,aq as X,A as Y}from"./app-DntcbIXp.js";import{_ as Z,s as ee}from"./Datatable-BoFSPbHk.js";import{s as te}from"./index-BEQtKriV.js";import{a as F,s as I}from"./index-3cnCZEWI.js";import{_ as oe}from"./AppLayout-RjYkN4Gq.js";import"./Scheduler-DTtkX3u7.js";import{_ as se,a as le}from"./Notas-BxOawys_.js";import{_ as ae}from"./Modal-CV8zJhmH.js";import{_ as w}from"./Input-CYfg-50D.js";import"./index-DhIjlgZz.js";import"./index-EXjeIf7M.js";import"./index-Bp3JjoNx.js";import"./index-DXsx8ZKZ.js";import"./index-_mPuYnk-.js";import"./index-O90njl5U.js";import"./index-BP_FWcov.js";import"./index-B5__VJ5r.js";import"./index-DYSfNyWe.js";import"./index-_Bdl0S-a.js";import"./index-D3p2vcFF.js";import"./postcss-C3TR2orH.js";import"./postcss-BhYV32F0.js";import"./index-CeqeGqfD.js";import"./index--HobR_Uf.js";import"./useCommonUtilities-BgDhORlD.js";import"./index-cnTkTBel.js";import"./index-uRyhvQMj.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-CzilJfpW.js";import"./index-BnvN96wx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.all-Cfk8RDlq.js";import"./toasts-D8PtJVU2.js";import"./Service-CZvP3H7D.js";import"./Toats-D2JPVhCJ.js";import"./searchStore-Wb5aD5RQ.js";import"./logo-iRtnOLaD.js";import"./Loading-Dbkb93J_.js";import"./index-DCHfSdPV.js";import"./index-Bgp-1ssF.js";import"./index-fzeaRcll.js";import"./index-Crhm7CWJ.js";var re=R.extend({name:"columngroup"}),ne={name:"BaseColumnGroup",extends:j,props:{type:{type:String,default:null}},style:re,provide:function(){return{$pcColumnGroup:this,$parentInstance:this}}},ie={name:"ColumnGroup",extends:ne,inheritAttrs:!1,inject:["$columnGroups"],mounted:function(){var a;(a=this.$columnGroups)===null||a===void 0||a.add(this.$)},unmounted:function(){var a;(a=this.$columnGroups)===null||a===void 0||a.delete(this.$)},render:function(){return null}},de=H`
    .p-overlaybadge {
        position: relative;
    }

    .p-overlaybadge .p-badge {
        position: absolute;
        inset-block-start: 0;
        inset-inline-end: 0;
        transform: translate(50%, -50%);
        transform-origin: 100% 0;
        margin: 0;
        outline-width: dt('overlaybadge.outline.width');
        outline-style: solid;
        outline-color: dt('overlaybadge.outline.color');
    }

    .p-overlaybadge .p-badge:dir(rtl) {
        transform: translate(-50%, -50%);
    }
`,ue={root:"p-overlaybadge"},ce=R.extend({name:"overlaybadge",style:de,classes:ue}),me={name:"OverlayBadge",extends:F,style:ce,provide:function(){return{$pcOverlayBadge:this,$parentInstance:this}}},M={name:"OverlayBadge",extends:me,inheritAttrs:!1,components:{Badge:F}};function pe(l,a,x,$,v,r){var m=q("Badge");return u(),y("div",U({class:l.cx("root")},l.ptmi("root")),[Q(l.$slots,"default"),n(m,U(l.$props,{pt:l.ptm("pcBadge")}),null,16,["pt"])],16)}M.render=pe;var ve={name:"Row",extends:j,inject:["$rows"],mounted:function(){var a;(a=this.$rows)===null||a===void 0||a.add(this.$)},unmounted:function(){var a;(a=this.$rows)===null||a===void 0||a.delete(this.$)},render:function(){return null}};const fe={class:"text-lg"},ye={class:"font-bold uppercase"},ge={class:"font-bold uppercase"},be={class:"mt-4"},xe={key:0},$e={class:"flex w-full justify-between gap-x-4"},_e={class:"flex flex-col gap-y-1"},he={class:"flex justify-between"},Ve={for:"",class:"w-full font-bold"},Ce={class:"flex flex-col gap-y-2"},we={class:"w-full"},Ae={key:1,class:"flex flex-col gap-y-2 my-4"},ke={class:"grid grid-cols-4 font-semibold gap-x-6 border-b-4"},Se={class:"flex justify-end gap-x-4"},Be={__name:"Completar",props:W({service:Object},{modelValue:!0,modelModifiers:{}}),emits:["update:modelValue"],setup(l){const a=l,x=z(l,"modelValue",!0),$=d("COMPLETADA"),v=d([]),r=J({saldoPagado:"AV COLOMBIA",status:"COMPLETADA",service_id:a.service.id,conductor:"",placa:"",value:"",saldos:[],extras:[]}),m=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0});function V(){r.extras=a.service.extras.map(p=>({id:p.id,cantidad:p.cantidad,description:p.description,unit_cost:p.unit_cost}))}V();const C=()=>{r.saldos=v.value,r.status=$.value,r.post(route("completar.reserva"),{onSuccess:()=>{r.reset(),x.value=!1}})};function k(){v.value=a.service.proveedors.map(p=>({id:p.id,name:p.proveedor.proveedor.nombre,amount:0}))}return k(),(p,t)=>{const S=I,B=X;return u(),_(ae,{modelValue:x.value,"onUpdate:modelValue":t[3]||(t[3]=o=>x.value=o),title:"Completar Servicio","close-on-escape":""},{footer:b(()=>[e("div",Se,[n(S,{label:"Completar Servicio",severity:"success",onClick:C,icon:"fa-solid fa-save"}),n(S,{label:"Cancelar",severity:"danger",icon:"fa-solid fa-xmark"})])]),default:b(()=>[e("h2",fe,[t[4]||(t[4]=h(" Completar servicio de ")),e("span",ye,g(l.service.cliente_name),1),t[5]||(t[5]=h(" para ")),e("span",ge,g(l.service.service)+" Sin novedad",1),t[6]||(t[6]=h(". "))]),e("div",be,[l.service.service_type=="TRANSFER"||l.service.proveedors.find(o=>o.proveedor_id==="9e602dc8-08e0-42f4-bbb2-1eed02652372")?(u(),y("div",xe,[e("div",$e,[n(w,{label:"Nombre del Conductor",modelValue:f(r).conductor,"onUpdate:modelValue":t[0]||(t[0]=o=>f(r).conductor=o),type:"text",placeholder:"Nombre del conductor",class:"w-full"},null,8,["modelValue"]),n(w,{label:"Placa del Vehiculo",modelValue:f(r).placa,"onUpdate:modelValue":t[1]||(t[1]=o=>f(r).placa=o),type:"text",placeholder:"Placa del Vehiculo",class:"w-full"},null,8,["modelValue"]),n(w,{label:"Valor del Servicio",modelValue:f(r).value,"onUpdate:modelValue":t[2]||(t[2]=o=>f(r).value=o),type:"text",placeholder:"Valor del Servicio",class:"w-full"},null,8,["modelValue"])])])):A("",!0),e("div",_e,[e("div",he,[e("label",Ve,"Saldo ("+g(f(m).format(l.service.saldo-v.value.reduce((o,s)=>o+s.amount,0)))+")",1)]),e("div",Ce,[(u(!0),y(D,null,P(v.value,o=>(u(),y("div",{key:o.id,class:"flex justify-between w-full items-center gap-x-4"},[e("p",we,g(o.name),1),n(w,{class:"w-1/2",type:"number",mode:"currency",modelValue:o.amount,"onUpdate:modelValue":s=>o.amount=s},null,8,["modelValue","onUpdate:modelValue"])]))),128))])]),l.service.extras.length>0?(u(),y("div",Ae,[t[11]||(t[11]=e("h1",{class:"text-lg font-bold text-center"},"Servicio Extras",-1)),e("div",ke,[t[8]||(t[8]=e("p",null,"Cantidad",-1)),t[9]||(t[9]=e("p",null,"Nombre",-1)),K((u(),y("p",null,t[7]||(t[7]=[h("Costo Unitario")]))),[[B,"Cuanto pagaste",void 0,{top:!0}]]),t[10]||(t[10]=e("p",null,"Total",-1))]),(u(!0),y(D,null,P(f(r).extras,o=>(u(),y("div",{key:o.id,class:"grid grid-cols-4 border-b justify-center items-center gap-x-6"},[e("p",null,g(o.cantidad),1),e("p",null,g(o.description),1),n(w,{type:"number",modelValue:o.unit_cost,"onUpdate:modelValue":s=>o.unit_cost=s,mode:"currency"},null,8,["modelValue","onUpdate:modelValue"]),e("span",null,g(f(m).format(o.cantidad*o.unit_cost)),1)]))),128))])):A("",!0)])]),_:1},8,["modelValue"])}}},Oe={class:"py-4"},Ee={class:"w-full mx-auto sm:px-1 lg:px-4 space-y-2"},De={class:"bg-white overflow-hidden sm:rounded-lg flex justify-between items-center px-1"},Ne={class:"uppercase"},Ue=["href"],Pe={class:"flex w-full justify-between font-bold text-xl items-center"},je={class:"shadow-xl rounded-lg p-1 h-[85vh]"},At={__name:"Dashboard",setup(l){d([]);const a=d([]),x=d("");d(0);const $=d([]);d();const v=d(!1),r=d(!1),m=d({}),V=d(!1),C=d([new Date,new Date]);d([]);const k=async()=>{const{data:s}=await Y.get(route("get.all.booking.services.dates",{dates:C.value}));$.value=s.bookingServices},p=s=>{m.value=$.value.find(i=>i.id==s.id),V.value=!0};k();const t=[{label:"Compeltar Servicio",action:s=>{m.value=s,r.value=!0},icon:"fa-solid fa-circle-check text-sm",severity:"success"},{label:"Notas",severity:"secondary",action:s=>{m.value=s,v.value=!0},badge:s=>s.notes,icon:"fa-solid fa-note-sticky text-sm"}],S=[{field:"cliente_name",header:"Nombre del pasajero",filter:!0,sortable:!0},{field:"adults",header:"Pasajeros",filter:!0,sortable:!0,type:"html-custom",renderer:s=>`
      <div class="flex flex-col text-right text-sm items-center">
        <span class="text-center font-bold">Adultos: ${s.adults}</span>
        <span class="text-center">Ni√±os: ${s.boys}</span>
        </div>
      `},{field:"service",header:"Actividad",filter:!0,sortable:!0},{field:"proveedors_names",header:"proveedores",class:"text-center font-semibold text-sm",filter:!0},{field:"cliente_building",header:"Edificio",filter:!0,sortable:!0},{field:"cliente_phone",header:"Telefono",filter:!0,sortable:!0,type:"html-custom",renderer:s=>`<a target="_blank" href="https://wa.me/${s.cliente_phone}?text=Hola  mucho gusto yo soy Sandra la coordinadora de su actividad 
              Hello, nice to talk to you  I'm Sandra the coordinator for  your activity">${s.cliente_phone}</a>`},{field:"hour",header:"Hora",filter:!0,sortable:!0},{field:"status",header:"Estado",filter:!0,sortable:!0,type:"tag",filtertype:"EQUALS",class:"text-center uppercase",severitys:[{text:"RESERVADO",severity:"info",class:""},{text:"CAMBIO DE FECHA",class:"bg-gray-200 font-bold"},{text:"COMPLETADA",class:""},{text:"NO SHOW",severity:"warn",class:""},{text:"REUBICADO",severity:"warn",class:""},{text:"CANCELADA",severity:"danger",class:"animate-pulse"},{text:"PROBLEMATICA",severity:"danger",class:"animate-pulse"},{text:"SIN CONFIRMAR",severity:"danger"}]}],B=d([]),o=s=>{B.value=s};return(s,i)=>{const O=I,G=te,N=ee,T=ve,L=ie;return u(),y(D,null,[n(oe,{title:"Dashboard"},{default:b(()=>[e("div",Oe,[e("div",Ee,[e("div",De,[e("h1",null,[i[4]||(i[4]=h(" Hola ")),e("strong",Ne,g(s.$page.props.auth.user.name),1),i[5]||(i[5]=h(", Bienvenido a tu panel de control "))]),e("a",{target:"_blank",href:`https://vendedores-site.netlify.app/${s.$page.props.auth.user.id}`},[n(O,{label:"Ver Portafolio"})],8,Ue)]),e("div",Pe,[i[6]||(i[6]=e("p",null,"Actividades",-1)),n(G,{modelValue:C.value,"onUpdate:modelValue":i[0]||(i[0]=c=>C.value=c),selectionMode:"range",dateFormat:"dd/mm/yy",manualInput:!1,onValueChange:k},null,8,["modelValue"])]),e("div",je,[n(Z,{columnas:S,rowClass:!0,data:$.value,actions:t,onFilterApply:o},{actions:b(({data:c})=>[c.extras.length==0?(u(),_(O,{key:0,onClick:E=>p(c),severity:"info",text:"",class:"p-button-sm",icon:"fa-solid fa-circle-info text-sm"},null,8,["onClick"])):(u(),_(f(M),{key:1,severity:"danger"},{default:b(()=>[n(O,{onClick:E=>p(c),severity:"info",text:"",class:"p-button-sm",icon:"fa-solid fa-circle-info text-sm"},null,8,["onClick"])]),_:2},1024))]),groupRows:b(()=>[n(L,{type:"footer"},{default:b(()=>[n(T,null,{default:b(()=>[n(N,{footer:"Pasajeros:",colspan:0,footerStyle:"text-align:right"}),n(N,{footer:B.value.reduce((c,E)=>c+E.adults,0)},null,8,["footer"])]),_:1})]),_:1})]),_:1},8,["data"])])])])]),_:1}),m.value?(u(),_(se,{key:0,modelValue:V.value,"onUpdate:modelValue":i[1]||(i[1]=c=>V.value=c),service:m.value},null,8,["modelValue","service"])):A("",!0),v.value?(u(),_(le,{key:1,modelValue:v.value,"onUpdate:modelValue":i[2]||(i[2]=c=>v.value=c),notes:a.value,note:x.value,service:m.value},null,8,["modelValue","notes","note","service"])):A("",!0),r.value?(u(),_(Be,{key:2,modelValue:r.value,"onUpdate:modelValue":i[3]||(i[3]=c=>r.value=c),service:m.value},null,8,["modelValue","service"])):A("",!0)],64)}}};export{At as default};

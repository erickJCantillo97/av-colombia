import{d as u,T as C,aA as N,x as m,Q as y,e as P,o as _,f as b,b as l,w as n,u as i,F as V,a as e,h as S,t as d,i as j,k as z,z as O}from"./app-DVpdczqw.js";import{s as E}from"./index-DFpfw_2G.js";import{_ as I}from"./AppLayout-Dx85EF6U.js";import{_ as Q}from"./Datatable-L9XN6D3i.js";import{s as R}from"./index-BAHlXFQk.js";import{_ as w}from"./Modal-Cbaq9wok.js";import{_ as g}from"./Input-RINFXXvD.js";import{a as M}from"./toasts-CTe7CkCp.js";import"./index-DmB24AAk.js";import"./index-B9W5gkJW.js";import"./index-CUVgbKiM.js";import"./index-B5fVcnNG.js";import"./index-CP_lHnC6.js";import"./index-DyyVcGSN.js";import"./index-DadKD8PZ.js";import"./index-BYA20F9C.js";import"./index-C_jqeKT5.js";import"./index-DNOuHI3s.js";import"./useCommonUtilities-NbiuDOAU.js";import"./postcss-17U0J6nH.js";import"./sweetalert2.esm.all-DOYwHpwi.js";const G={class:"h-[99vh]"},H=e("span",{class:"text-xl font-bold white-space-nowrap"}," Modificar Servicio",-1),J=e("i",{class:"fa-solid fa-plus"},null,-1),K={class:"text-2xl font-bold my-4"},W={class:"italic text-xs mt-1 mb-4"},X={class:"italic text-xs mt-1"},Y=e("span",{class:"text-xl font-bold white-space-nowrap"}," Bloqueos",-1),Z=e("i",{class:"fa-solid fa-lock"},null,-1),ee={class:"text-2xl text-center text-amber-600 font-bold my-4"},te={key:0,class:"text-center text-gray-500"},se={key:1,class:"flex flex-col gap-y-2"},oe=e("div",{class:"flex justify-between font-bold"},[e("p",null," Razón "),e("p",null," Fecha Inicio "),e("p",null," Fecha Fin "),e("p",null," Quitar ")],-1),ae={class:"flex justify-between border-b"},ie={class:"flex justify-between gap-x-2 my-2"},le={class:"w-full"},re={class:"w-full"},ne=e("label",{for:"",class:"font-bold"},"Seleccione el Rango de bloque o del servicio",-1),ce={class:"flex items-center gap-x-2"},de=e("i",{class:"fa-solid fa-minus"},null,-1),ue={class:"text-xs text-red-500"},Ae={__name:"Index",props:{services:Array},setup(B){const{toast:x}=M();u([]);const F={action:()=>{m.visit(route("services.create"))}},o=C({start_date:"",end_date:"",description:""}),f=u(!1),h=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),q=[{header:"Nombre",field:"title",filter:!0},{header:"Tipo de Servicio",field:"type",filter:!0},{header:"Ciudad",field:"city",filter:!0},{header:"Descripción",field:"description",type:"html",filter:!0}],D=N();u(!1);const c=C({service_id:"",adult_tarifa:0,boys_tarifa:0}),r=u({}),p=u(!1);u("");const T=[{action:a=>{m.visit(route("services.show",a.slug))},show:y().props.auth.user.rol=="admin",severity:"primary",icon:"fa-solid fa-eye text-sm",label:"Ver"},{action:a=>{f.value=!0,o.reset(),r.value=a},show:y().props.auth.user.rol=="admin",severity:"warn",icon:"fa-solid fa-lock",label:"Bloqueos"},{action:a=>{y().props.auth.user.rol=="admin"?m.visit(route("services.edit",a.slug)):(p.value=!0,r.value=a,c.service_id=a.id,c.adult_tarifa=a.adult_tarifa,c.boys_tarifa=a.boy_tarifa)},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:(a,t)=>{D.require({target:t.currentTarget,message:"Seguro de Eliminar el Servicio "+a.title+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{console.log(a),m.delete(route("services.destroy",a.id),{onSuccess:()=>{x("success","Servicio eliminado con exito")}})}})},show:y().props.auth.user.rol=="admin",severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],$=()=>{c.post(route("custom.product"),{onSuccess:()=>{x("success","Tarifa creada con exito"),p.value=!1}})},U=()=>{if(o.description==""){o.errors.description="Ingrese una descripción";return}if(o.start_date==""||o.end_date==""){o.errors.start_date="Seleccione un rango de fechas";return}m.post(route("services.lock",r.value.slug),{start_date:o.start_date,description:o.description,end_date:o.end_date},{onSuccess:()=>{x("success","Servicio Bloqueado con exito"),f.value=!1,o.reset()}})},A=a=>{m.post(route("services.unlock",a),{},{onSuccess:()=>{x("success","Bloque Quitado Exitosamente")}})};return(a,t)=>{const v=E,k=P("VueDatePicker"),L=O;return _(),b(V,null,[l(I,{title:"Services"},{default:n(()=>[e("div",G,[l(Q,{add:F,columnas:q,data:B.services,routecreate:"services.create",actions:T,title:"Servicios"},null,8,["data"])])]),_:1}),l(w,{visible:p.value,"onUpdate:visible":t[3]||(t[3]=s=>p.value=s)},{title:n(()=>[H]),icon:n(()=>[J]),footer:n(()=>[l(v,{onClick:$,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(v,{onClick:t[2]||(t[2]=s=>p.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:n(()=>[e("h3",K,[S(" Agregar Tarifa a "),e("strong",null,d(r.value.title),1)]),l(g,{label:"Tarifa para Adultos",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:i(c).adult_tarifa,"onUpdate:modelValue":t[0]||(t[0]=s=>i(c).adult_tarifa=s)},null,8,["modelValue"]),e("div",W," La tariafa Base es de "+d(i(h).format(r.value.adults_price)),1),l(g,{label:"Tarifa para niños",type:"number",currency:"COP",minFractionDigits:2,maxFractionDigits:2,modelValue:i(c).boys_tarifa,"onUpdate:modelValue":t[1]||(t[1]=s=>i(c).boys_tarifa=s)},null,8,["modelValue"]),e("span",X," La tariafa Base es de "+d(i(h).format(r.value.boys_price)),1)]),_:1},8,["visible"]),l(w,{visible:f.value,"onUpdate:visible":t[8]||(t[8]=s=>f.value=s)},{title:n(()=>[Y]),icon:n(()=>[Z]),footer:n(()=>[l(v,{onClick:U,title:"Save",severity:"success",label:"Save",outlined:"",icon:"fa-solid fa-save",class:"!h-8"}),l(v,{onClick:t[7]||(t[7]=s=>f.value=!1),title:"Cancel",severity:"danger",label:"Cancel",outlined:"",icon:"fa-solid fa-times",class:"!h-8"})]),default:n(()=>[e("h3",ee,[S(" Bloqueos del Servicio "),e("strong",null,d(r.value.title),1)]),r.value.locks.length==0?(_(),b("div",te,"No hay bloqueos")):(_(),b("div",se,[oe,(_(!0),b(V,null,j(r.value.locks,s=>(_(),b("div",ae,[e("p",null,d(s.description),1),e("p",null,d(s.start_date),1),e("p",null,d(s.end_date),1),e("p",null,[z(l(v,{icon:"fa-solid fa-xmark-circle",onClick:me=>A(s.id),text:"",severity:"danger"},null,8,["onClick"]),[[L,"Quitar Bloqueo"]])])]))),256))])),e("div",ie,[e("div",le,[l(g,{label:"Razón del Bloqueo",modelValue:i(o).description,"onUpdate:modelValue":t[4]||(t[4]=s=>i(o).description=s),"error-message":i(o).errors.description},null,8,["modelValue","error-message"])]),e("div",re,[ne,e("div",ce,[l(k,{modelValue:i(o).start_date,"onUpdate:modelValue":t[5]||(t[5]=s=>i(o).start_date=s),"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota"},null,8,["modelValue"]),de,l(k,{modelValue:i(o).end_date,"onUpdate:modelValue":t[6]||(t[6]=s=>i(o).end_date=s),"min-date":i(o).start_date,"hide-offset-dates":"",teleport:!0,"auto-apply":"","enable-time-picker":!1,timezone:"America/Bogota"},null,8,["modelValue","min-date"])]),e("span",ue,d(i(o).errors.start_date),1)])])]),_:1},8,["visible"]),l(i(R))],64)}}};export{Ae as default};

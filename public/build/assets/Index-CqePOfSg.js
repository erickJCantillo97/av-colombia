import{_ as B}from"./Datatable-hQkz7f62.js";import{Q as D,O as z,d as y,u as F,A as T,f as r,o as a,a as i,b as c,w as u,i as m,h as l,g as C,F as h,j as S,n as U,t as p,I as G}from"./app-BjdGmPou.js";import{s as I}from"./index-Kng0AFT2.js";import{M}from"./Modal-Dp_jrBt6.js";import{_ as w}from"./Input-BCM11HpD.js";import{s as V}from"./index-GLcaQ0Om.js";import"./index-CusoX4EI.js";import"./index-DNbAJjEJ.js";import"./index-HQvURZwN.js";import"./index-ClLvwz-a.js";import"./index-C5oL00Rq.js";import"./index-BCBl68Ec.js";import"./index-uQCeyMKi.js";import"./index-BXT2NVcg.js";import"./index-DKdiQZOM.js";import"./index-ClYCM75D.js";import"./index-BxBY3ixl.js";import"./index-DDA7Jrvu.js";import"./index-pvyVXIRL.js";import"./index-fqUrUwzA.js";import"./index-BGrA-TuF.js";import"./index-C5NP5O02.js";import"./useCommonUtilities-BgDhORlD.js";import"./postcss-DiSvPd6i.js";import"./postcss-D1vD6ISy.js";import"./index-BABDUr5B.js";import"./index-4xBowb-8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BCYvmul0.js";import"./index-Bzwhncww.js";import"./index-BaVauj2F.js";import"./index-EJrfiaB9.js";const q={class:"bg-white rounded-xl"},O={class:"text-xl font-bold"},P={key:0,class:"fa-solid fa-plus"},Q={key:1,class:"fa-solid fa-pencil"},H={class:"space-y-6 py-2"},J={class:"bg-gray-50 border border-gray-200 rounded-xl p-6 space-y-6"},K={class:"w-full"},R={class:"max-h-72 overflow-y-auto bg-white border border-gray-200 rounded-xl p-3"},W={class:"space-y-2"},X=["onClick"],Y={class:"flex items-center justify-between"},Z={class:"font-medium text-sm text-gray-900"},ee={key:0,class:"fa-solid fa-check-circle text-blue-600"},se={key:1,class:"fa-regular fa-circle text-gray-400"},te={key:0,class:"text-red-500 text-sm mt-2 flex items-center gap-1"},ie={key:1,class:"mt-4 bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-4"},oe={class:"text-sm font-bold text-gray-900 mb-3 flex items-center gap-2"},re={class:"flex flex-wrap gap-2"},ae=["onClick"],Ge={__name:"Index",props:{ticketTypes:Array,services:Array},setup(k){const v=k,$=[{header:"Tipo de Ticket",field:"name",filter:!0},{header:"Servicios Asociados",field:"services_count",filter:!1,type:"html-custom",renderer:s=>{const e=s.services?s.services.length:0;return`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                ${e} servicio${e!==1?"s":""}
              </span>`}},{header:"Servicios",field:"services_list",filter:!1,type:"html-custom",renderer:s=>{if(!s.services||s.services.length===0)return'<span class="text-gray-500 italic">Sin servicios</span>';const e=s.services.map(x=>x.title).join(", "),o=e.length>50?e.substring(0,50)+"...":e;return`<span class="text-sm" title="${e}">${o}</span>`}}],b=D(),j=z(),d=y(!1),n=y(!1),f=y(""),t=F({id:null,name:"",services:[]}),A={action:()=>{t.reset(),d.value=!1,n.value=!0}},L=[{action:s=>{t.reset(),n.value=!0,d.value=!0,t.id=s.id,t.name=s.name,t.services=s.services?s.services.map(e=>e.id):[]},severity:"secondary",icon:"fa-solid fa-pencil text-sm"},{action:(s,e)=>{j.require({target:e.currentTarget,message:"¿Seguro de eliminar el tipo de ticket "+s.name+"?",icon:"fa-solid fa-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-sm p-button-danger",rejectLabel:"Cancelar",acceptLabel:"Eliminar",accept:()=>{G.delete(route("ticketTypes.destroy",s.id),{onSuccess:()=>{b.add({severity:"error",icon:"fa-solid fa-trash-can",summary:"¡Acción realizada!",detail:"Tipo de ticket eliminado con éxito",group:"customTooltipDataTable",life:5e3})}})}})},severity:"danger",icon:"fa-regular fa-trash-can text-sm"}],E=T(()=>f.value?v.services.filter(s=>s.title.toLowerCase().includes(f.value.toLowerCase())):v.services),g=T(()=>v.services.filter(s=>t.services.includes(s.id))),_=s=>{t.services.includes(s)?t.services=t.services.filter(e=>e!==s):t.services.push(s)},N=()=>{d.value?t.put(route("ticketTypes.update",t.id),{onSuccess:()=>{n.value=!1,b.add({severity:"success",icon:"fa-solid fa-check",summary:"¡Éxito!",detail:"Tipo de ticket actualizado con éxito",group:"customTooltipDataTable",life:3e3})}}):t.post(route("ticketTypes.store"),{onSuccess:()=>{n.value=!1,b.add({severity:"success",icon:"fa-solid fa-check",summary:"¡Éxito!",detail:"Tipo de ticket creado con éxito",group:"customTooltipDataTable",life:3e3})}})};return(s,e)=>(a(),r(h,null,[i("div",q,[c(B,{columnas:$,add:A,data:k.ticketTypes,actions:L},null,8,["data"])]),c(M,{visible:n.value,"onUpdate:visible":e[3]||(e[3]=o=>n.value=o),width:"900px","close-on-escape":""},{title:u(()=>[i("span",O,p(d.value?"Editar":"Agregar")+" Tipo de Ticket ",1)]),icon:u(()=>[d.value?(a(),r("i",Q)):(a(),r("i",P))]),footer:u(()=>[c(l(V),{onClick:N,title:"Guardar",severity:"success",label:"Guardar",outlined:"",icon:"fa-solid fa-save",class:"!h-9",loading:l(t).processing},null,8,["loading"]),c(l(V),{onClick:e[2]||(e[2]=o=>n.value=!1),title:"Cancelar",severity:"danger",label:"Cancelar",outlined:"",icon:"fa-solid fa-times",class:"!h-9"})]),default:u(()=>[i("div",H,[i("div",J,[i("div",null,[e[4]||(e[4]=i("h3",{class:"text-base font-bold text-gray-900 mb-3 flex items-center gap-2"},[i("i",{class:"fa-solid fa-tag text-rose-500"}),m(" Información del Ticket ")],-1)),c(w,{label:"Nombre del Tipo de Ticket",modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=o=>l(t).name=o),"error-message":l(t).errors.name,placeholder:"Ej: Ticket VIP, Ticket Estándar, etc."},null,8,["modelValue","error-message"])]),i("div",K,[e[9]||(e[9]=i("h3",{class:"text-base font-bold text-gray-900 mb-3 flex items-center gap-2"},[i("i",{class:"fa-solid fa-list-check text-blue-500"}),m(" Servicios Asociados ")],-1)),c(w,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=o=>f.value=o),placeholder:"Buscar servicios...",class:"mb-3"},{prefix:u(()=>[...e[5]||(e[5]=[i("i",{class:"fa-solid fa-magnifying-glass text-gray-400"},null,-1)])]),_:1},8,["modelValue"]),i("div",R,[i("div",W,[(a(!0),r(h,null,S(E.value,o=>(a(),r("button",{key:o.id,onClick:x=>_(o.id),class:U(["w-full p-3 rounded-lg border-2 transition-all duration-200 text-left",l(t).services.includes(o.id)?"bg-blue-50 border-blue-500 shadow-sm":"bg-gray-50 border-gray-200 hover:border-blue-300 hover:bg-blue-50"])},[i("div",Y,[i("span",Z,p(o.title),1),l(t).services.includes(o.id)?(a(),r("i",ee)):(a(),r("i",se))])],10,X))),128))])]),l(t).errors.services?(a(),r("div",te,[e[6]||(e[6]=i("i",{class:"fa-solid fa-circle-exclamation"},null,-1)),m(" "+p(l(t).errors.services),1)])):C("",!0),g.value.length>0?(a(),r("div",ie,[i("h4",oe,[e[7]||(e[7]=i("i",{class:"fa-solid fa-check-double text-blue-600"},null,-1)),m(" Servicios Seleccionados ("+p(g.value.length)+") ",1)]),i("div",re,[(a(!0),r(h,null,S(g.value,o=>(a(),r("span",{key:o.id,class:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-blue-500 text-white shadow-sm hover:bg-blue-600 transition-colors"},[m(p(o.title)+" ",1),i("button",{onClick:x=>_(o.id),class:"ml-2 inline-flex items-center justify-center w-4 h-4 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors"},[...e[8]||(e[8]=[i("i",{class:"fa-solid fa-xmark text-xs"},null,-1)])],8,ae)]))),128))])])):C("",!0)])])])]),_:1},8,["visible"]),c(l(I))],64))}};export{Ge as default};

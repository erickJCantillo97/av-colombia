import{d as v,C as N,f as m,b as t,w as x,F as V,o as p,a as s,u,h as $,i as B,k as T,g as j,T as A}from"./app-EWOmaCfw.js";import{s as E}from"./index-BoyA2nwV.js";import{c as I}from"./index-CaCqVJwF.js";import{_ as z}from"./Datatable-BP9IoItN.js";import{a as F,_ as a}from"./Modal-Cir0YHi9.js";import{_ as R}from"./AppLayout-TXu6EnvV.js";import{S as O,a as L}from"./toasts-CuGasqAw.js";import"./index-BmVByocl.js";import"./index-CvFEXdRP.js";import"./index-CutyXYEI.js";import"./index-Bto1JRKd.js";import"./index-CVTfU2ty.js";import"./index-m8RaFb6R.js";import"./index-DpyPSFjA.js";import"./postcss-wcqKN7rU.js";import"./index-B4UeSfF6.js";import"./index-D3ZEhRao.js";import"./index-B-UIwk68.js";import"./index-BpNHCGG3.js";import"./useCommonUtilities-DO03hYfs.js";import"./moment-Cijl8gKs.js";import"./index-DvgpiVU2.js";import"./index-G6IgJ5YK.js";import"./index-BbpZh-tz.js";import"./index-xfeo0sML.js";const h={class:"flex gap-4"},G={class:"flex flex-col w-1/3 gap-y-4"},H={class:"flex flex-wrap gap-4 w-full justify-between"},M={class:"flex items-center gap-2"},Q={class:"flex items-center gap-2"},W={key:0,class:"w-2/3 col-sapn-1 md:col-span-3 border rounded-lg"},q={class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"},J={class:"justify-between w-full px-2 gap-x-2 grid grid-cols-8"},K={class:"flex gap-x-2"},De={__name:"Index",props:{proveedores:Array},setup(w){const{toast:f}=L(),n=v(!1),y={action:()=>{n.value=!0,o.reset()}},r=v("Dinero"),C=[{action:i=>{n.value=!0,o.services=i.services.map(e=>e.pivot),o.id=i.id,o.nombre=i.nombre,o.direccion=i.direccion,o.telefono=i.telefono},severity:"info",icon:"fa-solid fa-pencil text-sm"},{action:i=>{O.fire({title:"Eliminar Proveedor",text:"Estas seguro de eliminar este proveedor?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(e=>{e.isConfirmed&&o.delete(route("proveedors.destroy",i.id),{onSuccess:()=>{f("error","Proveedor Eliminado")}})})},severity:"danger",icon:"fa-solid fa-trash text-sm"}],D=[{field:"nombre",header:"Nombre",filter:!0},{field:"telefono",header:"Telefono",filter:!0}],b=v([]);(()=>{axios.get(route("get.services")).then(i=>{b.value=i.data.services})})();const o=N({id:null,nombre:"",direccion:"a.",telefono:"",services:[]}),_=()=>{o.services.push({service_id:"",concepto:"",value:""})},P=i=>{o.services.splice(i,1)},S=()=>{o.id?o.put(route("proveedors.update",o.id),{onSuccess:()=>{o.reset(),n.value=!1,f("success","Proveedor Actualizado")}}):o.post(route("proveedors.store"),{onSuccess:()=>{o.reset(),f("success","Proveedor Creado")}})};return(i,e)=>{const g=I,c=E,k=A;return p(),m(V,null,[t(R,null,{default:x(()=>[t(z,{data:w.proveedores,actions:C,columnas:D,add:y,title:"proveedores"},null,8,["data"])]),_:1}),t(F,{visible:n.value,"onUpdate:visible":e[6]||(e[6]=l=>n.value=l),"close-on-escape":"true",title:"Añadir Proveedor",width:"80vw"},{footer:x(()=>[s("div",K,[t(c,{severity:"success",label:"Guardar",onClick:S}),t(c,{severity:"danger",label:"Cancelar",onClick:e[5]||(e[5]=l=>n.value=!1)})])]),default:x(()=>[s("div",h,[s("div",G,[e[10]||(e[10]=s("h1",{class:"text-2xl font-mono font-semibold text-center bg-black rounded-t-lg text-white gap-x-3 p-2"}," Datos del Proveedor ",-1)),t(a,{label:"Nombre",class:"w-full",modelValue:u(o).nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>u(o).nombre=l)},null,8,["modelValue"]),t(a,{label:"Telefono",class:"w-full",modelValue:u(o).telefono,"onUpdate:modelValue":e[1]||(e[1]=l=>u(o).telefono=l)},null,8,["modelValue"]),s("div",H,[e[9]||(e[9]=s("label",{for:""},"Politicas",-1)),s("div",M,[t(g,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value=l),inputId:"Dinero",name:"Dinero",value:"Dinero"},null,8,["modelValue"]),e[7]||(e[7]=s("label",{for:"Dinero"},"Dinero",-1))]),s("div",Q,[t(g,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value=l),inputId:"Porcentaje",name:"Porcentaje",value:"Porcentaje",size:"Normal"},null,8,["modelValue"]),e[8]||(e[8]=s("label",{for:"Porcentaje",class:"text-sm"},"Porcentaje",-1))])]),t(a,{label:"Penalización por NO SHOW",type:"number",mode:r.value=="Dinero"?"currency":"decimal",suffix:r.value=="Dinero"?"":"%",min:"0",max:r.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["mode","suffix","max"]),t(a,{label:"Penalización por CANCELACIÓN",type:"number",mode:r.value=="Dinero"?"currency":"decimal",suffix:r.value=="Dinero"?"":"%",min:"0",max:r.value=="Dinero"?1e5:100,step:.25,minFractionDigits:0,"max-fraction-digits":2},null,8,["mode","suffix","max"])]),i.$page.props.auth.user.rol=="admin"||i.$page.props.auth.user.rol=="SUPER ADMINISTRADOR"?(p(),m("div",W,[s("h1",q,[e[11]||(e[11]=$(" Servicios ")),t(c,{icon:"fa-solid fa-plus",outlined:"",severity:"success",class:"size-6",onClick:e[4]||(e[4]=l=>_())})]),e[12]||(e[12]=s("div",{class:"grid grid-cols-8 w-full font-bold px-2 text-left"},[s("div",{class:"col-span-3 w-full"},"Servicio"),s("div",{class:"col-span-3"},"Concepto"),s("div",{class:""},"Tarifa"),s("div",{class:""})],-1)),(p(!0),m(V,null,B(u(o).services,(l,U)=>(p(),m("div",J,[t(a,{type:"dropdown",class:"col-span-3",modelValue:l.service_id,"onUpdate:modelValue":d=>l.service_id=d,"option-label":"title","option-value":"id",options:b.value},null,8,["modelValue","onUpdate:modelValue","options"]),t(a,{class:"w-full col-span-3",modelValue:l.concepto,"onUpdate:modelValue":d=>l.concepto=d},null,8,["modelValue","onUpdate:modelValue"]),t(a,{type:"number",mode:"currency",class:"w-full",modelValue:l.value,"onUpdate:modelValue":d=>l.value=d},null,8,["modelValue","onUpdate:modelValue"]),T(t(c,{icon:"fa-solid fa-xmark-circle",class:"w-full",text:"",severity:"danger",onClick:d=>P(U)},null,8,["onClick"]),[[k,"Quitar"]])]))),256))])):j("",!0)])]),_:1},8,["visible"])],64)}}};export{De as default};

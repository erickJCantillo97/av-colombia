var d=Object.defineProperty;var l=(t,s,e)=>s in t?d(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var a=(t,s,e)=>l(t,typeof s!="symbol"?s+"":s,e);import{y as o,x as m,A as u}from"./app-BTGziAej.js";import{a as i,g as n}from"./Toats-RcJDUpcK.js";class p{constructor(){a(this,"url",null)}assignMatchingKeys(s,e){Object.keys(s).forEach(r=>{r in e&&(e[r]=s[r])})}submit(s,e=null){return e?o.put(route(this.url+".update",e),s,{onSuccess:()=>{n("Actualizado Exitosamente")},onError:r=>{i(r.response.data.message||"Error al actualizar")}}):o.post(route(this.url+".store"),s,{onSuccess:()=>{n("Guardado Exitosamente")},onError:r=>{i(r.response.data.message||"Error al guardar")}})}delete(s){return o.delete(route(this.url+".destroy",s),{onSuccess:()=>{n("Eliminado Exitosamente")},onError:e=>{i(e.response.data.message||"Error al eliminar")}})}}class y extends p{constructor(e){super();a(this,"loading",!1);a(this,"service",[]);a(this,"portada",null);a(this,"form",m({title:"",description:"",features:[],boys_price:0,adults_price:0,code:"",includes:[],notIncludes:[],type:"TOUR",city:"Cartagena",problematic:0,duration_type:"",destinations:"",duration:0,duration_unit:"Dias",capacidad_min:1,capacidad_max:1}));this.service=e,this.url="services",e&&(this.assignMatchingKeys(e,this.form),this.form.includes=JSON.parse(e.includes),this.form.notIncludes=JSON.parse(e.notIncludes))}async getProveedorsByService(e){const{data:r}=await u.get(route("get.proveedors.by.service",e));return r.proveedors}async getServices(){const{data:e}=await u.get(route("get.all.services"));return e.services}async submit(){var c;let e=this.form.includes,r=this.form.notIncludes;this.form.notIncludes=JSON.stringify(this.form.notIncludes),this.form.includes=JSON.stringify(this.form.includes),super.submit(this.form,((c=this.service)==null?void 0:c.id)??null),this.form.includes=e,this.form.notIncludes=r}async setPortada(){o.post(route("set.portada",this.service.slug),{portada:this.portada},{onSuccess:()=>{n("Portada actualizada exitosamente")},onError:e=>{i("Error al actualizar la portada")}})}}export{y as S};

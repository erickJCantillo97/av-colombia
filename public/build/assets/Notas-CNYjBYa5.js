import{aS as R,aT as E,u as z,d as k,p as W,c as B,o as a,w as h,a as e,f as d,E as _,h as m,G as T,F as O,j as F,t as o,b as c,i as I,g as S,T as Z,I as J,a0 as M}from"./app-DgFm554V.js";import{s as ee}from"./index-FpLbMnRE.js";import{s as te}from"./AppLayout-KROmcBeP.js";import{s as L}from"./index-DJae3Fo8.js";import{S as U}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{a as se}from"./toasts-CAnEIL5D.js";import{_ as H}from"./Modal-Cu3WA7eR.js";import{_ as A}from"./Input-ulbx02Oo.js";import{S as oe}from"./Service-D6jA31AR.js";import{u as le}from"./Auth-BqEUqBsU.js";import{_ as ne}from"./logo-BuTzKxbF.js";import{_ as ie}from"./Loading-Dbpw9NyH.js";const ae={class:"p-2"},re={class:"mb-4 flex flex-col"},de={class:"grid grid-cols-5 border-y items-center border text-right gap-x-4"},ue={class:"col-span-1"},ce={class:"col-span-1 text-nowrap truncate"},ve={class:"col-span-1"},me={class:"col-span-1"},pe=["onUpdate:modelValue"],fe={class:"flex justify-end p-6 space-x-4"},be={__name:"ServiceCancel",props:R({service:Object},{modelValue:{},modelModifiers:{},view:{default:!1},viewModifiers:{}}),emits:["update:modelValue","update:view"],setup(s){const D=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),f=E(s,"modelValue"),g=E(s,"view"),v=s,p=z({date:"",proveedors:[]}),V=k([]);W(()=>{V.value=v.service.proveedors.map(w=>{var l=w.proveedor;return{proveedor_id:w.id,concept:l.concept,proveedor:w,pasajeros:v.service.adults,cost:w.cost,proveedor_name:l.proveedor.nombre,costo_penalidad:l.proveedor.type_penalidad_cost=="Porcentaje"?l.proveedor.penalidad_cancelacion/100*w.cost:l.proveedor.penalidad_cancelacion*v.service.adults}})});const b=()=>{p.proveedors=V.value,p.post(route("cancelar.servicio",v.service.id),{onSuccess:()=>{f.value=!1,g.value=!1}})};return(w,l)=>{const n=L;return a(),B(H,{title:`Cancelar Servicio ${s.service.service}`,modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=r=>f.value=r),width:"70vw",onClose:l[3]||(l[3]=r=>f.value=!1),"close-on-escape":""},{default:h(()=>[e("div",ae,[e("div",re,[l[4]||(l[4]=e("label",{for:"",class:"font-bold"},"Fecha de Cancelación",-1)),_(e("input",{label:"Fecha de Cancelación",type:"date",class:"rounded-lg shadow-sm border-gray-300 p-2","onUpdate:modelValue":l[0]||(l[0]=r=>m(p).date=r)},null,512),[[T,m(p).date]])]),l[5]||(l[5]=e("div",{class:"grid grid-cols-5 font-bold uppercase bg-gray-300 p-2 text-center"},[e("div",{class:"col-span-1"},"Proveedor"),e("div",{class:"col-span-1"},"Concepto"),e("div",{class:"col-span-1"},"Pasajeros"),e("div",{class:"col-span-1"},"Costo"),e("div",{class:"col-span-1"},"Penalidad Total")],-1)),(a(!0),d(O,null,F(V.value,r=>(a(),d("div",de,[e("div",ue,o(r.proveedor_name),1),e("div",ce,o(r.concept),1),e("div",ve,o(r.pasajeros),1),e("div",me,o(m(D).format(r.cost)),1),_(e("input",{class:"col-span-1 rounded-md border border-gray-300 p-2","onUpdate:modelValue":u=>r.costo_penalidad=u,type:"number",mode:"currency"},null,8,pe),[[T,r.costo_penalidad]])]))),256))]),e("div",fe,[c(n,{onClick:l[1]||(l[1]=r=>f.value=!1)},{default:h(()=>[...l[6]||(l[6]=[I("No, Cerrar",-1)])]),_:1}),c(n,{severity:"danger",onClick:b},{default:h(()=>[...l[7]||(l[7]=[I("Si, Cancelar Servicio",-1)])]),_:1})])]),_:1},8,["title","modelValue"])}}},ye={class:"p-2"},xe={class:"mb-4 flex flex-col"},ge={class:"font-extrabold text-2xl text-center",for:""},we=["max"],Ce={class:"grid grid-cols-6 border-y items-center border text-right gap-x-4 py-1"},$e={class:"col-span-1"},Ve={class:"col-span-1 text-nowrap truncate"},he={class:"col-span-1"},ke={class:"col-span-1"},Se=["onUpdate:modelValue","onInput"],je={class:"col-span-1"},_e={class:"flex justify-end p-6 space-x-4"},De={__name:"ServiceNoShow",props:R({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const D=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),f=E(s,"modelValue"),g=s,v=z({cantidad:g.service.adults,notes:"",proveedors:[]}),p=k([]);W(()=>{p.value=g.service.proveedors.map(l=>{var n=l.proveedor;return{proveedor_id:l.id,concept:n.concept,proveedor:l,pasajeros:g.service.adults,cost:l.cost,proveedor_name:n.proveedor.nombre,totalpayment:0,costo_penalidad:n.proveedor.type_penalidad_cost=="Porcentaje"?n.proveedor.penalidad_no_show/100*l.cost/g.service.adults:n.proveedor.penalidad_no_show}}),b()});const V=()=>{v.proveedors=p.value,v.post(route("noshow.servicio",g.service.id),{onSuccess:()=>{f.value=!1}})},b=()=>{p.value.forEach(l=>{l.total_no_show=l.costo_penalidad*v.cantidad,w(l)})},w=l=>{const n=l.pasajeros-v.cantidad,r=l.cost/l.pasajeros*n;l.totalpayment=r+l.costo_penalidad*v.cantidad};return(l,n)=>{const r=L;return a(),B(H,{title:`Marcar como No SHOW ${s.service.service}`,modelValue:f.value,"onUpdate:modelValue":n[3]||(n[3]=u=>f.value=u),width:"70vw",onClose:n[4]||(n[4]=u=>f.value=!1),"close-on-escape":""},{default:h(()=>[e("div",ye,[e("div",xe,[e("h1",ge,o(s.service.cliente_name),1),n[5]||(n[5]=e("label",{for:"",class:"font-bold"},"Cuantos no se presentaron?",-1)),_(e("input",{type:"number",min:1,onInput:b,max:s.service.adults,class:"rounded-lg border-gray-300","onUpdate:modelValue":n[0]||(n[0]=u=>m(v).cantidad=u)},null,40,we),[[T,m(v).cantidad]])]),c(A,{type:"textarea",modelValue:m(v).notes,"onUpdate:modelValue":n[1]||(n[1]=u=>m(v).notes=u),label:"¿Porque no se presentaron?",class:"text-red-500"},null,8,["modelValue"]),n[6]||(n[6]=e("div",{class:"grid grid-cols-6 font-bold uppercase bg-gray-300 p-2 text-center"},[e("div",{class:"col-span-1"},"Proveedor"),e("div",{class:"col-span-1"},"Concepto"),e("div",{class:"col-span-1"},"Pasajeros"),e("div",{class:"col-span-1"},"Costo total Servicio"),e("div",{class:"col-span-1"},"Pago por No Show"),e("div",{class:"col-span-1"},"Total a pagar")],-1)),(a(!0),d(O,null,F(p.value,u=>(a(),d("div",Ce,[e("div",$e,o(u.proveedor_name),1),e("div",Ve,o(u.concept),1),e("div",he,o(u.pasajeros),1),e("div",ke,o(m(D).format(u.cost)),1),_(e("input",{class:"col-span-1 rounded-md border-gray-300 p-2","onUpdate:modelValue":C=>u.costo_penalidad=C,onInput:C=>w(u),type:"number",mode:"currency"},null,40,Se),[[T,u.costo_penalidad]]),e("div",je,o(m(D).format(u.totalpayment)),1)]))),256))]),e("div",_e,[c(r,{onClick:n[2]||(n[2]=u=>f.value=!1)},{default:h(()=>[...n[7]||(n[7]=[I("No, Cerrar",-1)])]),_:1}),c(r,{severity:"warn",onClick:V},{default:h(()=>[...n[8]||(n[8]=[I("Si, Servicio No show",-1)])]),_:1})])]),_:1},8,["title","modelValue"])}}},Oe={class:"flex items-center gap-2"},Pe={class:"font-bold text-lg"},Ne={class:"flex flex-col gap-y-1.5 text-sm"},Be={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ue={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ae={key:0,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ee={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Fe={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ie={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Me={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Te=["href"],Re={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Le={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},He={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ge={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},ze={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},We={key:1,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},qe={key:2,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Je={key:3,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ke={key:4,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Qe={key:5,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Xe={key:6,class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ye={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},Ze={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},et=["href"],tt={class:"flex flex-col border py-1 bg-white/30 rounded-md px-2"},st={class:"text-lg flex w-full justify-between items-center mt-2"},ot={class:"rounded-full bg-green-800 text-white px-1.5 py-0.5 text-xs fles items-center justify-center"},lt={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},nt={class:"text-lg flex w-full justify-between items-center mt-2"},it={class:"rounded-full bg-sky-800 text-white px-1.5 py-0.5 text-xs flex items-center justify-center"},at={class:"flex justify-between border py-1 bg-white/30 rounded-md px-2"},rt={class:"font-semibold"},dt={key:0,class:"flex flex-col items-center"},ut={class:"grid grid-cols-3 md:grid-cols-6 gap-2"},ct={class:"flex flex-col gap-y-2"},vt={class:"flex flex-col gap-y-1"},mt={key:0,class:"flex items-center gap-x-2"},pt={key:1},ft={class:"flex items-center gap-2"},bt={class:"flex justify-end gap-2"},Gt={__name:"viewBooking",props:R({service:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const{hasRole:D}=le(),f=new oe,{toast:g}=se(),v=s,p=k(null),V=E(s,"modelValue"),b=k(!1),w=k(!1),l=k(!1),n=z({service:v.service.id,current_id:"",new_id:"",state:"REUBICAR",note:"",terminated:!0,value:""}),r=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),u=()=>{b.value=!0},C=(x,t)=>{U.fire({title:x,text:"Estas seguro de realizar esta acción?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(j=>{j.isConfirmed&&(U.fire({title:x,text:"Esta reserva ha sido "+x+".",icon:"success"}),J.post(route("set.states.booking"),{service:v.service.id,state:x,terminated:t},{onSuccess:()=>{g("success","Reserva "+x)}}))})},y=()=>{U.fire({title:"Cambio de Fecha",html:'<input type="date" id="swal-date" class="w-full rounded-md text-center">',showCancelButton:!0,confirmButtonText:"Cambiar Fecha",showLoaderOnConfirm:!0,preConfirm:async()=>{const x=document.getElementById("swal-date").value;return x?(await J.post(route("set.states.booking"),{service:v.service.id,state:"CAMBIO DE FECHA",date:x,terminated:!1}),x):(U.showValidationMessage("Debes seleccionar una fecha"),!1)},allowOutsideClick:()=>!U.isLoading()}).then(x=>{x.isConfirmed&&g("success","Fecha Cambiada")})},P=x=>{if(x==null||x==null)return"Sin definir";var t=new Date(new Date(x).getTime()+new Date(x).getTimezoneOffset()*6e4).toLocaleString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"});return t=="30/11/2"?"INDEFINIDO":t},$=()=>{if(!p.value||!n.new_id||!n.value)return g("error","Rellene todos los Campos"),0;n.current_id=p.value.id,n.service=v.service.id,n.state="REUBICADO",n.terminated=!1,n.post(route("set.states.booking"),{onSuccess:()=>{l.value=!1,n.reset(),g("success","Servicio REUBICADO")}})},G={reservado:"blue","CAMBIO DE FECHA":"gray","NO SHOW":"amber",REUBICADO:"orange",CANCELADA:"green"},q=k([]),K=async()=>{q.value=await f.getProveedorsByService(v.service.service_id)},Q=()=>{n.reset(),l.value=!0,K()};return(x,t)=>{const j=L,X=te,Y=ee,N=Z;return a(),d(O,null,[c(X,{visible:V.value,"onUpdate:visible":t[6]||(t[6]=i=>V.value=i),"pt:root:class":`!bg-${G[s.service.status]}-200`,header:"Detalles de la actividad",position:"right"},{header:h(()=>[e("div",Oe,[e("span",Pe,o(s.service.service),1)])]),footer:h(()=>[m(D)(["admin","superadmin"])?(a(),d("div",dt,[e("div",ut,[_(c(j,{onClick:t[0]||(t[0]=i=>C("reservado",!0)),icon:"fa-solid fa-circle-check",severity:"info"},null,512),[[N,"Reservada",void 0,{top:!0}]]),_(c(j,{onClick:t[1]||(t[1]=i=>w.value=!0),icon:"fa-solid fa-eye-slash",class:"!text-white !bg-yellow-600"},null,512),[[N,"Servicio No show",void 0,{top:!0}]]),_(c(j,{onClick:t[2]||(t[2]=i=>y()),icon:"fa-solid fa-calendar-week",class:"!bg-gray-600 !text-white"},null,512),[[N,"Cambio de Fecha",void 0,{top:!0}]]),_(c(j,{onClick:t[3]||(t[3]=i=>Q()),icon:"fa-solid fa-people-arrows",severity:"warn"},null,512),[[N,"Cambio de proveedor",void 0,{top:!0}]]),_(c(j,{onClick:t[4]||(t[4]=i=>u()),icon:"fa-solid fa-xmark-circle",severity:"danger"},null,512),[[N,"Cancelar Servicio",void 0,{top:!0}]]),_(c(j,{onClick:t[5]||(t[5]=i=>C("PROBLEMATICA",!1)),icon:"fa-solid fa-person-dress-burst",class:"flex-auto",severity:"danger"},null,512),[[N,"Servicio Problematico",void 0,{top:!0}]])])])):S("",!0)]),default:h(()=>[e("div",Ne,[e("div",Be,[t[17]||(t[17]=e("strong",null,"Fecha del Servicio:",-1)),e("p",null,o(P(s.service.date)),1)]),e("div",Ue,[t[18]||(t[18]=e("strong",null,"Hora del Servicio:",-1)),e("p",null,o(s.service.hour),1)]),s.service.time_service?(a(),d("div",Ae,[t[19]||(t[19]=e("strong",null,"Duración del Servicio:",-1)),e("p",null,o(s.service.time_service),1)])):S("",!0),e("div",Ee,[t[20]||(t[20]=e("strong",null,"Canal de Venta:",-1)),e("p",null,o(s.service.channel.name),1)]),e("div",Fe,[t[21]||(t[21]=e("strong",null,"Cliente:",-1)),e("p",null,o(s.service.cliente_name),1)]),e("div",Ie,[t[22]||(t[22]=e("strong",null,"Ciudad:",-1)),e("p",null,o(s.service.cliente_city),1)]),e("div",Me,[t[23]||(t[23]=e("strong",null,"Telefono:",-1)),e("a",{target:"_blank",href:`https://wa.me/${s.service.cliente_phone}?text=Hola  mucho gusto yo soy Sandra la coordinadora de su actividad 
Hello, nice to talk to you  I'm Sandra the coordinator for  your activity`},o(s.service.cliente_phone),9,Te)]),e("div",Re,[t[24]||(t[24]=e("strong",null,"Edificio:",-1)),e("p",null,o(s.service.cliente_building),1)]),e("div",Le,[t[25]||(t[25]=e("strong",null,"Adultos:",-1)),e("p",null,o(s.service.adults),1)]),e("div",He,[t[26]||(t[26]=e("strong",null,"Niños:",-1)),e("p",null,o(s.service.boys),1)]),e("div",Ge,[t[27]||(t[27]=e("strong",null,"Total:",-1)),e("p",null,o(m(r).format(s.service.total)),1)]),e("div",ze,[t[28]||(t[28]=e("strong",null,"Total Real:",-1)),e("p",null,o(m(r).format(s.service.total_real)),1)]),s.service.user?(a(),d("div",We,[e("strong",null,o(s.service.vendedor_id?"Vendedor":"Usuario")+":",1),e("p",null,o(s.service.user?.name),1)])):S("",!0),s.service.user?(a(),d("div",qe,[t[29]||(t[29]=e("strong",null,"Fecha de reserva:",-1)),e("p",null,o(new Date(s.service.created_at).toLocaleDateString("es-CO")),1)])):S("",!0),s.service.conductor?(a(),d("div",Je,[t[30]||(t[30]=e("strong",null,"conductor:",-1)),e("p",null,o(s.service.conductor),1)])):S("",!0),s.service.placa?(a(),d("div",Ke,[t[31]||(t[31]=e("strong",null,"conductor:",-1)),e("p",null,o(s.service.placa),1)])):S("",!0),s.service.total_pago_proveedor?(a(),d("div",Qe,[t[32]||(t[32]=e("strong",null,"Valor del Servicio:",-1)),e("p",null,o(m(r).format(s.service.total_pago_proveedor)),1)])):S("",!0),s.service.fecha_cancelacion?(a(),d("div",Xe,[t[33]||(t[33]=e("strong",null,"Fecha de Cancelación:",-1)),e("p",null,o(new Date(new Date(s.service.fecha_cancelacion).setDate(new Date(s.service.fecha_cancelacion).getDate()+1)).toLocaleDateString("es-CO",{day:"numeric",month:"numeric",year:"numeric"})),1)])):S("",!0),e("div",Ye,[t[34]||(t[34]=e("strong",null,"Saldo:",-1)),e("p",null,o(m(r).format(s.service.saldo)),1)]),e("div",Ze,[t[35]||(t[35]=e("strong",null,"Soporte:",-1)),e("a",{target:"_blank",href:s.service.file},"Ver Archivo",8,et)]),e("div",tt,[t[36]||(t[36]=e("strong",null,"Observacion:",-1)),e("p",null,o(s.service.observations),1)]),e("div",st,[t[37]||(t[37]=e("p",{class:"font-bold"},"Proveedores",-1)),e("p",ot,o(s.service.proveedors.length),1)]),(a(!0),d(O,null,F(s.service.proveedors,i=>(a(),d("div",lt,[e("p",null,o(i.proveedor.proveedor.nombre),1),e("p",null,o(m(r).format(i.cost)),1)]))),256)),e("div",nt,[t[38]||(t[38]=e("p",{class:"font-bold"},"Extras",-1)),e("p",it,o(s.service.extras.length),1)]),(a(!0),d(O,null,F(s.service.extras,i=>(a(),d("div",at,[e("p",null,o(i.cantidad)+" "+o(i.description),1),e("p",rt,o(m(r).format(i.total_price)),1)]))),256))])]),_:1},8,["visible","pt:root:class"]),c(H,{modelValue:l.value,"onUpdate:modelValue":t[13]||(t[13]=i=>l.value=i),title:"Cambio de proveedor","close-on-escape":""},{default:h(()=>[e("div",ct,[e("span",vt,[t[41]||(t[41]=e("label",{for:"",class:"font-bold"}," Proveedor Actual",-1)),c(Y,{placeholder:"Proveedor Actual",options:s.service.proveedors,label:"Proveedor Actual",modelValue:p.value,"onUpdate:modelValue":t[7]||(t[7]=i=>p.value=i),"option-label":"proveedor.name"},{value:h(i=>[i.value?(a(),d("div",mt,[e("div",null,o(p.value.proveedor.proveedor.nombre),1),t[39]||(t[39]=e("span",null,"-",-1)),e("div",null,o(m(r).format(p.value.cost)),1)])):(a(),d("span",pt,o(i.placeholder),1))]),option:h(({option:i})=>[e("div",ft,[e("span",null,o(i.proveedor.proveedor.nombre),1),t[40]||(t[40]=e("span",null,"-",-1)),e("span",null,o(m(r).format(i.cost)),1)])]),_:1},8,["options","modelValue"])]),c(A,{"option-label":"nombre",type:"dropdown",label:"Nuevo Proveedor",modelValue:m(n).new_id,"onUpdate:modelValue":t[8]||(t[8]=i=>m(n).new_id=i),options:q.value},null,8,["modelValue","options"]),c(A,{label:"Valor",modelValue:m(n).value,"onUpdate:modelValue":t[9]||(t[9]=i=>m(n).value=i),type:"number",mode:"currency"},null,8,["modelValue"]),c(A,{label:"Nota",modelValue:m(n).note,"onUpdate:modelValue":t[10]||(t[10]=i=>m(n).note=i),type:"textarea",mode:"currency"},null,8,["modelValue"]),e("div",bt,[c(j,{onClick:t[11]||(t[11]=i=>l.value=!1),label:"Cancelar",severity:"danger",icon:"fa-solid fa-xmark"}),c(j,{onClick:t[12]||(t[12]=i=>$()),label:"Guardar",severity:"success",icon:"fa-solid fa-save"})])])]),_:1},8,["modelValue"]),b.value?(a(),B(be,{key:0,modelValue:b.value,"onUpdate:modelValue":t[14]||(t[14]=i=>b.value=i),view:V.value,"onUpdate:view":t[15]||(t[15]=i=>V.value=i),service:s.service},null,8,["modelValue","view","service"])):S("",!0),w.value?(a(),B(De,{key:1,modelValue:w.value,"onUpdate:modelValue":t[16]||(t[16]=i=>w.value=i),service:s.service},null,8,["modelValue","service"])):S("",!0)],64)}}},yt={class:"w-full flex flex-col gap-y-5 p-2"},xt={class:"h-[30vh] overflow-y-auto flex flex-col gap-y-2"},gt={key:0,class:"flex w-full"},wt={class:"w-1/2 flex py-1 px-3 rounded-md items-center justify-between bg-sky-100"},Ct={class:"flex flex-col"},$t={class:"text-lg font-bold first-letter:uppercase"},Vt={class:"italic text-xs"},ht={key:1,class:"flex w-full"},kt={class:"w-1/2 flex py-1 px-3 rounded-md items-center border justify-between bg-gray-300"},St={class:"flex flex-col"},jt={class:"text-lg font-bold first-letter:uppercase"},_t={class:"italic text-xs"},Dt={key:0,class:"flex justify-center items-center"},Ot={key:0,class:"flex justify-center flex-col items-center"},Pt={class:"flex gap-x-2 px-2"},zt={__name:"Notas",props:R({todayActivity:Boolean,notes:Array,note:String,service:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const D=E(s,"modelValue"),f=s,g=k(f.notes),v=k(!1),p=k(null),V=k(!1),b=k(""),w=()=>{M.post(route("notes.store"),{note:b.value,booking_service_id:f.service.id}).then(C=>{b.value="",u()})},l=C=>{M.delete(route("notes.destroy",C.id)).then(y=>{u()})},n=C=>{b.value=C.note,v.value=!0,p.value=C},r=()=>{M.put(route("notes.update",p.value.id),{note:b.value}).then(C=>{u(),b.value="",v.value=!1,p.value=null})},u=()=>{V.value=!0,M.get(route("notes.index",{booking_service_id:f.service.id})).then(C=>{g.value=C.data.notes,V.value=!1})};return W(()=>{u()}),(C,y)=>{const P=L;return a(),d(O,null,[y[6]||(y[6]=I(" asndlands ",-1)),c(H,{modelValue:D.value,"onUpdate:modelValue":y[1]||(y[1]=$=>D.value=$),"close-on-escape":"",title:"Notas",width:"60vw"},{default:h(()=>[e("div",yt,[y[5]||(y[5]=e("h3",{class:"text-xl font-bold"},"Notas de la Actividad",-1)),e("div",xt,[(a(!0),d(O,null,F(g.value,$=>(a(),d("div",{class:"flex p-2 rounded-md items-center justify-between w-full",key:$.id},[$.user_id==C.$page.props.auth.user.id?(a(),d("div",gt,[y[2]||(y[2]=e("div",{class:"w-1/2"},null,-1)),e("div",wt,[e("span",Ct,[e("p",$t,o($.note),1),e("p",Vt,o(new Date($.created_at).toISOString().split("T")[0]),1)]),e("div",null,[c(P,{icon:"fa-solid fa-pencil",text:"",severity:"info",onClick:G=>n($)},null,8,["onClick"]),c(P,{icon:"fa-solid fa-trash",text:"",severity:"danger",onClick:G=>l($)},null,8,["onClick"])])])])):(a(),d("div",ht,[e("div",kt,[e("span",St,[e("p",jt,o($.note),1),e("p",_t,o($.user.name)+" - "+o(new Date($.created_at).toISOString().split("T")[0]),1)])]),y[3]||(y[3]=e("div",{class:"w-1/2"},null,-1))]))]))),128)),V.value?(a(),d("div",Dt,[c(ie)])):(a(),d(O,{key:1},[g.value.length==0?(a(),d("div",Ot,[c(ne),y[4]||(y[4]=e("p",{class:"font-semibold text-xl"},"Serivicio sin notas",-1))])):S("",!0)],64))]),e("div",Pt,[c(A,{type:"textarea",class:"w-full",rowsTextarea:2,modelValue:b.value,"onUpdate:modelValue":y[0]||(y[0]=$=>b.value=$)},null,8,["modelValue"]),v.value?(a(),B(P,{key:1,label:"Editar",severity:"info",icon:"pi pi-send",class:"!h-12",onClick:r})):(a(),B(P,{key:0,label:"Guardar",severity:"success",class:"!h-12",icon:"pi pi-send",onClick:w}))])])]),_:1},8,["modelValue"])],64)}}};export{Gt as _,zt as a};

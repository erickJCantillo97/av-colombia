import{s as X}from"./index-CUmNvo4Z.js";import{d as m,A as C,B as N,a0 as Z,p as tt,e as et,f as i,o as r,b as k,a as e,h as x,S as st,t as a,g as p,U as ot,F as A,j as V,w as T,i as B,a9 as at,n as lt}from"./app-R214L-RJ.js";import{s as c}from"./searchStore-Bd4jKM1d.js";import{H as nt}from"./Header-CRD_sOyO.js";import{_ as it}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as q}from"./index-CTOF4_Mi.js";import{S as W}from"./sweetalert2.esm.all-Y6IUEg8t.js";import"./index-BtmjuX20.js";import"./index-C1LrUdpI.js";import"./index-CnYZaZL0.js";import"./index-BCgCynxU.js";import"./index-2vctUbrf.js";import"./index-LKwKBZb9.js";import"./index-h97sdG3t.js";import"./index-Dhnzua7A.js";import"./index-BBDUCuEq.js";import"./index-rZxR1Dfz.js";import"./index-DKimsuGo.js";import"./useCommonUtilities-BgDhORlD.js";import"./index-D6eu6UUj.js";import"./index-DsbT2PPc.js";import"./index-De5LTwP2.js";import"./index-xNjEl96J.js";import"./index-CQ3yiUfD.js";import"./logo-BBd_KiVx.js";import"./index-CZE0zn_n.js";const rt={class:"px-4 py-36 md:py-48 md:px-56 max-w-full mx-auto pb-20 lg:pb-8"},dt={class:"mb-6"},ct={class:"text-2xl md:text-3xl font-semibold text-gray-900 mb-2"},ut={class:"flex flex-wrap items-center gap-4 text-sm"},mt={class:"flex items-center gap-2"},vt={class:"text-gray-600"},ft={key:0,class:"flex items-center gap-1"},gt={key:1,class:"flex items-center gap-2"},bt={class:"font-medium"},xt={class:"text-gray-600"},yt={key:0,class:"relative"},ht=["src","alt"],pt={class:"grid grid-cols-4 gap-2 rounded-2xl overflow-hidden mb-8 h-[400px] cursor-pointer"},wt=["src","alt"],kt=["onClick"],_t=["src","alt"],Ct={key:1,class:"w-full h-[400px] bg-gray-200 rounded-2xl flex items-center justify-center mb-8"},St={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Dt={class:"lg:col-span-2 space-y-6"},Nt={class:"border-b pb-6"},At={class:"text-xl font-semibold text-gray-900 mb-2"},jt={class:"flex items-center gap-4 text-gray-600"},Et={class:"border-b pb-6"},$t={class:"prose max-w-none text-gray-700"},Mt={key:"full"},It={key:"short"},Vt={key:0,class:"border-b pb-6"},Tt={class:"grid grid-cols-2 gap-4"},Ut={class:"text-gray-700"},Lt={class:"border-b pb-6"},Pt={class:"flex items-center gap-3 mb-3"},Bt={key:0,class:"text-sm text-gray-600"},Ft={key:1,class:"text-sm text-gray-600"},Rt={key:2,class:"text-sm text-red-600"},Gt={class:"space-y-4"},Ot=["onClick"],Ht={class:"flex justify-between items-start"},qt={class:"flex-1"},Wt={class:"font-semibold text-gray-900"},zt={class:"text-sm text-gray-600 mt-1"},Yt={class:"flex items-center gap-4 mt-2 text-sm text-gray-600"},Jt={key:0},Kt={class:"text-right"},Qt={class:"text-xl font-bold text-gray-900"},Xt={key:0,class:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-lg pointer-events-none"},Zt={class:"border-b pb-6"},te={class:"text-gray-700"},ee={class:"lg:col-span-1"},se={class:"sticky top-24 hidden lg:block"},oe={class:"bg-white border rounded-2xl shadow-md p-6"},ae={class:"flex items-baseline justify-start gap-x-2 mb-4"},le={class:"text-2xl md:text-3xl font-bold text-gray-900"},ne={class:"space-y-3"},ie={class:"flex gap-2"},re={class:"w-full"},de={class:"text-sm text-gray-900 font-medium"},ce={class:"w-full"},ue={class:"text-sm text-gray-900 font-medium"},me={class:"p-0 h-[330px]"},ve={class:"text-sm text-gray-900 font-medium"},fe={class:"p-4 min-w-[300px]"},ge={class:"space-y-4"},be={class:"flex items-center justify-between"},xe={class:"flex items-center gap-3"},ye={class:"w-8 text-center"},he={class:"flex items-center justify-between"},pe={class:"flex items-center gap-3"},we={class:"w-8 text-center"},ke={class:"pt-2 w-full"},_e={key:0,type:"button",class:"w-full bg-gray-400 text-white rounded-lg py-3 font-semibold cursor-not-allowed",disabled:""},Ce={key:1,type:"button",class:"w-full bg-gray-400 text-white rounded-lg py-3 font-semibold cursor-not-allowed",disabled:""},Se={key:0,class:"mt-4"},De={class:"border-t pt-3"},Ne={class:"flex items-center justify-between text-sm text-gray-600"},Ae={class:"font-medium text-gray-900"},je={class:"flex items-center justify-between text-base font-semibold text-gray-900 mt-3 pt-3 border-t"},Ee={__name:"AccommodationShow",props:{accommodation:Object},setup(n){const g=n,j=m(!1),b=m(null),y=m(2),E=m(null),F=m(null);m(!1);const u=m(null),$=m(!1),h=m([]),S=m(null),z=C(()=>!u.value||!v.value||!f.value?!1:$.value?!0:h.value.includes(u.value.id));function _(s){return s?s.toISOString():null}function Y(s){try{if(!s){b.value=null,c.checkin.value="",c.checkout.value="";return}if(Array.isArray(s)){const[t,l]=s;b.value=s,c.checkin.value=t?_(t):"",c.checkout.value=l?_(l):"",t&&l&&setTimeout(()=>{try{E.value?.hide()}catch{}},500)}}catch(t){console.error("Error handling calendar change:",t)}}const v=m(null),f=m(null);N(b,s=>{if(!s){v.value=null,f.value=null;return}Array.isArray(s)&&(v.value=s[0]?_(s[0]):null,f.value=s[1]?_(s[1]):null)}),N([v,f,y],async([s,t,l])=>{if(!s||!t){h.value=[],S.value=null;return}$.value=!0,S.value=null;try{const d={check_in:s,check_out:t,guests:l||1},o=route("api.accommodations.availability",g.accommodation.id),{data:w}=await Z.get(o,{params:d}),H=w.available_rooms||[];h.value=H.map(Q=>Q.id),u.value&&!h.value.includes(u.value.id)&&(u.value=null)}catch(d){console.error("Error checking availability",d),S.value=d.response?.data?.message||"Error al verificar disponibilidad",h.value=[]}finally{$.value=!1}}),tt(()=>{try{const s=c.checkin?.value,t=c.checkout?.value;if(s&&t){const d=new Date(s),o=new Date(t);!isNaN(d)&&!isNaN(o)&&(b.value=[d,o])}const l=c.guests?.value;if(l){const d=Number(l.adults||0)+Number(l.children||0)||2;y.value=d}}catch(s){console.error("Error mounting component:",s)}}),N([()=>c.checkin.value,()=>c.checkout.value],([s,t])=>{try{if(s&&t){const l=new Date(s),d=new Date(t);if(!isNaN(l)&&!isNaN(d)){const o=b.value?.[0],w=b.value?.[1];(!o||!w||_(o)!==s||_(w)!==t)&&(b.value=[l,d])}}else b.value=null}catch(l){console.error("Error watching store changes:",l)}}),N(()=>c.guests.value,s=>{if(!s)return;const t=Number(s.adults||0)+Number(s.children||0)||2;y.value=t},{deep:!0}),N(y,s=>{const t=c.guests.value||{adults:2,children:0,infants:0},l=Math.max(1,Number(s)-Number(t.children||0));c.guests.value={...t,adults:l}});function R(s){const l={...c.guests.value||{adults:2,children:0,infants:0}};l[s]=Math.max(0,(l[s]||0)+1),c.guests.value=l;const d=l.adults+l.children+l.infants;y.value=d||2}function G(s){const l={...c.guests.value||{adults:2,children:0,infants:0}};s==="adults"?l[s]=Math.max(1,(l[s]||1)-1):l[s]=Math.max(0,(l[s]||0)-1),c.guests.value=l;const d=l.adults+l.children+l.infants;y.value=d||2}const D=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),J=C(()=>{if(g.accommodation.photos&&g.accommodation.photos.length>0){const s=g.accommodation.photos[0].path;return s.startsWith("http")?s:`/storage/${s.replace("public/","")}`}return"https://avcolombia.net/images/logo.webp"}),M=C(()=>!g.accommodation.photos||g.accommodation.photos.length===0?[]:g.accommodation.photos.map(s=>{const t=s.path;return t.startsWith("http")?t:`/storage/${t.replace("public/","")}`})),U=m(0),L=m(!1),P=s=>{U.value=s,L.value=!0};C(()=>g.accommodation.rooms?.filter(s=>s.is_available)||[]);const I=C(()=>{if(!v.value||!f.value)return 0;const s=new Date(v.value),t=new Date(f.value),l=Math.ceil((t-s)/(1e3*60*60*24));return l>0?l:0}),O=C(()=>!u.value||I.value===0?0:u.value.price_per_night*I.value),K=()=>{if(!u.value){W.fire({title:"Habitación Requerida",text:"Por favor selecciona una habitación",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Entendido"});return}if(!v.value||!f.value){W.fire({title:"Fechas Requeridas",text:"Por favor selecciona las fechas de check-in y check-out",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Entendido"});return}const s=route("accommodations.checkout",{accommodation:g.accommodation.id,room:u.value.id}),t=new URLSearchParams({check_in:v.value,check_out:f.value,guests:y.value});window.location.href=`${s}?${t.toString()}`};return(s,t)=>{const l=X,d=et("VueDatePicker");return r(),i(A,null,[k(x(st),{title:`Av Colombia - ${n.accommodation.name}`},null,8,["title"]),k(nt),e("div",rt,[e("div",dt,[e("h1",ct,a(n.accommodation.name),1),e("div",ut,[e("div",mt,[t[13]||(t[13]=e("i",{class:"fa-solid fa-location-dot text-gray-600"},null,-1)),e("span",vt,a(n.accommodation.city)+", "+a(n.accommodation.country),1)]),n.accommodation.star_rating?(r(),i("div",ft,[(r(!0),i(A,null,V(n.accommodation.star_rating,o=>(r(),i("i",{key:o,class:"fa-solid fa-star text-yellow-400"}))),128))])):p("",!0),n.accommodation.average_rating>0?(r(),i("div",gt,[t[14]||(t[14]=e("i",{class:"fa-solid fa-heart text-red-400"},null,-1)),e("span",bt,a(n.accommodation.average_rating),1),e("span",xt,"("+a(n.accommodation.reviews?.length||0)+" reseñas)",1)])):p("",!0),t[15]||(t[15]=ot('<div class="flex items-center gap-3 ml-auto" data-v-08aad77d><button class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border" data-v-08aad77d><i class="fa-solid fa-share-nodes" data-v-08aad77d></i> Compartir </button><button class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg border" data-v-08aad77d><i class="fa-regular fa-heart" data-v-08aad77d></i> Guardar </button></div>',1))])]),M.value.length>0?(r(),i("div",yt,[k(l,{activeIndex:U.value,"onUpdate:activeIndex":t[0]||(t[0]=o=>U.value=o),visible:L.value,"onUpdate:visible":t[1]||(t[1]=o=>L.value=o),value:M.value,numVisible:7,containerStyle:"max-width: 100%",circular:!0,fullScreen:!0,showItemNavigators:!0,showThumbnails:!1},{item:T(o=>[e("img",{src:o.item,alt:n.accommodation.name,style:{width:"100%",display:"block"}},null,8,ht)]),_:1},8,["activeIndex","visible","value"]),e("div",pt,[e("div",{class:"col-span-2 row-span-2",onClick:t[2]||(t[2]=o=>P(0))},[e("img",{src:J.value,alt:n.accommodation.name,class:"w-full h-full object-cover hover:opacity-90 transition-opacity"},null,8,wt)]),(r(!0),i(A,null,V(M.value.slice(1,5),(o,w)=>(r(),i("div",{key:w,onClick:H=>P(w+1)},[e("img",{src:o,alt:`${n.accommodation.name} - ${w+2}`,class:"w-full h-full object-cover hover:opacity-90 transition-opacity"},null,8,_t)],8,kt))),128)),M.value.length>5?(r(),i("button",{key:0,class:"absolute bottom-4 right-4 bg-white px-4 py-2 rounded-lg shadow-md hover:shadow-lg transition-shadow font-medium",onClick:t[3]||(t[3]=o=>P(5))},[...t[16]||(t[16]=[e("i",{class:"fa-solid fa-images mr-2"},null,-1),B(" Mostrar todas las fotos ",-1)])])):p("",!0)])])):(r(),i("div",Ct,[...t[17]||(t[17]=[e("div",{class:"text-center text-gray-500"},[e("i",{class:"fa-solid fa-image text-6xl mb-4"}),e("p",null,"No hay fotos disponibles")],-1)])])),e("div",St,[e("main",Dt,[e("div",Nt,[e("h2",At,a(n.accommodation.type)+" · "+a(n.accommodation.city),1),e("div",jt,[e("span",null,a(n.accommodation.rooms?.length||0)+" habitaciones",1)])]),e("section",Et,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-3"},"Acerca de este lugar",-1)),e("div",$t,[k(at,{name:"expand"},{default:T(()=>[j.value||n.accommodation.description?.length<=500?(r(),i("div",Mt,a(n.accommodation.description),1)):(r(),i("div",It,a(n.accommodation.description?.slice(0,500))+"... ",1))]),_:1}),n.accommodation.description?.length>500?(r(),i("button",{key:0,onClick:t[4]||(t[4]=o=>j.value=!j.value),class:"text-gray-900 hover:underline mt-2 font-medium"},a(j.value?"Mostrar menos":"Mostrar más")+" › ",1)):p("",!0)])]),n.accommodation.amenities?.length?(r(),i("section",Vt,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Lo que ofrece este lugar",-1)),e("div",Tt,[(r(!0),i(A,null,V(n.accommodation.amenities,o=>(r(),i("div",{key:o.id,class:"flex items-center gap-3"},[t[19]||(t[19]=e("i",{class:"fa-solid fa-check text-teal-500"},null,-1)),e("span",Ut,a(o.name),1)]))),128))])])):p("",!0),e("section",Lt,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Habitaciones disponibles",-1)),e("div",Pt,[$.value?(r(),i("div",Bt,"Comprobando disponibilidad...")):(r(),i("div",Ft,"Disponibles: "+a(h.value.length)+" / "+a(n.accommodation.rooms?.length||0),1)),S.value?(r(),i("div",Rt,a(S.value),1)):p("",!0)]),e("div",Gt,[(r(!0),i(A,null,V(g.accommodation.rooms,o=>(r(),i("div",{key:o.id,class:lt(["border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer relative",{"ring-2 ring-indigo-500":u.value?.id===o.id,"opacity-50 cursor-not-allowed":!h.value.includes(o.id)}]),onClick:()=>{h.value.includes(o.id)&&(u.value=o)}},[e("div",Ht,[e("div",qt,[e("h4",Wt,a(o.name),1),e("p",zt,a(o.description),1),e("div",Yt,[e("span",null,[t[21]||(t[21]=e("i",{class:"fa-solid fa-user"},null,-1)),B(" "+a(o.capacity_adults)+" adultos",1)]),o.capacity_children>0?(r(),i("span",Jt,[t[22]||(t[22]=e("i",{class:"fa-solid fa-child"},null,-1)),B(" "+a(o.capacity_children)+" niños",1)])):p("",!0)])]),e("div",Kt,[e("div",Qt,a(x(D).format(o.price_per_night)),1),t[23]||(t[23]=e("div",{class:"text-sm text-gray-600"},"por noche",-1))])]),h.value.includes(o.id)?p("",!0):(r(),i("div",Xt,[...t[24]||(t[24]=[e("div",{class:"text-sm text-red-600 font-medium"},"No disponible en las fechas seleccionadas",-1)])]))],10,Ot))),128))])]),e("section",Zt,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Ubicación",-1)),e("div",te,[e("p",null,a(n.accommodation.address_line_1),1),e("p",null,a(n.accommodation.city)+", "+a(n.accommodation.state)+" "+a(n.accommodation.postal_code),1),e("p",null,a(n.accommodation.country),1)])])]),e("aside",ee,[e("div",se,[e("div",oe,[e("div",ae,[e("div",le,a(x(D).format(n.accommodation.min_price||0)),1),t[27]||(t[27]=e("div",{class:"text-sm text-gray-600"},"por noche",-1))]),e("form",ne,[e("div",ie,[e("div",re,[t[28]||(t[28]=e("label",{class:"text-xs font-medium text-gray-700 block mb-1"},"LLEGADA",-1)),e("button",{type:"button",class:"w-full text-left border border-gray-300 rounded-lg px-3 py-3 bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400",onClick:t[5]||(t[5]=o=>E.value?.toggle(o))},[e("div",de,a(v.value?new Date(v.value).toLocaleDateString("es-ES",{day:"numeric",month:"short"}):"Agregar fecha"),1)])]),e("div",ce,[t[29]||(t[29]=e("label",{class:"text-xs font-medium text-gray-700 block mb-1"},"SALIDA",-1)),e("button",{type:"button",class:"w-full text-left border border-gray-300 rounded-lg px-3 py-3 bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400",onClick:t[6]||(t[6]=o=>E.value?.toggle(o))},[e("div",ue,a(f.value?new Date(f.value).toLocaleDateString("es-ES",{day:"numeric",month:"short"}):"Agregar fecha"),1)])]),k(x(q),{ref_key:"op",ref:E,appendTo:"body",class:"!w-auto"},{default:T(()=>[e("div",me,[k(d,{modelValue:b.value,"onUpdate:modelValue":[t[7]||(t[7]=o=>b.value=o),Y],range:"","min-date":new Date,inline:"","auto-apply":"",teleport:!1,locale:"es",format:"dd/MM/yyyy","preview-format":"dd/MM/yyyy",placeholder:"Selecciona fechas"},null,8,["modelValue","min-date"])])]),_:1},512)]),e("div",null,[t[37]||(t[37]=e("label",{class:"text-xs font-medium text-gray-700 block mb-1"},"HUÉSPEDES",-1)),e("button",{type:"button",class:"w-full text-left border border-gray-300 rounded-lg px-3 py-3 bg-white hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400",onClick:t[8]||(t[8]=o=>F.value?.toggle(o))},[e("div",ve,a(y.value)+" huésped"+a(y.value>1?"es":""),1)]),k(x(q),{ref_key:"guestsOp",ref:F,appendTo:"body",class:"!w-auto"},{default:T(()=>[e("div",fe,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"¿Cuántos huéspedes?",-1)),e("div",ge,[e("div",be,[t[32]||(t[32]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Adultos"),e("div",{class:"text-sm text-gray-500"},"13 años o más")],-1)),e("div",xe,[e("button",{type:"button",onClick:t[9]||(t[9]=o=>G("adults")),class:"w-8 h-8 rounded-full border border-gray-300 hover:border-gray-400 flex items-center justify-center"},[...t[30]||(t[30]=[e("i",{class:"fa-solid fa-minus text-xs"},null,-1)])]),e("span",ye,a(x(c).guests.value?.adults||1),1),e("button",{type:"button",onClick:t[10]||(t[10]=o=>R("adults")),class:"w-8 h-8 rounded-full border border-gray-300 hover:border-gray-400 flex items-center justify-center"},[...t[31]||(t[31]=[e("i",{class:"fa-solid fa-plus text-xs"},null,-1)])])])]),e("div",he,[t[35]||(t[35]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Niños"),e("div",{class:"text-sm text-gray-500"},"2-12 años")],-1)),e("div",pe,[e("button",{type:"button",onClick:t[11]||(t[11]=o=>G("children")),class:"w-8 h-8 rounded-full border border-gray-300 hover:border-gray-400 flex items-center justify-center"},[...t[33]||(t[33]=[e("i",{class:"fa-solid fa-minus text-xs"},null,-1)])]),e("span",we,a(x(c).guests.value?.children||0),1),e("button",{type:"button",onClick:t[12]||(t[12]=o=>R("children")),class:"w-8 h-8 rounded-full border border-gray-300 hover:border-gray-400 flex items-center justify-center"},[...t[34]||(t[34]=[e("i",{class:"fa-solid fa-plus text-xs"},null,-1)])])])])])])]),_:1},512)]),e("div",ke,[!v.value||!f.value||!u.value?(r(),i("button",_e,a(u.value?"Selecciona fechas":"Selecciona una habitación"),1)):u.value&&!z.value?(r(),i("button",Ce," Habitación no disponible ")):(r(),i("button",{key:2,onClick:K,type:"button",class:"w-full bg-[#FF385C] hover:bg-[#E31C5F] text-white rounded-lg py-3 font-semibold transition duration-200"}," Reservar "))])]),v.value&&f.value&&u.value?(r(),i("div",Se,[e("div",De,[e("div",Ne,[e("div",null,a(x(D).format(u.value.price_per_night))+" x "+a(I.value)+" noche"+a(I.value>1?"s":""),1),e("div",Ae,a(x(D).format(O.value)),1)]),e("div",je,[t[38]||(t[38]=e("div",null,"Total",-1)),e("div",null,a(x(D).format(O.value)),1)])])])):p("",!0),t[39]||(t[39]=e("p",{class:"mt-3 text-xs text-gray-500"},"Cancelación gratuita hasta 48 horas antes del check-in",-1))])])])])])],64)}}},os=it(Ee,[["__scopeId","data-v-08aad77d"]]);export{os as default};

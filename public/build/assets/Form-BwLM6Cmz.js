const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/leaflet-src-DdhmuEKN.js","assets/app-Bkmq6IjL.js","assets/app-CpK3EkXs.css"])))=>i.map(i=>d[i]);
import{s as lt,a as st,b as nt,c as it,d as rt}from"./index-CvIc8Ij4.js";import{f as b,o as v,a as s,b as d,g as U,n as D,h as w,t as L,k as Ae,l as Y,d as k,m as ee,p as X,_,q as ie,s as Z,v as M,x as Le,y as te,z as dt,A as pe,B as Ce,C as we,D as ut,E as ke,G as ct,H as mt,F as G,j as Q,c as ve,w as R,i as F,T as ze,I as Se,u as ft}from"./app-Bkmq6IjL.js";import{_ as pt}from"./AppLayout-D2egXX6r.js";import{_ as E}from"./Input-DkWzKbaZ.js";import{s as Be}from"./index-RsaUD5Xe.js";import{s as Re,a as vt}from"./postcss-C08joEDO.js";import{s as yt}from"./index-BRzBSlPy.js";import{s as P}from"./index-DaANNUiK.js";import{_ as bt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as gt}from"./index-ClvRstXy.js";import{s as _e}from"./index-W7nZhAj4.js";import"./index-BLqmo2gT.js";import"./index-Gdm-lMEn.js";import"./index-CcP_lYt9.js";import"./index-CB7E2Eg0.js";import"./index-CfbMPObl.js";import"./marked.esm-BPgSS2IS.js";import"./Auth-BO5QB7ha.js";import"./index-BDEkOoTf.js";import"./index-4OYothAa.js";import"./index-DUCg-gIe.js";import"./index-CKTb4ZjY.js";import"./index-s9JRI-aI.js";import"./index-DXGaN_yB.js";import"./index-BpetVVTO.js";import"./index-CgfV6IMP.js";import"./index-DXym8dc4.js";import"./index-nj7zxik0.js";import"./index-Dhtgddix.js";import"./index-C7bdtJCW.js";import"./useCommonUtilities-BgDhORlD.js";import"./postcss-DXcLJQ9m.js";import"./index-R9UnX9_e.js";import"./index-Nfd3bcJj.js";const ht={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xt={class:"md:col-span-2"},wt={class:"md:col-span-2"},$t={key:0,class:"text-red-500 text-xs"},Ct={key:0,class:"text-red-500 text-xs"},kt={key:0,class:"text-red-500 text-xs"},St={class:"md:col-span-2"},At={key:0,class:"text-red-500 text-xs"},Lt={class:"flex gap-x-4 mt-8 justify-between"},jt={__name:"BasicInformation",props:{form:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:a}){const o=[{label:"Hotel",value:"hotel"},{label:"Apartamento",value:"apartamento"},{label:"Casa",value:"casa"},{label:"Hostal",value:"hostal"},{label:"Villa",value:"villa"}],t=[{label:"Borrador",value:"borrador"},{label:"Publicado",value:"publicado"},{label:"Inactivo",value:"inactivo"}];return(n,l)=>(v(),b("form",{onSubmit:l[7]||(l[7]=Ae(i=>n.$emit("submit"),["prevent"])),class:"space-y-6"},[s("div",ht,[s("div",xt,[d(E,{label:"Nombre del Alojamiento",modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=i=>e.form.name=i),"error-message":e.form.errors.name,required:""},null,8,["modelValue","error-message"])]),s("div",wt,[l[8]||(l[8]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descripción ",-1)),d(w(Be),{modelValue:e.form.description,"onUpdate:modelValue":l[1]||(l[1]=i=>e.form.description=i),rows:"4",placeholder:"Describe tu alojamiento...",class:D(["w-full border border-gray-300 rounded-md p-2",{"border-red-500":e.form.errors.description}])},null,8,["modelValue","class"]),e.form.errors.description?(v(),b("span",$t,L(e.form.errors.description),1)):U("",!0)]),s("div",null,[l[9]||(l[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tipo de Alojamiento ",-1)),d(w(Re),{modelValue:e.form.type,"onUpdate:modelValue":l[2]||(l[2]=i=>e.form.type=i),options:o,"option-label":"label",class:D(["w-full",{"border-red-500":e.form.errors.type}]),"option-value":"value",placeholder:"Selecciona el tipo"},null,8,["modelValue","class"]),e.form.errors.type?(v(),b("span",Ct,L(e.form.errors.type),1)):U("",!0)]),s("div",null,[l[10]||(l[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Rating de Estrellas ",-1)),d(w(yt),{modelValue:e.form.star_rating,"onUpdate:modelValue":l[3]||(l[3]=i=>e.form.star_rating=i),stars:5,cancel:!1,class:D({"border-red-500":e.form.errors.star_rating})},null,8,["modelValue","class"]),e.form.errors.star_rating?(v(),b("span",kt,L(e.form.errors.star_rating),1)):U("",!0)]),s("div",St,[l[11]||(l[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Estado de Publicación ",-1)),d(w(Re),{modelValue:e.form.status,"onUpdate:modelValue":l[4]||(l[4]=i=>e.form.status=i),options:t,"option-label":"label","option-value":"value",placeholder:"Selecciona el estado",class:D({"border-red-500":e.form.errors.status})},null,8,["modelValue","class"]),e.form.errors.status?(v(),b("span",At,L(e.form.errors.status),1)):U("",!0)])]),s("div",Lt,[d(w(P),{onClick:l[5]||(l[5]=i=>n.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),d(w(P),{onClick:l[6]||(l[6]=i=>n.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])],32))}},Ue=(e,a)=>{for(const o of Object.keys(a))e.on(o,a[o])},Ne=e=>{for(const a of Object.keys(e)){const o=e[a];o&&J(o.cancel)&&o.cancel()}},Vt=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),J=e=>typeof e=="function",oe=(e,a,o)=>{for(const t in o){const n="set"+Vt(t);e[n]?Ce(()=>o[t],(l,i)=>{e[n](l,i)}):a[n]&&Ce(()=>o[t],l=>{a[n](l)})}},ae=(e,a,o={})=>{const t={...o};for(const n in e){const l=a[n],i=e[n];l&&(l&&l.custom===!0||i!==void 0&&(t[n]=i))}return t},re=e=>{const a={},o={};for(const t in e)if(t.startsWith("on")&&!t.startsWith("onUpdate")&&t!=="onReady"){const n=t.slice(2).toLocaleLowerCase();a[n]=e[t]}else o[t]=e[t];return{listeners:a,attrs:o}},Tt=async e=>{const a=await Promise.all([_(()=>import("./marker-icon-2x-1TirABJh.js"),[]),_(()=>import("./marker-icon-B6h-nX3D.js"),[]),_(()=>import("./marker-shadow-B9CpECYs.js"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:a[0].default,iconUrl:a[1].default,shadowUrl:a[2].default})},he=e=>{const a=k((...t)=>console.warn(`Method ${e} has been invoked without being replaced`)),o=(...t)=>a.value(...t);return o.wrapped=a,M(e,o),o},xe=(e,a)=>e.wrapped.value=a,H=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,N=e=>{const a=ee(e);if(a===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return a},le=Symbol("useGlobalLeaflet"),ye=Symbol("addLayer"),Fe=Symbol("removeLayer"),De=Symbol("registerControl"),Ot=Symbol("registerLayerControl"),qe=Symbol("canSetParentHtml"),Me=Symbol("setParentHtml"),Ge=Symbol("setIcon"),He=Symbol("bindPopup"),Rt=Symbol("bindTooltip"),Ze=Symbol("unbindPopup"),Ut=Symbol("unbindTooltip"),be={options:{type:Object,default:()=>({}),custom:!0}},ge=e=>({options:e.options,methods:{}}),de={...be,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},We=(e,a,o)=>{const t=N(ye),n=N(Fe),{options:l,methods:i}=ge(e),r=ae(e,de,l),m=()=>t({leafletObject:a.value}),y=()=>n({leafletObject:a.value}),f={...i,setAttribution(p){y(),a.value.options.attribution=p,e.visible&&m()},setName(){y(),e.visible&&m()},setLayerType(){y(),e.visible&&m()},setVisible(p){a.value&&(p?m():y())},bindPopup(p){if(!a.value||!J(a.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}a.value.bindPopup(p)},bindTooltip(p){if(!a.value||!J(a.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}a.value.bindTooltip(p)},unbindTooltip(){a.value&&(J(a.value.closeTooltip)&&a.value.closeTooltip(),J(a.value.unbindTooltip)&&a.value.unbindTooltip())},unbindPopup(){a.value&&(J(a.value.closePopup)&&a.value.closePopup(),J(a.value.unbindPopup)&&a.value.unbindPopup())},updateVisibleProp(p){o.emit("update:visible",p)}};return M(He,f.bindPopup),M(Rt,f.bindTooltip),M(Ze,f.unbindPopup),M(Ut,f.unbindTooltip),we(()=>{f.unbindPopup(),f.unbindTooltip(),y()}),{options:r,methods:f}},Pt=(e,a)=>{if(e&&a.default)return te("div",{style:{display:"none"}},a.default())},It={...de,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Ke={...It,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},Et={...Ke,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}};({...Et});const ue={...be,position:{type:String}},zt=(e,a)=>{const{options:o,methods:t}=ge(e),n=ae(e,ue,o),l={...t,setPosition(i){a.value&&a.value.setPosition(i)}};return we(()=>{a.value&&a.value.remove()}),{options:n,methods:l}},Bt=e=>e.default?te("div",{ref:"root"},e.default()):null;Y({name:"LControl",props:{...ue,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,a){const o=k(),t=k(),n=ee(le),l=N(De),{options:i,methods:r}=zt(e,o);return X(async()=>{const{Control:m,DomEvent:y}=n?H.L:await _(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]),f=m.extend({onAdd(){return t.value}});o.value=ie(new f(i)),oe(r,o.value,e),l({leafletObject:o.value}),e.disableClickPropagation&&t.value&&y.disableClickPropagation(t.value),e.disableScrollPropagation&&t.value&&y.disableScrollPropagation(t.value),Z(()=>a.emit("ready",o.value))}),{root:t,leafletObject:o}},render(){return Bt(this.$slots)}});({...ue});({...ue});({...ue});({...ue});const Je={...de};({...Je});({...Je});const je={...de,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Qe=(e,a,o)=>{const{options:t,methods:n}=We(e,a,o),l=ae(e,je,t),i={...n,setTileComponent(){var r;(r=a.value)==null||r.redraw()}};return we(()=>{a.value.off()}),{options:l,methods:i}},_t=(e,a,o,t)=>e.extend({initialize(n){this.tileComponents={},this.on("tileunload",this._unloadTile),o.setOptions(this,n)},createTile(n){const l=this._tileCoordsToKey(n);this.tileComponents[l]=a.create("div");const i=te({setup:t,props:["coords"]},{coords:n});return ut(i,this.tileComponents[l]),this.tileComponents[l]},_unloadTile(n){const l=this._tileCoordsToKey(n.coords);this.tileComponents[l]&&(this.tileComponents[l].innerHTML="",this.tileComponents[l]=void 0)}});Y({props:{...je,childRender:{type:Function,required:!0}},setup(e,a){const o=k(),t=k(null),n=k(!1),l=ee(le),i=N(ye),{options:r,methods:m}=Qe(e,o,a);return X(async()=>{const{GridLayer:y,DomUtil:f,Util:p}=l?H.L:await _(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]),C=_t(y,f,p,e.childRender);o.value=ie(new C(r));const{listeners:x}=re(a.attrs);o.value.on(x),oe(m,o.value,e),i({...e,...m,leafletObject:o.value}),n.value=!0,Z(()=>a.emit("ready",o.value))}),{root:t,ready:n,leafletObject:o}},render(){return this.ready?te("div",{style:{display:"none"},ref:"root"}):null}});const Pe={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},Nt=Y({name:"LIcon",props:{...Pe,...be},setup(e,a){const o=k(),t=ee(le),n=N(qe),l=N(Me),i=N(Ge);let r,m,y,f,p;const C=(S,c,g)=>{const V=S&&S.innerHTML;if(!c){g&&p&&n()&&l(V);return}const{listeners:W}=re(a.attrs);p&&m(p,W);const{options:ce}=ge(e),B=ae(e,Pe,ce);V&&(B.html=V),p=B.html?y(B):f(B),r(p,W),i(p)},x=()=>{Z(()=>C(o.value,!0,!1))},j=()=>{Z(()=>C(o.value,!1,!0))},I={setIconUrl:x,setIconRetinaUrl:x,setIconSize:x,setIconAnchor:x,setPopupAnchor:x,setTooltipAnchor:x,setShadowUrl:x,setShadowRetinaUrl:x,setShadowAnchor:x,setBgPos:x,setClassName:x,setHtml:x};return X(async()=>{const{DomEvent:S,divIcon:c,icon:g}=t?H.L:await _(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);r=S.on,m=S.off,y=c,f=g,oe(I,{},e),new MutationObserver(j).observe(o.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),x()}),{root:o}},render(){const e=this.$slots.default?this.$slots.default():void 0;return te("div",{ref:"root"},e)}});({...de});function Xe(e,a,o){var t,n,l;a===void 0&&(a=50),o===void 0&&(o={});var i=(t=o.isImmediate)!=null&&t,r=(n=o.callback)!=null&&n,m=o.maxWait,y=Date.now(),f=[];function p(){if(m!==void 0){var x=Date.now()-y;if(x+a>=m)return m-x}return a}var C=function(){var x=[].slice.call(arguments),j=this;return new Promise(function(I,S){var c=i&&l===void 0;if(l!==void 0&&clearTimeout(l),l=setTimeout(function(){if(l=void 0,y=Date.now(),!i){var V=e.apply(j,x);r&&r(V),f.forEach(function(W){return(0,W.resolve)(V)}),f=[]}},p()),c){var g=e.apply(j,x);return r&&r(g),I(g)}f.push({resolve:I,reject:S})})};return C.cancel=function(x){l!==void 0&&clearTimeout(l),f.forEach(function(j){return(0,j.reject)(x)}),f=[]},C}const Ie={...be,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Ft=Y({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Ie,setup(e,a){const o=k(),t=dt({ready:!1,layersToAdd:[],layersInControl:[]}),{options:n}=ge(e),l=ae(e,Ie,n),{listeners:i,attrs:r}=re(a.attrs),m=he(ye),y=he(Fe),f=he(De),p=he(Ot);M(le,e.useGlobalLeaflet);const C=pe(()=>{const c={};return e.noBlockingAnimations&&(c.animate=!1),c}),x=pe(()=>{const c=C.value;return e.padding&&(c.padding=e.padding),e.paddingTopLeft&&(c.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(c.paddingBottomRight=e.paddingBottomRight),c}),j={moveend:Xe(c=>{t.leafletRef&&(a.emit("update:zoom",t.leafletRef.getZoom()),a.emit("update:center",t.leafletRef.getCenter()),a.emit("update:bounds",t.leafletRef.getBounds()))}),overlayadd(c){const g=t.layersInControl.find(V=>V.name===c.name);g&&g.updateVisibleProp(!0)},overlayremove(c){const g=t.layersInControl.find(V=>V.name===c.name);g&&g.updateVisibleProp(!1)}};X(async()=>{e.useGlobalLeaflet&&(H.L=H.L||await _(()=>import("./leaflet-src-DdhmuEKN.js").then($=>$.l),__vite__mapDeps([0,1,2])));const{map:c,CRS:g,Icon:V,latLngBounds:W,latLng:ce,stamp:B}=e.useGlobalLeaflet?H.L:await _(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);try{l.beforeMapMount&&await l.beforeMapMount()}catch($){console.error(`The following error occurred running the provided beforeMapMount hook ${$.message}`)}await Tt(V);const $e=typeof l.crs=="string"?g[l.crs]:l.crs;l.crs=$e||g.EPSG3857;const q={addLayer($){$.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd.push($):t.layersInControl.find(T=>B(T.leafletObject)===B($.leafletObject))||(t.layerControl.addLayer($),t.layersInControl.push($))),$.visible!==!1&&t.leafletRef.addLayer($.leafletObject)},removeLayer($){$.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd=t.layersToAdd.filter(T=>T.name!==$.name):(t.layerControl.removeLayer($.leafletObject),t.layersInControl=t.layersInControl.filter(T=>B(T.leafletObject)!==B($.leafletObject)))),t.leafletRef.removeLayer($.leafletObject)},registerLayerControl($){t.layerControl=$,t.layersToAdd.forEach(T=>{t.layerControl.addLayer(T)}),t.layersToAdd=[],f($)},registerControl($){t.leafletRef.addControl($.leafletObject)},setZoom($){const T=t.leafletRef.getZoom();$!==T&&t.leafletRef.setZoom($,C.value)},setCrs($){const T=t.leafletRef.getBounds();t.leafletRef.options.crs=$,t.leafletRef.fitBounds(T,{animate:!1,padding:[0,0]})},fitBounds($){t.leafletRef.fitBounds($,x.value)},setBounds($){if(!$)return;const T=W($);T.isValid()&&!(t.lastSetBounds||t.leafletRef.getBounds()).equals(T,0)&&(t.lastSetBounds=T,t.leafletRef.fitBounds(T))},setCenter($){if($==null)return;const T=ce($),me=t.lastSetCenter||t.leafletRef.getCenter();(me.lat!==T.lat||me.lng!==T.lng)&&(t.lastSetCenter=T,t.leafletRef.panTo(T,C.value))}};xe(m,q.addLayer),xe(y,q.removeLayer),xe(f,q.registerControl),xe(p,q.registerLayerControl),t.leafletRef=ie(c(o.value,l)),oe(q,t.leafletRef,e),Ue(t.leafletRef,j),Ue(t.leafletRef,i),t.ready=!0,Z(()=>a.emit("ready",t.leafletRef))}),Le(()=>{Ne(j),t.leafletRef&&(t.leafletRef.off(),t.leafletRef.remove())});const I=pe(()=>t.leafletRef),S=pe(()=>t.ready);return{root:o,ready:S,leafletObject:I,attrs:r}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),te("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Dt=["Symbol(Comment)","Symbol(Text)"],qt=["LTooltip","LPopup"],Ye={...de,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Mt=(e,a,o)=>{const{options:t,methods:n}=We(e,a,o),l=ae(e,Ye,t),i={...n,setDraggable(r){a.value.dragging&&(r?a.value.dragging.enable():a.value.dragging.disable())},latLngSync(r){o.emit("update:latLng",r.latlng),o.emit("update:lat-lng",r.latlng)},setLatLng(r){if(r!=null&&a.value){const m=a.value.getLatLng();(!m||!m.equals(r))&&a.value.setLatLng(r)}}};return{options:l,methods:i}},Gt=(e,a)=>{const o=a.slots.default&&a.slots.default();return o&&o.length&&o.some(Ht)};function Ht(e){return!(Dt.includes(e.type.toString())||qt.includes(e.type.name))}const Zt=Y({name:"LMarker",props:Ye,setup(e,a){const o=k(),t=k(!1),n=ee(le),l=N(ye);M(qe,()=>{var y;return!!((y=o.value)!=null&&y.getElement())}),M(Me,y=>{var f,p;const C=J((f=o.value)==null?void 0:f.getElement)&&((p=o.value)==null?void 0:p.getElement());C&&(C.innerHTML=y)}),M(Ge,y=>{var f;return((f=o.value)==null?void 0:f.setIcon)&&o.value.setIcon(y)});const{options:i,methods:r}=Mt(e,o,a),m={moveHandler:Xe(r.latLngSync)};return X(async()=>{const{marker:y,divIcon:f}=n?H.L:await _(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);Gt(i,a)&&(i.icon=f({className:""})),o.value=ie(y(e.latLng,i));const{listeners:p}=re(a.attrs);o.value.on(p),o.value.on("move",m.moveHandler),oe(r,o.value,e),l({...e,...r,leafletObject:o.value}),t.value=!0,Z(()=>a.emit("ready",o.value))}),Le(()=>Ne(m)),{ready:t,leafletObject:o}},render(){return Pt(this.ready,this.$slots)}}),Wt={...Ke,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Ee={...Wt},et={...be,content:{type:String,default:null}},Kt=(e,a)=>{const{options:o,methods:t}=ge(e),n={...t,setContent(l){a.value&&l!==null&&l!==void 0&&a.value.setContent(l)}};return{options:o,methods:n}},Jt=e=>e.default?te("div",{ref:"root"},e.default()):null,Qt={...et,latLng:{type:[Object,Array],default:()=>[]}},Xt=(e,a)=>{const{options:o,methods:t}=Kt(e,a);return{options:o,methods:t}},Yt=Y({name:"LPopup",props:Qt,setup(e,a){const o=k(),t=k(null),n=ee(le),l=N(He),i=N(Ze),{options:r,methods:m}=Xt(e,o);return X(async()=>{const{popup:y}=n?H.L:await _(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);o.value=ie(y(r)),e.latLng!==void 0&&o.value.setLatLng(e.latLng),oe(m,o.value,e);const{listeners:f}=re(a.attrs);o.value.on(f),o.value.setContent(e.content||t.value||""),l(o.value),Z(()=>a.emit("ready",o.value))}),Le(()=>{i()}),{root:t,leafletObject:o}},render(){return Jt(this.$slots)}});({...Ee,latLngs:{...Ee.latLngs}});const Ve={...je,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(a=>typeof a=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},eo=(e,a,o)=>{const{options:t,methods:n}=Qe(e,a,o),l=ae(e,Ve,t),i={...n};return{options:l,methods:i}},to=Y({props:Ve,setup(e,a){const o=k(),t=ee(le),n=N(ye),{options:l,methods:i}=eo(e,o,a);return X(async()=>{const{tileLayer:r}=t?H.L:await _(()=>import("./leaflet-src.esm-C6uo2YWw.js"),[]);o.value=ie(r(e.url,l));const{listeners:m}=re(a.attrs);o.value.on(m),oe(i,o.value,e),n({...e,...i,leafletObject:o.value}),Z(()=>a.emit("ready",o.value))}),{leafletObject:o}},render(){return null}});({...et});({...Ve});const oo={class:"space-y-4"},ao={class:"flex items-center justify-between"},lo={class:"relative search-container"},so={class:"relative"},no=["onKeydown","disabled"],io={class:"absolute inset-y-0 right-0 flex items-center pr-3"},ro={key:0,class:"fa-solid fa-spinner fa-spin text-gray-400"},uo={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},co=["onClick"],mo={class:"flex items-start space-x-2"},fo={class:"flex-1 min-w-0"},po={class:"text-sm font-medium text-gray-900 truncate"},vo={class:"text-xs text-gray-500 truncate"},yo={class:"relative"},bo={class:"text-sm"},go={key:1,class:"absolute inset-0 bg-gray-100 flex items-center justify-center"},ho={key:0,class:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200"},xo={class:"flex items-center justify-between mb-2"},wo={class:"text-sm"},$o={class:"text-blue-600 ml-2"},Co={key:0,class:"text-xs text-blue-600 space-y-1"},ko={key:0,class:"flex items-center"},So={key:0},Ao={key:1},Lo={key:2},jo={key:3,class:"pt-1 border-t border-blue-200 mt-2"},Vo={class:"text-xs"},To={__name:"MapSelector",props:{latitude:{type:[Number,String],default:null},longitude:{type:[Number,String],default:null},address:{type:String,default:""}},emits:["update:latitude","update:longitude","update:address","update:city","update:state","update:country"],setup(e,{emit:a}){const o=e,t=a,n=k(!0),l=k(!1),i=k(13),r=k([10.391,-75.4794]),m=k(null),y=k(null),f=k(!1),p=k(null),C=k(""),x=k(!1),j=k([]),I=k(!1),S=k(null),c=k({city:"",state:"",country:"",fullAddress:""}),g=k(!1),V=k("Ubicación seleccionada");X(async()=>{if(await Z(),document.addEventListener("click",Te),at(),o.latitude&&o.longitude){const h=parseFloat(o.latitude),u=parseFloat(o.longitude);!isNaN(h)&&!isNaN(u)&&(r.value=[h,u],m.value=[h,u],V.value=o.address||"Ubicación del alojamiento")}setTimeout(()=>{n.value=!1,f.value=!0,setTimeout(()=>{Oe()},100)},100)}),we(()=>{document.removeEventListener("click",Te),S.value&&clearTimeout(S.value)});const W=async h=>{const{lat:u,lng:A}=h.latlng;m.value=[u,A],V.value="Obteniendo dirección...",t("update:latitude",u.toFixed(6)),t("update:longitude",A.toFixed(6)),await q(u,A)},ce=h=>{setTimeout(()=>{h.invalidateSize()},50),setTimeout(()=>{h.invalidateSize(),h.eachLayer(u=>{u._url&&u.redraw()})},200),setTimeout(()=>{h.invalidateSize(),window.dispatchEvent&&window.dispatchEvent(new Event("resize"))},500)},B=async h=>{const{lat:u,lng:A}=h.target.getLatLng();m.value=[u,A],V.value="Obteniendo dirección...",t("update:latitude",u.toFixed(6)),t("update:longitude",A.toFixed(6)),await q(u,A)},$e=()=>{if(S.value&&clearTimeout(S.value),!C.value.trim()){j.value=[],I.value=!1;return}S.value=setTimeout(()=>{$()},300)},q=async(h,u)=>{g.value=!0;try{const A=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${h}&lon=${u}&addressdetails=1&accept-language=es`);if(A.ok){const O=await A.json();if(O&&O.address){const z=O.address,K=z.city||z.town||z.village||z.municipality||"",se=z.state||z.province||z.region||"",ne=z.country||"",fe=O.display_name||"";return c.value={city:K,state:se,country:ne,fullAddress:fe},t("update:address",fe),t("update:city",K),t("update:state",se),t("update:country",ne),V.value=fe?`${fe}`:"Ubicación seleccionada",{city:K,state:se,country:ne,fullAddress:fe}}}}catch(A){console.error("Error en geocodificación inversa:",A)}finally{g.value=!1}return null},$=async()=>{if(!(!C.value.trim()||C.value.length<3)){x.value=!0;try{const h=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(C.value)}&limit=5&countrycodes=co&addressdetails=1`);if(h.ok){const u=await h.json();j.value=u,I.value=!0}}catch(h){console.error("Error en la búsqueda:",h)}finally{x.value=!1}}},T=async()=>{if(C.value.trim()){x.value=!0,I.value=!1;try{const h=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(C.value)}&limit=1&countrycodes=co&addressdetails=1`);if(h.ok){const u=await h.json();u.length>0?me(u[0]):alert("No se encontraron resultados para la búsqueda.")}}catch(h){console.error("Error en la búsqueda:",h),alert("Error al buscar la ubicación. Inténtalo de nuevo.")}finally{x.value=!1}}},me=h=>{const u=parseFloat(h.lat),A=parseFloat(h.lon);if(r.value=[u,A],m.value=[u,A],h.address){const O=h.address,z=O.city||O.town||O.village||O.municipality||"",K=O.state||O.province||O.region||"",se=O.country||"",ne=h.display_name||"";c.value={city:z,state:K,country:se,fullAddress:ne},t("update:address",ne),t("update:city",z),t("update:state",K),t("update:country",se),V.value=z?`${z}, ${K}`:h.display_name.split(",")[0]}else V.value=h.display_name.split(",")[0];t("update:latitude",u.toFixed(6)),t("update:longitude",A.toFixed(6)),C.value=h.display_name.split(",")[0],I.value=!1,i.value=16},tt=()=>{if(!navigator.geolocation){alert("La geolocalización no está soportada por este navegador.");return}l.value=!0,navigator.geolocation.getCurrentPosition(async h=>{const u=h.coords.latitude,A=h.coords.longitude;r.value=[u,A],m.value=[u,A],V.value="Obteniendo dirección...",t("update:latitude",u.toFixed(6)),t("update:longitude",A.toFixed(6)),await q(u,A),l.value=!1},h=>{console.error("Error obteniendo la ubicación:",h),alert("No se pudo obtener tu ubicación. Por favor, selecciona manualmente en el mapa."),l.value=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},ot=()=>{m.value=null,c.value={city:"",state:"",country:"",fullAddress:""},t("update:latitude",null),t("update:longitude",null),t("update:address",null),t("update:city",null),t("update:state",null),t("update:country",null)},Te=h=>{h.target.closest(".search-container")||(I.value=!1)},Oe=()=>{p.value&&p.value.leafletObject&&(setTimeout(()=>{p.value.leafletObject.invalidateSize()},50),setTimeout(()=>{p.value.leafletObject.invalidateSize()},200),setTimeout(()=>{p.value.leafletObject.invalidateSize(),window.dispatchEvent&&window.dispatchEvent(new Event("resize"))},500))},at=()=>{y.value&&new IntersectionObserver(u=>{u.forEach(A=>{A.isIntersecting&&Oe()})}).observe(y.value)};return Ce([()=>o.latitude,()=>o.longitude],([h,u])=>{if(h&&u){const A=parseFloat(h),O=parseFloat(u);!isNaN(A)&&!isNaN(O)&&(r.value=[A,O],m.value=[A,O])}}),(h,u)=>{const A=ze;return v(),b("div",oo,[s("div",ao,[u[2]||(u[2]=s("label",{class:"block text-sm font-medium text-gray-700"}," Seleccionar Ubicación en el Mapa ",-1)),d(w(P),{onClick:tt,icon:"fa-solid fa-location-crosshairs",label:"Mi Ubicación",size:"small",severity:"info",outlined:"",loading:l.value},null,8,["loading"])]),s("div",lo,[s("div",so,[ke(s("input",{"onUpdate:modelValue":u[0]||(u[0]=O=>C.value=O),onInput:$e,onKeydown:mt(Ae(T,["prevent"]),["enter"]),onFocus:u[1]||(u[1]=O=>I.value=!0),type:"text",placeholder:"Buscar dirección o lugar...",class:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",disabled:x.value},null,40,no),[[ct,C.value]]),s("div",io,[x.value?(v(),b("i",ro)):(v(),b("i",{key:1,class:"fa-solid fa-magnifying-glass text-gray-400 cursor-pointer hover:text-gray-600",onClick:T}))])]),I.value&&j.value.length>0?(v(),b("div",uo,[(v(!0),b(G,null,Q(j.value,(O,z)=>(v(),b("div",{key:z,onClick:K=>me(O),class:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"},[s("div",mo,[u[3]||(u[3]=s("i",{class:"fa-solid fa-location-dot text-gray-400 mt-1 text-sm"},null,-1)),s("div",fo,[s("p",po,L(O.display_name.split(",")[0]),1),s("p",vo,L(O.display_name),1)])])],8,co))),128))])):U("",!0)]),s("div",yo,[s("div",{ref_key:"mapContainer",ref:y,class:D(["h-96 w-full rounded-lg border border-gray-300 overflow-hidden",{"opacity-50":n.value}])},[n.value?U("",!0):(v(),ve(w(Ft),{key:0,ref_key:"map",ref:p,zoom:i.value,center:r.value,"use-global-leaflet":!1,onClick:W,onReady:ce,style:{height:"384px",width:"100%","z-index":"1"},class:"leaflet-map",options:{zoomControl:!0,attributionControl:!0,scrollWheelZoom:!0,doubleClickZoom:!0,boxZoom:!0,keyboard:!0,dragging:!0,trackResize:!0}},{default:R(()=>[d(w(to),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",options:{maxZoom:19,minZoom:1,opacity:1,zIndex:1}}),m.value?(v(),ve(w(Zt),{key:0,"lat-lng":m.value,draggable:!0,onDragend:B},{default:R(()=>[d(w(Nt),{"icon-size":[25,41],"icon-anchor":[12,41],"popup-anchor":[1,-34],"shadow-size":[41,41],"icon-url":"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png","shadow-url":"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"}),d(w(Yt),null,{default:R(()=>[s("div",bo,[s("strong",null,L(V.value),1),u[4]||(u[4]=s("br",null,null,-1)),F(" Lat: "+L(m.value[0].toFixed(6)),1),u[5]||(u[5]=s("br",null,null,-1)),F(" Lng: "+L(m.value[1].toFixed(6)),1)])]),_:1})]),_:1},8,["lat-lng"])):U("",!0)]),_:1},8,["zoom","center"])),n.value?(v(),b("div",go,[...u[6]||(u[6]=[s("div",{class:"text-center"},[s("i",{class:"fa-solid fa-spinner fa-spin text-2xl text-gray-500 mb-2"}),s("p",{class:"text-gray-500"},"Cargando mapa...")],-1)])])):U("",!0)],2),m.value?(v(),b("div",ho,[s("div",xo,[s("div",wo,[u[7]||(u[7]=s("span",{class:"font-medium text-blue-800"},"Ubicación seleccionada:",-1)),s("span",$o,L(m.value[0].toFixed(6))+", "+L(m.value[1].toFixed(6)),1)]),ke(d(w(P),{onClick:ot,icon:"fa-solid fa-times",size:"small",severity:"danger",text:""},null,512),[[A,"Limpiar ubicación"]])]),c.value.city||c.value.fullAddress?(v(),b("div",Co,[g.value?(v(),b("div",ko,[...u[8]||(u[8]=[s("i",{class:"fa-solid fa-spinner fa-spin mr-2"},null,-1),s("span",null,"Obteniendo información de dirección...",-1)])])):(v(),b(G,{key:1},[c.value.city?(v(),b("div",So,[u[9]||(u[9]=s("strong",null,"Ciudad:",-1)),F(" "+L(c.value.city),1)])):U("",!0),c.value.state?(v(),b("div",Ao,[u[10]||(u[10]=s("strong",null,"Departamento/Estado:",-1)),F(" "+L(c.value.state),1)])):U("",!0),c.value.country?(v(),b("div",Lo,[u[11]||(u[11]=s("strong",null,"País:",-1)),F(" "+L(c.value.country),1)])):U("",!0),c.value.fullAddress?(v(),b("div",jo,[u[12]||(u[12]=s("strong",null,"Dirección completa:",-1)),u[13]||(u[13]=s("br",null,null,-1)),s("span",Vo,L(c.value.fullAddress),1)])):U("",!0)],64))])):U("",!0)])):U("",!0)]),u[14]||(u[14]=s("div",{class:"text-xs text-gray-500 space-y-1"},[s("p",null,"• Busca direcciones o lugares en el campo de búsqueda"),s("p",null,"• Haz clic en el mapa para colocar un marcador"),s("p",null,"• Arrastra el marcador para ajustar la posición"),s("p",null,'• Usa "Mi Ubicación" para obtener tu ubicación actual')],-1))])}}},Oo=bt(To,[["__scopeId","data-v-65a065af"]]),Ro={class:"space-y-6"},Uo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Po={class:"md:col-span-2"},Io={class:"flex gap-x-4 mt-8 justify-between"},Eo={__name:"LocationForm",props:{form:{type:Object,required:!0}},emits:["submit","cancel"],setup(e,{emit:a}){return(o,t)=>(v(),b("div",Ro,[t[16]||(t[16]=s("h3",{class:"text-lg font-semibold mb-4"},"Ubicación",-1)),s("div",Uo,[d(E,{label:"Dirección",modelValue:e.form.address_line_1,"onUpdate:modelValue":t[0]||(t[0]=n=>e.form.address_line_1=n),"error-message":e.form.errors.address_line_1,required:""},null,8,["modelValue","error-message"]),d(E,{label:"Ciudad",modelValue:e.form.city,"onUpdate:modelValue":t[1]||(t[1]=n=>e.form.city=n),"error-message":e.form.errors.city,required:""},null,8,["modelValue","error-message"]),d(E,{label:"Departamento/Estado",modelValue:e.form.state,"onUpdate:modelValue":t[2]||(t[2]=n=>e.form.state=n),"error-message":e.form.errors.state,required:""},null,8,["modelValue","error-message"]),d(E,{label:"País",modelValue:e.form.country,"onUpdate:modelValue":t[3]||(t[3]=n=>e.form.country=n),"error-message":e.form.errors.country,required:""},null,8,["modelValue","error-message"]),d(E,{label:"Código Postal",modelValue:e.form.postal_code,"onUpdate:modelValue":t[4]||(t[4]=n=>e.form.postal_code=n),"error-message":e.form.errors.postal_code,required:""},null,8,["modelValue","error-message"]),t[15]||(t[15]=s("div",null,null,-1)),d(E,{label:"Latitud (Opcional)",modelValue:e.form.latitude,"onUpdate:modelValue":t[5]||(t[5]=n=>e.form.latitude=n),type:"text",step:"any","error-message":e.form.errors.latitude},null,8,["modelValue","error-message"]),d(E,{label:"Longitud (Opcional)",modelValue:e.form.longitude,"onUpdate:modelValue":t[6]||(t[6]=n=>e.form.longitude=n),type:"text",step:"any","error-message":e.form.errors.longitude},null,8,["modelValue","error-message"]),s("div",Po,[d(Oo,{latitude:e.form.latitude,"onUpdate:latitude":t[7]||(t[7]=n=>e.form.latitude=n),longitude:e.form.longitude,"onUpdate:longitude":t[8]||(t[8]=n=>e.form.longitude=n),address:e.form.address_line_1,"onUpdate:address":t[9]||(t[9]=n=>e.form.address_line_1=n),city:e.form.city,"onUpdate:city":t[10]||(t[10]=n=>e.form.city=n),state:e.form.state,"onUpdate:state":t[11]||(t[11]=n=>e.form.state=n),country:e.form.country,"onUpdate:country":t[12]||(t[12]=n=>e.form.country=n)},null,8,["latitude","longitude","address","city","state","country"])])]),s("div",Io,[d(w(P),{onClick:t[13]||(t[13]=n=>o.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),d(w(P),{onClick:t[14]||(t[14]=n=>o.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]))}},zo={class:"space-y-6"},Bo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_o={class:"flex justify-between items-center mb-4"},No={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},Fo=["for"],Do={class:"flex items-center space-x-4 mb-4"},qo={class:"flex-1"},Mo={key:0,class:"flex items-center space-x-2 text-blue-600"},Go={class:"text-sm"},Ho={class:"border rounded-lg p-4 max-h-60 overflow-y-auto"},Zo={class:"grid grid-cols-8 gap-2"},Wo=["onClick","title"],Ko={key:0,class:"text-red-500 text-xs"},Jo={class:"flex gap-x-4 justify-end pt-4"},Qo={class:"flex gap-x-4 mt-8 justify-between"},Xo={__name:"ContactAmenities",props:{form:{type:Object,required:!0},amenities:{type:Array,required:!0}},emits:["submit","cancel","amenityAdded"],setup(e,{emit:a}){const o=e,t=a,n=k(!1),l=k(!1),i=k({name:"",icon:""}),r=k({name:"",icon:""}),m=k(""),y=["fa-solid fa-wifi","fa-solid fa-swimming-pool","fa-solid fa-car","fa-solid fa-utensils","fa-solid fa-dumbbell","fa-solid fa-hot-tub","fa-solid fa-snowflake","fa-solid fa-fire","fa-solid fa-tv","fa-solid fa-bed","fa-solid fa-bath","fa-solid fa-shower","fa-solid fa-coffee","fa-solid fa-wine-glass","fa-solid fa-cocktail","fa-solid fa-bicycle","fa-solid fa-dog","fa-solid fa-baby","fa-solid fa-wheelchair","fa-solid fa-smoking-ban","fa-solid fa-wind","fa-solid fa-sun","fa-solid fa-moon","fa-solid fa-mountain","fa-solid fa-water","fa-solid fa-tree","fa-solid fa-leaf","fa-solid fa-spa","fa-solid fa-massage","fa-solid fa-gamepad","fa-solid fa-music","fa-solid fa-book","fa-solid fa-camera","fa-solid fa-phone","fa-solid fa-envelope","fa-solid fa-globe","fa-solid fa-map-marker-alt","fa-solid fa-clock","fa-solid fa-calendar","fa-solid fa-credit-card","fa-solid fa-lock","fa-solid fa-key","fa-solid fa-bell","fa-solid fa-gift","fa-solid fa-heart","fa-solid fa-star","fa-solid fa-thumb-up","fa-solid fa-check","fa-solid fa-plus","fa-solid fa-home","fa-solid fa-building","fa-solid fa-warehouse","fa-solid fa-store","fa-solid fa-hospital","fa-solid fa-school","fa-solid fa-university","fa-solid fa-church","fa-solid fa-mosque","fa-solid fa-synagogue","fa-solid fa-plane","fa-solid fa-train","fa-solid fa-bus","fa-solid fa-taxi","fa-solid fa-ship","fa-solid fa-anchor"],f=pe(()=>m.value?y.filter(S=>S.toLowerCase().includes(m.value.toLowerCase())):y),p=S=>{i.value.icon=S,r.value.icon=""},C=()=>{},x=()=>{r.value={name:"",icon:""};let S=!0;return i.value.name.trim()||(r.value.name="El nombre es requerido",S=!1),i.value.icon||(r.value.icon="Debes seleccionar un icono",S=!1),S},j=()=>{x()&&(l.value=!0,Se.post(route("amenities.store"),{name:i.value.name.trim(),icon:i.value.icon},{preserveState:!0,preserveScroll:!0,onSuccess:S=>{const c={id:Date.now(),name:i.value.name.trim(),icon:i.value.icon,slug:i.value.name.trim().toLowerCase().replace(/\s+/g,"-")};o.amenities.push(c),o.form.amenities.includes(c.id)||o.form.amenities.push(c.id),I(),t("amenityAdded",c)},onError:S=>{r.value=S},onFinish:()=>{l.value=!1}}))},I=()=>{n.value=!1,i.value={name:"",icon:""},r.value={name:"",icon:""},m.value=""};return(S,c)=>(v(),b("div",zo,[s("div",null,[c[9]||(c[9]=s("h3",{class:"text-lg font-semibold mb-4"},"Información de Contacto",-1)),s("div",Bo,[d(E,{label:"Email de Contacto",modelValue:e.form.contact_email,"onUpdate:modelValue":c[0]||(c[0]=g=>e.form.contact_email=g),type:"email","error-message":e.form.errors.contact_email,required:""},null,8,["modelValue","error-message"]),d(E,{label:"Teléfono de Contacto",modelValue:e.form.contact_phone,"onUpdate:modelValue":c[1]||(c[1]=g=>e.form.contact_phone=g),"error-message":e.form.errors.contact_phone,required:""},null,8,["modelValue","error-message"])])]),s("div",null,[s("div",_o,[c[10]||(c[10]=s("h3",{class:"text-lg font-semibold"},"Servicios y Amenidades",-1)),d(w(P),{onClick:c[2]||(c[2]=g=>n.value=!0),icon:"fa-solid fa-plus",label:"Agregar Amenidad",severity:"success",outlined:"",size:"small"})]),s("div",No,[(v(!0),b(G,null,Q(e.amenities,g=>(v(),b("div",{key:g.id,class:"flex items-center space-x-2"},[d(w(vt),{inputId:"amenity-"+g.id,modelValue:e.form.amenities,"onUpdate:modelValue":c[3]||(c[3]=V=>e.form.amenities=V),value:g.id},null,8,["inputId","modelValue","value"]),s("label",{for:"amenity-"+g.id,class:"text-sm cursor-pointer flex items-center space-x-2"},[g.icon?(v(),b("i",{key:0,class:D([g.icon,"text-blue-600"])},null,2)):U("",!0),s("span",null,L(g.name),1)],8,Fo)]))),128))])]),d(w(gt),{visible:n.value,"onUpdate:visible":c[6]||(c[6]=g=>n.value=g),modal:"",header:"Agregar Nueva Amenidad",style:{width:"500px"},class:"p-fluid"},{default:R(()=>[s("form",{onSubmit:Ae(j,["prevent"]),class:"space-y-4"},[s("div",null,[d(E,{label:"Nombre de la Amenidad",modelValue:i.value.name,"onUpdate:modelValue":c[4]||(c[4]=g=>i.value.name=g),"error-message":r.value.name,required:"",placeholder:"Ej: WiFi Gratis, Piscina, Parking..."},null,8,["modelValue","error-message"])]),s("div",null,[c[11]||(c[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Icono de la Amenidad ",-1)),s("div",Do,[s("div",qo,[d(E,{label:"Buscar Icono",modelValue:m.value,"onUpdate:modelValue":c[5]||(c[5]=g=>m.value=g),placeholder:"Buscar icono...",onInput:C},null,8,["modelValue"])]),i.value.icon?(v(),b("div",Mo,[s("i",{class:D([i.value.icon,"text-2xl"])},null,2),s("span",Go,L(i.value.icon),1)])):U("",!0)]),s("div",Ho,[s("div",Zo,[(v(!0),b(G,null,Q(f.value,g=>(v(),b("button",{key:g,type:"button",onClick:V=>p(g),class:D(["p-3 border rounded-lg hover:bg-blue-50 transition-colors flex items-center justify-center",i.value.icon===g?"border-blue-500 bg-blue-50":"border-gray-200"]),title:g},[s("i",{class:D([g,"text-xl"])},null,2)],10,Wo))),128))])]),r.value.icon?(v(),b("span",Ko,L(r.value.icon),1)):U("",!0)]),s("div",Jo,[d(w(P),{onClick:I,type:"button",severity:"secondary",label:"Cancelar",outlined:""}),d(w(P),{type:"submit",severity:"success",label:"Guardar Amenidad",loading:l.value,icon:"fa-solid fa-save"},null,8,["loading"])])],32)]),_:1},8,["visible"]),s("div",Qo,[d(w(P),{onClick:c[7]||(c[7]=g=>S.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),d(w(P),{onClick:c[8]||(c[8]=g=>S.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]))}},Yo={class:"space-y-6"},ea={class:"flex justify-between items-center mb-4"},ta={key:0,class:"text-center text-gray-500 py-8"},oa={key:1,class:"space-y-4"},aa={class:"flex justify-between items-center mb-4"},la={class:"font-medium"},sa={class:"space-y-4"},na={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ia={class:"md:col-span-2"},ra={key:0,class:"text-red-500 text-xs"},da={class:"border-t pt-4"},ua={class:"font-medium mb-2"},ca={key:0,class:"mb-4"},ma={class:"grid grid-cols-6 gap-4"},fa=["src","alt"],pa=["onClick"],va={class:"flex flex-wrap justify-between items-center flex-1 gap-4"},ya={class:"flex gap-2"},ba={key:0,class:"flex flex-wrap gap-4 pt-4"},ga=["src","alt"],ha=["onClick"],xa={class:"text-xs text-center mt-1 truncate w-20"},wa={class:"flex gap-x-4 mt-8 justify-between"},$a={__name:"RoomsForm",props:{form:{type:Object,required:!0},accommodation:{type:Object,default:null}},emits:["submit","cancel","addRoom","removeRoom","removeImage","roomImagesSelect"],setup(e,{emit:a}){return(o,t)=>{const n=ze;return v(),b("div",Yo,[s("div",ea,[t[3]||(t[3]=s("h3",{class:"text-lg font-semibold"},"Habitaciones",-1)),d(w(P),{onClick:t[0]||(t[0]=l=>o.$emit("addRoom")),icon:"fa-solid fa-plus",label:"Agregar Habitación",severity:"success",outlined:""})]),e.form.rooms.length===0?(v(),b("div",ta," No hay habitaciones agregadas. Agrega al menos una habitación. ")):(v(),b("div",oa,[(v(!0),b(G,null,Q(e.form.rooms,(l,i)=>(v(),b("div",{key:"room-"+i,class:"border rounded-lg p-4 bg-gray-50"},[s("div",aa,[s("h4",la,"Habitación "+L(i+1),1),ke(d(w(P),{onClick:r=>o.$emit("removeRoom",i),icon:"fa-solid fa-trash",severity:"danger",text:""},null,8,["onClick"]),[[n,"Eliminar habitación"]])]),s("div",sa,[s("div",na,[d(E,{label:"Nombre de la Habitación",modelValue:l.name,"onUpdate:modelValue":r=>l.name=r,"error-message":e.form.errors[`rooms.${i}.name`],required:""},null,8,["modelValue","onUpdate:modelValue","error-message"]),d(E,{label:"Precio por Noche",modelValue:l.price_per_night,"onUpdate:modelValue":r=>l.price_per_night=r,type:"number",min:"0",step:"0.01",currency:"COP","error-message":e.form.errors[`rooms.${i}.price_per_night`],required:""},null,8,["modelValue","onUpdate:modelValue","error-message"]),d(E,{label:"Capacidad Adultos",modelValue:l.capacity_adults,"onUpdate:modelValue":r=>l.capacity_adults=r,type:"number",min:"1","error-message":e.form.errors[`rooms.${i}.capacity_adults`],required:""},null,8,["modelValue","onUpdate:modelValue","error-message"]),d(E,{label:"Capacidad Niños",modelValue:l.capacity_children,"onUpdate:modelValue":r=>l.capacity_children=r,type:"number",min:"0","error-message":e.form.errors[`rooms.${i}.capacity_children`],required:""},null,8,["modelValue","onUpdate:modelValue","error-message"]),s("div",ia,[t[4]||(t[4]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descripción de la Habitación ",-1)),d(w(Be),{modelValue:l.description,"onUpdate:modelValue":r=>l.description=r,rows:"3",placeholder:"Describe esta habitación...",class:D({"border-red-500":e.form.errors[`rooms.${i}.description`]})},null,8,["modelValue","onUpdate:modelValue","class"]),e.form.errors[`rooms.${i}.description`]?(v(),b("span",ra,L(e.form.errors[`rooms.${i}.description`]),1)):U("",!0)])]),s("div",da,[s("h5",ua,"Fotos de la Habitación "+L(i+1),1),e.accommodation&&l.images&&l.images.length>0?(v(),b("div",ca,[s("div",ma,[(v(!0),b(G,null,Q(l.images,r=>(v(),b("div",{key:r.id,class:"relative"},[s("img",{src:r.filepath,alt:"Foto habitación "+(i+1),class:"h-28 shadow-md rounded-lg w-full object-cover"},null,8,fa),s("button",{onClick:m=>o.$emit("removeImage",r.id,!0,i),class:"absolute -top-2 -right-2 bg-red-500 hover:scale-90 rounded-full flex justify-center items-center text-white shadow-md shadow-red-400 size-6"},[...t[5]||(t[5]=[s("i",{class:"fa-solid fa-xmark text-xs"},null,-1)])],8,pa)]))),128))])])):U("",!0),d(w(_e),{name:"room-images-"+i,multiple:!0,accept:"image/*",maxFileSize:1e6,onSelect:r=>o.$emit("roomImagesSelect",r,i),customUpload:""},{header:R(({chooseCallback:r,clearCallback:m,files:y})=>[s("div",va,[s("div",ya,[d(w(P),{onClick:f=>r(),icon:"pi pi-images",size:"small",severity:"primary",label:"Seleccionar"},null,8,["onClick"]),d(w(P),{label:"Limpiar",onClick:f=>m(),icon:"pi pi-times",size:"small",severity:"danger",disabled:!y||y.length===0},null,8,["onClick","disabled"])]),t[6]||(t[6]=s("span",{class:"text-sm font-medium"},"Fotos de la Habitación",-1))])]),content:R(({files:r,removeFileCallback:m})=>[r.length>0?(v(),b("div",ba,[(v(!0),b(G,null,Q(r,(y,f)=>(v(),b("div",{key:y.name+y.type+y.size,class:"relative"},[s("img",{src:y.objectURL,alt:y.name,class:"h-20 w-20 object-cover rounded border"},null,8,ga),s("button",{onClick:p=>m(f),class:"absolute -top-2 -right-2 bg-red-500 hover:scale-90 rounded-full flex justify-center items-center text-white shadow-md size-5"},[...t[7]||(t[7]=[s("i",{class:"fa-solid fa-xmark text-xs"},null,-1)])],8,ha),s("div",xa,L(y.name),1)]))),128))])):U("",!0)]),empty:R(()=>[...t[8]||(t[8]=[s("div",{class:"flex items-center justify-center flex-col py-4"},[s("i",{class:"pi pi-cloud-upload text-2xl text-gray-400"}),s("p",{class:"mt-2 text-sm text-gray-500"}," Arrastra fotos aquí o haz clic para seleccionar ")],-1)])]),_:2},1032,["name","onSelect"])])])]))),128))])),s("div",wa,[d(w(P),{onClick:t[1]||(t[1]=l=>o.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),d(w(P),{onClick:t[2]||(t[2]=l=>o.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])])}}},Ca={class:"space-y-6"},ka={key:0},Sa={class:"grid grid-cols-6 gap-4 mb-4"},Aa=["src","alt"],La=["onClick"],ja={class:"flex flex-wrap justify-between items-center flex-1 gap-4"},Va={class:"flex gap-2"},Ta={key:0,class:"flex flex-wrap gap-4 pt-4"},Oa=["src","alt"],Ra={class:"font-semibold text-sm truncate max-w-24"},Ua={class:"text-xs text-gray-500"},Pa={class:"flex gap-x-4 mt-8 justify-between"},Ia={__name:"AccommodationPhotos",props:{form:{type:Object,required:!0},accommodation:{type:Object,required:!0}},emits:["submit","cancel","removeImage","accommodationImagesSelect"],setup(e,{emit:a}){const o=t=>{const i=["B","KB","MB","GB"];if(t===0)return`0 ${i[0]}`;const r=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,r)).toFixed(3))} ${i[r]}`};return(t,n)=>(v(),b("div",Ca,[n[10]||(n[10]=s("h3",{class:"text-lg font-semibold mb-4"},"Fotos del Alojamiento",-1)),s("div",null,[n[4]||(n[4]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Imagen de Portada",-1)),d(E,{type:"file-basic",modelValue:e.form.portada,"onUpdate:modelValue":n[0]||(n[0]=l=>e.form.portada=l),acceptFile:"image/*"},null,8,["modelValue"])]),e.accommodation.images&&e.accommodation.images.length>0?(v(),b("div",ka,[n[6]||(n[6]=s("h4",{class:"font-medium mb-2"},"Fotos Actuales",-1)),s("div",Sa,[(v(!0),b(G,null,Q(e.accommodation.images,l=>(v(),b("div",{key:l.id,class:"relative"},[s("img",{src:l.filepath,alt:e.accommodation.name,class:"h-28 shadow-md rounded-lg w-full object-cover"},null,8,Aa),s("button",{onClick:i=>t.$emit("removeImage",l.id),class:"absolute -top-2 -right-2 bg-red-500 hover:scale-90 rounded-full flex justify-center items-center text-white shadow-md shadow-red-400 size-6"},[...n[5]||(n[5]=[s("i",{class:"fa-solid fa-xmark text-xs"},null,-1)])],8,La)]))),128))])])):U("",!0),s("div",null,[n[9]||(n[9]=s("h4",{class:"font-medium mb-2"},"Agregar Nuevas Fotos",-1)),d(w(_e),{name:"accommodation-images",multiple:!0,accept:"image/*",maxFileSize:1e6,onSelect:n[1]||(n[1]=l=>t.$emit("accommodationImagesSelect",l)),customUpload:""},{header:R(({chooseCallback:l,clearCallback:i,files:r})=>[s("div",ja,[s("div",Va,[d(w(P),{onClick:m=>l(),icon:"pi pi-images",size:"small",severity:"primary",label:"Seleccionar"},null,8,["onClick"]),d(w(P),{label:"Limpiar",onClick:m=>i(),icon:"pi pi-times",size:"small",severity:"danger",disabled:!r||r.length===0},null,8,["onClick","disabled"])]),n[7]||(n[7]=s("span",{class:"text-lg font-bold"},"Subir Imágenes del Alojamiento",-1))])]),content:R(({files:l,removeFileCallback:i})=>[l.length>0?(v(),b("div",Ta,[(v(!0),b(G,null,Q(l,(r,m)=>(v(),b("div",{key:r.name+r.type+r.size,class:"p-4 rounded border flex flex-col items-center gap-2"},[s("img",{src:r.objectURL,alt:r.name,class:"h-24 w-24 object-cover rounded"},null,8,Oa),s("span",Ra,L(r.name),1),s("div",Ua,L(o(r.size)),1),d(w(P),{icon:"pi pi-times",onClick:y=>i(m),outlined:"",rounded:"",severity:"danger",size:"small"},null,8,["onClick"])]))),128))])):U("",!0)]),empty:R(()=>[...n[8]||(n[8]=[s("div",{class:"flex items-center justify-center flex-col"},[s("i",{class:"pi pi-cloud-upload border-2 rounded-full p-8 text-4xl text-gray-400"}),s("p",{class:"mt-6 mb-0"},"Arrastra y suelta imágenes aquí.")],-1)])]),_:1})]),s("div",Pa,[d(w(P),{onClick:n[2]||(n[2]=l=>t.$emit("cancel")),title:"Cancelar",severity:"danger",label:"Cancelar",icon:"fa-solid fa-times",class:"!h-9 w-full"}),d(w(P),{onClick:n[3]||(n[3]=l=>t.$emit("submit")),title:"Guardar",severity:"success",loading:e.form.processing,label:"Guardar",icon:"fa-solid fa-save",class:"!h-9 w-full"},null,8,["loading"])])]))}},Ea={class:"p-4 space-y-4 h-full overflow-y-auto"},za={class:"text-xl font-extrabold"},gl={__name:"Form",props:{accommodation:{type:Object,default:null},amenities:{type:Array,default:()=>[]}},setup(e){const a=e,o=ft({name:a.accommodation?.name||"",description:a.accommodation?.description||"",type:a.accommodation?.type||"",star_rating:a.accommodation?.star_rating||0,status:a.accommodation?.status||"draft",address_line_1:a.accommodation?.address_line_1||"",city:a.accommodation?.city||"",state:a.accommodation?.state||"",country:a.accommodation?.country||"",postal_code:a.accommodation?.postal_code||"",latitude:a.accommodation?.latitude||"",longitude:a.accommodation?.longitude||"",contact_email:a.accommodation?.contact_email||"",contact_phone:a.accommodation?.contact_phone||"",amenities:a.accommodation?.amenities?.map(f=>f.id)||[],portada:null,rooms:a.accommodation?.rooms||[],accommodation_images:[]}),t=()=>{a.accommodation?o.post(route("accommodations.update",a.accommodation.id),{forceFormData:!0,_method:"PUT"}):o.post(route("accommodations.store"),{forceFormData:!0})},n=()=>{Se.visit(route("accommodations.index"))},l=()=>{o.rooms.push({name:"",description:"",price_per_night:0,capacity_adults:1,capacity_children:0,room_images:[]})},i=f=>{o.rooms.splice(f,1)},r=(f,p=!1,C=null)=>{if(p&&C!==null){const x=o.rooms[C];x.images&&(x.images=x.images.filter(j=>j.id!==f))}else a.accommodation&&a.accommodation.images&&(a.accommodation.images=a.accommodation.images.filter(x=>x.id!==f));Se.delete(route("accommodations.images.destroy",f),{preserveState:!0,preserveScroll:!0})},m=(f,p)=>{o.rooms[p].room_images||(o.rooms[p].room_images=[]),o.rooms[p].room_images=f.files},y=f=>{o.accommodation_images=f.files};return(f,p)=>{const C=nt,x=st,j=rt,I=it,S=lt;return v(),ve(pt,{title:e.accommodation?"Editar Alojamiento":"Crear Alojamiento"},{default:R(()=>[s("div",Ea,[s("h1",za,L(e.accommodation?`Editar Alojamiento ${e.accommodation.name}`:"Crear nuevo alojamiento"),1),d(S,{value:"0"},{default:R(()=>[d(x,null,{default:R(()=>[d(C,{value:"0"},{default:R(()=>[...p[0]||(p[0]=[F("Información Básica",-1)])]),_:1}),d(C,{value:"1"},{default:R(()=>[...p[1]||(p[1]=[F("Ubicación",-1)])]),_:1}),d(C,{value:"2"},{default:R(()=>[...p[2]||(p[2]=[F("Contacto y Amenidades",-1)])]),_:1}),d(C,{value:"3"},{default:R(()=>[...p[3]||(p[3]=[F("Habitaciones",-1)])]),_:1}),e.accommodation?(v(),ve(C,{key:0,value:"4"},{default:R(()=>[...p[4]||(p[4]=[F("Fotos del Alojamiento",-1)])]),_:1})):U("",!0)]),_:1}),d(I,null,{default:R(()=>[d(j,{value:"0"},{default:R(()=>[d(jt,{form:w(o),onSubmit:t,onCancel:n},null,8,["form"])]),_:1}),d(j,{value:"1"},{default:R(()=>[d(Eo,{form:w(o),onSubmit:t,onCancel:n},null,8,["form"])]),_:1}),d(j,{value:"2"},{default:R(()=>[d(Xo,{form:w(o),amenities:e.amenities,onSubmit:t,onCancel:n},null,8,["form","amenities"])]),_:1}),d(j,{value:"3"},{default:R(()=>[d($a,{form:w(o),accommodation:e.accommodation,onSubmit:t,onCancel:n,onAddRoom:l,onRemoveRoom:i,onRemoveImage:r,onRoomImagesSelect:m},null,8,["form","accommodation"])]),_:1}),e.accommodation?(v(),ve(j,{key:0,value:"4"},{default:R(()=>[d(Ia,{form:w(o),accommodation:e.accommodation,onSubmit:t,onCancel:n,onRemoveImage:r,onAccommodationImagesSelect:y},null,8,["form","accommodation"])]),_:1})):U("",!0)]),_:1})]),_:1})])]),_:1},8,["title"])}}};export{gl as default};

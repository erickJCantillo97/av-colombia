import{s as qi}from"./index-CvEgGASB.js";import{a1 as Yi,o as lt,f as ct,J as ut,r as zi,h as Xi,t as ji,g as nn,bm as pe,bn as Qi}from"./app-BjQxgt76.js";var Ki=function(t){var r=t.dt;return`
.p-progressbar {
    position: relative;
    overflow: hidden;
    height: `.concat(r("progressbar.height"),`;
    background: `).concat(r("progressbar.background"),`;
    border-radius: `).concat(r("progressbar.border.radius"),`;
}

.p-progressbar-value {
    margin: 0;
    background: `).concat(r("progressbar.value.background"),`;
}

.p-progressbar-label {
    color: `).concat(r("progressbar.label.color"),`;
    font-size: `).concat(r("progressbar.label.font.size"),`;
    font-weight: `).concat(r("progressbar.label.font.weight"),`;
}

.p-progressbar-determinate .p-progressbar-value {
    height: 100%;
    width: 0%;
    position: absolute;
    display: none;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    transition: width 1s ease-in-out;
}

.p-progressbar-determinate .p-progressbar-label {
    display: inline-flex;
}

.p-progressbar-indeterminate .p-progressbar-value::before {
    content: "";
    position: absolute;
    background: inherit;
    top: 0;
    left: 0;
    bottom: 0;
    will-change: left, right;
    animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
}

.p-progressbar-indeterminate .p-progressbar-value::after {
    content: "";
    position: absolute;
    background: inherit;
    top: 0;
    left: 0;
    bottom: 0;
    will-change: left, right;
    animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
    animation-delay: 1.15s;
}

@-webkit-keyframes p-progressbar-indeterminate-anim {
    0% {
        left: -35%;
        right: 100%;
    }
    60% {
        left: 100%;
        right: -90%;
    }
    100% {
        left: 100%;
        right: -90%;
    }
}
@keyframes p-progressbar-indeterminate-anim {
    0% {
        left: -35%;
        right: 100%;
    }
    60% {
        left: 100%;
        right: -90%;
    }
    100% {
        left: 100%;
        right: -90%;
    }
}
@-webkit-keyframes p-progressbar-indeterminate-anim-short {
    0% {
        left: -200%;
        right: 100%;
    }
    60% {
        left: 107%;
        right: -8%;
    }
    100% {
        left: 107%;
        right: -8%;
    }
}
@keyframes p-progressbar-indeterminate-anim-short {
    0% {
        left: -200%;
        right: 100%;
    }
    60% {
        left: 107%;
        right: -8%;
    }
    100% {
        left: 107%;
        right: -8%;
    }
}
`)},Zi={root:function(t){var r=t.instance;return["p-progressbar p-component",{"p-progressbar-determinate":r.determinate,"p-progressbar-indeterminate":r.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},Ji=Yi.extend({name:"progressbar",theme:Ki,classes:Zi}),eo={name:"BaseProgressBar",extends:qi,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:Ji,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},to={name:"ProgressBar",extends:eo,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"}}},ro=["aria-valuenow"];function no(e,t,r,n,s,o){return lt(),ct("div",ut({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100"},e.ptmi("root")),[o.determinate?(lt(),ct("div",ut({key:0,class:e.cx("value"),style:o.progressStyle},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(lt(),ct("div",ut({key:0,class:e.cx("label")},e.ptm("label")),[zi(e.$slots,"default",{},function(){return[Xi(ji(e.value+"%"),1)]})],16)):nn("",!0)],16)):o.indeterminate?(lt(),ct("div",ut({key:1,class:e.cx("value")},e.ptm("value")),null,16)):nn("",!0)],16,ro)}to.render=no;/*!
 * FilePond 4.31.1
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const so=e=>e instanceof HTMLElement,io=(e,t=[],r=[])=>{const n={...e},s=[],o=[],i=()=>({...n}),l=()=>{const d=[...s];return s.length=0,d},a=()=>{const d=[...o];o.length=0,d.forEach(({type:I,data:E})=>{c(I,E)})},c=(d,I,E)=>{if(E&&!document.hidden){o.push({type:d,data:I});return}h[d]&&h[d](I),s.push({type:d,data:I})},u=(d,...I)=>m[d]?m[d](...I):null,f={getState:i,processActionQueue:l,processDispatchQueue:a,dispatch:c,query:u};let m={};t.forEach(d=>{m={...d(n),...m}});let h={};return r.forEach(d=>{h={...d(c,u,n),...h}}),f},oo=(e,t,r)=>{if(typeof r=="function"){e[t]=r;return}Object.defineProperty(e,t,{...r})},W=(e,t)=>{for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])},ye=e=>{const t={};return W(e,r=>{oo(t,r,e[r])}),t},z=(e,t,r=null)=>{if(r===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},ao="http://www.w3.org/2000/svg",lo=["svg","path"],sn=e=>lo.includes(e),Mt=(e,t,r={})=>{typeof t=="object"&&(r=t,t=null);const n=sn(e)?document.createElementNS(ao,e):document.createElement(e);return t&&(sn(e)?z(n,"class",t):n.className=t),W(r,(s,o)=>{z(n,s,o)}),n},co=e=>(t,r)=>{typeof r<"u"&&e.children[r]?e.insertBefore(t,e.children[r]):e.appendChild(t)},uo=(e,t)=>(r,n)=>(typeof n<"u"?t.splice(n,0,r):t.push(r),r),fo=(e,t)=>r=>(t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r),po=typeof window<"u"&&typeof window.document<"u",Ts=()=>po,ho=Ts()?Mt("svg"):{},mo="children"in ho?e=>e.children.length:e=>e.childNodes.length,Rs=(e,t,r,n)=>{const s=r[0]||e.left,o=r[1]||e.top,i=s+e.width,l=o+e.height*(n[1]||1),a={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:s,top:o,right:i,bottom:l}};return t.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{on(a.inner,{...c.inner}),on(a.outer,{...c.outer})}),an(a.inner),a.outer.bottom+=a.element.marginBottom,a.outer.right+=a.element.marginRight,an(a.outer),a},on=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},an=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},we=e=>typeof e=="number",Eo=(e,t,r,n=.001)=>Math.abs(e-t)<n&&Math.abs(r)<n,go=({stiffness:e=.5,damping:t=.75,mass:r=10}={})=>{let n=null,s=null,o=0,i=!1;const c=ye({interpolate:(u,f)=>{if(i)return;if(!(we(n)&&we(s))){i=!0,o=0;return}const m=-(s-n)*e;o+=m/r,s+=o,o*=t,Eo(s,n,o)||f?(s=n,o=0,i=!0,c.onupdate(s),c.oncomplete(s)):c.onupdate(s)},target:{set:u=>{if(we(u)&&!we(s)&&(s=u),n===null&&(n=u,s=u),n=u,s===n||typeof n>"u"){i=!0,o=0,c.onupdate(s),c.oncomplete(s);return}i=!1},get:()=>n},resting:{get:()=>i},onupdate:u=>{},oncomplete:u=>{}});return c},Io=e=>e<.5?2*e*e:-1+(4-2*e)*e,_o=({duration:e=500,easing:t=Io,delay:r=0}={})=>{let n=null,s,o,i=!0,l=!1,a=null;const u=ye({interpolate:(f,m)=>{i||a===null||(n===null&&(n=f),!(f-n<r)&&(s=f-n-r,s>=e||m?(s=1,o=l?0:1,u.onupdate(o*a),u.oncomplete(o*a),i=!0):(o=s/e,u.onupdate((s>=0?t(l?1-o:o):0)*a))))},target:{get:()=>l?0:a,set:f=>{if(a===null){a=f,u.onupdate(f),u.oncomplete(f);return}f<a?(a=1,l=!0):(l=!1,a=f),i=!1,n=null}},resting:{get:()=>i},onupdate:f=>{},oncomplete:f=>{}});return u},ln={spring:go,tween:_o},To=(e,t,r)=>{const n=e[t]&&typeof e[t][r]=="object"?e[t][r]:e[t]||e,s=typeof n=="string"?n:n.type,o=typeof n=="object"?{...n}:{};return ln[s]?ln[s](o):null},Nr=(e,t,r,n=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(s=>{e.forEach(o=>{let i=o,l=()=>r[o],a=c=>r[o]=c;typeof o=="object"&&(i=o.key,l=o.getter||l,a=o.setter||a),!(s[i]&&!n)&&(s[i]={get:l,set:a})})})},Ro=({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n})=>{const s={...t},o=[];return W(e,(i,l)=>{const a=To(l);if(!a)return;a.onupdate=u=>{t[i]=u},a.target=s[i],Nr([{key:i,setter:u=>{a.target!==u&&(a.target=u)},getter:()=>t[i]}],[r,n],t,!0),o.push(a)}),{write:i=>{let l=document.hidden,a=!0;return o.forEach(c=>{c.resting||(a=!1),c.interpolate(i,l)}),a},destroy:()=>{}}},yo=e=>(t,r)=>{e.addEventListener(t,r)},wo=e=>(t,r)=>{e.removeEventListener(t,r)},Oo=({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n,viewState:s,view:o})=>{const i=[],l=yo(o.element),a=wo(o.element);return n.on=(c,u)=>{i.push({type:c,fn:u}),l(c,u)},n.off=(c,u)=>{i.splice(i.findIndex(f=>f.type===c&&f.fn===u),1),a(c,u)},{write:()=>!0,destroy:()=>{i.forEach(c=>{a(c.type,c.fn)})}}},So=({mixinConfig:e,viewProps:t,viewExternalAPI:r})=>{Nr(e,r,t)},Z=e=>e!=null,Do={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Ao=({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n,view:s})=>{const o={...t},i={};Nr(e,[r,n],t);const l=()=>[t.translateX||0,t.translateY||0],a=()=>[t.scaleX||0,t.scaleY||0],c=()=>s.rect?Rs(s.rect,s.childViews,l(),a()):null;return r.rect={get:c},n.rect={get:c},e.forEach(u=>{t[u]=typeof o[u]>"u"?Do[u]:o[u]}),{write:()=>{if(Po(i,t))return bo(s.element,t),Object.assign(i,{...t}),!0},destroy:()=>{}}},Po=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in t)if(t[r]!==e[r])return!0;return!1},bo=(e,{opacity:t,perspective:r,translateX:n,translateY:s,scaleX:o,scaleY:i,rotateX:l,rotateY:a,rotateZ:c,originX:u,originY:f,width:m,height:h})=>{let d="",I="";(Z(u)||Z(f))&&(I+=`transform-origin: ${u||0}px ${f||0}px;`),Z(r)&&(d+=`perspective(${r}px) `),(Z(n)||Z(s))&&(d+=`translate3d(${n||0}px, ${s||0}px, 0) `),(Z(o)||Z(i))&&(d+=`scale3d(${Z(o)?o:1}, ${Z(i)?i:1}, 1) `),Z(c)&&(d+=`rotateZ(${c}rad) `),Z(l)&&(d+=`rotateX(${l}rad) `),Z(a)&&(d+=`rotateY(${a}rad) `),d.length&&(I+=`transform:${d};`),Z(t)&&(I+=`opacity:${t};`,t===0&&(I+="visibility:hidden;"),t<1&&(I+="pointer-events:none;")),Z(h)&&(I+=`height:${h}px;`),Z(m)&&(I+=`width:${m}px;`);const E=e.elementCurrentStyle||"";(I.length!==E.length||I!==E)&&(e.style.cssText=I,e.elementCurrentStyle=I)},Co={styles:Ao,listeners:Oo,animations:Ro,apis:So},cn=(e={},t={},r={})=>(t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),X=({tag:e="div",name:t=null,attributes:r={},read:n=()=>{},write:s=()=>{},create:o=()=>{},destroy:i=()=>{},filterFrameActionsForChild:l=(h,d)=>d,didCreateView:a=()=>{},didWriteView:c=()=>{},ignoreRect:u=!1,ignoreRectUpdate:f=!1,mixins:m=[]}={})=>(h,d={})=>{const I=Mt(e,`filepond--${t}`,r),E=window.getComputedStyle(I,null),_=cn();let p=null,g=!1;const R=[],w=[],A={},M={},O=[s],P=[n],N=[i],b=()=>I,C=()=>R.concat(),B=()=>A,D=U=>(K,ge)=>K(U,ge),G=()=>p||(p=Rs(_,R,[0,0],[1,1]),p),y=()=>E,S=()=>{p=null,R.forEach(ge=>ge._read()),!(f&&_.width&&_.height)&&cn(_,I,E);const K={root:ce,props:d,rect:_};P.forEach(ge=>ge(K))},v=(U,K,ge)=>{let Ne=K.length===0;return O.forEach(te=>{te({props:d,root:ce,actions:K,timestamp:U,shouldOptimize:ge})===!1&&(Ne=!1)}),w.forEach(te=>{te.write(U)===!1&&(Ne=!1)}),R.filter(te=>!!te.element.parentNode).forEach(te=>{te._write(U,l(te,K),ge)||(Ne=!1)}),R.forEach((te,at)=>{te.element.parentNode||(ce.appendChild(te.element,at),te._read(),te._write(U,l(te,K),ge),Ne=!1)}),g=Ne,c({props:d,root:ce,actions:K,timestamp:U}),Ne},L=()=>{w.forEach(U=>U.destroy()),N.forEach(U=>{U({root:ce,props:d})}),R.forEach(U=>U._destroy())},F={element:{get:b},style:{get:y},childViews:{get:C}},$={...F,rect:{get:G},ref:{get:B},is:U=>t===U,appendChild:co(I),createChildView:D(h),linkView:U=>(R.push(U),U),unlinkView:U=>{R.splice(R.indexOf(U),1)},appendChildView:uo(I,R),removeChildView:fo(I,R),registerWriter:U=>O.push(U),registerReader:U=>P.push(U),registerDestroyer:U=>N.push(U),invalidateLayout:()=>I.layoutCalculated=!1,dispatch:h.dispatch,query:h.query},Le={element:{get:b},childViews:{get:C},rect:{get:G},resting:{get:()=>g},isRectIgnored:()=>u,_read:S,_write:v,_destroy:L},ot={...F,rect:{get:()=>_}};Object.keys(m).sort((U,K)=>U==="styles"?1:K==="styles"?-1:0).forEach(U=>{const K=Co[U]({mixinConfig:m[U],viewProps:d,viewState:M,viewInternalAPI:$,viewExternalAPI:Le,view:ye(ot)});K&&w.push(K)});const ce=ye($);o({root:ce,props:d});const Kt=mo(I);return R.forEach((U,K)=>{ce.appendChild(U.element,Kt+K)}),a(ce),ye(Le)},Mo=(e,t,r=60)=>{const n="__framePainter";if(window[n]){window[n].readers.push(e),window[n].writers.push(t);return}window[n]={readers:[e],writers:[t]};const s=window[n],o=1e3/r;let i=null,l=null,a=null,c=null;const u=()=>{document.hidden?(a=()=>window.setTimeout(()=>f(performance.now()),o),c=()=>window.clearTimeout(l)):(a=()=>window.requestAnimationFrame(f),c=()=>window.cancelAnimationFrame(l))};document.addEventListener("visibilitychange",()=>{c&&c(),u(),f(performance.now())});const f=m=>{l=a(f),i||(i=m);const h=m-i;h<=o||(i=m-h%o,s.readers.forEach(d=>d()),s.writers.forEach(d=>d(m)))};return u(),f(performance.now()),{pause:()=>{c(l)}}},ee=(e,t)=>({root:r,props:n,actions:s=[],timestamp:o,shouldOptimize:i})=>{s.filter(l=>e[l.type]).forEach(l=>e[l.type]({root:r,props:n,action:l.data,timestamp:o,shouldOptimize:i})),t&&t({root:r,props:n,actions:s,timestamp:o,shouldOptimize:i})},un=(e,t)=>t.parentNode.insertBefore(e,t),fn=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Bt=e=>Array.isArray(e),Ie=e=>e==null,vo=e=>e.trim(),Vt=e=>""+e,Lo=(e,t=",")=>Ie(e)?[]:Bt(e)?e:Vt(e).split(t).map(vo).filter(r=>r.length),ys=e=>typeof e=="boolean",ws=e=>ys(e)?e:e==="true",J=e=>typeof e=="string",Os=e=>we(e)?e:J(e)?Vt(e).replace(/[a-z]+/gi,""):0,Pt=e=>parseInt(Os(e),10),dn=e=>parseFloat(Os(e)),He=e=>we(e)&&isFinite(e)&&Math.floor(e)===e,pn=(e,t=1e3)=>{if(He(e))return e;let r=Vt(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),Pt(r)*t*t):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),Pt(r)*t):Pt(r)},Oe=e=>typeof e=="function",No=e=>{let t=self,r=e.split("."),n=null;for(;n=r.shift();)if(t=t[n],!t)return null;return t},hn={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},xo=e=>{const t={};return t.url=J(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},W(hn,r=>{t[r]=Go(r,e[r],hn[r],t.timeout,t.headers)}),t.process=e.process||J(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Go=(e,t,r,n,s)=>{if(t===null)return null;if(typeof t=="function")return t;const o={url:r==="GET"||r==="PATCH"?`?${e}=`:"",method:r,headers:s,withCredentials:!1,timeout:n,onload:null,ondata:null,onerror:null};if(J(t))return o.url=t,o;if(Object.assign(o,t),J(o.headers)){const i=o.headers.split(/:(.+)/);o.headers={header:i[0],value:i[1]}}return o.withCredentials=ws(o.withCredentials),o},Fo=e=>xo(e),Uo=e=>e===null,Q=e=>typeof e=="object"&&e!==null,Bo=e=>Q(e)&&J(e.url)&&Q(e.process)&&Q(e.revert)&&Q(e.restore)&&Q(e.fetch),fr=e=>Bt(e)?"array":Uo(e)?"null":He(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Bo(e)?"api":typeof e,Vo=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),$o={array:Lo,boolean:ws,int:e=>fr(e)==="bytes"?pn(e):Pt(e),number:dn,float:dn,bytes:pn,string:e=>Oe(e)?e:Vt(e),function:e=>No(e),serverapi:Fo,object:e=>{try{return JSON.parse(Vo(e))}catch{return null}}},ko=(e,t)=>$o[t](e),Ss=(e,t,r)=>{if(e===t)return e;let n=fr(e);if(n!==r){const s=ko(e,r);if(n=fr(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${r}"`;e=s}return e},Ho=(e,t)=>{let r=e;return{enumerable:!0,get:()=>r,set:n=>{r=Ss(n,e,t)}}},Wo=e=>{const t={};return W(e,r=>{const n=e[r];t[r]=Ho(n[0],n[1])}),ye(t)},qo=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Wo(e)}),$t=(e,t="-")=>e.split(/(?=[A-Z])/).map(r=>r.toLowerCase()).join(t),Yo=(e,t)=>{const r={};return W(t,n=>{r[n]={get:()=>e.getState().options[n],set:s=>{e.dispatch(`SET_${$t(n,"_").toUpperCase()}`,{value:s})}}}),r},zo=e=>(t,r,n)=>{const s={};return W(e,o=>{const i=$t(o,"_").toUpperCase();s[`SET_${i}`]=l=>{try{n.options[o]=l.value}catch{}t(`DID_SET_${i}`,{value:n.options[o]})}}),s},Xo=e=>t=>{const r={};return W(e,n=>{r[`GET_${$t(n,"_").toUpperCase()}`]=s=>t.options[n]}),r},le={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},xr=()=>Math.random().toString(36).substring(2,11),Gr=(e,t)=>e.splice(t,1),jo=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},kt=()=>{const e=[],t=(n,s)=>{Gr(e,e.findIndex(o=>o.event===n&&(o.cb===s||!s)))},r=(n,s,o)=>{e.filter(i=>i.event===n).map(i=>i.cb).forEach(i=>jo(()=>i(...s),o))};return{fireSync:(n,...s)=>{r(n,s,!0)},fire:(n,...s)=>{r(n,s,!1)},on:(n,s)=>{e.push({event:n,cb:s})},onOnce:(n,s)=>{e.push({event:n,cb:(...o)=>{t(n,s),s(...o)}})},off:t}},Ds=(e,t,r)=>{Object.getOwnPropertyNames(e).filter(n=>!r.includes(n)).forEach(n=>Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n)))},Qo=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],re=e=>{const t={};return Ds(e,t,Qo),t},Ko=e=>{e.forEach((t,r)=>{t.released&&Gr(e,r)})},x={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},j={INPUT:1,LIMBO:2,LOCAL:3},As=e=>/[^0-9]+/.exec(e),Ps=()=>As(1.1.toLocaleString())[0],Zo=()=>{const e=Ps(),t=1e3.toLocaleString();return t!=="1000"?As(t)[0]:e==="."?",":"."},T={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Fr=[],ue=(e,t,r)=>new Promise((n,s)=>{const o=Fr.filter(l=>l.key===e).map(l=>l.cb);if(o.length===0){n(t);return}const i=o.shift();o.reduce((l,a)=>l.then(c=>a(c,r)),i(t,r)).then(l=>n(l)).catch(l=>s(l))}),Ce=(e,t,r)=>Fr.filter(n=>n.key===e).map(n=>n.cb(t,r)),Jo=(e,t)=>Fr.push({key:e,cb:t}),ea=e=>Object.assign(xe,e),vt=()=>({...xe}),ta=e=>{W(e,(t,r)=>{xe[t]&&(xe[t][0]=Ss(r,xe[t][0],xe[t][1]))})},xe={id:[null,T.STRING],name:["filepond",T.STRING],disabled:[!1,T.BOOLEAN],className:[null,T.STRING],required:[!1,T.BOOLEAN],captureMethod:[null,T.STRING],allowSyncAcceptAttribute:[!0,T.BOOLEAN],allowDrop:[!0,T.BOOLEAN],allowBrowse:[!0,T.BOOLEAN],allowPaste:[!0,T.BOOLEAN],allowMultiple:[!1,T.BOOLEAN],allowReplace:[!0,T.BOOLEAN],allowRevert:[!0,T.BOOLEAN],allowRemove:[!0,T.BOOLEAN],allowProcess:[!0,T.BOOLEAN],allowReorder:[!1,T.BOOLEAN],allowDirectoriesOnly:[!1,T.BOOLEAN],storeAsFile:[!1,T.BOOLEAN],forceRevert:[!1,T.BOOLEAN],maxFiles:[null,T.INT],checkValidity:[!1,T.BOOLEAN],itemInsertLocationFreedom:[!0,T.BOOLEAN],itemInsertLocation:["before",T.STRING],itemInsertInterval:[75,T.INT],dropOnPage:[!1,T.BOOLEAN],dropOnElement:[!0,T.BOOLEAN],dropValidation:[!1,T.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],T.ARRAY],instantUpload:[!0,T.BOOLEAN],maxParallelUploads:[2,T.INT],allowMinimumUploadDuration:[!0,T.BOOLEAN],chunkUploads:[!1,T.BOOLEAN],chunkForce:[!1,T.BOOLEAN],chunkSize:[5e6,T.INT],chunkRetryDelays:[[500,1e3,3e3],T.ARRAY],server:[null,T.SERVER_API],fileSizeBase:[1e3,T.INT],labelFileSizeBytes:["bytes",T.STRING],labelFileSizeKilobytes:["KB",T.STRING],labelFileSizeMegabytes:["MB",T.STRING],labelFileSizeGigabytes:["GB",T.STRING],labelDecimalSeparator:[Ps(),T.STRING],labelThousandsSeparator:[Zo(),T.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',T.STRING],labelInvalidField:["Field contains invalid files",T.STRING],labelFileWaitingForSize:["Waiting for size",T.STRING],labelFileSizeNotAvailable:["Size not available",T.STRING],labelFileCountSingular:["file in list",T.STRING],labelFileCountPlural:["files in list",T.STRING],labelFileLoading:["Loading",T.STRING],labelFileAdded:["Added",T.STRING],labelFileLoadError:["Error during load",T.STRING],labelFileRemoved:["Removed",T.STRING],labelFileRemoveError:["Error during remove",T.STRING],labelFileProcessing:["Uploading",T.STRING],labelFileProcessingComplete:["Upload complete",T.STRING],labelFileProcessingAborted:["Upload cancelled",T.STRING],labelFileProcessingError:["Error during upload",T.STRING],labelFileProcessingRevertError:["Error during revert",T.STRING],labelTapToCancel:["tap to cancel",T.STRING],labelTapToRetry:["tap to retry",T.STRING],labelTapToUndo:["tap to undo",T.STRING],labelButtonRemoveItem:["Remove",T.STRING],labelButtonAbortItemLoad:["Abort",T.STRING],labelButtonRetryItemLoad:["Retry",T.STRING],labelButtonAbortItemProcessing:["Cancel",T.STRING],labelButtonUndoItemProcessing:["Undo",T.STRING],labelButtonRetryItemProcessing:["Retry",T.STRING],labelButtonProcessItem:["Upload",T.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',T.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],oninit:[null,T.FUNCTION],onwarning:[null,T.FUNCTION],onerror:[null,T.FUNCTION],onactivatefile:[null,T.FUNCTION],oninitfile:[null,T.FUNCTION],onaddfilestart:[null,T.FUNCTION],onaddfileprogress:[null,T.FUNCTION],onaddfile:[null,T.FUNCTION],onprocessfilestart:[null,T.FUNCTION],onprocessfileprogress:[null,T.FUNCTION],onprocessfileabort:[null,T.FUNCTION],onprocessfilerevert:[null,T.FUNCTION],onprocessfile:[null,T.FUNCTION],onprocessfiles:[null,T.FUNCTION],onremovefile:[null,T.FUNCTION],onpreparefile:[null,T.FUNCTION],onupdatefiles:[null,T.FUNCTION],onreorderfiles:[null,T.FUNCTION],beforeDropFile:[null,T.FUNCTION],beforeAddFile:[null,T.FUNCTION],beforeRemoveFile:[null,T.FUNCTION],beforePrepareFile:[null,T.FUNCTION],stylePanelLayout:[null,T.STRING],stylePanelAspectRatio:[null,T.STRING],styleItemPanelAspectRatio:[null,T.STRING],styleButtonRemoveItemPosition:["left",T.STRING],styleButtonProcessItemPosition:["right",T.STRING],styleLoadIndicatorPosition:["right",T.STRING],styleProgressIndicatorPosition:["right",T.STRING],styleButtonRemoveItemAlign:[!1,T.BOOLEAN],files:[[],T.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],T.ARRAY]},Se=(e,t)=>Ie(t)?e[0]||null:He(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(r=>r.id===t)||null),bs=e=>{if(Ie(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},fe=e=>e.filter(t=>!t.archived),ra={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let ft=null;const na=()=>{if(ft===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,ft=t.files.length===1}catch{ft=!1}return ft},sa=[x.LOAD_ERROR,x.PROCESSING_ERROR,x.PROCESSING_REVERT_ERROR],ia=[x.LOADING,x.PROCESSING,x.PROCESSING_QUEUED,x.INIT],oa=[x.PROCESSING_COMPLETE],aa=e=>sa.includes(e.status),la=e=>ia.includes(e.status),ca=e=>oa.includes(e.status),mn=e=>Q(e.options.server)&&(Q(e.options.server.process)||Oe(e.options.server.process)),ua=e=>({GET_STATUS:()=>{const t=fe(e.items),{EMPTY:r,ERROR:n,BUSY:s,IDLE:o,READY:i}=ra;return t.length===0?r:t.some(aa)?n:t.some(la)?s:t.some(ca)?i:o},GET_ITEM:t=>Se(e.items,t),GET_ACTIVE_ITEM:t=>Se(fe(e.items),t),GET_ACTIVE_ITEMS:()=>fe(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const r=Se(e.items,t);return r?r.filename:null},GET_ITEM_SIZE:t=>{const r=Se(e.items,t);return r?r.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:bs(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>fe(e.items).filter(r=>r.status===t),GET_TOTAL_ITEMS:()=>fe(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&na()&&!mn(e),IS_ASYNC:()=>mn(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),fa=e=>{const t=fe(e.items).length;if(!e.options.allowMultiple)return t===0;const r=e.options.maxFiles;return r===null||t<r},Cs=(e,t,r)=>Math.max(Math.min(r,e),t),da=(e,t,r)=>e.splice(t,0,r),pa=(e,t,r)=>Ie(t)?null:typeof r>"u"?(e.push(t),t):(r=Cs(r,0,e.length),da(e,r,t),t),dr=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),nt=e=>`${e}`.split("/").pop().split("?").shift(),Ht=e=>e.split(".").pop(),ha=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},We=(e,t="")=>(t+e).slice(-t.length),Ms=(e=new Date)=>`${e.getFullYear()}-${We(e.getMonth()+1,"00")}-${We(e.getDate(),"00")}_${We(e.getHours(),"00")}-${We(e.getMinutes(),"00")}-${We(e.getSeconds(),"00")}`,Be=(e,t,r=null,n=null)=>{const s=typeof r=="string"?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return s.lastModifiedDate=new Date,e._relativePath&&(s._relativePath=e._relativePath),J(t)||(t=Ms()),t&&n===null&&Ht(t)?s.name=t:(n=n||ha(s.type),s.name=t+(n?"."+n:"")),s},ma=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,vs=(e,t)=>{const r=ma();if(r){const n=new r;return n.append(e),n.getBlob(t)}return new Blob([e],{type:t})},Ea=(e,t)=>{const r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return vs(r,t)},Ls=e=>(/^data:(.+);/.exec(e)||[])[1]||null,ga=e=>e.split(",")[1].replace(/\s/g,""),Ia=e=>atob(ga(e)),_a=e=>{const t=Ls(e),r=Ia(e);return Ea(r,t)},Ta=(e,t,r)=>Be(_a(e),t,null,r),Ra=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(r=>r.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(r=>r.length);return t.length?decodeURI(t[t.length-1]):null},ya=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},wa=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,Ur=e=>{const t={source:null,name:null,size:null},r=e.split(`
`);for(let n of r){const s=Ra(n);if(s){t.name=s;continue}const o=ya(n);if(o){t.size=o;continue}const i=wa(n);if(i){t.source=i;continue}}return t},Oa=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=()=>t.progress,n=()=>{t.request&&t.request.abort&&t.request.abort()},s=()=>{const l=t.source;i.fire("init",l),l instanceof File?i.fire("load",l):l instanceof Blob?i.fire("load",Be(l,l.name)):dr(l)?i.fire("load",Ta(l)):o(l)},o=l=>{if(!e){i.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,a=>{t.duration=Date.now()-t.timestamp,t.complete=!0,a instanceof Blob&&(a=Be(a,a.name||nt(l))),i.fire("load",a instanceof Blob?a:a?a.body:null)},a=>{i.fire("error",typeof a=="string"?{type:"error",code:0,body:a}:a)},(a,c,u)=>{if(u&&(t.size=u),t.duration=Date.now()-t.timestamp,!a){t.progress=null;return}t.progress=c/u,i.fire("progress",t.progress)},()=>{i.fire("abort")},a=>{const c=Ur(typeof a=="string"?a:a.headers);i.fire("meta",{size:t.size||c.size,filename:c.name,source:c.source})})},i={...kt(),setSource:l=>t.source=l,getProgress:r,abort:n,load:s};return i},En=e=>/GET|HEAD/.test(e),De=(e,t,r)=>{const n={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,i.abort()}};let s=!1,o=!1;r={method:"POST",headers:{},withCredentials:!1,...r},t=encodeURI(t),En(r.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const i=new XMLHttpRequest,l=En(r.method)?i:i.upload;return l.onprogress=a=>{s||n.onprogress(a.lengthComputable,a.loaded,a.total)},i.onreadystatechange=()=>{i.readyState<2||i.readyState===4&&i.status===0||o||(o=!0,n.onheaders(i))},i.onload=()=>{i.status>=200&&i.status<300?n.onload(i):n.onerror(i)},i.onerror=()=>n.onerror(i),i.onabort=()=>{s=!0,n.onabort()},i.ontimeout=()=>n.ontimeout(i),i.open(r.method,t,!0),He(r.timeout)&&(i.timeout=r.timeout),Object.keys(r.headers).forEach(a=>{const c=unescape(encodeURIComponent(r.headers[a]));i.setRequestHeader(a,c)}),r.responseType&&(i.responseType=r.responseType),r.withCredentials&&(i.withCredentials=!0),i.send(e),n},q=(e,t,r,n)=>({type:e,code:t,body:r,headers:n}),Ae=e=>t=>{e(q("error",0,"Timeout",t.getAllResponseHeaders()))},gn=e=>/\?/.test(e),je=(...e)=>{let t="";return e.forEach(r=>{t+=gn(t)&&gn(r)?r.replace(/\?/,"&"):r}),t},Zt=(e="",t)=>{if(typeof t=="function")return t;if(!t||!J(t.url))return null;const r=t.onload||(s=>s),n=t.onerror||(s=>null);return(s,o,i,l,a,c)=>{const u=De(s,je(e,t.url),{...t,responseType:"blob"});return u.onload=f=>{const m=f.getAllResponseHeaders(),h=Ur(m).name||nt(s);o(q("load",f.status,t.method==="HEAD"?null:Be(r(f.response),h),m))},u.onerror=f=>{i(q("error",f.status,n(f.response)||f.statusText,f.getAllResponseHeaders()))},u.onheaders=f=>{c(q("headers",f.status,null,f.getAllResponseHeaders()))},u.ontimeout=Ae(i),u.onprogress=l,u.onabort=a,u}},ie={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Sa=(e,t,r,n,s,o,i,l,a,c,u)=>{const f=[],{chunkTransferId:m,chunkServer:h,chunkSize:d,chunkRetryDelays:I}=u,E={serverId:m,aborted:!1},_=t.ondata||(D=>D),p=t.onload||((D,G)=>G==="HEAD"?D.getResponseHeader("Upload-Offset"):D.response),g=t.onerror||(D=>null),R=D=>{const G=new FormData;Q(s)&&G.append(r,JSON.stringify(s));const y=typeof t.headers=="function"?t.headers(n,s):{...t.headers,"Upload-Length":n.size},S={...t,headers:y},v=De(_(G),je(e,t.url),S);v.onload=L=>D(p(L,S.method)),v.onerror=L=>i(q("error",L.status,g(L.response)||L.statusText,L.getAllResponseHeaders())),v.ontimeout=Ae(i)},w=D=>{const G=je(e,h.url,E.serverId),S={headers:typeof t.headers=="function"?t.headers(E.serverId):{...t.headers},method:"HEAD"},v=De(null,G,S);v.onload=L=>D(p(L,S.method)),v.onerror=L=>i(q("error",L.status,g(L.response)||L.statusText,L.getAllResponseHeaders())),v.ontimeout=Ae(i)},A=Math.floor(n.size/d);for(let D=0;D<=A;D++){const G=D*d,y=n.slice(G,G+d,"application/offset+octet-stream");f[D]={index:D,size:y.size,offset:G,data:y,file:n,progress:0,retries:[...I],status:ie.QUEUED,error:null,request:null,timeout:null}}const M=()=>o(E.serverId),O=D=>D.status===ie.QUEUED||D.status===ie.ERROR,P=D=>{if(E.aborted)return;if(D=D||f.find(O),!D){f.every(F=>F.status===ie.COMPLETE)&&M();return}D.status=ie.PROCESSING,D.progress=null;const G=h.ondata||(F=>F),y=h.onerror||(F=>null),S=je(e,h.url,E.serverId),v=typeof h.headers=="function"?h.headers(D):{...h.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":D.offset,"Upload-Length":n.size,"Upload-Name":n.name},L=D.request=De(G(D.data),S,{...h,headers:v});L.onload=()=>{D.status=ie.COMPLETE,D.request=null,C()},L.onprogress=(F,$,Le)=>{D.progress=F?$:null,b()},L.onerror=F=>{D.status=ie.ERROR,D.request=null,D.error=y(F.response)||F.statusText,N(D)||i(q("error",F.status,y(F.response)||F.statusText,F.getAllResponseHeaders()))},L.ontimeout=F=>{D.status=ie.ERROR,D.request=null,N(D)||Ae(i)(F)},L.onabort=()=>{D.status=ie.QUEUED,D.request=null,a()}},N=D=>D.retries.length===0?!1:(D.status=ie.WAITING,clearTimeout(D.timeout),D.timeout=setTimeout(()=>{P(D)},D.retries.shift()),!0),b=()=>{const D=f.reduce((y,S)=>y===null||S.progress===null?null:y+S.progress,0);if(D===null)return l(!1,0,0);const G=f.reduce((y,S)=>y+S.size,0);l(!0,D,G)},C=()=>{f.filter(G=>G.status===ie.PROCESSING).length>=1||P()},B=()=>{f.forEach(D=>{clearTimeout(D.timeout),D.request&&D.request.abort()})};return E.serverId?w(D=>{E.aborted||(f.filter(G=>G.offset<D).forEach(G=>{G.status=ie.COMPLETE,G.progress=G.size}),C())}):R(D=>{E.aborted||(c(D),E.serverId=D,C())}),{abort:()=>{E.aborted=!0,B()}}},Da=(e,t,r,n)=>(s,o,i,l,a,c,u)=>{if(!s)return;const f=n.chunkUploads,m=f&&s.size>n.chunkSize,h=f&&(m||n.chunkForce);if(s instanceof Blob&&h)return Sa(e,t,r,s,o,i,l,a,c,u,n);const d=t.ondata||(w=>w),I=t.onload||(w=>w),E=t.onerror||(w=>null),_=typeof t.headers=="function"?t.headers(s,o)||{}:{...t.headers},p={...t,headers:_};var g=new FormData;Q(o)&&g.append(r,JSON.stringify(o)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(w=>{g.append(r,w.file,w.name===null?w.file.name:`${w.name}${w.file.name}`)});const R=De(d(g),je(e,t.url),p);return R.onload=w=>{i(q("load",w.status,I(w.response),w.getAllResponseHeaders()))},R.onerror=w=>{l(q("error",w.status,E(w.response)||w.statusText,w.getAllResponseHeaders()))},R.ontimeout=Ae(l),R.onprogress=a,R.onabort=c,R},Aa=(e="",t,r,n)=>typeof t=="function"?(...s)=>t(r,...s,n):!t||!J(t.url)?null:Da(e,t,r,n),qe=(e="",t)=>{if(typeof t=="function")return t;if(!t||!J(t.url))return(s,o)=>o();const r=t.onload||(s=>s),n=t.onerror||(s=>null);return(s,o,i)=>{const l=De(s,e+t.url,t);return l.onload=a=>{o(q("load",a.status,r(a.response),a.getAllResponseHeaders()))},l.onerror=a=>{i(q("error",a.status,n(a.response)||a.statusText,a.getAllResponseHeaders()))},l.ontimeout=Ae(i),l}},Ns=(e=0,t=1)=>e+Math.random()*(t-e),Pa=(e,t=1e3,r=0,n=25,s=250)=>{let o=null;const i=Date.now(),l=()=>{let a=Date.now()-i,c=Ns(n,s);a+c>t&&(c=a+c-t);let u=a/t;if(u>=1||document.hidden){e(1);return}e(u),o=setTimeout(l,c)};return t>0&&l(),{clear:()=>{clearTimeout(o)}}},ba=(e,t)=>{const r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:n}=t,s=(u,f)=>{const m=()=>{r.duration===0||r.progress===null||c.fire("progress",c.getProgress())},h=()=>{r.complete=!0,c.fire("load-perceived",r.response.body)};c.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=Pa(d=>{r.perceivedProgress=d,r.perceivedDuration=Date.now()-r.timestamp,m(),r.response&&r.perceivedProgress===1&&!r.complete&&h()},n?Ns(750,1500):0),r.request=e(u,f,d=>{r.response=Q(d)?d:{type:"load",code:200,body:`${d}`,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,c.fire("load",r.response.body),(!n||n&&r.perceivedProgress===1)&&h()},d=>{r.perceivedPerformanceUpdater.clear(),c.fire("error",Q(d)?d:{type:"error",code:0,body:`${d}`})},(d,I,E)=>{r.duration=Date.now()-r.timestamp,r.progress=d?I/E:null,m()},()=>{r.perceivedPerformanceUpdater.clear(),c.fire("abort",r.response?r.response.body:null)},d=>{c.fire("transfer",d)})},o=()=>{r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},i=()=>{o(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null},l=n?()=>r.progress?Math.min(r.progress,r.perceivedProgress):null:()=>r.progress||null,a=n?()=>Math.min(r.duration,r.perceivedDuration):()=>r.duration,c={...kt(),process:s,abort:o,getProgress:l,getDuration:a,reset:i};return c},xs=e=>e.substring(0,e.lastIndexOf("."))||e,Ca=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||dr(e)?t[0]=e.name||Ms():dr(e)?(t[1]=e.length,t[2]=Ls(e)):J(e)&&(t[0]=nt(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Pe=e=>!!(e instanceof File||e instanceof Blob&&e.name),Gs=e=>{if(!Q(e))return e;const t=Bt(e)?[]:{};for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r];t[r]=n&&Q(n)?Gs(n):n}return t},Ma=(e=null,t=null,r=null)=>{const n=xr(),s={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?x.PROCESSING_COMPLETE:x.INIT,activeLoader:null,activeProcessor:null};let o=null;const i={},l=O=>s.status=O,a=(O,...P)=>{s.released||s.frozen||A.fire(O,...P)},c=()=>Ht(s.file.name),u=()=>s.file.type,f=()=>s.file.size,m=()=>s.file,h=(O,P,N)=>{if(s.source=O,A.fireSync("init"),s.file){A.fireSync("load-skip");return}s.file=Ca(O),P.on("init",()=>{a("load-init")}),P.on("meta",b=>{s.file.size=b.size,s.file.filename=b.filename,b.source&&(e=j.LIMBO,s.serverFileReference=b.source,s.status=x.PROCESSING_COMPLETE),a("load-meta")}),P.on("progress",b=>{l(x.LOADING),a("load-progress",b)}),P.on("error",b=>{l(x.LOAD_ERROR),a("load-request-error",b)}),P.on("abort",()=>{l(x.INIT),a("load-abort")}),P.on("load",b=>{s.activeLoader=null;const C=D=>{s.file=Pe(D)?D:s.file,e===j.LIMBO&&s.serverFileReference?l(x.PROCESSING_COMPLETE):l(x.IDLE),a("load")},B=D=>{s.file=b,a("load-meta"),l(x.LOAD_ERROR),a("load-file-error",D)};if(s.serverFileReference){C(b);return}N(b,C,B)}),P.setSource(O),s.activeLoader=P,P.load()},d=()=>{s.activeLoader&&s.activeLoader.load()},I=()=>{if(s.activeLoader){s.activeLoader.abort();return}l(x.INIT),a("load-abort")},E=(O,P)=>{if(s.processingAborted){s.processingAborted=!1;return}if(l(x.PROCESSING),o=null,!(s.file instanceof Blob)){A.on("load",()=>{E(O,P)});return}O.on("load",C=>{s.transferId=null,s.serverFileReference=C}),O.on("transfer",C=>{s.transferId=C}),O.on("load-perceived",C=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=C,l(x.PROCESSING_COMPLETE),a("process-complete",C)}),O.on("start",()=>{a("process-start")}),O.on("error",C=>{s.activeProcessor=null,l(x.PROCESSING_ERROR),a("process-error",C)}),O.on("abort",C=>{s.activeProcessor=null,s.serverFileReference=C,l(x.IDLE),a("process-abort"),o&&o()}),O.on("progress",C=>{a("process-progress",C)});const N=C=>{s.archived||O.process(C,{...i})},b=console.error;P(s.file,N,b),s.activeProcessor=O},_=()=>{s.processingAborted=!1,l(x.PROCESSING_QUEUED)},p=()=>new Promise(O=>{if(!s.activeProcessor){s.processingAborted=!0,l(x.IDLE),a("process-abort"),O();return}o=()=>{O()},s.activeProcessor.abort()}),g=(O,P)=>new Promise((N,b)=>{const C=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(C===null){N();return}O(C,()=>{s.serverFileReference=null,s.transferId=null,N()},B=>{if(!P){N();return}l(x.PROCESSING_REVERT_ERROR),a("process-revert-error"),b(B)}),l(x.IDLE),a("process-revert")}),R=(O,P,N)=>{const b=O.split("."),C=b[0],B=b.pop();let D=i;b.forEach(G=>D=D[G]),JSON.stringify(D[B])!==JSON.stringify(P)&&(D[B]=P,a("metadata-update",{key:C,value:i[C],silent:N}))},A={id:{get:()=>n},origin:{get:()=>e,set:O=>e=O},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>xs(s.file.name)},fileExtension:{get:c},fileType:{get:u},fileSize:{get:f},file:{get:m},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:O=>Gs(O?i[O]:i),setMetadata:(O,P,N)=>{if(Q(O)){const b=O;return Object.keys(b).forEach(C=>{R(C,b[C],P)}),O}return R(O,P,N),P},extend:(O,P)=>M[O]=P,abortLoad:I,retryLoad:d,requestProcessing:_,abortProcessing:p,load:h,process:E,revert:g,...kt(),freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived},setFile:O=>s.file=O},M=ye(A);return M},va=(e,t)=>Ie(t)?0:J(t)?e.findIndex(r=>r.id===t):-1,In=(e,t)=>{const r=va(e,t);if(!(r<0))return e[r]||null},_n=(e,t,r,n,s,o)=>{const i=De(null,e,{method:"GET",responseType:"blob"});return i.onload=l=>{const a=l.getAllResponseHeaders(),c=Ur(a).name||nt(e);t(q("load",l.status,Be(l.response,c),a))},i.onerror=l=>{r(q("error",l.status,l.statusText,l.getAllResponseHeaders()))},i.onheaders=l=>{o(q("headers",l.status,null,l.getAllResponseHeaders()))},i.ontimeout=Ae(r),i.onprogress=n,i.onabort=s,i},Tn=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),La=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Tn(location.href)!==Tn(e),dt=e=>(...t)=>Oe(e)?e(...t):e,Na=e=>!Pe(e.file),Jt=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:fe(t.items)})},0)},Rn=(e,...t)=>new Promise(r=>{if(!e)return r(!0);const n=e(...t);if(n==null)return r(!0);if(typeof n=="boolean")return r(n);typeof n.then=="function"&&n.then(r)}),er=(e,t)=>{e.items.sort((r,n)=>t(re(r),re(n)))},oe=(e,t)=>({query:r,success:n=()=>{},failure:s=()=>{},...o}={})=>{const i=Se(e.items,r);if(!i){s({error:q("error",0,"Item not found"),file:null});return}t(i,n,s,o||{})},xa=(e,t,r)=>({ABORT_ALL:()=>{fe(r.items).forEach(n=>{n.freeze(),n.abortLoad(),n.abortProcessing()})},DID_SET_FILES:({value:n=[]})=>{const s=n.map(i=>({source:i.source?i.source:i,options:i.options}));let o=fe(r.items);o.forEach(i=>{s.find(l=>l.source===i.source||l.source===i.file)||e("REMOVE_ITEM",{query:i,remove:!1})}),o=fe(r.items),s.forEach((i,l)=>{o.find(a=>a.source===i.source||a.file===i.source)||e("ADD_ITEM",{...i,interactionMethod:le.NONE,index:l})})},DID_UPDATE_ITEM_METADATA:({id:n,action:s,change:o})=>{o.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout(()=>{const i=In(r.items,n);if(!t("IS_ASYNC")){ue("SHOULD_PREPARE_OUTPUT",!1,{item:i,query:t,action:s,change:o}).then(u=>{const f=t("GET_BEFORE_PREPARE_FILE");f&&(u=f(i,u)),u&&e("REQUEST_PREPARE_OUTPUT",{query:n,item:i,success:m=>{e("DID_PREPARE_OUTPUT",{id:n,file:m})}},!0)});return}i.origin===j.LOCAL&&e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.source});const l=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:n})},32)},a=u=>{i.revert(qe(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(u?l:()=>{}).catch(()=>{})},c=u=>{i.abortProcessing().then(u?l:()=>{})};if(i.status===x.PROCESSING_COMPLETE)return a(r.options.instantUpload);if(i.status===x.PROCESSING)return c(r.options.instantUpload);r.options.instantUpload&&l()},0))},MOVE_ITEM:({query:n,index:s})=>{const o=Se(r.items,n);if(!o)return;const i=r.items.indexOf(o);s=Cs(s,0,r.items.length-1),i!==s&&r.items.splice(s,0,r.items.splice(i,1)[0])},SORT:({compare:n})=>{er(r,n),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:n,index:s,interactionMethod:o,success:i=()=>{},failure:l=()=>{}})=>{let a=s;if(s===-1||typeof s>"u"){const h=t("GET_ITEM_INSERT_LOCATION"),d=t("GET_TOTAL_ITEMS");a=h==="before"?0:d}const c=t("GET_IGNORED_FILES"),u=h=>Pe(h)?!c.includes(h.name.toLowerCase()):!Ie(h),m=n.filter(u).map(h=>new Promise((d,I)=>{e("ADD_ITEM",{interactionMethod:o,source:h.source||h,success:d,failure:I,index:a++,options:h.options||{}})}));Promise.all(m).then(i).catch(l)},ADD_ITEM:({source:n,index:s=-1,interactionMethod:o,success:i=()=>{},failure:l=()=>{},options:a={}})=>{if(Ie(n)){l({error:q("error",0,"No source"),file:null});return}if(Pe(n)&&r.options.ignoredFiles.includes(n.name.toLowerCase()))return;if(!fa(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){const p=q("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:n,error:p}),l({error:p,file:null});return}const _=fe(r.items)[0];if(_.status===x.PROCESSING_COMPLETE||_.status===x.PROCESSING_REVERT_ERROR){const p=t("GET_FORCE_REVERT");if(_.revert(qe(r.options.server.url,r.options.server.revert),p).then(()=>{p&&e("ADD_ITEM",{source:n,index:s,interactionMethod:o,success:i,failure:l,options:a})}).catch(()=>{}),p)return}e("REMOVE_ITEM",{query:_.id})}const c=a.type==="local"?j.LOCAL:a.type==="limbo"?j.LIMBO:j.INPUT,u=Ma(c,c===j.INPUT?null:n,a.file);Object.keys(a.metadata||{}).forEach(_=>{u.setMetadata(_,a.metadata[_])}),Ce("DID_CREATE_ITEM",u,{query:t,dispatch:e});const f=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(s=f==="before"?-1:r.items.length),pa(r.items,u,s),Oe(f)&&n&&er(r,f);const m=u.id;u.on("init",()=>{e("DID_INIT_ITEM",{id:m})}),u.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:m})}),u.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:m})}),u.on("load-progress",_=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:m,progress:_})}),u.on("load-request-error",_=>{const p=dt(r.options.labelFileLoadError)(_);if(_.code>=400&&_.code<500){e("DID_THROW_ITEM_INVALID",{id:m,error:_,status:{main:p,sub:`${_.code} (${_.body})`}}),l({error:_,file:re(u)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:m,error:_,status:{main:p,sub:r.options.labelTapToRetry}})}),u.on("load-file-error",_=>{e("DID_THROW_ITEM_INVALID",{id:m,error:_.status,status:_.status}),l({error:_.status,file:re(u)})}),u.on("load-abort",()=>{e("REMOVE_ITEM",{query:m})}),u.on("load-skip",()=>{u.on("metadata-update",_=>{Pe(u.file)&&e("DID_UPDATE_ITEM_METADATA",{id:m,change:_})}),e("COMPLETE_LOAD_ITEM",{query:m,item:u,data:{source:n,success:i}})}),u.on("load",()=>{const _=p=>{if(!p){e("REMOVE_ITEM",{query:m});return}u.on("metadata-update",g=>{e("DID_UPDATE_ITEM_METADATA",{id:m,change:g})}),ue("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:t}).then(g=>{const R=t("GET_BEFORE_PREPARE_FILE");R&&(g=R(u,g));const w=()=>{e("COMPLETE_LOAD_ITEM",{query:m,item:u,data:{source:n,success:i}}),Jt(e,r)};if(g){e("REQUEST_PREPARE_OUTPUT",{query:m,item:u,success:A=>{e("DID_PREPARE_OUTPUT",{id:m,file:A}),w()}},!0);return}w()})};ue("DID_LOAD_ITEM",u,{query:t,dispatch:e}).then(()=>{Rn(t("GET_BEFORE_ADD_FILE"),re(u)).then(_)}).catch(p=>{if(!p||!p.error||!p.status)return _(!1);e("DID_THROW_ITEM_INVALID",{id:m,error:p.error,status:p.status})})}),u.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:m})}),u.on("process-progress",_=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:m,progress:_})}),u.on("process-error",_=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:m,error:_,status:{main:dt(r.options.labelFileProcessingError)(_),sub:r.options.labelTapToRetry}})}),u.on("process-revert-error",_=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:m,error:_,status:{main:dt(r.options.labelFileProcessingRevertError)(_),sub:r.options.labelTapToRetry}})}),u.on("process-complete",_=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:m,error:null,serverFileReference:_}),e("DID_DEFINE_VALUE",{id:m,value:_})}),u.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:m})}),u.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:m}),e("DID_DEFINE_VALUE",{id:m,value:null})}),e("DID_ADD_ITEM",{id:m,index:s,interactionMethod:o}),Jt(e,r);const{url:h,load:d,restore:I,fetch:E}=r.options.server||{};u.load(n,Oa(c===j.INPUT?J(n)&&La(n)&&E?Zt(h,E):_n:c===j.LIMBO?Zt(h,I):Zt(h,d)),(_,p,g)=>{ue("LOAD_FILE",_,{query:t}).then(p).catch(g)})},REQUEST_PREPARE_OUTPUT:({item:n,success:s,failure:o=()=>{}})=>{const i={error:q("error",0,"Item not found"),file:null};if(n.archived)return o(i);ue("PREPARE_OUTPUT",n.file,{query:t,item:n}).then(l=>{ue("COMPLETE_PREPARE_OUTPUT",l,{query:t,item:n}).then(a=>{if(n.archived)return o(i);s(a)})})},COMPLETE_LOAD_ITEM:({item:n,data:s})=>{const{success:o,source:i}=s,l=t("GET_ITEM_INSERT_LOCATION");if(Oe(l)&&i&&er(r,l),e("DID_LOAD_ITEM",{id:n.id,error:null,serverFileReference:n.origin===j.INPUT?null:i}),o(re(n)),n.origin===j.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:n.id});return}if(n.origin===j.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:n.id,error:null,serverFileReference:i}),e("DID_DEFINE_VALUE",{id:n.id,value:n.serverId||i});return}t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:n.id})},RETRY_ITEM_LOAD:oe(r,n=>{n.retryLoad()}),REQUEST_ITEM_PREPARE:oe(r,(n,s,o)=>{e("REQUEST_PREPARE_OUTPUT",{query:n.id,item:n,success:i=>{e("DID_PREPARE_OUTPUT",{id:n.id,file:i}),s({file:n,output:i})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:oe(r,(n,s,o)=>{if(!(n.status===x.IDLE||n.status===x.PROCESSING_ERROR)){const l=()=>e("REQUEST_ITEM_PROCESSING",{query:n,success:s,failure:o}),a=()=>document.hidden?l():setTimeout(l,32);n.status===x.PROCESSING_COMPLETE||n.status===x.PROCESSING_REVERT_ERROR?n.revert(qe(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(a).catch(()=>{}):n.status===x.PROCESSING&&n.abortProcessing().then(a);return}n.status!==x.PROCESSING_QUEUED&&(n.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:n.id}),e("PROCESS_ITEM",{query:n,success:s,failure:o},!0))}),PROCESS_ITEM:oe(r,(n,s,o)=>{const i=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",x.PROCESSING).length===i){r.processingQueue.push({id:n.id,success:s,failure:o});return}if(n.status===x.PROCESSING)return;const a=()=>{const u=r.processingQueue.shift();if(!u)return;const{id:f,success:m,failure:h}=u,d=Se(r.items,f);if(!d||d.archived){a();return}e("PROCESS_ITEM",{query:f,success:m,failure:h},!0)};n.onOnce("process-complete",()=>{s(re(n)),a();const u=r.options.server;if(r.options.instantUpload&&n.origin===j.LOCAL&&Oe(u.remove)){const h=()=>{};n.origin=j.LIMBO,r.options.server.remove(n.source,h,h)}t("GET_ITEMS_BY_STATUS",x.PROCESSING_COMPLETE).length===r.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),n.onOnce("process-error",u=>{o({error:u,file:re(n)}),a()});const c=r.options;n.process(ba(Aa(c.server.url,c.server.process,c.name,{chunkTransferId:n.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(u,f,m)=>{ue("PREPARE_OUTPUT",u,{query:t,item:n}).then(h=>{e("DID_PREPARE_OUTPUT",{id:n.id,file:h}),f(h)}).catch(m)})}),RETRY_ITEM_PROCESSING:oe(r,n=>{e("REQUEST_ITEM_PROCESSING",{query:n})}),REQUEST_REMOVE_ITEM:oe(r,n=>{Rn(t("GET_BEFORE_REMOVE_FILE"),re(n)).then(s=>{s&&e("REMOVE_ITEM",{query:n})})}),RELEASE_ITEM:oe(r,n=>{n.release()}),REMOVE_ITEM:oe(r,(n,s,o,i)=>{const l=()=>{const c=n.id;In(r.items,c).archive(),e("DID_REMOVE_ITEM",{error:null,id:c,item:n}),Jt(e,r),s(re(n))},a=r.options.server;n.origin===j.LOCAL&&a&&Oe(a.remove)&&i.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:n.id}),a.remove(n.source,()=>l(),c=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:n.id,error:q("error",0,c,null),status:{main:dt(r.options.labelFileRemoveError)(c),sub:r.options.labelTapToRetry}})})):((i.revert&&n.origin!==j.LOCAL&&n.serverId!==null||r.options.chunkUploads&&n.file.size>r.options.chunkSize||r.options.chunkUploads&&r.options.chunkForce)&&n.revert(qe(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),l())}),ABORT_ITEM_LOAD:oe(r,n=>{n.abortLoad()}),ABORT_ITEM_PROCESSING:oe(r,n=>{if(n.serverId){e("REVERT_ITEM_PROCESSING",{id:n.id});return}n.abortProcessing().then(()=>{r.options.instantUpload&&e("REMOVE_ITEM",{query:n.id})})}),REQUEST_REVERT_ITEM_PROCESSING:oe(r,n=>{if(!r.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:n});return}const s=l=>{l&&e("REVERT_ITEM_PROCESSING",{query:n})},o=t("GET_BEFORE_REMOVE_FILE");if(!o)return s(!0);const i=o(re(n));if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),REVERT_ITEM_PROCESSING:oe(r,n=>{n.revert(qe(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(r.options.instantUpload||Na(n))&&e("REMOVE_ITEM",{query:n.id})}).catch(()=>{})}),SET_OPTIONS:({options:n})=>{const s=Object.keys(n),o=Ga.filter(l=>s.includes(l));[...o,...Object.keys(n).filter(l=>!o.includes(l))].forEach(l=>{e(`SET_${$t(l,"_").toUpperCase()}`,{value:n[l]})})}}),Ga=["server"],Br=e=>e,_e=e=>document.createElement(e),Y=(e,t)=>{let r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},yn=(e,t,r,n)=>{const s=(n%360-90)*Math.PI/180;return{x:e+r*Math.cos(s),y:t+r*Math.sin(s)}},Fa=(e,t,r,n,s,o)=>{const i=yn(e,t,r,s),l=yn(e,t,r,n);return["M",i.x,i.y,"A",r,r,0,o,0,l.x,l.y].join(" ")},Ua=(e,t,r,n,s)=>{let o=1;return s>n&&s-n<=.5&&(o=0),n>s&&n-s>=.5&&(o=0),Fa(e,t,r,Math.min(.9999,n)*360,Math.min(.9999,s)*360,o)},Ba=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const r=Mt("svg");e.ref.path=Mt("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(e.ref.path),e.ref.svg=r,e.appendChild(r)},Va=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const r=parseInt(z(e.ref.path,"stroke-width"),10),n=e.rect.element.width*.5;let s=0,o=0;t.spin?(s=0,o=.5):(s=0,o=t.progress);const i=Ua(n,n,n-r,s,o);z(e.ref.path,"d",i),z(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},wn=X({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Ba,write:Va,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),$a=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},ka=({root:e,props:t})=>{const{isDisabled:r}=t,n=e.query("GET_DISABLED")||t.opacity===0;n&&!r?(t.isDisabled=!0,z(e.element,"disabled","disabled")):!n&&r&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},Fs=X({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:$a,write:ka}),Us=(e,t=".",r=1e3,n={})=>{const{labelBytes:s="bytes",labelKilobytes:o="KB",labelMegabytes:i="MB",labelGigabytes:l="GB"}=n;e=Math.round(Math.abs(e));const a=r,c=r*r,u=r*r*r;return e<a?`${e} ${s}`:e<c?`${Math.floor(e/a)} ${o}`:e<u?`${On(e/c,1,t)} ${i}`:`${On(e/u,2,t)} ${l}`},On=(e,t,r)=>e.toFixed(t).split(".").filter(n=>n!=="0").join(r),Ha=({root:e,props:t})=>{const r=_e("span");r.className="filepond--file-info-main",z(r,"aria-hidden","true"),e.appendChild(r),e.ref.fileName=r;const n=_e("span");n.className="filepond--file-info-sub",e.appendChild(n),e.ref.fileSize=n,Y(n,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Y(r,Br(e.query("GET_ITEM_NAME",t.id)))},pr=({root:e,props:t})=>{Y(e.ref.fileSize,Us(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),Y(e.ref.fileName,Br(e.query("GET_ITEM_NAME",t.id)))},Sn=({root:e,props:t})=>{if(He(e.query("GET_ITEM_SIZE",t.id))){pr({root:e,props:t});return}Y(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Wa=X({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:ee({DID_LOAD_ITEM:pr,DID_UPDATE_ITEM_META:pr,DID_THROW_ITEM_LOAD_ERROR:Sn,DID_THROW_ITEM_INVALID:Sn}),didCreateView:e=>{Ce("CREATE_VIEW",{...e,view:e})},create:Ha,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Bs=e=>Math.round(e*100),qa=({root:e})=>{const t=_e("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const r=_e("span");r.className="filepond--file-status-sub",e.appendChild(r),e.ref.sub=r,Vs({root:e,action:{progress:null}})},Vs=({root:e,action:t})=>{const r=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Bs(t.progress)}%`;Y(e.ref.main,r),Y(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Ya=({root:e,action:t})=>{const r=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Bs(t.progress)}%`;Y(e.ref.main,r),Y(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},za=({root:e})=>{Y(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Y(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Xa=({root:e})=>{Y(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Y(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},ja=({root:e})=>{Y(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Y(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Dn=({root:e})=>{Y(e.ref.main,""),Y(e.ref.sub,"")},Ye=({root:e,action:t})=>{Y(e.ref.main,t.status.main),Y(e.ref.sub,t.status.sub)},Qa=X({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:ee({DID_LOAD_ITEM:Dn,DID_REVERT_ITEM_PROCESSING:Dn,DID_REQUEST_ITEM_PROCESSING:za,DID_ABORT_ITEM_PROCESSING:Xa,DID_COMPLETE_ITEM_PROCESSING:ja,DID_UPDATE_ITEM_PROCESS_PROGRESS:Ya,DID_UPDATE_ITEM_LOAD_PROGRESS:Vs,DID_THROW_ITEM_LOAD_ERROR:Ye,DID_THROW_ITEM_INVALID:Ye,DID_THROW_ITEM_PROCESSING_ERROR:Ye,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Ye,DID_THROW_ITEM_REMOVE_ERROR:Ye}),didCreateView:e=>{Ce("CREATE_VIEW",{...e,view:e})},create:qa,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),hr={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},mr=[];W(hr,e=>{mr.push(e)});const se=e=>{if(Er(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Ka=e=>e.ref.buttonAbortItemLoad.rect.element.width,pt=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Za=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Ja=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),el=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Er=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),tl={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Ja},processProgressIndicator:{opacity:0,align:el},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},An={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:se},status:{translateX:se}},tr={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ge={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:se},status:{translateX:se,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:se},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Er},info:{translateX:se},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Er},buttonRemoveItem:{opacity:1},info:{translateX:se},status:{opacity:1,translateX:se}},DID_LOAD_ITEM:An,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:se},status:{translateX:se}},DID_START_ITEM_PROCESSING:tr,DID_REQUEST_ITEM_PROCESSING:tr,DID_UPDATE_ITEM_PROCESS_PROGRESS:tr,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:se}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:se},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:An},rl=X({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),nl=({root:e,props:t})=>{const r=Object.keys(hr).reduce((d,I)=>(d[I]={...hr[I]},d),{}),{id:n}=t,s=e.query("GET_ALLOW_REVERT"),o=e.query("GET_ALLOW_REMOVE"),i=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),a=e.query("IS_ASYNC"),c=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;a?i&&!s?u=d=>!/RevertItemProcessing/.test(d):!i&&s?u=d=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(d):!i&&!s&&(u=d=>!/Process/.test(d)):u=d=>!/Process/.test(d);const f=u?mr.filter(u):mr.concat();if(l&&s&&(r.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",r.RevertItemProcessing.icon="GET_ICON_REMOVE"),a&&!s){const d=Ge.DID_COMPLETE_ITEM_PROCESSING;d.info.translateX=Za,d.info.translateY=pt,d.status.translateY=pt,d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(a&&!i&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(d=>{Ge[d].status.translateY=pt}),Ge.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Ka),c&&s){r.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const d=Ge.DID_COMPLETE_ITEM_PROCESSING;d.info.translateX=se,d.status.translateY=pt,d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(r.RemoveItem.disabled=!0),W(r,(d,I)=>{const E=e.createChildView(Fs,{label:e.query(I.label),icon:e.query(I.icon),opacity:0});f.includes(d)&&e.appendChildView(E),I.disabled&&(E.element.setAttribute("disabled","disabled"),E.element.setAttribute("hidden","hidden")),E.element.dataset.align=e.query(`GET_STYLE_${I.align}`),E.element.classList.add(I.className),E.on("click",_=>{_.stopPropagation(),!I.disabled&&e.dispatch(I.action,{query:n})}),e.ref[`button${d}`]=E}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(rl)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(Wa,{id:n})),e.ref.status=e.appendChildView(e.createChildView(Qa,{id:n}));const m=e.appendChildView(e.createChildView(wn,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));m.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=m;const h=e.appendChildView(e.createChildView(wn,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=h,e.ref.activeStyles=[]},sl=({root:e,actions:t,props:r})=>{il({root:e,actions:t,props:r});let n=t.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>Ge[s.type]);if(n){e.ref.activeStyles=[];const s=Ge[n.type];W(tl,(o,i)=>{const l=e.ref[o];W(i,(a,c)=>{const u=s[o]&&typeof s[o][a]<"u"?s[o][a]:c;e.ref.activeStyles.push({control:l,key:a,value:u})})})}e.ref.activeStyles.forEach(({control:s,key:o,value:i})=>{s[o]=typeof i=="function"?i(e):i})},il=ee({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),ol=X({create:nl,write:sl,didCreateView:e=>{Ce("CREATE_VIEW",{...e,view:e})},name:"file"}),al=({root:e,props:t})=>{e.ref.fileName=_e("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(ol,{id:t.id})),e.ref.data=!1},ll=({root:e,props:t})=>{Y(e.ref.fileName,Br(e.query("GET_ITEM_NAME",t.id)))},cl=X({create:al,ignoreRect:!0,write:ee({DID_LOAD_ITEM:ll}),didCreateView:e=>{Ce("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),Pn={type:"spring",damping:.6,mass:7},ul=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Pn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Pn},styles:["translateY"]}}].forEach(r=>{fl(e,r,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},fl=(e,t,r)=>{const n=X({name:`panel-${t.name} filepond--${r}`,mixins:t.mixins,ignoreRectUpdate:!0}),s=e.createChildView(n,t.props);e.ref[t.name]=e.appendChildView(s)},dl=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=ys(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const r=e.ref.top.rect.element,n=e.ref.bottom.rect.element,s=Math.max(r.height+n.height,t.height);e.ref.center.translateY=r.height,e.ref.center.scaleY=(s-r.height-n.height)/100,e.ref.bottom.translateY=s-n.height},$s=X({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:dl,create:ul,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),pl=e=>{const t=e.map(n=>n.id);let r;return{setIndex:n=>{r=n},getIndex:()=>r,getItemIndex:n=>t.indexOf(n.id)}},bn={type:"spring",stiffness:.75,damping:.45,mass:10},Cn="spring",Mn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},hl=({root:e,props:t})=>{if(e.ref.handleClick=n=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(cl,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView($s,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const r=n=>{if(!n.isPrimary)return;let s=!1;const o={x:n.pageX,y:n.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:n.offsetX,y:n.offsetY};const i=pl(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:i});const l=f=>{if(!f.isPrimary)return;f.stopPropagation(),f.preventDefault(),t.dragOffset={x:f.pageX-o.x,y:f.pageY-o.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!s&&(s=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:i})},a=f=>{f.isPrimary&&(t.dragOffset={x:f.pageX-o.x,y:f.pageY-o.y},u())},c=()=>{u()},u=()=>{document.removeEventListener("pointercancel",c),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",a),e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:i}),s&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0)};document.addEventListener("pointercancel",c),document.addEventListener("pointermove",l),document.addEventListener("pointerup",a)};e.element.addEventListener("pointerdown",r)},ml=ee({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),El=ee({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:r,shouldOptimize:n})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let s=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Mn[i.type]);s&&s.type!==r.currentState&&(r.currentState=s.type,e.element.dataset.filepondItemState=Mn[r.currentState]||"");const o=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");o?n||(e.height=e.rect.element.width*o):(ml({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),n&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),gl=X({create:hl,write:El,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Cn,scaleY:Cn,translateX:bn,translateY:bn,opacity:{type:"tween",duration:150}}}});var Vr=(e,t)=>Math.max(1,Math.floor((e+1)/t));const $r=(e,t,r)=>{if(!r)return;const n=e.rect.element.width,s=t.length;let o=null;if(s===0||r.top<t[0].rect.element.top)return-1;const l=t[0].rect.element,a=l.marginLeft+l.marginRight,c=l.width+a,u=Vr(n,c);if(u===1){for(let h=0;h<s;h++){const d=t[h],I=d.rect.outer.top+d.rect.element.height*.5;if(r.top<I)return h}return s}const f=l.marginTop+l.marginBottom,m=l.height+f;for(let h=0;h<s;h++){const d=h%u,I=Math.floor(h/u),E=d*c,_=I*m,p=_-l.marginTop,g=E+c,R=_+m+l.marginBottom;if(r.top<R&&r.top>p){if(r.left<g)return h;h!==s-1?o=h:o=null}}return o!==null?o:s},ht={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},Il=({root:e})=>{z(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},_l=({root:e,action:t})=>{const{id:r,index:n,interactionMethod:s}=t;e.ref.addIndex=n;const o=Date.now();let i=o,l=1;if(s!==le.NONE){l=0;const a=e.query("GET_ITEM_INSERT_INTERVAL"),c=o-e.ref.lastItemSpanwDate;i=c<a?o+(a-c):o}e.ref.lastItemSpanwDate=i,e.appendChildView(e.createChildView(gl,{spawnDate:i,id:r,opacity:l,interactionMethod:s}),n)},vn=(e,t,r,n=0,s=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(e.opacity===0&&Tl(e,t,r,n,s),e.scaleX=1,e.scaleY=1,e.opacity=1))},Tl=(e,t,r,n,s)=>{e.interactionMethod===le.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===le.DROP?(e.translateX=null,e.translateX=t-n*20,e.translateY=null,e.translateY=r-s*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===le.BROWSE?(e.translateY=null,e.translateY=r-30):e.interactionMethod===le.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Rl=({root:e,action:t})=>{const{id:r}=t,n=e.childViews.find(s=>s.id===r);n&&(n.scaleX=.9,n.scaleY=.9,n.opacity=0,n.markedForRemoval=!0)},rr=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,yl=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,wl=({root:e,action:t})=>{const{id:r,dragState:n}=t,s=e.query("GET_ITEM",{id:r}),o=e.childViews.find(E=>E.id===r),i=e.childViews.length,l=n.getItemIndex(s);if(!o)return;const a={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},c=rr(o),u=yl(o);let f=Math.floor(e.rect.outer.width/u);f>i&&(f=i);const m=Math.floor(i/f+1);ht.setHeight=c*m,ht.setWidth=u*f;var h={y:Math.floor(a.y/c),x:Math.floor(a.x/u),getGridIndex:function(){return a.y>ht.getHeight||a.y<0||a.x>ht.getWidth||a.x<0?l:this.y*f+this.x},getColIndex:function(){const _=e.query("GET_ACTIVE_ITEMS"),p=e.childViews.filter(b=>b.rect.element.height),g=_.map(b=>p.find(C=>C.id===b.id)),R=g.findIndex(b=>b===o),w=rr(o),A=g.length;let M=A,O=0,P=0,N=0;for(let b=0;b<A;b++)if(O=rr(g[b]),N=P,P=N+O,a.y<P){if(R>b){if(a.y<N+w){M=b;break}continue}M=b;break}return M}};const d=f>1?h.getGridIndex():h.getColIndex();e.dispatch("MOVE_ITEM",{query:o,index:d});const I=n.getIndex();if(I===void 0||I!==d){if(n.setIndex(d),I===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:l,target:d})}},Ol=ee({DID_ADD_ITEM:_l,DID_REMOVE_ITEM:Rl,DID_DRAG_ITEM:wl}),Sl=({root:e,props:t,actions:r,shouldOptimize:n})=>{Ol({root:e,props:t,actions:r});const{dragCoordinates:s}=t,o=e.rect.element.width,i=e.childViews.filter(g=>g.rect.element.height),l=e.query("GET_ACTIVE_ITEMS").map(g=>i.find(R=>R.id===g.id)).filter(g=>g),a=s?$r(e,l,s):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let u=0,f=0,m=0;if(l.length===0)return;const h=l[0].rect.element,d=h.marginTop+h.marginBottom,I=h.marginLeft+h.marginRight,E=h.width+I,_=h.height+d,p=Vr(o,E);if(p===1){let g=0,R=0;l.forEach((w,A)=>{if(a){let P=A-a;P===-2?R=-d*.25:P===-1?R=-d*.75:P===0?R=d*.75:P===1?R=d*.25:R=0}n&&(w.translateX=null,w.translateY=null),w.markedForRemoval||vn(w,0,g+R);let O=(w.rect.element.height+d)*(w.markedForRemoval?w.opacity:1);g+=O})}else{let g=0,R=0;l.forEach((w,A)=>{A===a&&(u=1),A===c&&(m+=1),w.markedForRemoval&&w.opacity<.5&&(f-=1);const M=A+m+u+f,O=M%p,P=Math.floor(M/p),N=O*E,b=P*_,C=Math.sign(N-g),B=Math.sign(b-R);g=N,R=b,!w.markedForRemoval&&(n&&(w.translateX=null,w.translateY=null),vn(w,N,b,C,B))})}},Dl=(e,t)=>t.filter(r=>r.data&&r.data.id?e.id===r.data.id:!0),Al=X({create:Il,write:Sl,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:Dl,mixins:{apis:["dragCoordinates"]}}),Pl=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Al)),t.dragCoordinates=null,t.overflowing=!1},bl=({root:e,props:t,action:r})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:r.position.scopeLeft-e.ref.list.rect.element.left,top:r.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Cl=({props:e})=>{e.dragCoordinates=null},Ml=ee({DID_DRAG:bl,DID_END_DRAG:Cl}),vl=({root:e,props:t,actions:r})=>{if(Ml({root:e,props:t,actions:r}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const n=Math.round(t.overflow);n!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=n)}},Ll=X({create:Pl,write:vl,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),de=(e,t,r,n="")=>{r?z(e,t,n):e.removeAttribute(t)},Nl=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=_e("form"),r=e.parentNode,n=e.nextSibling;t.appendChild(e),t.reset(),n?r.insertBefore(e,n):r.appendChild(e)}}},xl=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,z(e.element,"name",e.query("GET_NAME")),z(e.element,"aria-controls",`filepond--assistant-${t.id}`),z(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),ks({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),Hs({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),Ws({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),gr({root:e}),qs({root:e,action:{value:e.query("GET_REQUIRED")}}),Ys({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=r=>{if(!e.element.value)return;const n=Array.from(e.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{t.onload(n),Nl(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},ks=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&de(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},Hs=({root:e,action:t})=>{de(e.element,"multiple",t.value)},Ws=({root:e,action:t})=>{de(e.element,"webkitdirectory",t.value)},gr=({root:e})=>{const t=e.query("GET_DISABLED"),r=e.query("GET_ALLOW_BROWSE"),n=t||!r;de(e.element,"disabled",n)},qs=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&de(e.element,"required",!0):de(e.element,"required",!1)},Ys=({root:e,action:t})=>{de(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Ln=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(de(t,"required",!1),de(t,"name",!1)):(de(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&de(t,"required",!0))},Gl=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Fl=X({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:xl,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:ee({DID_LOAD_ITEM:Ln,DID_REMOVE_ITEM:Ln,DID_THROW_ITEM_INVALID:Gl,DID_SET_DISABLED:gr,DID_SET_ALLOW_BROWSE:gr,DID_SET_ALLOW_DIRECTORIES_ONLY:Ws,DID_SET_ALLOW_MULTIPLE:Hs,DID_SET_ACCEPTED_FILE_TYPES:ks,DID_SET_CAPTURE_METHOD:Ys,DID_SET_REQUIRED:qs})}),Nn={ENTER:13,SPACE:32},Ul=({root:e,props:t})=>{const r=_e("label");z(r,"for",`filepond--browser-${t.id}`),z(r,"id",`filepond--drop-label-${t.id}`),z(r,"aria-hidden","true"),e.ref.handleKeyDown=n=>{(n.keyCode===Nn.ENTER||n.keyCode===Nn.SPACE)&&(n.preventDefault(),e.ref.label.click())},e.ref.handleClick=n=>{n.target===r||r.contains(n.target)||e.ref.label.click()},r.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),zs(r,t.caption),e.appendChild(r),e.ref.label=r},zs=(e,t)=>{e.innerHTML=t;const r=e.querySelector(".filepond--label-action");return r&&z(r,"tabindex","0"),t},Bl=X({name:"drop-label",ignoreRect:!0,create:Ul,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:ee({DID_SET_LABEL_IDLE:({root:e,action:t})=>{zs(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Vl=X({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),$l=({root:e})=>{const t=e.rect.element.width*.5,r=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(Vl,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:r}))},kl=({root:e,action:t})=>{if(!e.ref.blob){$l({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},Hl=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},Wl=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},ql=({root:e,props:t,actions:r})=>{Yl({root:e,props:t,actions:r});const{blob:n}=e.ref;r.length===0&&n&&n.opacity===0&&(e.removeChildView(n),e.ref.blob=null)},Yl=ee({DID_DRAG:kl,DID_DROP:Wl,DID_END_DRAG:Hl}),zl=X({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:ql}),Xs=(e,t)=>{try{const r=new DataTransfer;t.forEach(n=>{n instanceof File?r.items.add(n):r.items.add(new File([n],n.name,{type:n.type}))}),e.files=r.files}catch{return!1}return!0},Xl=({root:e})=>e.ref.fields={},Wt=(e,t)=>e.ref.fields[t],kr=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},xn=({root:e})=>kr(e),jl=({root:e,action:t})=>{const s=!(e.query("GET_ITEM",t.id).origin===j.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),o=_e("input");o.type=s?"file":"hidden",o.name=e.query("GET_NAME"),o.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=o,kr(e)},Ql=({root:e,action:t})=>{const r=Wt(e,t.id);if(!r||(t.serverFileReference!==null&&(r.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const n=e.query("GET_ITEM",t.id);Xs(r,[n.file])},Kl=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const r=Wt(e,t.id);r&&Xs(r,[t.file])},0)},Zl=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Jl=({root:e,action:t})=>{const r=Wt(e,t.id);r&&(r.parentNode&&r.parentNode.removeChild(r),delete e.ref.fields[t.id])},ec=({root:e,action:t})=>{const r=Wt(e,t.id);r&&(t.value===null?r.removeAttribute("value"):r.type!="file"&&(r.value=t.value),kr(e))},tc=ee({DID_SET_DISABLED:Zl,DID_ADD_ITEM:jl,DID_LOAD_ITEM:Ql,DID_REMOVE_ITEM:Jl,DID_DEFINE_VALUE:ec,DID_PREPARE_OUTPUT:Kl,DID_REORDER_ITEMS:xn,DID_SORT_ITEMS:xn}),rc=X({tag:"fieldset",name:"data",create:Xl,write:tc,ignoreRect:!0}),nc=e=>"getRootNode"in e?e.getRootNode():document,sc=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],ic=["css","csv","html","txt"],oc={zip:"zip|compressed",epub:"application/epub+zip"},js=(e="")=>(e=e.toLowerCase(),sc.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):ic.includes(e)?"text/"+e:oc[e]||""),Hr=e=>new Promise((t,r)=>{const n=hc(e);if(n.length&&!ac(e))return t(n);lc(e).then(t)}),ac=e=>e.files?e.files.length>0:!1,lc=e=>new Promise((t,r)=>{const n=(e.items?Array.from(e.items):[]).filter(s=>cc(s)).map(s=>uc(s));if(!n.length){t(e.files?Array.from(e.files):[]);return}Promise.all(n).then(s=>{const o=[];s.forEach(i=>{o.push.apply(o,i)}),t(o.filter(i=>i).map(i=>(i._relativePath||(i._relativePath=i.webkitRelativePath),i)))}).catch(console.error)}),cc=e=>{if(Qs(e)){const t=Wr(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},uc=e=>new Promise((t,r)=>{if(pc(e)){fc(Wr(e)).then(t).catch(r);return}t([e.getAsFile()])}),fc=e=>new Promise((t,r)=>{const n=[];let s=0,o=0;const i=()=>{o===0&&s===0&&t(n)},l=a=>{s++;const c=a.createReader(),u=()=>{c.readEntries(f=>{if(f.length===0){s--,i();return}f.forEach(m=>{m.isDirectory?l(m):(o++,m.file(h=>{const d=dc(h);m.fullPath&&(d._relativePath=m.fullPath),n.push(d),o--,i()}))}),u()},r)};u()};l(e)}),dc=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,r=e.name,n=js(Ht(e.name));return n.length&&(e=e.slice(0,e.size,n),e.name=r,e.lastModifiedDate=t),e},pc=e=>Qs(e)&&(Wr(e)||{}).isDirectory,Qs=e=>"webkitGetAsEntry"in e,Wr=e=>e.webkitGetAsEntry(),hc=e=>{let t=[];try{if(t=Ec(e),t.length)return t;t=mc(e)}catch{}return t},mc=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},Ec=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const r=t.match(/src\s*=\s*"(.+?)"/);if(r)return[r[1]]}return[]},Lt=[],be=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),gc=(e,t,r)=>{const n=Ic(t),s={element:e,filterElement:r,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=n.addListener(s),s},Ic=e=>{const t=Lt.find(n=>n.element===e);if(t)return t;const r=_c(e);return Lt.push(r),r},_c=e=>{const t=[],r={dragenter:Rc,dragover:yc,dragleave:Oc,drop:wc},n={};W(r,(o,i)=>{n[o]=i(e,t),e.addEventListener(o,n[o],!1)});const s={element:e,addListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1),t.length===0&&(Lt.splice(Lt.indexOf(s),1),W(r,i=>{e.removeEventListener(i,n[i],!1)}))})};return s},Tc=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),qr=(e,t)=>{const r=nc(t),n=Tc(r,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return n===t||t.contains(n)};let Ks=null;const mt=(e,t)=>{try{e.dropEffect=t}catch{}},Rc=(e,t)=>r=>{r.preventDefault(),Ks=r.target,t.forEach(n=>{const{element:s,onenter:o}=n;qr(r,s)&&(n.state="enter",o(be(r)))})},yc=(e,t)=>r=>{r.preventDefault();const n=r.dataTransfer;Hr(n).then(s=>{let o=!1;t.some(i=>{const{filterElement:l,element:a,onenter:c,onexit:u,ondrag:f,allowdrop:m}=i;mt(n,"copy");const h=m(s);if(!h){mt(n,"none");return}if(qr(r,a)){if(o=!0,i.state===null){i.state="enter",c(be(r));return}if(i.state="over",l&&!h){mt(n,"none");return}f(be(r))}else l&&!o&&mt(n,"none"),i.state&&(i.state=null,u(be(r)))})})},wc=(e,t)=>r=>{r.preventDefault();const n=r.dataTransfer;Hr(n).then(s=>{t.forEach(o=>{const{filterElement:i,element:l,ondrop:a,onexit:c,allowdrop:u}=o;if(o.state=null,!(i&&!qr(r,l))){if(!u(s))return c(be(r));a(be(r),s)}})})},Oc=(e,t)=>r=>{Ks===r.target&&t.forEach(n=>{const{onexit:s}=n;n.state=null,s(be(r))})},Sc=(e,t,r)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:n,requiresDropOnElement:s,filterItems:o=u=>u}=r,i=gc(e,n?document.documentElement:e,s);let l="",a="";i.allowdrop=u=>t(o(u)),i.ondrop=(u,f)=>{const m=o(f);if(!t(m)){c.ondragend(u);return}a="drag-drop",c.onload(m,u)},i.ondrag=u=>{c.ondrag(u)},i.onenter=u=>{a="drag-over",c.ondragstart(u)},i.onexit=u=>{a="drag-exit",c.ondragend(u)};const c={updateHopperState:()=>{l!==a&&(e.dataset.hopperState=a,l=a)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{i.destroy()}};return c};let Ir=!1;const Ue=[],Zs=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let r=!1,n=t;for(;n!==document.body;){if(n.classList.contains("filepond--root")){r=!0;break}n=n.parentNode}if(!r)return}Hr(e.clipboardData).then(r=>{r.length&&Ue.forEach(n=>n(r))})},Dc=e=>{Ue.includes(e)||(Ue.push(e),!Ir&&(Ir=!0,document.addEventListener("paste",Zs)))},Ac=e=>{Gr(Ue,Ue.indexOf(e)),Ue.length===0&&(document.removeEventListener("paste",Zs),Ir=!1)},Pc=()=>{const e=r=>{t.onload(r)},t={destroy:()=>{Ac(e)},onload:()=>{}};return Dc(e),t},bc=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,z(e.element,"role","status"),z(e.element,"aria-live","polite"),z(e.element,"aria-relevant","additions")};let Gn=null,Fn=null;const nr=[],qt=(e,t)=>{e.element.textContent=t},Cc=e=>{e.element.textContent=""},Js=(e,t,r)=>{const n=e.query("GET_TOTAL_ITEMS");qt(e,`${r} ${t}, ${n} ${n===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Fn),Fn=setTimeout(()=>{Cc(e)},1500)},ei=e=>e.element.parentNode.contains(document.activeElement),Mc=({root:e,action:t})=>{if(!ei(e))return;e.element.textContent="";const r=e.query("GET_ITEM",t.id);nr.push(r.filename),clearTimeout(Gn),Gn=setTimeout(()=>{Js(e,nr.join(", "),e.query("GET_LABEL_FILE_ADDED")),nr.length=0},750)},vc=({root:e,action:t})=>{if(!ei(e))return;const r=t.item;Js(e,r.filename,e.query("GET_LABEL_FILE_REMOVED"))},Lc=({root:e,action:t})=>{const n=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");qt(e,`${n} ${s}`)},Un=({root:e,action:t})=>{const n=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");qt(e,`${n} ${s}`)},Et=({root:e,action:t})=>{const n=e.query("GET_ITEM",t.id).filename;qt(e,`${t.status.main} ${n} ${t.status.sub}`)},Nc=X({create:bc,ignoreRect:!0,ignoreRectUpdate:!0,write:ee({DID_LOAD_ITEM:Mc,DID_REMOVE_ITEM:vc,DID_COMPLETE_ITEM_PROCESSING:Lc,DID_ABORT_ITEM_PROCESSING:Un,DID_REVERT_ITEM_PROCESSING:Un,DID_THROW_ITEM_REMOVE_ERROR:Et,DID_THROW_ITEM_LOAD_ERROR:Et,DID_THROW_ITEM_INVALID:Et,DID_THROW_ITEM_PROCESSING_ERROR:Et}),tag:"span",name:"assistant"}),ti=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),r=>r.charAt(1).toUpperCase()),ri=(e,t=16,r=!0)=>{let n=Date.now(),s=null;return(...o)=>{clearTimeout(s);const i=Date.now()-n,l=()=>{n=Date.now(),e(...o)};i<t?r||(s=setTimeout(l,t-i)):l()}},xc=1e6,Nt=e=>e.preventDefault(),Gc=({root:e,props:t})=>{const r=e.query("GET_ID");r&&(e.element.id=r);const n=e.query("GET_CLASS_NAME");n&&n.split(" ").filter(a=>a.length).forEach(a=>{e.element.classList.add(a)}),e.ref.label=e.appendChildView(e.createChildView(Bl,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(Ll,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView($s,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(Nc,{...t})),e.ref.data=e.appendChildView(e.createChildView(rc,{...t})),e.ref.measure=_e("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(a=>!Ie(a.value)).map(({name:a,value:c})=>{e.element.dataset[a]=c}),e.ref.widthPrevious=null,e.ref.widthUpdated=ri(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&o&&!s&&(e.element.addEventListener("touchmove",Nt,{passive:!1}),e.element.addEventListener("gesturestart",Nt));const i=e.query("GET_CREDITS");if(i.length===2){const a=document.createElement("a");a.className="filepond--credits",a.setAttribute("aria-hidden","true"),a.href=i[0],a.tabindex=-1,a.target="_blank",a.rel="noopener noreferrer",a.textContent=i[1],e.element.appendChild(a),e.ref.credits=a}},Fc=({root:e,props:t,actions:r})=>{if(kc({root:e,props:t,actions:r}),r.filter(A=>/^DID_SET_STYLE_/.test(A.type)).filter(A=>!Ie(A.data.value)).map(({type:A,data:M})=>{const O=ti(A.substring(8).toLowerCase(),"_");e.element.dataset[O]=M.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let n=e.ref.bounds;n||(n=e.ref.bounds=Vc(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:s,label:o,list:i,panel:l}=e.ref;s&&s.updateHopperState();const a=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),u=e.query("GET_TOTAL_ITEMS"),f=c?e.query("GET_MAX_FILES")||xc:1,m=u===f,h=r.find(A=>A.type==="DID_ADD_ITEM");if(m&&h){const A=h.data.interactionMethod;o.opacity=0,c?o.translateY=-40:A===le.API?o.translateX=40:A===le.BROWSE?o.translateY=40:o.translateY=30}else m||(o.opacity=1,o.translateX=0,o.translateY=0);const d=Uc(e),I=Bc(e),E=o.rect.element.height,_=!c||m?0:E,p=m?i.rect.element.marginTop:0,g=u===0?0:i.rect.element.marginBottom,R=_+p+I.visual+g,w=_+p+I.bounds+g;if(i.translateY=Math.max(0,_-i.rect.element.marginTop)-d.top,a){const A=e.rect.element.width,M=A*a;a!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=a,e.ref.updateHistory=[]);const O=e.ref.updateHistory;O.push(A);const P=2;if(O.length>P*2){const b=O.length,C=b-10;let B=0;for(let D=b;D>=C;D--)if(O[D]===O[D-2]&&B++,B>=P)return}l.scalable=!1,l.height=M;const N=M-_-(g-d.bottom)-(m?p:0);I.visual>N?i.overflow=N:i.overflow=null,e.height=M}else if(n.fixedHeight){l.scalable=!1;const A=n.fixedHeight-_-(g-d.bottom)-(m?p:0);I.visual>A?i.overflow=A:i.overflow=null}else if(n.cappedHeight){const A=R>=n.cappedHeight,M=Math.min(n.cappedHeight,R);l.scalable=!0,l.height=A?M:M-d.top-d.bottom;const O=M-_-(g-d.bottom)-(m?p:0);R>n.cappedHeight&&I.visual>O?i.overflow=O:i.overflow=null,e.height=Math.min(n.cappedHeight,w-d.top-d.bottom)}else{const A=u>0?d.top+d.bottom:0;l.scalable=!0,l.height=Math.max(E,R-A),e.height=Math.max(E,w-A)}e.ref.credits&&l.heightCurrent&&(e.ref.credits.style.transform=`translateY(${l.heightCurrent}px)`)},Uc=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Bc=e=>{let t=0,r=0;const n=e.ref.list,s=n.childViews[0],o=s.childViews.filter(p=>p.rect.element.height),i=e.query("GET_ACTIVE_ITEMS").map(p=>o.find(g=>g.id===p.id)).filter(p=>p);if(i.length===0)return{visual:t,bounds:r};const l=s.rect.element.width,a=$r(s,i,n.dragCoordinates),c=i[0].rect.element,u=c.marginTop+c.marginBottom,f=c.marginLeft+c.marginRight,m=c.width+f,h=c.height+u,d=typeof a<"u"&&a>=0?1:0,I=i.find(p=>p.markedForRemoval&&p.opacity<.45)?-1:0,E=i.length+d+I,_=Vr(l,m);return _===1?i.forEach(p=>{const g=p.rect.element.height+u;r+=g,t+=g*p.opacity}):(r=Math.ceil(E/_)*h,t=r),{visual:t,bounds:r}},Vc=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},Yr=(e,t)=>{const r=e.query("GET_ALLOW_REPLACE"),n=e.query("GET_ALLOW_MULTIPLE"),s=e.query("GET_TOTAL_ITEMS");let o=e.query("GET_MAX_FILES");const i=t.length;return!n&&i>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:q("warning",0,"Max files")}),!0):(o=n?o:1,!n&&r?!1:He(o)&&s+i>o?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:q("warning",0,"Max files")}),!0):!1)},$c=(e,t,r)=>{const n=e.childViews[0];return $r(n,t,{left:r.scopeLeft-n.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Bn=e=>{const t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),n=t&&!r;if(n&&!e.ref.hopper){const s=Sc(e.element,o=>{const i=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?o.every(a=>Ce("ALLOW_HOPPER_ITEM",a,{query:e.query}).every(c=>c===!0)&&i(a)):!0},{filterItems:o=>{const i=e.query("GET_IGNORED_FILES");return o.filter(l=>Pe(l)?!i.includes(l.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});s.onload=(o,i)=>{const a=e.ref.list.childViews[0].childViews.filter(u=>u.rect.element.height),c=e.query("GET_ACTIVE_ITEMS").map(u=>a.find(f=>f.id===u.id)).filter(u=>u);ue("ADD_ITEMS",o,{dispatch:e.dispatch}).then(u=>{if(Yr(e,u))return!1;e.dispatch("ADD_ITEMS",{items:u,index:$c(e.ref.list,c,i),interactionMethod:le.DROP})}),e.dispatch("DID_DROP",{position:i}),e.dispatch("DID_END_DRAG",{position:i})},s.ondragstart=o=>{e.dispatch("DID_START_DRAG",{position:o})},s.ondrag=ri(o=>{e.dispatch("DID_DRAG",{position:o})}),s.ondragend=o=>{e.dispatch("DID_END_DRAG",{position:o})},e.ref.hopper=s,e.ref.drip=e.appendChildView(e.createChildView(zl))}else!n&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Vn=(e,t)=>{const r=e.query("GET_ALLOW_BROWSE"),n=e.query("GET_DISABLED"),s=r&&!n;s&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Fl,{...t,onload:o=>{ue("ADD_ITEMS",o,{dispatch:e.dispatch}).then(i=>{if(Yr(e,i))return!1;e.dispatch("ADD_ITEMS",{items:i,index:-1,interactionMethod:le.BROWSE})})}}),0):!s&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},$n=e=>{const t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),n=t&&!r;n&&!e.ref.paster?(e.ref.paster=Pc(),e.ref.paster.onload=s=>{ue("ADD_ITEMS",s,{dispatch:e.dispatch}).then(o=>{if(Yr(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:le.PASTE})})}):!n&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},kc=ee({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Vn(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Bn(e)},DID_SET_ALLOW_PASTE:({root:e})=>{$n(e)},DID_SET_DISABLED:({root:e,props:t})=>{Bn(e),$n(e),Vn(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),Hc=X({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:Gc,write:Fc,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Nt),e.element.removeEventListener("gesturestart",Nt)},mixins:{styles:["height"]}}),Wc=(e={})=>{let t=null;const r=vt(),n=io(qo(r),[ua,Xo(r)],[xa,zo(r)]);n.dispatch("SET_OPTIONS",{options:e});const s=()=>{document.hidden||n.dispatch("KICK")};document.addEventListener("visibilitychange",s);let o=null,i=!1,l=!1,a=null,c=null;const u=()=>{i||(i=!0),clearTimeout(o),o=setTimeout(()=>{i=!1,a=null,c=null,l&&(l=!1,n.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",u);const f=Hc(n,{id:xr()});let m=!1,h=!1;const d={_read:()=>{i&&(c=window.innerWidth,a||(a=c),!l&&c!==a&&(n.dispatch("DID_START_RESIZE"),l=!0)),h&&m&&(m=f.element.offsetParent===null),!m&&(f._read(),h=f.rect.element.hidden)},_write:y=>{const S=n.processActionQueue().filter(v=>!/^SET_/.test(v.type));m&&!S.length||(p(S),m=f._write(y,S,l),Ko(n.query("GET_ITEMS")),m&&n.processDispatchQueue())}},I=y=>S=>{const v={type:y};if(!S)return v;if(S.hasOwnProperty("error")&&(v.error=S.error?{...S.error}:null),S.status&&(v.status={...S.status}),S.file&&(v.output=S.file),S.source)v.file=S.source;else if(S.item||S.id){const L=S.item?S.item:n.query("GET_ITEM",S.id);v.file=L?re(L):null}return S.items&&(v.items=S.items.map(re)),/progress/.test(y)&&(v.progress=S.progress),S.hasOwnProperty("origin")&&S.hasOwnProperty("target")&&(v.origin=S.origin,v.target=S.target),v},E={DID_DESTROY:I("destroy"),DID_INIT:I("init"),DID_THROW_MAX_FILES:I("warning"),DID_INIT_ITEM:I("initfile"),DID_START_ITEM_LOAD:I("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:I("addfileprogress"),DID_LOAD_ITEM:I("addfile"),DID_THROW_ITEM_INVALID:[I("error"),I("addfile")],DID_THROW_ITEM_LOAD_ERROR:[I("error"),I("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[I("error"),I("removefile")],DID_PREPARE_OUTPUT:I("preparefile"),DID_START_ITEM_PROCESSING:I("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:I("processfileprogress"),DID_ABORT_ITEM_PROCESSING:I("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:I("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:I("processfiles"),DID_REVERT_ITEM_PROCESSING:I("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[I("error"),I("processfile")],DID_REMOVE_ITEM:I("removefile"),DID_UPDATE_ITEMS:I("updatefiles"),DID_ACTIVATE_ITEM:I("activatefile"),DID_REORDER_ITEMS:I("reorderfiles")},_=y=>{const S={pond:G,...y};delete S.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${y.type}`,{detail:S,bubbles:!0,cancelable:!0,composed:!0}));const v=[];y.hasOwnProperty("error")&&v.push(y.error),y.hasOwnProperty("file")&&v.push(y.file);const L=["type","error","file"];Object.keys(y).filter($=>!L.includes($)).forEach($=>v.push(y[$])),G.fire(y.type,...v);const F=n.query(`GET_ON${y.type.toUpperCase()}`);F&&F(...v)},p=y=>{y.length&&y.filter(S=>E[S.type]).forEach(S=>{const v=E[S.type];(Array.isArray(v)?v:[v]).forEach(L=>{S.type==="DID_INIT_ITEM"?_(L(S.data)):setTimeout(()=>{_(L(S.data))},0)})})},g=y=>n.dispatch("SET_OPTIONS",{options:y}),R=y=>n.query("GET_ACTIVE_ITEM",y),w=y=>new Promise((S,v)=>{n.dispatch("REQUEST_ITEM_PREPARE",{query:y,success:L=>{S(L)},failure:L=>{v(L)}})}),A=(y,S={})=>new Promise((v,L)=>{P([{source:y,options:S}],{index:S.index}).then(F=>v(F&&F[0])).catch(L)}),M=y=>y.file&&y.id,O=(y,S)=>(typeof y=="object"&&!M(y)&&!S&&(S=y,y=void 0),n.dispatch("REMOVE_ITEM",{...S,query:y}),n.query("GET_ACTIVE_ITEM",y)===null),P=(...y)=>new Promise((S,v)=>{const L=[],F={};if(Bt(y[0]))L.push.apply(L,y[0]),Object.assign(F,y[1]||{});else{const $=y[y.length-1];typeof $=="object"&&!($ instanceof Blob)&&Object.assign(F,y.pop()),L.push(...y)}n.dispatch("ADD_ITEMS",{items:L,index:F.index,interactionMethod:le.API,success:S,failure:v})}),N=()=>n.query("GET_ACTIVE_ITEMS"),b=y=>new Promise((S,v)=>{n.dispatch("REQUEST_ITEM_PROCESSING",{query:y,success:L=>{S(L)},failure:L=>{v(L)}})}),C=(...y)=>{const S=Array.isArray(y[0])?y[0]:y,v=S.length?S:N();return Promise.all(v.map(w))},B=(...y)=>{const S=Array.isArray(y[0])?y[0]:y;if(!S.length){const v=N().filter(L=>!(L.status===x.IDLE&&L.origin===j.LOCAL)&&L.status!==x.PROCESSING&&L.status!==x.PROCESSING_COMPLETE&&L.status!==x.PROCESSING_REVERT_ERROR);return Promise.all(v.map(b))}return Promise.all(S.map(b))},D=(...y)=>{const S=Array.isArray(y[0])?y[0]:y;let v;typeof S[S.length-1]=="object"?v=S.pop():Array.isArray(y[0])&&(v=y[1]);const L=N();return S.length?S.map($=>we($)?L[$]?L[$].id:null:$).filter($=>$).map($=>O($,v)):Promise.all(L.map($=>O($,v)))},G={...kt(),...d,...Yo(n,r),setOptions:g,addFile:A,addFiles:P,getFile:R,processFile:b,prepareFile:w,removeFile:O,moveFile:(y,S)=>n.dispatch("MOVE_ITEM",{query:y,index:S}),getFiles:N,processFiles:B,removeFiles:D,prepareFiles:C,sort:y=>n.dispatch("SORT",{compare:y}),browse:()=>{var y=f.element.querySelector("input[type=file]");y&&y.click()},destroy:()=>{G.fire("destroy",f.element),n.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",u),document.removeEventListener("visibilitychange",s),n.dispatch("DID_DESTROY")},insertBefore:y=>un(f.element,y),insertAfter:y=>fn(f.element,y),appendTo:y=>y.appendChild(f.element),replaceElement:y=>{un(f.element,y),y.parentNode.removeChild(y),t=y},restoreElement:()=>{t&&(fn(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:y=>f.element===y||t===y,element:{get:()=>f.element},status:{get:()=>n.query("GET_STATUS")}};return n.dispatch("DID_INIT"),ye(G)},ni=(e={})=>{const t={};return W(vt(),(n,s)=>{t[n]=s[0]}),Wc({...t,...e})},qc=e=>e.charAt(0).toLowerCase()+e.slice(1),Yc=e=>ti(e.replace(/^data-/,"")),si=(e,t)=>{W(t,(r,n)=>{W(e,(s,o)=>{const i=new RegExp(r);if(!i.test(s)||(delete e[s],n===!1))return;if(J(n)){e[n]=o;return}const a=n.group;Q(n)&&!e[a]&&(e[a]={}),e[a][qc(s.replace(i,""))]=o}),n.mapping&&si(e[n.group],n.mapping)})},zc=(e,t={})=>{const r=[];W(e.attributes,s=>{r.push(e.attributes[s])});const n=r.filter(s=>s.name).reduce((s,o)=>{const i=z(e,o.name);return s[Yc(o.name)]=i===o.name?!0:i,s},{});return si(n,t),n},Xc=(e,t={})=>{const r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Ce("SET_ATTRIBUTE_TO_OPTION_MAP",r);const n={...t},s=zc(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,r);Object.keys(s).forEach(i=>{Q(s[i])?(Q(n[i])||(n[i]={}),Object.assign(n[i],s[i])):n[i]=s[i]}),n.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(i=>({source:i.value,options:{type:i.dataset.type}})));const o=ni(n);return e.files&&Array.from(e.files).forEach(i=>{o.addFile(i)}),o.replaceElement(e),o},jc=(...e)=>so(e[0])?Xc(...e):ni(...e),Qc=["fire","_read","_write"],kn=e=>{const t={};return Ds(e,t,Qc),t},Kc=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(r,n)=>t[n]),Zc=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),n=new Worker(r);return{transfer:(s,o)=>{},post:(s,o,i)=>{const l=xr();n.onmessage=a=>{a.data.id===l&&o(a.data.message)},n.postMessage({id:l,message:s},i)},terminate:()=>{n.terminate(),URL.revokeObjectURL(r)}}},Jc=e=>new Promise((t,r)=>{const n=new Image;n.onload=()=>{t(n)},n.onerror=s=>{r(s)},n.src=e}),ii=(e,t)=>{const r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},eu=e=>ii(e,e.name),Hn=[],tu=e=>{if(Hn.includes(e))return;Hn.push(e);const t=e({addFilter:Jo,utils:{Type:T,forin:W,isString:J,isFile:Pe,toNaturalFileSize:Us,replaceInString:Kc,getExtensionFromFilename:Ht,getFilenameWithoutExtension:xs,guesstimateMimeType:js,getFileFromBlob:Be,getFilenameFromURL:nt,createRoute:ee,createWorker:Zc,createView:X,createItemAPI:re,loadImage:Jc,copyFile:eu,renameFile:ii,createBlob:vs,applyFilterChain:ue,text:Y,getNumericAspectRatioFromString:bs},views:{fileActionButton:Fs}});ea(t.options)},ru=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",nu=()=>"Promise"in window,su=()=>"slice"in Blob.prototype,iu=()=>"URL"in window&&"createObjectURL"in window.URL,ou=()=>"visibilityState"in document,au=()=>"performance"in window,lu=()=>"supports"in(window.CSS||{}),cu=()=>/MSIE|Trident/.test(window.navigator.userAgent),Wn=(()=>{const e=Ts()&&!ru()&&ou()&&nu()&&su()&&iu()&&au()&&(lu()||cu());return()=>e})(),Re={apps:[]},uu="filepond",Me=()=>{};let qn={},sr=Me,ir=Me,Yn=Me,zn=Me,Xn=Me,jn=Me,Qn=Me;if(Wn()){Mo(()=>{Re.apps.forEach(r=>r._read())},r=>{Re.apps.forEach(n=>n._write(r))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Wn,create:sr,destroy:ir,parse:Yn,find:zn,registerPlugin:Xn,setOptions:Qn}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>W(vt(),(r,n)=>{qn[r]=n[1]});qn={},t(),sr=(...r)=>{const n=jc(...r);return n.on("destroy",ir),Re.apps.push(n),kn(n)},ir=r=>{const n=Re.apps.findIndex(s=>s.isAttachedTo(r));return n>=0?(Re.apps.splice(n,1)[0].restoreElement(),!0):!1},Yn=r=>Array.from(r.querySelectorAll(`.${uu}`)).filter(o=>!Re.apps.find(i=>i.isAttachedTo(o))).map(o=>sr(o)),zn=r=>{const n=Re.apps.find(s=>s.isAttachedTo(r));return n?kn(n):null},Xn=(...r)=>{r.forEach(tu),t()},jn=()=>{const r={};return W(vt(),(n,s)=>{r[n]=s[0]}),r},Qn=r=>(Q(r)&&(Re.apps.forEach(n=>{n.setOptions(r)}),ta(r)),jn())}/*!
 * FilePondPluginPdfPreview 1.0.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */const Qe=e=>/pdf$/.test(e.type),fu=e=>e.utils.createView({name:"pdf-preview",tag:"div",ignoreRect:!0,create:({root:t,props:r})=>{const n=t.query("GET_ITEM",{id:r.id});if(Qe(n.file)){const s=t.query("GET_PDF_PREVIEW_HEIGHT");t.ref.pdf=document.createElement("object"),t.ref.pdf.setAttribute("height",s),t.ref.pdf.setAttribute("width","100%"),t.ref.pdf.setAttribute("style","position:absolute;left:0;right:0;margin:auto;padding-top:unset;"+(s?"height:"+s+"px;":"")),t.element.appendChild(t.ref.pdf)}},write:e.utils.createRoute({DID_PDF_PREVIEW_LOAD:({root:t,props:r})=>{const{id:n}=r,s=t.query("GET_ITEM",{id:n});if(!s)return;let o=window.URL||window.webkitURL,i=new Blob([s.file],{type:s.file.type});if(t.ref.pdf.type=s.file.type,Qe(s.file)){const l=t.query("GET_PDF_COMPONENT_EXTRA_PARAMS");t.ref.pdf.data=o.createObjectURL(i)+(l?"#?"+l:"")}t.ref.pdf.addEventListener("load",()=>{Qe(s.file)&&t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:n,height:t.ref.pdf.scrollHeight})},!1)}})}),du=e=>{const t=({root:n,props:s})=>{const{id:o}=s;n.query("GET_ITEM",o)&&n.dispatch("DID_PDF_PREVIEW_LOAD",{id:o})},r=({root:n,props:s})=>{const o=fu(e);n.ref.pdf=n.appendChildView(n.createChildView(o,{id:s.id}))};return e.utils.createView({name:"pdf-preview-wrapper",create:r,write:e.utils.createRoute({DID_PDF_PREVIEW_CONTAINER_CREATE:t})})},pu=e=>{const{addFilter:t,utils:r}=e,{Type:n,createRoute:s}=r,o=du(e);return t("CREATE_VIEW",i=>{const{is:l,view:a,query:c}=i;if(!l("file"))return;const u=({root:f,props:m})=>{const{id:h}=m,d=c("GET_ITEM",h);!d||d.archived||!Qe(d.file)||(f.ref.pdfPreview=a.appendChildView(a.createChildView(o,{id:h})),f.dispatch("DID_PDF_PREVIEW_CONTAINER_CREATE",{id:h}))};a.registerWriter(s({DID_LOAD_ITEM:u},({root:f,props:m})=>{const{id:h}=m,d=c("GET_ITEM",h);!Qe(d.file)||f.rect.element.hidden}))}),{options:{allowPdfPreview:[!0,n.BOOLEAN],pdfPreviewHeight:[320,n.INT],pdfComponentExtraParams:["toolbar=0&navpanes=0&scrollbar=0&statusbar=0&zoom=0&messages=0&view=fitH&page=1",n.STRING]}}},hu=typeof window<"u"&&typeof window.document<"u";hu&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:pu}));/*!
 * FilePondPluginFileValidateType 1.2.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const mu=({addFilter:e,utils:t})=>{const{Type:r,isString:n,replaceInString:s,guesstimateMimeType:o,getExtensionFromFilename:i,getFilenameFromURL:l}=t,a=(h,d)=>{const I=(/^[^/]+/.exec(h)||[]).pop(),E=d.slice(0,-2);return I===E},c=(h,d)=>h.some(I=>/\*$/.test(I)?a(d,I):I===d),u=h=>{let d="";if(n(h)){const I=l(h),E=i(I);E&&(d=o(E))}else d=h.type;return d},f=(h,d,I)=>{if(d.length===0)return!0;const E=u(h);return I?new Promise((_,p)=>{I(h,E).then(g=>{c(d,g)?_():p()}).catch(p)}):c(d,E)},m=h=>d=>h[d]===null?!1:h[d]||d;return e("SET_ATTRIBUTE_TO_OPTION_MAP",h=>Object.assign(h,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(h,{query:d})=>d("GET_ALLOW_FILE_TYPE_VALIDATION")?f(h,d("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(h,{query:d})=>new Promise((I,E)=>{if(!d("GET_ALLOW_FILE_TYPE_VALIDATION")){I(h);return}const _=d("GET_ACCEPTED_FILE_TYPES"),p=d("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),g=f(h,_,p),R=()=>{const w=_.map(m(d("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(M=>M!==!1),A=w.filter((M,O)=>w.indexOf(M)===O);E({status:{main:d("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:s(d("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:A.join(", "),allButLastType:A.slice(0,-1).join(", "),lastType:A[A.length-1]})}})};if(typeof g=="boolean")return g?I(h):R();g.then(()=>{I(h)}).catch(R)})),{options:{allowFileTypeValidation:[!0,r.BOOLEAN],acceptedFileTypes:[[],r.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",r.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",r.STRING],fileValidateTypeLabelExpectedTypesMap:[{},r.OBJECT],fileValidateTypeDetectType:[null,r.FUNCTION]}}},Eu=typeof window<"u"&&typeof window.document<"u";Eu&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:mu}));/*!
 * FilePondPluginImagePreview 4.6.12
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const gu=e=>/^image/.test(e.type),Kn=(e,t)=>Ze(e.x*t,e.y*t),Zn=(e,t)=>Ze(e.x+t.x,e.y+t.y),Iu=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:Ze(e.x/t,e.y/t)},gt=(e,t,r)=>{const n=Math.cos(t),s=Math.sin(t),o=Ze(e.x-r.x,e.y-r.y);return Ze(r.x+n*o.x-s*o.y,r.y+s*o.x+n*o.y)},Ze=(e=0,t=0)=>({x:e,y:t}),ne=(e,t,r=1,n)=>{if(typeof e=="string")return parseFloat(e)*r;if(typeof e=="number")return e*(n?t[n]:Math.min(t.width,t.height))},_u=(e,t,r)=>{const n=e.borderStyle||e.lineStyle||"solid",s=e.backgroundColor||e.fontColor||"transparent",o=e.borderColor||e.lineColor||"transparent",i=ne(e.borderWidth||e.lineWidth,t,r),l=e.lineCap||"round",a=e.lineJoin||"round",c=typeof n=="string"?"":n.map(f=>ne(f,t,r)).join(","),u=e.opacity||1;return{"stroke-linecap":l,"stroke-linejoin":a,"stroke-width":i||0,"stroke-dasharray":c,stroke:o,fill:s,opacity:u}},ae=e=>e!=null,Tu=(e,t,r=1)=>{let n=ne(e.x,t,r,"width")||ne(e.left,t,r,"width"),s=ne(e.y,t,r,"height")||ne(e.top,t,r,"height"),o=ne(e.width,t,r,"width"),i=ne(e.height,t,r,"height"),l=ne(e.right,t,r,"width"),a=ne(e.bottom,t,r,"height");return ae(s)||(ae(i)&&ae(a)?s=t.height-i-a:s=a),ae(n)||(ae(o)&&ae(l)?n=t.width-o-l:n=l),ae(o)||(ae(n)&&ae(l)?o=t.width-n-l:o=0),ae(i)||(ae(s)&&ae(a)?i=t.height-s-a:i=0),{x:n||0,y:s||0,width:o||0,height:i||0}},Ru=e=>e.map((t,r)=>`${r===0?"M":"L"} ${t.x} ${t.y}`).join(" "),Ee=(e,t)=>Object.keys(t).forEach(r=>e.setAttribute(r,t[r])),yu="http://www.w3.org/2000/svg",Fe=(e,t)=>{const r=document.createElementNS(yu,e);return t&&Ee(r,t),r},wu=e=>Ee(e,{...e.rect,...e.styles}),Ou=e=>{const t=e.rect.x+e.rect.width*.5,r=e.rect.y+e.rect.height*.5,n=e.rect.width*.5,s=e.rect.height*.5;return Ee(e,{cx:t,cy:r,rx:n,ry:s,...e.styles})},Su={contain:"xMidYMid meet",cover:"xMidYMid slice"},Du=(e,t)=>{Ee(e,{...e.rect,...e.styles,preserveAspectRatio:Su[t.fit]||"none"})},Au={left:"start",center:"middle",right:"end"},Pu=(e,t,r,n)=>{const s=ne(t.fontSize,r,n),o=t.fontFamily||"sans-serif",i=t.fontWeight||"normal",l=Au[t.textAlign]||"start";Ee(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":i,"font-size":s,"font-family":o,"text-anchor":l}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},bu=(e,t,r,n)=>{Ee(e,{...e.rect,...e.styles,fill:"none"});const s=e.childNodes[0],o=e.childNodes[1],i=e.childNodes[2],l=e.rect,a={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(Ee(s,{x1:l.x,y1:l.y,x2:a.x,y2:a.y}),!t.lineDecoration)return;o.style.display="none",i.style.display="none";const c=Iu({x:a.x-l.x,y:a.y-l.y}),u=ne(.05,r,n);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const f=Kn(c,u),m=Zn(l,f),h=gt(l,2,m),d=gt(l,-2,m);Ee(o,{style:"display:block;",d:`M${h.x},${h.y} L${l.x},${l.y} L${d.x},${d.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const f=Kn(c,-u),m=Zn(a,f),h=gt(a,2,m),d=gt(a,-2,m);Ee(i,{style:"display:block;",d:`M${h.x},${h.y} L${a.x},${a.y} L${d.x},${d.y}`})}},Cu=(e,t,r,n)=>{Ee(e,{...e.styles,fill:"none",d:Ru(t.points.map(s=>({x:ne(s.x,r,n,"width"),y:ne(s.y,r,n,"height")})))})},It=e=>t=>Fe(e,{id:t.id}),Mu=e=>{const t=Fe("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},vu=e=>{const t=Fe("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),r=Fe("line");t.appendChild(r);const n=Fe("path");t.appendChild(n);const s=Fe("path");return t.appendChild(s),t},Lu={image:Mu,rect:It("rect"),ellipse:It("ellipse"),text:It("text"),path:It("path"),line:vu},Nu={rect:wu,ellipse:Ou,image:Du,text:Pu,path:Cu,line:bu},xu=(e,t)=>Lu[e](t),Gu=(e,t,r,n,s)=>{t!=="path"&&(e.rect=Tu(r,n,s)),e.styles=_u(r,n,s),Nu[t](e,r,n,s)},Fu=["x","y","left","top","right","bottom","width","height"],Uu=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,Bu=e=>{const[t,r]=e,n=r.points?{}:Fu.reduce((s,o)=>(s[o]=Uu(r[o]),s),{});return[t,{zIndex:0,...r,...n}]},Vu=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,$u=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:r})=>{if(!r.dirty)return;const{crop:n,resize:s,markup:o}=r,i=r.width,l=r.height;let a=n.width,c=n.height;if(s){const{size:h}=s;let d=h&&h.width,I=h&&h.height;const E=s.mode,_=s.upscale;d&&!I&&(I=d),I&&!d&&(d=I);const p=a<d&&c<I;if(!p||p&&_){let g=d/a,R=I/c;if(E==="force")a=d,c=I;else{let w;E==="cover"?w=Math.max(g,R):E==="contain"&&(w=Math.min(g,R)),a=a*w,c=c*w}}}const u={width:i,height:l};t.element.setAttribute("width",u.width),t.element.setAttribute("height",u.height);const f=Math.min(i/a,l/c);t.element.innerHTML="";const m=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(m).map(Bu).sort(Vu).forEach(h=>{const[d,I]=h,E=xu(d,I);Gu(E,d,I,u,f),t.element.appendChild(E)})}}),Ke=(e,t)=>({x:e,y:t}),ku=(e,t)=>e.x*t.x+e.y*t.y,Jn=(e,t)=>Ke(e.x-t.x,e.y-t.y),Hu=(e,t)=>ku(Jn(e,t),Jn(e,t)),es=(e,t)=>Math.sqrt(Hu(e,t)),ts=(e,t)=>{const r=e,n=1.5707963267948966,s=t,o=1.5707963267948966-t,i=Math.sin(n),l=Math.sin(s),a=Math.sin(o),c=Math.cos(o),u=r/i,f=u*l,m=u*a;return Ke(c*f,c*m)},Wu=(e,t)=>{const r=e.width,n=e.height,s=ts(r,t),o=ts(n,t),i=Ke(e.x+Math.abs(s.x),e.y-Math.abs(s.y)),l=Ke(e.x+e.width+Math.abs(o.y),e.y+Math.abs(o.x)),a=Ke(e.x-Math.abs(o.y),e.y+e.height-Math.abs(o.x));return{width:es(i,l),height:es(i,a)}},qu=(e,t,r=1)=>{const n=e.height/e.width;let s=1,o=t,i=1,l=n;l>o&&(l=o,i=l/n);const a=Math.max(s/i,o/l),c=e.width/(r*a*i),u=c*t;return{width:c,height:u}},oi=(e,t,r,n)=>{const s=n.x>.5?1-n.x:n.x,o=n.y>.5?1-n.y:n.y,i=s*2*e.width,l=o*2*e.height,a=Wu(t,r);return Math.max(a.width/i,a.height/l)},ai=(e,t)=>{let r=e.width,n=r*t;n>e.height&&(n=e.height,r=n/t);const s=(e.width-r)*.5,o=(e.height-n)*.5;return{x:s,y:o,width:r,height:n}},Yu=(e,t={})=>{let{zoom:r,rotation:n,center:s,aspectRatio:o}=t;o||(o=e.height/e.width);const i=qu(e,o,r),l={x:i.width*.5,y:i.height*.5},a={x:0,y:0,width:i.width,height:i.height,center:l},c=typeof t.scaleToFit>"u"||t.scaleToFit,u=oi(e,ai(a,o),n,c?s:{x:.5,y:.5}),f=r*u;return{widthFloat:i.width/f,heightFloat:i.height/f,width:Math.round(i.width/f),height:Math.round(i.height/f)}},me={type:"spring",stiffness:.5,damping:.45,mass:10},zu=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:r})=>{t.appendChild(r.image)}}),Xu=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:me,originY:me,scaleX:me,scaleY:me,translateX:me,translateY:me,rotateZ:me}},create:({root:t,props:r})=>{r.width=r.image.width,r.height=r.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(zu(e),{image:r.image}))},write:({root:t,props:r})=>{const{flip:n}=r.crop,{bitmap:s}=t.ref;s.scaleX=n.horizontal?-1:1,s.scaleY=n.vertical?-1:1}}),ju=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:r}){r.background&&(t.element.style.backgroundColor=r.background)},create:({root:t,props:r})=>{t.ref.image=t.appendChildView(t.createChildView(Xu(e),Object.assign({},r))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView($u(e),Object.assign({},r))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const n=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");n!==null&&(n==="grid"?t.element.dataset.transparencyIndicator=n:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:r,shouldOptimize:n})=>{const{crop:s,markup:o,resize:i,dirty:l,width:a,height:c}=r;t.ref.image.crop=s;const u={x:0,y:0,width:a,height:c,center:{x:a*.5,y:c*.5}},f={width:t.ref.image.width,height:t.ref.image.height},m={x:s.center.x*f.width,y:s.center.y*f.height},h={x:u.center.x-f.width*s.center.x,y:u.center.y-f.height*s.center.y},d=Math.PI*2+s.rotation%(Math.PI*2),I=s.aspectRatio||f.height/f.width,E=typeof s.scaleToFit>"u"||s.scaleToFit,_=oi(f,ai(u,I),d,E?s.center:{x:.5,y:.5}),p=s.zoom*_;o&&o.length?(t.ref.createMarkup(),t.ref.markup.width=a,t.ref.markup.height=c,t.ref.markup.resize=i,t.ref.markup.dirty=l,t.ref.markup.markup=o,t.ref.markup.crop=Yu(f,s)):t.ref.markup&&t.ref.destroyMarkup();const g=t.ref.image;if(n){g.originX=null,g.originY=null,g.translateX=null,g.translateY=null,g.rotateZ=null,g.scaleX=null,g.scaleY=null;return}g.originX=m.x,g.originY=m.y,g.translateX=h.x,g.translateY=h.y,g.rotateZ=d,g.scaleX=p,g.scaleY=p}}),Qu=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:me,scaleY:me,translateY:me,opacity:{type:"tween",duration:400}}},create:({root:t,props:r})=>{t.ref.clip=t.appendChildView(t.createChildView(ju(e),{id:r.id,image:r.image,crop:r.crop,markup:r.markup,resize:r.resize,dirty:r.dirty,background:r.background}))},write:({root:t,props:r,shouldOptimize:n})=>{const{clip:s}=t.ref,{image:o,crop:i,markup:l,resize:a,dirty:c}=r;if(s.crop=i,s.markup=l,s.resize=a,s.dirty=c,s.opacity=n?0:1,n||t.rect.element.hidden)return;const u=o.height/o.width;let f=i.aspectRatio||u;const m=t.rect.inner.width,h=t.rect.inner.height;let d=t.query("GET_IMAGE_PREVIEW_HEIGHT");const I=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),E=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),_=t.query("GET_PANEL_ASPECT_RATIO"),p=t.query("GET_ALLOW_MULTIPLE");_&&!p&&(d=m*_,f=_);let g=d!==null?d:Math.max(I,Math.min(m*f,E)),R=g/f;R>m&&(R=m,g=R*f),g>h&&(g=h,R=h/f),s.width=R,s.height=g}});let Ku=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,rs=0;const Zu=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:r})=>{let n=Ku;if(document.querySelector("base")){const s=new URL(window.location.href.replace(window.location.hash,"")).href;n=n.replace(/url\(\#/g,"url("+s+"#")}rs++,t.element.classList.add(`filepond--image-preview-overlay-${r.status}`),t.element.innerHTML=n.replace(/__UID__/g,rs)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),Ju=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},ef=function(){self.onmessage=e=>{const t=e.data.message.imageData,r=e.data.message.colorMatrix,n=t.data,s=n.length,o=r[0],i=r[1],l=r[2],a=r[3],c=r[4],u=r[5],f=r[6],m=r[7],h=r[8],d=r[9],I=r[10],E=r[11],_=r[12],p=r[13],g=r[14],R=r[15],w=r[16],A=r[17],M=r[18],O=r[19];let P=0,N=0,b=0,C=0,B=0;for(;P<s;P+=4)N=n[P]/255,b=n[P+1]/255,C=n[P+2]/255,B=n[P+3]/255,n[P]=Math.max(0,Math.min((N*o+b*i+C*l+B*a+c)*255,255)),n[P+1]=Math.max(0,Math.min((N*u+b*f+C*m+B*h+d)*255,255)),n[P+2]=Math.max(0,Math.min((N*I+b*E+C*_+B*p+g)*255,255)),n[P+3]=Math.max(0,Math.min((N*R+b*w+C*A+B*M+O)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},tf=(e,t)=>{let r=new Image;r.onload=()=>{const n=r.naturalWidth,s=r.naturalHeight;r=null,t(n,s)},r.src=e},rf={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},nf=(e,t,r,n)=>{n!==-1&&e.transform.apply(e,rf[n](t,r))},sf=(e,t,r,n)=>{t=Math.round(t),r=Math.round(r);const s=document.createElement("canvas");s.width=t,s.height=r;const o=s.getContext("2d");return n>=5&&n<=8&&([t,r]=[r,t]),nf(o,t,r,n),o.drawImage(e,0,0,t,r),s},li=e=>/^image/.test(e.type)&&!/svg/.test(e.type),of=10,af=10,lf=e=>{const t=Math.min(of/e.width,af/e.height),r=document.createElement("canvas"),n=r.getContext("2d"),s=r.width=Math.ceil(e.width*t),o=r.height=Math.ceil(e.height*t);n.drawImage(e,0,0,s,o);let i=null;try{i=n.getImageData(0,0,s,o).data}catch{return null}const l=i.length;let a=0,c=0,u=0,f=0;for(;f<l;f+=4)a+=i[f]*i[f],c+=i[f+1]*i[f+1],u+=i[f+2]*i[f+2];return a=or(a,l),c=or(c,l),u=or(u,l),{r:a,g:c,b:u}},or=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),cf=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),uf=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},ff=e=>new Promise((t,r)=>{const n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{t(n)},n.onerror=s=>{r(s)},n.src=e}),df=e=>{const t=Zu(e),r=Qu(e),{createWorker:n}=e.utils,s=(p,g,R)=>new Promise(w=>{p.ref.imageData||(p.ref.imageData=R.getContext("2d").getImageData(0,0,R.width,R.height));const A=uf(p.ref.imageData);if(!g||g.length!==20)return R.getContext("2d").putImageData(A,0,0),w();const M=n(ef);M.post({imageData:A,colorMatrix:g},O=>{R.getContext("2d").putImageData(O,0,0),M.terminate(),w()},[A.data.buffer])}),o=(p,g)=>{p.removeChildView(g),g.image.width=1,g.image.height=1,g._destroy()},i=({root:p})=>{const g=p.ref.images.shift();return g.opacity=0,g.translateY=-15,p.ref.imageViewBin.push(g),g},l=({root:p,props:g,image:R})=>{const w=g.id,A=p.query("GET_ITEM",{id:w});if(!A)return;const M=A.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},O=p.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let P,N,b=!1;p.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(P=A.getMetadata("markup")||[],N=A.getMetadata("resize"),b=!0);const C=p.appendChildView(p.createChildView(r,{id:w,image:R,crop:M,resize:N,markup:P,dirty:b,background:O,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),p.childViews.length);p.ref.images.push(C),C.opacity=1,C.scaleX=1,C.scaleY=1,C.translateY=0,setTimeout(()=>{p.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:w})},250)},a=({root:p,props:g})=>{const R=p.query("GET_ITEM",{id:g.id});if(!R)return;const w=p.ref.images[p.ref.images.length-1];w.crop=R.getMetadata("crop"),w.background=p.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),p.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(w.dirty=!0,w.resize=R.getMetadata("resize"),w.markup=R.getMetadata("markup"))},c=({root:p,props:g,action:R})=>{if(!/crop|filter|markup|resize/.test(R.change.key)||!p.ref.images.length)return;const w=p.query("GET_ITEM",{id:g.id});if(w){if(/filter/.test(R.change.key)){const A=p.ref.images[p.ref.images.length-1];s(p,R.change.value,A.image);return}if(/crop|markup|resize/.test(R.change.key)){const A=w.getMetadata("crop"),M=p.ref.images[p.ref.images.length-1];if(A&&A.aspectRatio&&M.crop&&M.crop.aspectRatio&&Math.abs(A.aspectRatio-M.crop.aspectRatio)>1e-5){const O=i({root:p});l({root:p,props:g,image:cf(O.image)})}else a({root:p,props:g})}}},u=p=>{const R=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),w=R?parseInt(R[1]):null;return w!==null&&w<=58?!1:"createImageBitmap"in window&&li(p)},f=({root:p,props:g})=>{const{id:R}=g,w=p.query("GET_ITEM",R);if(!w)return;const A=URL.createObjectURL(w.file);tf(A,(M,O)=>{p.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:R,width:M,height:O})})},m=({root:p,props:g})=>{const{id:R}=g,w=p.query("GET_ITEM",R);if(!w)return;const A=URL.createObjectURL(w.file),M=()=>{ff(A).then(O)},O=P=>{URL.revokeObjectURL(A);const b=(w.getMetadata("exif")||{}).orientation||-1;let{width:C,height:B}=P;if(!C||!B)return;b>=5&&b<=8&&([C,B]=[B,C]);const D=Math.max(1,window.devicePixelRatio*.75),y=p.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*D,S=B/C,v=p.rect.element.width,L=p.rect.element.height;let F=v,$=F*S;S>1?(F=Math.min(C,v*y),$=F*S):($=Math.min(B,L*y),F=$/S);const Le=sf(P,F,$,b),ot=()=>{const Kt=p.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?lf(data):null;w.setMetadata("color",Kt,!0),"close"in P&&P.close(),p.ref.overlayShadow.opacity=1,l({root:p,props:g,image:Le})},ce=w.getMetadata("filter");ce?s(p,ce,Le).then(ot):ot()};if(u(w.file)){const P=n(Ju);P.post({file:w.file},N=>{if(P.terminate(),!N){M();return}O(N)})}else M()},h=({root:p})=>{const g=p.ref.images[p.ref.images.length-1];g.translateY=0,g.scaleX=1,g.scaleY=1,g.opacity=1},d=({root:p})=>{p.ref.overlayShadow.opacity=1,p.ref.overlayError.opacity=0,p.ref.overlaySuccess.opacity=0},I=({root:p})=>{p.ref.overlayShadow.opacity=.25,p.ref.overlayError.opacity=1},E=({root:p})=>{p.ref.overlayShadow.opacity=.25,p.ref.overlaySuccess.opacity=1},_=({root:p})=>{p.ref.images=[],p.ref.imageData=null,p.ref.imageViewBin=[],p.ref.overlayShadow=p.appendChildView(p.createChildView(t,{opacity:0,status:"idle"})),p.ref.overlaySuccess=p.appendChildView(p.createChildView(t,{opacity:0,status:"success"})),p.ref.overlayError=p.appendChildView(p.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:_,styles:["height"],apis:["height"],destroy:({root:p})=>{p.ref.images.forEach(g=>{g.image.width=1,g.image.height=1})},didWriteView:({root:p})=>{p.ref.images.forEach(g=>{g.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:h,DID_IMAGE_PREVIEW_CONTAINER_CREATE:f,DID_FINISH_CALCULATE_PREVIEWSIZE:m,DID_UPDATE_ITEM_METADATA:c,DID_THROW_ITEM_LOAD_ERROR:I,DID_THROW_ITEM_PROCESSING_ERROR:I,DID_THROW_ITEM_INVALID:I,DID_COMPLETE_ITEM_PROCESSING:E,DID_START_ITEM_PROCESSING:d,DID_REVERT_ITEM_PROCESSING:d},({root:p})=>{const g=p.ref.imageViewBin.filter(R=>R.opacity===0);p.ref.imageViewBin=p.ref.imageViewBin.filter(R=>R.opacity>0),g.forEach(R=>o(p,R)),g.length=0})})},pf=e=>{const{addFilter:t,utils:r}=e,{Type:n,createRoute:s,isFile:o}=r,i=df(e);return t("CREATE_VIEW",l=>{const{is:a,view:c,query:u}=l;if(!a("file")||!u("GET_ALLOW_IMAGE_PREVIEW"))return;const f=({root:E,props:_})=>{const{id:p}=_,g=u("GET_ITEM",p);if(!g||!o(g.file)||g.archived)return;const R=g.file;if(!gu(R)||!u("GET_IMAGE_PREVIEW_FILTER_ITEM")(g))return;const w="createImageBitmap"in(window||{}),A=u("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!w&&A&&R.size>A)return;E.ref.imagePreview=c.appendChildView(c.createChildView(i,{id:p}));const M=E.query("GET_IMAGE_PREVIEW_HEIGHT");M&&E.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:g.id,height:M});const O=!w&&R.size>u("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");E.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:p},O)},m=(E,_)=>{if(!E.ref.imagePreview)return;let{id:p}=_;const g=E.query("GET_ITEM",{id:p});if(!g)return;const R=E.query("GET_PANEL_ASPECT_RATIO"),w=E.query("GET_ITEM_PANEL_ASPECT_RATIO"),A=E.query("GET_IMAGE_PREVIEW_HEIGHT");if(R||w||A)return;let{imageWidth:M,imageHeight:O}=E.ref;if(!M||!O)return;const P=E.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),N=E.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),C=(g.getMetadata("exif")||{}).orientation||-1;if(C>=5&&C<=8&&([M,O]=[O,M]),!li(g.file)||E.query("GET_IMAGE_PREVIEW_UPSCALE")){const v=2048/M;M*=v,O*=v}const B=O/M,D=(g.getMetadata("crop")||{}).aspectRatio||B;let G=Math.max(P,Math.min(O,N));const y=E.rect.element.width,S=Math.min(y*D,G);E.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:g.id,height:S})},h=({root:E})=>{E.ref.shouldRescale=!0},d=({root:E,action:_})=>{_.change.key==="crop"&&(E.ref.shouldRescale=!0)},I=({root:E,action:_})=>{E.ref.imageWidth=_.width,E.ref.imageHeight=_.height,E.ref.shouldRescale=!0,E.ref.shouldDrawPreview=!0,E.dispatch("KICK")};c.registerWriter(s({DID_RESIZE_ROOT:h,DID_STOP_RESIZE:h,DID_LOAD_ITEM:f,DID_IMAGE_PREVIEW_CALCULATE_SIZE:I,DID_UPDATE_ITEM_METADATA:d},({root:E,props:_})=>{E.ref.imagePreview&&(E.rect.element.hidden||(E.ref.shouldRescale&&(m(E,_),E.ref.shouldRescale=!1),E.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{E.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:_.id})})}),E.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,n.BOOLEAN],imagePreviewFilterItem:[()=>!0,n.FUNCTION],imagePreviewHeight:[null,n.INT],imagePreviewMinHeight:[44,n.INT],imagePreviewMaxHeight:[256,n.INT],imagePreviewMaxFileSize:[null,n.INT],imagePreviewZoomFactor:[2,n.INT],imagePreviewUpscale:[!1,n.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,n.INT],imagePreviewTransparencyIndicator:[null,n.STRING],imagePreviewCalculateAverageImageColor:[!1,n.BOOLEAN],imagePreviewMarkupShow:[!0,n.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,n.FUNCTION]}}},hf=typeof window<"u"&&typeof window.document<"u";hf&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:pf}));var zr={exports:{}},k=String,ci=function(){return{isColorSupported:!1,reset:k,bold:k,dim:k,italic:k,underline:k,inverse:k,hidden:k,strikethrough:k,black:k,red:k,green:k,yellow:k,blue:k,magenta:k,cyan:k,white:k,gray:k,bgBlack:k,bgRed:k,bgGreen:k,bgYellow:k,bgBlue:k,bgMagenta:k,bgCyan:k,bgWhite:k}};zr.exports=ci();zr.exports.createColors=ci;var mf=zr.exports;let ns=mf,ss=pe,_r=class ui extends Error{constructor(t,r,n,s,o,i){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),s&&(this.source=s),i&&(this.plugin=i),typeof r<"u"&&typeof n<"u"&&(typeof r=="number"?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,ui)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(t){if(!this.source)return"";let r=this.source;t==null&&(t=ns.isColorSupported),ss&&t&&(r=ss(r));let n=r.split(/\r?\n/),s=Math.max(this.line-3,0),o=Math.min(this.line+2,n.length),i=String(o).length,l,a;if(t){let{bold:c,gray:u,red:f}=ns.createColors(!0);l=m=>c(f(m)),a=m=>u(m)}else l=a=c=>c;return n.slice(s,o).map((c,u)=>{let f=s+1+u,m=" "+(" "+f).slice(-i)+" | ";if(f===this.line){let h=a(m.replace(/\d/g," "))+c.slice(0,this.column-1).replace(/[^\t]/g," ");return l(">")+a(m)+c+`
 `+h+l("^")}return" "+a(m)+c}).join(`
`)}toString(){let t=this.showSourceCode();return t&&(t=`

`+t+`
`),this.name+": "+this.message+t}};var Xr=_r;_r.default=_r;var st={};st.isClean=Symbol("isClean");st.my=Symbol("my");const is={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function Ef(e){return e[0].toUpperCase()+e.slice(1)}let Tr=class{constructor(t){this.builder=t}atrule(t,r){let n="@"+t.name,s=t.params?this.rawValue(t,"params"):"";if(typeof t.raws.afterName<"u"?n+=t.raws.afterName:s&&(n+=" "),t.nodes)this.block(t,n+s);else{let o=(t.raws.between||"")+(r?";":"");this.builder(n+s+o,t)}}beforeAfter(t,r){let n;t.type==="decl"?n=this.raw(t,null,"beforeDecl"):t.type==="comment"?n=this.raw(t,null,"beforeComment"):r==="before"?n=this.raw(t,null,"beforeRule"):n=this.raw(t,null,"beforeClose");let s=t.parent,o=0;for(;s&&s.type!=="root";)o+=1,s=s.parent;if(n.includes(`
`)){let i=this.raw(t,null,"indent");if(i.length)for(let l=0;l<o;l++)n+=i}return n}block(t,r){let n=this.raw(t,"between","beforeOpen");this.builder(r+n+"{",t,"start");let s;t.nodes&&t.nodes.length?(this.body(t),s=this.raw(t,"after")):s=this.raw(t,"after","emptyBody"),s&&this.builder(s),this.builder("}",t,"end")}body(t){let r=t.nodes.length-1;for(;r>0&&t.nodes[r].type==="comment";)r-=1;let n=this.raw(t,"semicolon");for(let s=0;s<t.nodes.length;s++){let o=t.nodes[s],i=this.raw(o,"before");i&&this.builder(i),this.stringify(o,r!==s||n)}}comment(t){let r=this.raw(t,"left","commentLeft"),n=this.raw(t,"right","commentRight");this.builder("/*"+r+t.text+n+"*/",t)}decl(t,r){let n=this.raw(t,"between","colon"),s=t.prop+n+this.rawValue(t,"value");t.important&&(s+=t.raws.important||" !important"),r&&(s+=";"),this.builder(s,t)}document(t){this.body(t)}raw(t,r,n){let s;if(n||(n=r),r&&(s=t.raws[r],typeof s<"u"))return s;let o=t.parent;if(n==="before"&&(!o||o.type==="root"&&o.first===t||o&&o.type==="document"))return"";if(!o)return is[n];let i=t.root();if(i.rawCache||(i.rawCache={}),typeof i.rawCache[n]<"u")return i.rawCache[n];if(n==="before"||n==="after")return this.beforeAfter(t,n);{let l="raw"+Ef(n);this[l]?s=this[l](i,t):i.walk(a=>{if(s=a.raws[r],typeof s<"u")return!1})}return typeof s>"u"&&(s=is[n]),i.rawCache[n]=s,s}rawBeforeClose(t){let r;return t.walk(n=>{if(n.nodes&&n.nodes.length>0&&typeof n.raws.after<"u")return r=n.raws.after,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),r&&(r=r.replace(/\S/g,"")),r}rawBeforeComment(t,r){let n;return t.walkComments(s=>{if(typeof s.raws.before<"u")return n=s.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n>"u"?n=this.raw(r,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(t,r){let n;return t.walkDecls(s=>{if(typeof s.raws.before<"u")return n=s.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n>"u"?n=this.raw(r,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(t){let r;return t.walk(n=>{if(n.type!=="decl"&&(r=n.raws.between,typeof r<"u"))return!1}),r}rawBeforeRule(t){let r;return t.walk(n=>{if(n.nodes&&(n.parent!==t||t.first!==n)&&typeof n.raws.before<"u")return r=n.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),r&&(r=r.replace(/\S/g,"")),r}rawColon(t){let r;return t.walkDecls(n=>{if(typeof n.raws.between<"u")return r=n.raws.between.replace(/[^\s:]/g,""),!1}),r}rawEmptyBody(t){let r;return t.walk(n=>{if(n.nodes&&n.nodes.length===0&&(r=n.raws.after,typeof r<"u"))return!1}),r}rawIndent(t){if(t.raws.indent)return t.raws.indent;let r;return t.walk(n=>{let s=n.parent;if(s&&s!==t&&s.parent&&s.parent===t&&typeof n.raws.before<"u"){let o=n.raws.before.split(`
`);return r=o[o.length-1],r=r.replace(/\S/g,""),!1}}),r}rawSemicolon(t){let r;return t.walk(n=>{if(n.nodes&&n.nodes.length&&n.last.type==="decl"&&(r=n.raws.semicolon,typeof r<"u"))return!1}),r}rawValue(t,r){let n=t[r],s=t.raws[r];return s&&s.value===n?s.raw:n}root(t){this.body(t),t.raws.after&&this.builder(t.raws.after)}rule(t){this.block(t,this.rawValue(t,"selector")),t.raws.ownSemicolon&&this.builder(t.raws.ownSemicolon,t,"end")}stringify(t,r){if(!this[t.type])throw new Error("Unknown AST node type "+t.type+". Maybe you need to change PostCSS stringifier.");this[t.type](t,r)}};var fi=Tr;Tr.default=Tr;let gf=fi;function Rr(e,t){new gf(t).stringify(e)}var Yt=Rr;Rr.default=Rr;let{isClean:_t,my:If}=st,_f=Xr,Tf=fi,Rf=Yt;function yr(e,t){let r=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n)||n==="proxyCache")continue;let s=e[n],o=typeof s;n==="parent"&&o==="object"?t&&(r[n]=t):n==="source"?r[n]=s:Array.isArray(s)?r[n]=s.map(i=>yr(i,r)):(o==="object"&&s!==null&&(s=yr(s)),r[n]=s)}return r}let wr=class{constructor(t={}){this.raws={},this[_t]=!1,this[If]=!0;for(let r in t)if(r==="nodes"){this.nodes=[];for(let n of t[r])typeof n.clone=="function"?this.append(n.clone()):this.append(n)}else this[r]=t[r]}addToError(t){if(t.postcssNode=this,t.stack&&this.source&&/\n\s{4}at /.test(t.stack)){let r=this.source;t.stack=t.stack.replace(/\n\s{4}at /,`$&${r.input.from}:${r.start.line}:${r.start.column}$&`)}return t}after(t){return this.parent.insertAfter(this,t),this}assign(t={}){for(let r in t)this[r]=t[r];return this}before(t){return this.parent.insertBefore(this,t),this}cleanRaws(t){delete this.raws.before,delete this.raws.after,t||delete this.raws.between}clone(t={}){let r=yr(this);for(let n in t)r[n]=t[n];return r}cloneAfter(t={}){let r=this.clone(t);return this.parent.insertAfter(this,r),r}cloneBefore(t={}){let r=this.clone(t);return this.parent.insertBefore(this,r),r}error(t,r={}){if(this.source){let{end:n,start:s}=this.rangeBy(r);return this.source.input.error(t,{column:s.column,line:s.line},{column:n.column,line:n.line},r)}return new _f(t)}getProxyProcessor(){return{get(t,r){return r==="proxyOf"?t:r==="root"?()=>t.root().toProxy():t[r]},set(t,r,n){return t[r]===n||(t[r]=n,(r==="prop"||r==="value"||r==="name"||r==="params"||r==="important"||r==="text")&&t.markDirty()),!0}}}markDirty(){if(this[_t]){this[_t]=!1;let t=this;for(;t=t.parent;)t[_t]=!1}}next(){if(!this.parent)return;let t=this.parent.index(this);return this.parent.nodes[t+1]}positionBy(t,r){let n=this.source.start;if(t.index)n=this.positionInside(t.index,r);else if(t.word){r=this.toString();let s=r.indexOf(t.word);s!==-1&&(n=this.positionInside(s,r))}return n}positionInside(t,r){let n=r||this.toString(),s=this.source.start.column,o=this.source.start.line;for(let i=0;i<t;i++)n[i]===`
`?(s=1,o+=1):s+=1;return{column:s,line:o}}prev(){if(!this.parent)return;let t=this.parent.index(this);return this.parent.nodes[t-1]}rangeBy(t){let r={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:r.column+1,line:r.line};if(t.word){let s=this.toString(),o=s.indexOf(t.word);o!==-1&&(r=this.positionInside(o,s),n=this.positionInside(o+t.word.length,s))}else t.start?r={column:t.start.column,line:t.start.line}:t.index&&(r=this.positionInside(t.index)),t.end?n={column:t.end.column,line:t.end.line}:typeof t.endIndex=="number"?n=this.positionInside(t.endIndex):t.index&&(n=this.positionInside(t.index+1));return(n.line<r.line||n.line===r.line&&n.column<=r.column)&&(n={column:r.column+1,line:r.line}),{end:n,start:r}}raw(t,r){return new Tf().raw(this,t,r)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...t){if(this.parent){let r=this,n=!1;for(let s of t)s===this?n=!0:n?(this.parent.insertAfter(r,s),r=s):this.parent.insertBefore(r,s);n||this.remove()}return this}root(){let t=this;for(;t.parent&&t.parent.type!=="document";)t=t.parent;return t}toJSON(t,r){let n={},s=r==null;r=r||new Map;let o=0;for(let i in this){if(!Object.prototype.hasOwnProperty.call(this,i)||i==="parent"||i==="proxyCache")continue;let l=this[i];if(Array.isArray(l))n[i]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,r):a);else if(typeof l=="object"&&l.toJSON)n[i]=l.toJSON(null,r);else if(i==="source"){let a=r.get(l.input);a==null&&(a=o,r.set(l.input,o),o++),n[i]={end:l.end,inputId:a,start:l.start}}else n[i]=l}return s&&(n.inputs=[...r.keys()].map(i=>i.toJSON())),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(t=Rf){t.stringify&&(t=t.stringify);let r="";return t(this,n=>{r+=n}),r}warn(t,r,n){let s={node:this};for(let o in n)s[o]=n[o];return t.warn(r,s)}get proxyOf(){return this}};var zt=wr;wr.default=wr;let yf=zt,Or=class extends yf{constructor(t){t&&typeof t.value<"u"&&typeof t.value!="string"&&(t={...t,value:String(t.value)}),super(t),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var Xt=Or;Or.default=Or;let wf="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Of=(e,t=21)=>(r=t)=>{let n="",s=r;for(;s--;)n+=e[Math.random()*e.length|0];return n},Sf=(e=21)=>{let t="",r=e;for(;r--;)t+=wf[Math.random()*64|0];return t};var Df={nanoid:Sf,customAlphabet:Of};let{SourceMapConsumer:os,SourceMapGenerator:as}=pe,{existsSync:Af,readFileSync:Pf}=pe,{dirname:ar,join:bf}=pe;function Cf(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}let Sr=class{constructor(t,r){if(r.map===!1)return;this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:");let n=r.map?r.map.prev:void 0,s=this.loadMap(r.from,n);!this.mapFile&&r.from&&(this.mapFile=r.from),this.mapFile&&(this.root=ar(this.mapFile)),s&&(this.text=s)}consumer(){return this.consumerCache||(this.consumerCache=new os(this.text)),this.consumerCache}decodeInline(t){let r=/^data:application\/json;charset=utf-?8;base64,/,n=/^data:application\/json;base64,/,s=/^data:application\/json;charset=utf-?8,/,o=/^data:application\/json,/;if(s.test(t)||o.test(t))return decodeURIComponent(t.substr(RegExp.lastMatch.length));if(r.test(t)||n.test(t))return Cf(t.substr(RegExp.lastMatch.length));let i=t.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+i)}getAnnotationURL(t){return t.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(t){return typeof t!="object"?!1:typeof t.mappings=="string"||typeof t._mappings=="string"||Array.isArray(t.sections)}loadAnnotation(t){let r=t.match(/\/\*\s*# sourceMappingURL=/gm);if(!r)return;let n=t.lastIndexOf(r.pop()),s=t.indexOf("*/",n);n>-1&&s>-1&&(this.annotation=this.getAnnotationURL(t.substring(n,s)))}loadFile(t){if(this.root=ar(t),Af(t))return this.mapFile=t,Pf(t,"utf-8").toString().trim()}loadMap(t,r){if(r===!1)return!1;if(r){if(typeof r=="string")return r;if(typeof r=="function"){let n=r(t);if(n){let s=this.loadFile(n);if(!s)throw new Error("Unable to load previous source map: "+n.toString());return s}}else{if(r instanceof os)return as.fromSourceMap(r).toString();if(r instanceof as)return r.toString();if(this.isMap(r))return JSON.stringify(r);throw new Error("Unsupported previous source map format: "+r.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let n=this.annotation;return t&&(n=bf(ar(t),n)),this.loadFile(n)}}}startWith(t,r){return t?t.substr(0,r.length)===r:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var di=Sr;Sr.default=Sr;let{SourceMapConsumer:Mf,SourceMapGenerator:vf}=pe,{fileURLToPath:ls,pathToFileURL:Tt}=pe,{isAbsolute:Dr,resolve:Ar}=pe,{nanoid:Lf}=Df,lr=pe,cs=Xr,Nf=di,cr=Symbol("fromOffsetCache"),xf=!!(Mf&&vf),us=!!(Ar&&Dr),xt=class{constructor(t,r={}){if(t===null||typeof t>"u"||typeof t=="object"&&!t.toString)throw new Error(`PostCSS received ${t} instead of CSS string`);if(this.css=t.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,r.from&&(!us||/^\w+:\/\//.test(r.from)||Dr(r.from)?this.file=r.from:this.file=Ar(r.from)),us&&xf){let n=new Nf(this.css,r);if(n.text){this.map=n;let s=n.consumer().file;!this.file&&s&&(this.file=this.mapResolve(s))}}this.file||(this.id="<input css "+Lf(6)+">"),this.map&&(this.map.file=this.from)}error(t,r,n,s={}){let o,i,l;if(r&&typeof r=="object"){let c=r,u=n;if(typeof c.offset=="number"){let f=this.fromOffset(c.offset);r=f.line,n=f.col}else r=c.line,n=c.column;if(typeof u.offset=="number"){let f=this.fromOffset(u.offset);i=f.line,l=f.col}else i=u.line,l=u.column}else if(!n){let c=this.fromOffset(r);r=c.line,n=c.col}let a=this.origin(r,n,i,l);return a?o=new cs(t,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,s.plugin):o=new cs(t,i===void 0?r:{column:n,line:r},i===void 0?n:{column:l,line:i},this.css,this.file,s.plugin),o.input={column:n,endColumn:l,endLine:i,line:r,source:this.css},this.file&&(Tt&&(o.input.url=Tt(this.file).toString()),o.input.file=this.file),o}fromOffset(t){let r,n;if(this[cr])n=this[cr];else{let o=this.css.split(`
`);n=new Array(o.length);let i=0;for(let l=0,a=o.length;l<a;l++)n[l]=i,i+=o[l].length+1;this[cr]=n}r=n[n.length-1];let s=0;if(t>=r)s=n.length-1;else{let o=n.length-2,i;for(;s<o;)if(i=s+(o-s>>1),t<n[i])o=i-1;else if(t>=n[i+1])s=i+1;else{s=i;break}}return{col:t-n[s]+1,line:s+1}}mapResolve(t){return/^\w+:\/\//.test(t)?t:Ar(this.map.consumer().sourceRoot||this.map.root||".",t)}origin(t,r,n,s){if(!this.map)return!1;let o=this.map.consumer(),i=o.originalPositionFor({column:r,line:t});if(!i.source)return!1;let l;typeof n=="number"&&(l=o.originalPositionFor({column:s,line:n}));let a;Dr(i.source)?a=Tt(i.source):a=new URL(i.source,this.map.consumer().sourceRoot||Tt(this.map.mapFile));let c={column:i.column,endColumn:l&&l.column,endLine:l&&l.line,line:i.line,url:a.toString()};if(a.protocol==="file:")if(ls)c.file=ls(a);else throw new Error("file: protocol is not available in this PostCSS build");let u=o.sourceContentFor(i.source);return u&&(c.source=u),c}toJSON(){let t={};for(let r of["hasBOM","css","file","id"])this[r]!=null&&(t[r]=this[r]);return this.map&&(t.map={...this.map},t.map.consumerCache&&(t.map.consumerCache=void 0)),t}get from(){return this.file||this.id}};var jt=xt;xt.default=xt;lr&&lr.registerInput&&lr.registerInput(xt);let{SourceMapConsumer:pi,SourceMapGenerator:bt}=pe,{dirname:Ct,relative:hi,resolve:mi,sep:Ei}=pe,{pathToFileURL:fs}=pe,Gf=jt,Ff=!!(pi&&bt),Uf=!!(Ct&&mi&&hi&&Ei),Bf=class{constructor(t,r,n,s){this.stringify=t,this.mapOpts=n.map||{},this.root=r,this.opts=n,this.css=s,this.originalCSS=s,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let t;this.isInline()?t="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?t=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?t=this.mapOpts.annotation(this.opts.to,this.root):t=this.outputFile()+".map";let r=`
`;this.css.includes(`\r
`)&&(r=`\r
`),this.css+=r+"/*# sourceMappingURL="+t+" */"}applyPrevMaps(){for(let t of this.previous()){let r=this.toUrl(this.path(t.file)),n=t.root||Ct(t.file),s;this.mapOpts.sourcesContent===!1?(s=new pi(t.text),s.sourcesContent&&(s.sourcesContent=null)):s=t.consumer(),this.map.applySourceMap(s,r,this.toUrl(this.path(n)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let t;for(let r=this.root.nodes.length-1;r>=0;r--)t=this.root.nodes[r],t.type==="comment"&&t.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(r)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Uf&&Ff&&this.isMap())return this.generateMap();{let t="";return this.stringify(this.root,r=>{t+=r}),[t]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let t=this.previous()[0].consumer();t.file=this.outputFile(),this.map=bt.fromSourceMap(t,{ignoreInvalidMapping:!0})}else this.map=new bt({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new bt({file:this.outputFile(),ignoreInvalidMapping:!0});let t=1,r=1,n="<no source>",s={generated:{column:0,line:0},original:{column:0,line:0},source:""},o,i;this.stringify(this.root,(l,a,c)=>{if(this.css+=l,a&&c!=="end"&&(s.generated.line=t,s.generated.column=r-1,a.source&&a.source.start?(s.source=this.sourcePath(a),s.original.line=a.source.start.line,s.original.column=a.source.start.column-1,this.map.addMapping(s)):(s.source=n,s.original.line=1,s.original.column=0,this.map.addMapping(s))),o=l.match(/\n/g),o?(t+=o.length,i=l.lastIndexOf(`
`),r=l.length-i):r+=l.length,a&&c!=="start"){let u=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==u.last||u.raws.semicolon)&&(a.source&&a.source.end?(s.source=this.sourcePath(a),s.original.line=a.source.end.line,s.original.column=a.source.end.column-1,s.generated.line=t,s.generated.column=r-2,this.map.addMapping(s)):(s.source=n,s.original.line=1,s.original.column=0,s.generated.line=t,s.generated.column=r-1,this.map.addMapping(s)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(t=>t.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let t=this.mapOpts.annotation;return typeof t<"u"&&t!==!0?!1:this.previous().length?this.previous().some(r=>r.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(t=>t.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(t){if(this.mapOpts.absolute||t.charCodeAt(0)===60||/^\w+:\/\//.test(t))return t;let r=this.memoizedPaths.get(t);if(r)return r;let n=this.opts.to?Ct(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(n=Ct(mi(n,this.mapOpts.annotation)));let s=hi(n,t);return this.memoizedPaths.set(t,s),s}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(t=>{if(t.source&&t.source.input.map){let r=t.source.input.map;this.previousMaps.includes(r)||this.previousMaps.push(r)}});else{let t=new Gf(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}setSourcesContent(){let t={};if(this.root)this.root.walk(r=>{if(r.source){let n=r.source.input.from;if(n&&!t[n]){t[n]=!0;let s=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(s,r.source.input.css)}}});else if(this.css){let r=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(r,this.css)}}sourcePath(t){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(t.source.input.from):this.toUrl(this.path(t.source.input.from))}toBase64(t){return Buffer?Buffer.from(t).toString("base64"):window.btoa(unescape(encodeURIComponent(t)))}toFileUrl(t){let r=this.memoizedFileURLs.get(t);if(r)return r;if(fs){let n=fs(t).toString();return this.memoizedFileURLs.set(t,n),n}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(t){let r=this.memoizedURLs.get(t);if(r)return r;Ei==="\\"&&(t=t.replace(/\\/g,"/"));let n=encodeURI(t).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(t,n),n}};var gi=Bf;let Vf=zt,Pr=class extends Vf{constructor(t){super(t),this.type="comment"}};var Qt=Pr;Pr.default=Pr;let{isClean:Ii,my:_i}=st,Ti=Xt,Ri=Qt,$f=zt,yi,jr,Qr,wi;function Oi(e){return e.map(t=>(t.nodes&&(t.nodes=Oi(t.nodes)),delete t.source,t))}function Si(e){if(e[Ii]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)Si(t)}let Te=class Di extends $f{append(...t){for(let r of t){let n=this.normalize(r,this.last);for(let s of n)this.proxyOf.nodes.push(s)}return this.markDirty(),this}cleanRaws(t){if(super.cleanRaws(t),this.nodes)for(let r of this.nodes)r.cleanRaws(t)}each(t){if(!this.proxyOf.nodes)return;let r=this.getIterator(),n,s;for(;this.indexes[r]<this.proxyOf.nodes.length&&(n=this.indexes[r],s=t(this.proxyOf.nodes[n],n),s!==!1);)this.indexes[r]+=1;return delete this.indexes[r],s}every(t){return this.nodes.every(t)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let t=this.lastEach;return this.indexes[t]=0,t}getProxyProcessor(){return{get(t,r){return r==="proxyOf"?t:t[r]?r==="each"||typeof r=="string"&&r.startsWith("walk")?(...n)=>t[r](...n.map(s=>typeof s=="function"?(o,i)=>s(o.toProxy(),i):s)):r==="every"||r==="some"?n=>t[r]((s,...o)=>n(s.toProxy(),...o)):r==="root"?()=>t.root().toProxy():r==="nodes"?t.nodes.map(n=>n.toProxy()):r==="first"||r==="last"?t[r].toProxy():t[r]:t[r]},set(t,r,n){return t[r]===n||(t[r]=n,(r==="name"||r==="params"||r==="selector")&&t.markDirty()),!0}}}index(t){return typeof t=="number"?t:(t.proxyOf&&(t=t.proxyOf),this.proxyOf.nodes.indexOf(t))}insertAfter(t,r){let n=this.index(t),s=this.normalize(r,this.proxyOf.nodes[n]).reverse();n=this.index(t);for(let i of s)this.proxyOf.nodes.splice(n+1,0,i);let o;for(let i in this.indexes)o=this.indexes[i],n<o&&(this.indexes[i]=o+s.length);return this.markDirty(),this}insertBefore(t,r){let n=this.index(t),s=n===0?"prepend":!1,o=this.normalize(r,this.proxyOf.nodes[n],s).reverse();n=this.index(t);for(let l of o)this.proxyOf.nodes.splice(n,0,l);let i;for(let l in this.indexes)i=this.indexes[l],n<=i&&(this.indexes[l]=i+o.length);return this.markDirty(),this}normalize(t,r){if(typeof t=="string")t=Oi(yi(t).nodes);else if(typeof t>"u")t=[];else if(Array.isArray(t)){t=t.slice(0);for(let s of t)s.parent&&s.parent.removeChild(s,"ignore")}else if(t.type==="root"&&this.type!=="document"){t=t.nodes.slice(0);for(let s of t)s.parent&&s.parent.removeChild(s,"ignore")}else if(t.type)t=[t];else if(t.prop){if(typeof t.value>"u")throw new Error("Value field is missed in node creation");typeof t.value!="string"&&(t.value=String(t.value)),t=[new Ti(t)]}else if(t.selector)t=[new jr(t)];else if(t.name)t=[new Qr(t)];else if(t.text)t=[new Ri(t)];else throw new Error("Unknown node type in node creation");return t.map(s=>(s[_i]||Di.rebuild(s),s=s.proxyOf,s.parent&&s.parent.removeChild(s),s[Ii]&&Si(s),typeof s.raws.before>"u"&&r&&typeof r.raws.before<"u"&&(s.raws.before=r.raws.before.replace(/\S/g,"")),s.parent=this.proxyOf,s))}prepend(...t){t=t.reverse();for(let r of t){let n=this.normalize(r,this.first,"prepend").reverse();for(let s of n)this.proxyOf.nodes.unshift(s);for(let s in this.indexes)this.indexes[s]=this.indexes[s]+n.length}return this.markDirty(),this}push(t){return t.parent=this,this.proxyOf.nodes.push(t),this}removeAll(){for(let t of this.proxyOf.nodes)t.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(t){t=this.index(t),this.proxyOf.nodes[t].parent=void 0,this.proxyOf.nodes.splice(t,1);let r;for(let n in this.indexes)r=this.indexes[n],r>=t&&(this.indexes[n]=r-1);return this.markDirty(),this}replaceValues(t,r,n){return n||(n=r,r={}),this.walkDecls(s=>{r.props&&!r.props.includes(s.prop)||r.fast&&!s.value.includes(r.fast)||(s.value=s.value.replace(t,n))}),this.markDirty(),this}some(t){return this.nodes.some(t)}walk(t){return this.each((r,n)=>{let s;try{s=t(r,n)}catch(o){throw r.addToError(o)}return s!==!1&&r.walk&&(s=r.walk(t)),s})}walkAtRules(t,r){return r?t instanceof RegExp?this.walk((n,s)=>{if(n.type==="atrule"&&t.test(n.name))return r(n,s)}):this.walk((n,s)=>{if(n.type==="atrule"&&n.name===t)return r(n,s)}):(r=t,this.walk((n,s)=>{if(n.type==="atrule")return r(n,s)}))}walkComments(t){return this.walk((r,n)=>{if(r.type==="comment")return t(r,n)})}walkDecls(t,r){return r?t instanceof RegExp?this.walk((n,s)=>{if(n.type==="decl"&&t.test(n.prop))return r(n,s)}):this.walk((n,s)=>{if(n.type==="decl"&&n.prop===t)return r(n,s)}):(r=t,this.walk((n,s)=>{if(n.type==="decl")return r(n,s)}))}walkRules(t,r){return r?t instanceof RegExp?this.walk((n,s)=>{if(n.type==="rule"&&t.test(n.selector))return r(n,s)}):this.walk((n,s)=>{if(n.type==="rule"&&n.selector===t)return r(n,s)}):(r=t,this.walk((n,s)=>{if(n.type==="rule")return r(n,s)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Te.registerParse=e=>{yi=e};Te.registerRule=e=>{jr=e};Te.registerAtRule=e=>{Qr=e};Te.registerRoot=e=>{wi=e};var ve=Te;Te.default=Te;Te.rebuild=e=>{e.type==="atrule"?Object.setPrototypeOf(e,Qr.prototype):e.type==="rule"?Object.setPrototypeOf(e,jr.prototype):e.type==="decl"?Object.setPrototypeOf(e,Ti.prototype):e.type==="comment"?Object.setPrototypeOf(e,Ri.prototype):e.type==="root"&&Object.setPrototypeOf(e,wi.prototype),e[_i]=!0,e.nodes&&e.nodes.forEach(t=>{Te.rebuild(t)})};let kf=ve,Ai,Pi,Je=class extends kf{constructor(t){super({type:"document",...t}),this.nodes||(this.nodes=[])}toResult(t={}){return new Ai(new Pi,this,t).stringify()}};Je.registerLazyResult=e=>{Ai=e};Je.registerProcessor=e=>{Pi=e};var Kr=Je;Je.default=Je;let br=class{constructor(t,r={}){if(this.type="warning",this.text=t,r.node&&r.node.source){let n=r.node.rangeBy(r);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in r)this[n]=r[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var bi=br;br.default=br;let Hf=bi,Cr=class{constructor(t,r,n){this.processor=t,this.messages=[],this.root=r,this.opts=n,this.css=void 0,this.map=void 0}toString(){return this.css}warn(t,r={}){r.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(r.plugin=this.lastPlugin.postcssPlugin);let n=new Hf(t,r);return this.messages.push(n),n}warnings(){return this.messages.filter(t=>t.type==="warning")}get content(){return this.css}};var Zr=Cr;Cr.default=Cr;const ur=39,ds=34,Rt=92,ps=47,yt=10,ze=32,wt=12,Ot=9,St=13,Wf=91,qf=93,Yf=40,zf=41,Xf=123,jf=125,Qf=59,Kf=42,Zf=58,Jf=64,Dt=/[\t\n\f\r "#'()/;[\\\]{}]/g,At=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,ed=/.[\r\n"'(/\\]/,hs=/[\da-f]/i;var td=function(t,r={}){let n=t.css.valueOf(),s=r.ignoreErrors,o,i,l,a,c,u,f,m,h,d,I=n.length,E=0,_=[],p=[];function g(){return E}function R(O){throw t.error("Unclosed "+O,E)}function w(){return p.length===0&&E>=I}function A(O){if(p.length)return p.pop();if(E>=I)return;let P=O?O.ignoreUnclosed:!1;switch(o=n.charCodeAt(E),o){case yt:case ze:case Ot:case St:case wt:{i=E;do i+=1,o=n.charCodeAt(i);while(o===ze||o===yt||o===Ot||o===St||o===wt);d=["space",n.slice(E,i)],E=i-1;break}case Wf:case qf:case Xf:case jf:case Zf:case Qf:case zf:{let N=String.fromCharCode(o);d=[N,N,E];break}case Yf:{if(m=_.length?_.pop()[1]:"",h=n.charCodeAt(E+1),m==="url"&&h!==ur&&h!==ds&&h!==ze&&h!==yt&&h!==Ot&&h!==wt&&h!==St){i=E;do{if(u=!1,i=n.indexOf(")",i+1),i===-1)if(s||P){i=E;break}else R("bracket");for(f=i;n.charCodeAt(f-1)===Rt;)f-=1,u=!u}while(u);d=["brackets",n.slice(E,i+1),E,i],E=i}else i=n.indexOf(")",E+1),a=n.slice(E,i+1),i===-1||ed.test(a)?d=["(","(",E]:(d=["brackets",a,E,i],E=i);break}case ur:case ds:{l=o===ur?"'":'"',i=E;do{if(u=!1,i=n.indexOf(l,i+1),i===-1)if(s||P){i=E+1;break}else R("string");for(f=i;n.charCodeAt(f-1)===Rt;)f-=1,u=!u}while(u);d=["string",n.slice(E,i+1),E,i],E=i;break}case Jf:{Dt.lastIndex=E+1,Dt.test(n),Dt.lastIndex===0?i=n.length-1:i=Dt.lastIndex-2,d=["at-word",n.slice(E,i+1),E,i],E=i;break}case Rt:{for(i=E,c=!0;n.charCodeAt(i+1)===Rt;)i+=1,c=!c;if(o=n.charCodeAt(i+1),c&&o!==ps&&o!==ze&&o!==yt&&o!==Ot&&o!==St&&o!==wt&&(i+=1,hs.test(n.charAt(i)))){for(;hs.test(n.charAt(i+1));)i+=1;n.charCodeAt(i+1)===ze&&(i+=1)}d=["word",n.slice(E,i+1),E,i],E=i;break}default:{o===ps&&n.charCodeAt(E+1)===Kf?(i=n.indexOf("*/",E+2)+1,i===0&&(s||P?i=n.length:R("comment")),d=["comment",n.slice(E,i+1),E,i],E=i):(At.lastIndex=E+1,At.test(n),At.lastIndex===0?i=n.length-1:i=At.lastIndex-2,d=["word",n.slice(E,i+1),E,i],_.push(d),E=i);break}}return E++,d}function M(O){p.push(O)}return{back:M,endOfFile:w,nextToken:A,position:g}};let Ci=ve,Gt=class extends Ci{constructor(t){super(t),this.type="atrule"}append(...t){return this.proxyOf.nodes||(this.nodes=[]),super.append(...t)}prepend(...t){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...t)}};var Jr=Gt;Gt.default=Gt;Ci.registerAtRule(Gt);let Mi=ve,vi,Li,Ve=class extends Mi{constructor(t){super(t),this.type="root",this.nodes||(this.nodes=[])}normalize(t,r,n){let s=super.normalize(t);if(r){if(n==="prepend")this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(let o of s)o.raws.before=r.raws.before}return s}removeChild(t,r){let n=this.index(t);return!r&&n===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(t)}toResult(t={}){return new vi(new Li,this,t).stringify()}};Ve.registerLazyResult=e=>{vi=e};Ve.registerProcessor=e=>{Li=e};var it=Ve;Ve.default=Ve;Mi.registerRoot(Ve);let et={comma(e){return et.split(e,[","],!0)},space(e){let t=[" ",`
`,"	"];return et.split(e,t)},split(e,t,r){let n=[],s="",o=!1,i=0,l=!1,a="",c=!1;for(let u of e)c?c=!1:u==="\\"?c=!0:l?u===a&&(l=!1):u==='"'||u==="'"?(l=!0,a=u):u==="("?i+=1:u===")"?i>0&&(i-=1):i===0&&t.includes(u)&&(o=!0),o?(s!==""&&n.push(s.trim()),s="",o=!1):s+=u;return(r||s!=="")&&n.push(s.trim()),n}};var Ni=et;et.default=et;let xi=ve,rd=Ni,Ft=class extends xi{constructor(t){super(t),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return rd.comma(this.selector)}set selectors(t){let r=this.selector?this.selector.match(/,\s*/):null,n=r?r[0]:","+this.raw("between","beforeOpen");this.selector=t.join(n)}};var en=Ft;Ft.default=Ft;xi.registerRule(Ft);let nd=Xt,sd=td,id=Qt,od=Jr,ad=it,ms=en;const Es={empty:!0,space:!0};function ld(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}let cd=class{constructor(t){this.input=t,this.root=new ad,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:t,start:{column:1,line:1,offset:0}}}atrule(t){let r=new od;r.name=t[1].slice(1),r.name===""&&this.unnamedAtrule(r,t),this.init(r,t[2]);let n,s,o,i=!1,l=!1,a=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=this.tokenizer.nextToken(),n=t[0],n==="("||n==="["?c.push(n==="("?")":"]"):n==="{"&&c.length>0?c.push("}"):n===c[c.length-1]&&c.pop(),c.length===0)if(n===";"){r.source.end=this.getPosition(t[2]),r.source.end.offset++,this.semicolon=!0;break}else if(n==="{"){l=!0;break}else if(n==="}"){if(a.length>0){for(o=a.length-1,s=a[o];s&&s[0]==="space";)s=a[--o];s&&(r.source.end=this.getPosition(s[3]||s[2]),r.source.end.offset++)}this.end(t);break}else a.push(t);else a.push(t);if(this.tokenizer.endOfFile()){i=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(r.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(r,"params",a),i&&(t=a[a.length-1],r.source.end=this.getPosition(t[3]||t[2]),r.source.end.offset++,this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),l&&(r.nodes=[],this.current=r)}checkMissedSemicolon(t){let r=this.colon(t);if(r===!1)return;let n=0,s;for(let o=r-1;o>=0&&(s=t[o],!(s[0]!=="space"&&(n+=1,n===2)));o--);throw this.input.error("Missed semicolon",s[0]==="word"?s[3]+1:s[2])}colon(t){let r=0,n,s,o;for(let[i,l]of t.entries()){if(n=l,s=n[0],s==="("&&(r+=1),s===")"&&(r-=1),r===0&&s===":")if(!o)this.doubleColon(n);else{if(o[0]==="word"&&o[1]==="progid")continue;return i}o=n}return!1}comment(t){let r=new id;this.init(r,t[2]),r.source.end=this.getPosition(t[3]||t[2]),r.source.end.offset++;let n=t[1].slice(2,-2);if(/^\s*$/.test(n))r.text="",r.raws.left=n,r.raws.right="";else{let s=n.match(/^(\s*)([^]*\S)(\s*)$/);r.text=s[2],r.raws.left=s[1],r.raws.right=s[3]}}createTokenizer(){this.tokenizer=sd(this.input)}decl(t,r){let n=new nd;this.init(n,t[0][2]);let s=t[t.length-1];for(s[0]===";"&&(this.semicolon=!0,t.pop()),n.source.end=this.getPosition(s[3]||s[2]||ld(t)),n.source.end.offset++;t[0][0]!=="word";)t.length===1&&this.unknownWord(t),n.raws.before+=t.shift()[1];for(n.source.start=this.getPosition(t[0][2]),n.prop="";t.length;){let c=t[0][0];if(c===":"||c==="space"||c==="comment")break;n.prop+=t.shift()[1]}n.raws.between="";let o;for(;t.length;)if(o=t.shift(),o[0]===":"){n.raws.between+=o[1];break}else o[0]==="word"&&/\w/.test(o[1])&&this.unknownWord([o]),n.raws.between+=o[1];(n.prop[0]==="_"||n.prop[0]==="*")&&(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let i=[],l;for(;t.length&&(l=t[0][0],!(l!=="space"&&l!=="comment"));)i.push(t.shift());this.precheckMissedSemicolon(t);for(let c=t.length-1;c>=0;c--){if(o=t[c],o[1].toLowerCase()==="!important"){n.important=!0;let u=this.stringFrom(t,c);u=this.spacesFromEnd(t)+u,u!==" !important"&&(n.raws.important=u);break}else if(o[1].toLowerCase()==="important"){let u=t.slice(0),f="";for(let m=c;m>0;m--){let h=u[m][0];if(f.trim().indexOf("!")===0&&h!=="space")break;f=u.pop()[1]+f}f.trim().indexOf("!")===0&&(n.important=!0,n.raws.important=f,t=u)}if(o[0]!=="space"&&o[0]!=="comment")break}t.some(c=>c[0]!=="space"&&c[0]!=="comment")&&(n.raws.between+=i.map(c=>c[1]).join(""),i=[]),this.raw(n,"value",i.concat(t),r),n.value.includes(":")&&!r&&this.checkMissedSemicolon(t)}doubleColon(t){throw this.input.error("Double colon",{offset:t[2]},{offset:t[2]+t[1].length})}emptyRule(t){let r=new ms;this.init(r,t[2]),r.selector="",r.raws.between="",this.current=r}end(t){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(t[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(t)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(t){if(this.spaces+=t[1],this.current.nodes){let r=this.current.nodes[this.current.nodes.length-1];r&&r.type==="rule"&&!r.raws.ownSemicolon&&(r.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(t){let r=this.input.fromOffset(t);return{column:r.col,line:r.line,offset:t}}init(t,r){this.current.push(t),t.source={input:this.input,start:this.getPosition(r)},t.raws.before=this.spaces,this.spaces="",t.type!=="comment"&&(this.semicolon=!1)}other(t){let r=!1,n=null,s=!1,o=null,i=[],l=t[1].startsWith("--"),a=[],c=t;for(;c;){if(n=c[0],a.push(c),n==="("||n==="[")o||(o=c),i.push(n==="("?")":"]");else if(l&&s&&n==="{")o||(o=c),i.push("}");else if(i.length===0)if(n===";")if(s){this.decl(a,l);return}else break;else if(n==="{"){this.rule(a);return}else if(n==="}"){this.tokenizer.back(a.pop()),r=!0;break}else n===":"&&(s=!0);else n===i[i.length-1]&&(i.pop(),i.length===0&&(o=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(r=!0),i.length>0&&this.unclosedBracket(o),r&&s){if(!l)for(;a.length&&(c=a[a.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let t;for(;!this.tokenizer.endOfFile();)switch(t=this.tokenizer.nextToken(),t[0]){case"space":this.spaces+=t[1];break;case";":this.freeSemicolon(t);break;case"}":this.end(t);break;case"comment":this.comment(t);break;case"at-word":this.atrule(t);break;case"{":this.emptyRule(t);break;default:this.other(t);break}this.endFile()}precheckMissedSemicolon(){}raw(t,r,n,s){let o,i,l=n.length,a="",c=!0,u,f;for(let m=0;m<l;m+=1)o=n[m],i=o[0],i==="space"&&m===l-1&&!s?c=!1:i==="comment"?(f=n[m-1]?n[m-1][0]:"empty",u=n[m+1]?n[m+1][0]:"empty",!Es[f]&&!Es[u]?a.slice(-1)===","?c=!1:a+=o[1]:c=!1):a+=o[1];if(!c){let m=n.reduce((h,d)=>h+d[1],"");t.raws[r]={raw:m,value:a}}t[r]=a}rule(t){t.pop();let r=new ms;this.init(r,t[0][2]),r.raws.between=this.spacesAndCommentsFromEnd(t),this.raw(r,"selector",t),this.current=r}spacesAndCommentsFromEnd(t){let r,n="";for(;t.length&&(r=t[t.length-1][0],!(r!=="space"&&r!=="comment"));)n=t.pop()[1]+n;return n}spacesAndCommentsFromStart(t){let r,n="";for(;t.length&&(r=t[0][0],!(r!=="space"&&r!=="comment"));)n+=t.shift()[1];return n}spacesFromEnd(t){let r,n="";for(;t.length&&(r=t[t.length-1][0],r==="space");)n=t.pop()[1]+n;return n}stringFrom(t,r){let n="";for(let s=r;s<t.length;s++)n+=t[s][1];return t.splice(r,t.length-r),n}unclosedBlock(){let t=this.current.source.start;throw this.input.error("Unclosed block",t.line,t.column)}unclosedBracket(t){throw this.input.error("Unclosed bracket",{offset:t[2]},{offset:t[2]+1})}unexpectedClose(t){throw this.input.error("Unexpected }",{offset:t[2]},{offset:t[2]+1})}unknownWord(t){throw this.input.error("Unknown word",{offset:t[0][2]},{offset:t[0][2]+t[0][1].length})}unnamedAtrule(t,r){throw this.input.error("At-rule without name",{offset:r[2]},{offset:r[2]+r[1].length})}};var ud=cd;let fd=ve,dd=ud,pd=jt;function Ut(e,t){let r=new pd(e,t),n=new dd(r);try{n.parse()}catch(s){throw s}return n.root}var tn=Ut;Ut.default=Ut;fd.registerParse(Ut);let{isClean:he,my:hd}=st,md=gi,Ed=Yt,gd=ve,Id=Kr,gs=Zr,_d=tn,Td=it;const Rd={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},yd={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},wd={Once:!0,postcssPlugin:!0,prepare:!0},$e=0;function Xe(e){return typeof e=="object"&&typeof e.then=="function"}function Gi(e){let t=!1,r=Rd[e.type];return e.type==="decl"?t=e.prop.toLowerCase():e.type==="atrule"&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,$e,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,$e,r+"Exit"]:[r,r+"Exit"]}function Is(e){let t;return e.type==="document"?t=["Document",$e,"DocumentExit"]:e.type==="root"?t=["Root",$e,"RootExit"]:t=Gi(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function Mr(e){return e[he]=!1,e.nodes&&e.nodes.forEach(t=>Mr(t)),e}let vr={},ke=class Fi{constructor(t,r,n){this.stringified=!1,this.processed=!1;let s;if(typeof r=="object"&&r!==null&&(r.type==="root"||r.type==="document"))s=Mr(r);else if(r instanceof Fi||r instanceof gs)s=Mr(r.root),r.map&&(typeof n.map>"u"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=r.map);else{let o=_d;n.syntax&&(o=n.syntax.parse),n.parser&&(o=n.parser),o.parse&&(o=o.parse);try{s=o(r,n)}catch(i){this.processed=!0,this.error=i}s&&!s[hd]&&gd.rebuild(s)}this.result=new gs(t,s,n),this.helpers={...vr,postcss:vr,result:this.result},this.plugins=this.processor.plugins.map(o=>typeof o=="object"&&o.prepare?{...o,...o.prepare(this.result)}:o)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(t,r){let n=this.result.lastPlugin;try{r&&r.addToError(t),this.error=t,t.name==="CssSyntaxError"&&!t.plugin?(t.plugin=n.postcssPlugin,t.setMessage()):n.postcssVersion}catch(s){console&&console.error&&console.error(s)}return t}prepareVisitors(){this.listeners={};let t=(r,n,s)=>{this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push([r,s])};for(let r of this.plugins)if(typeof r=="object")for(let n in r){if(!yd[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${r.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!wd[n])if(typeof r[n]=="object")for(let s in r[n])s==="*"?t(r,n,r[n][s]):t(r,n+"-"+s.toLowerCase(),r[n][s]);else typeof r[n]=="function"&&t(r,n,r[n])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let t=0;t<this.plugins.length;t++){let r=this.plugins[t],n=this.runOnRoot(r);if(Xe(n))try{await n}catch(s){throw this.handleError(s)}}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[he];){t[he]=!0;let r=[Is(t)];for(;r.length>0;){let n=this.visitTick(r);if(Xe(n))try{await n}catch(s){let o=r[r.length-1].node;throw this.handleError(s,o)}}}if(this.listeners.OnceExit)for(let[r,n]of this.listeners.OnceExit){this.result.lastPlugin=r;try{if(t.type==="document"){let s=t.nodes.map(o=>n(o,this.helpers));await Promise.all(s)}else await n(t,this.helpers)}catch(s){throw this.handleError(s)}}}return this.processed=!0,this.stringify()}runOnRoot(t){this.result.lastPlugin=t;try{if(typeof t=="object"&&t.Once){if(this.result.root.type==="document"){let r=this.result.root.nodes.map(n=>t.Once(n,this.helpers));return Xe(r[0])?Promise.all(r):r}return t.Once(this.result.root,this.helpers)}else if(typeof t=="function")return t(this.result.root,this.result)}catch(r){throw this.handleError(r)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let t=this.result.opts,r=Ed;t.syntax&&(r=t.syntax.stringify),t.stringifier&&(r=t.stringifier),r.stringify&&(r=r.stringify);let s=new md(r,this.result.root,this.result.opts).generate();return this.result.css=s[0],this.result.map=s[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let t of this.plugins){let r=this.runOnRoot(t);if(Xe(r))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[he];)t[he]=!0,this.walkSync(t);if(this.listeners.OnceExit)if(t.type==="document")for(let r of t.nodes)this.visitSync(this.listeners.OnceExit,r);else this.visitSync(this.listeners.OnceExit,t)}return this.result}then(t,r){return this.async().then(t,r)}toString(){return this.css}visitSync(t,r){for(let[n,s]of t){this.result.lastPlugin=n;let o;try{o=s(r,this.helpers)}catch(i){throw this.handleError(i,r.proxyOf)}if(r.type!=="root"&&r.type!=="document"&&!r.parent)return!0;if(Xe(o))throw this.getAsyncError()}}visitTick(t){let r=t[t.length-1],{node:n,visitors:s}=r;if(n.type!=="root"&&n.type!=="document"&&!n.parent){t.pop();return}if(s.length>0&&r.visitorIndex<s.length){let[i,l]=s[r.visitorIndex];r.visitorIndex+=1,r.visitorIndex===s.length&&(r.visitors=[],r.visitorIndex=0),this.result.lastPlugin=i;try{return l(n.toProxy(),this.helpers)}catch(a){throw this.handleError(a,n)}}if(r.iterator!==0){let i=r.iterator,l;for(;l=n.nodes[n.indexes[i]];)if(n.indexes[i]+=1,!l[he]){l[he]=!0,t.push(Is(l));return}r.iterator=0,delete n.indexes[i]}let o=r.events;for(;r.eventIndex<o.length;){let i=o[r.eventIndex];if(r.eventIndex+=1,i===$e){n.nodes&&n.nodes.length&&(n[he]=!0,r.iterator=n.getIterator());return}else if(this.listeners[i]){r.visitors=this.listeners[i];return}}t.pop()}walkSync(t){t[he]=!0;let r=Gi(t);for(let n of r)if(n===$e)t.nodes&&t.each(s=>{s[he]||this.walkSync(s)});else{let s=this.listeners[n];if(s&&this.visitSync(s,t.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};ke.registerPostcss=e=>{vr=e};var Ui=ke;ke.default=ke;Td.registerLazyResult(ke);Id.registerLazyResult(ke);let Od=gi,Sd=Yt,Dd=tn;const Ad=Zr;let Lr=class{constructor(t,r,n){r=r.toString(),this.stringified=!1,this._processor=t,this._css=r,this._opts=n,this._map=void 0;let s,o=Sd;this.result=new Ad(this._processor,s,this._opts),this.result.css=r;let i=this;Object.defineProperty(this.result,"root",{get(){return i.root}});let l=new Od(o,s,this._opts,r);if(l.isMap()){let[a,c]=l.generate();a&&(this.result.css=a),c&&(this.result.map=c)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}sync(){if(this.error)throw this.error;return this.result}then(t,r){return this.async().then(t,r)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let t,r=Dd;try{t=r(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=t,t}get[Symbol.toStringTag](){return"NoWorkResult"}};var Pd=Lr;Lr.default=Lr;let bd=Pd,Cd=Ui,Md=Kr,vd=it,tt=class{constructor(t=[]){this.version="8.4.39",this.plugins=this.normalize(t)}normalize(t){let r=[];for(let n of t)if(n.postcss===!0?n=n():n.postcss&&(n=n.postcss),typeof n=="object"&&Array.isArray(n.plugins))r=r.concat(n.plugins);else if(typeof n=="object"&&n.postcssPlugin)r.push(n);else if(typeof n=="function")r.push(n);else if(!(typeof n=="object"&&(n.parse||n.stringify)))throw new Error(n+" is not a PostCSS plugin");return r}process(t,r={}){return!this.plugins.length&&!r.parser&&!r.stringifier&&!r.syntax?new bd(this,t,r):new Cd(this,t,r)}use(t){return this.plugins=this.plugins.concat(this.normalize([t])),this}};var Ld=tt;tt.default=tt;vd.registerProcessor(tt);Md.registerProcessor(tt);let Nd=Xt,xd=di,Gd=Qt,Fd=Jr,Ud=jt,Bd=it,Vd=en;function rt(e,t){if(Array.isArray(e))return e.map(s=>rt(s));let{inputs:r,...n}=e;if(r){t=[];for(let s of r){let o={...s,__proto__:Ud.prototype};o.map&&(o.map={...o.map,__proto__:xd.prototype}),t.push(o)}}if(n.nodes&&(n.nodes=e.nodes.map(s=>rt(s,t))),n.source){let{inputId:s,...o}=n.source;n.source=o,s!=null&&(n.source.input=t[s])}if(n.type==="root")return new Bd(n);if(n.type==="decl")return new Nd(n);if(n.type==="rule")return new Vd(n);if(n.type==="comment")return new Gd(n);if(n.type==="atrule")return new Fd(n);throw new Error("Unknown node type: "+e.type)}var $d=rt;rt.default=rt;var _s={};let kd=Xr,Bi=Xt,Hd=Ui,Wd=ve,rn=Ld,qd=Yt,Yd=$d,Vi=Kr,zd=bi,$i=Qt,ki=Jr,Xd=Zr,jd=jt,Qd=tn,Kd=Ni,Hi=en,Wi=it,Zd=zt;function V(...e){return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new rn(e)}V.plugin=function(t,r){let n=!1;function s(...i){console&&console.warn&&!n&&(n=!0,console.warn(t+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),_s.LANG&&_s.LANG.startsWith("cn")&&console.warn(t+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let l=r(...i);return l.postcssPlugin=t,l.postcssVersion=new rn().version,l}let o;return Object.defineProperty(s,"postcss",{get(){return o||(o=s()),o}}),s.process=function(i,l,a){return V([s(a)]).process(i,l)},s};V.stringify=qd;V.parse=Qd;V.fromJSON=Yd;V.list=Kd;V.comment=e=>new $i(e);V.atRule=e=>new ki(e);V.decl=e=>new Bi(e);V.rule=e=>new Hi(e);V.root=e=>new Wi(e);V.document=e=>new Vi(e);V.CssSyntaxError=kd;V.Declaration=Bi;V.Container=Wd;V.Processor=rn;V.Document=Vi;V.Comment=$i;V.Warning=zd;V.AtRule=ki;V.Result=Xd;V.Input=jd;V.Rule=Hi;V.Root=Wi;V.Node=Zd;Hd.registerPostcss(V);var Jd=V;V.default=V;const H=Qi(Jd);H.stringify;H.fromJSON;H.plugin;H.parse;H.list;H.document;H.comment;H.atRule;H.rule;H.decl;H.root;H.CssSyntaxError;H.Declaration;H.Container;H.Processor;H.Document;H.Comment;H.Warning;H.AtRule;H.Result;H.Input;H.Rule;H.Root;H.Node;export{qn as O,Wn as a,pf as b,sr as c,mu as d,pu as p,Xn as r,to as s};
